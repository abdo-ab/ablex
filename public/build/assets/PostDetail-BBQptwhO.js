import{r as require$$5,a as requireReact,c as compilerRuntimeExports,u as usePage,b as reactExports,d as useForm,j as jsxRuntimeExports,H as Head_default,e as router3}from"./app-chi-OES0.js";import{s}from"./index-ikzcNs2d.js";import{B as BookOpen}from"./book-open-1EdsRljf.js";import{c as createLucideIcon}from"./createLucideIcon-CLgz19Ky.js";import{X}from"./x-CjogAfoW.js";/* empty css            */var lib={exports:{}},core_min={};function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(o,P){module.exports=o.pdfjsLib=P()})(globalThis,()=>(()=>{var __webpack_modules__=[,((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.TextRenderingMode=o.RenderingIntentFlag=o.PromiseCapability=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.MAX_IMAGE_SIZE_TO_CACHE=o.LINE_FACTOR=o.LINE_DESCENT_FACTOR=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.BASELINE_FACTOR=o.AnnotationType=o.AnnotationReplyType=o.AnnotationPrefix=o.AnnotationMode=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationEditorType=o.AnnotationEditorPrefix=o.AnnotationEditorParamsType=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.assert=p,o.bytesToString=W,o.createValidAbsoluteUrl=E,o.getModificationDate=fe,o.getUuid=Ge,o.getVerbosityLevel=wt,o.info=ht,o.isArrayBuffer=ee,o.isArrayEqual=Zt,o.isNodeJS=void 0,o.normalizeUnicode=je,o.objectFromMap=at,o.objectSize=Et,o.setVerbosityLevel=bt,o.shadow=I,o.string32=st,o.stringToBytes=Y,o.stringToPDFString=Ot,o.stringToUTF8String=Ut,o.unreachable=S,o.utf8StringToString=Wt,o.warn=N;const P=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");o.isNodeJS=P;const h=[1,0,0,1,0,0];o.IDENTITY_MATRIX=h;const _=[.001,0,0,.001,0,0];o.FONT_IDENTITY_MATRIX=_;const i=1e7;o.MAX_IMAGE_SIZE_TO_CACHE=i;const M=1.35;o.LINE_FACTOR=M;const V=.35;o.LINE_DESCENT_FACTOR=V;const z=V/M;o.BASELINE_FACTOR=z;const a={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};o.RenderingIntentFlag=a;const t={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};o.AnnotationMode=t;const r="pdfjs_internal_editor_";o.AnnotationEditorPrefix=r;const f={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};o.AnnotationEditorType=f;const d={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};o.AnnotationEditorParamsType=d;const e={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};o.PermissionFlag=e;const m={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};o.TextRenderingMode=m;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};o.ImageKind=b;const u={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};o.AnnotationType=u;const x={GROUP:"Group",REPLY:"R"};o.AnnotationReplyType=x;const L={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};o.AnnotationFlag=L;const R={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};o.AnnotationFieldFlag=R;const v={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};o.AnnotationBorderStyleType=v;const C={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};o.AnnotationActionEventType=C;const G={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};o.DocumentActionEventType=G;const K={O:"PageOpen",C:"PageClose"};o.PageActionEventType=K;const U={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=U;const nt={NONE:0,BINARY:1};o.CMapCompressionType=nt;const rt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};o.OPS=rt;const At={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};o.PasswordResponses=At;let pt=U.WARNINGS;function bt(yt){Number.isInteger(yt)&&(pt=yt)}function wt(){return pt}function ht(yt){pt>=U.INFOS&&console.log(`Info: ${yt}`)}function N(yt){pt>=U.WARNINGS&&console.log(`Warning: ${yt}`)}function S(yt){throw new Error(yt)}function p(yt,it){yt||S(it)}function g(yt){switch(yt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function E(yt,it=null,et=null){if(!yt)return null;try{if(et&&typeof yt=="string"&&(et.addDefaultProtocol&&yt.startsWith("www.")&&yt.match(/\./g)?.length>=2&&(yt=`http://${yt}`),et.tryConvertEncoding))try{yt=Ut(yt)}catch{}const xt=it?new URL(yt,it):new URL(yt);if(g(xt))return xt}catch{}return null}function I(yt,it,et,xt=!1){return Object.defineProperty(yt,it,{value:et,enumerable:!xt,configurable:!0,writable:!1}),et}const D=(function(){function it(et,xt){this.constructor===it&&S("Cannot initialize BaseException."),this.message=et,this.name=xt}return it.prototype=new Error,it.constructor=it,it})();o.BaseException=D;class B extends D{constructor(it,et){super(it,"PasswordException"),this.code=et}}o.PasswordException=B;class k extends D{constructor(it,et){super(it,"UnknownErrorException"),this.details=et}}o.UnknownErrorException=k;class l extends D{constructor(it){super(it,"InvalidPDFException")}}o.InvalidPDFException=l;class y extends D{constructor(it){super(it,"MissingPDFException")}}o.MissingPDFException=y;class w extends D{constructor(it,et){super(it,"UnexpectedResponseException"),this.status=et}}o.UnexpectedResponseException=w;class T extends D{constructor(it){super(it,"FormatError")}}o.FormatError=T;class F extends D{constructor(it){super(it,"AbortException")}}o.AbortException=F;function W(yt){(typeof yt!="object"||yt?.length===void 0)&&S("Invalid argument for bytesToString");const it=yt.length,et=8192;if(it<et)return String.fromCharCode.apply(null,yt);const xt=[];for(let ue=0;ue<it;ue+=et){const Gt=Math.min(ue+et,it),ie=yt.subarray(ue,Gt);xt.push(String.fromCharCode.apply(null,ie))}return xt.join("")}function Y(yt){typeof yt!="string"&&S("Invalid argument for stringToBytes");const it=yt.length,et=new Uint8Array(it);for(let xt=0;xt<it;++xt)et[xt]=yt.charCodeAt(xt)&255;return et}function st(yt){return String.fromCharCode(yt>>24&255,yt>>16&255,yt>>8&255,yt&255)}function Et(yt){return Object.keys(yt).length}function at(yt){const it=Object.create(null);for(const[et,xt]of yt)it[et]=xt;return it}function ot(){const yt=new Uint8Array(4);return yt[0]=1,new Uint32Array(yt.buffer,0,1)[0]===1}function lt(){try{return new Function(""),!0}catch{return!1}}class ct{static get isLittleEndian(){return I(this,"isLittleEndian",ot())}static get isEvalSupported(){return I(this,"isEvalSupported",lt())}static get isOffscreenCanvasSupported(){return I(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?I(this,"platform",{isWin:!1,isMac:!1}):I(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return I(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}o.FeatureTest=ct;const gt=[...Array(256).keys()].map(yt=>yt.toString(16).padStart(2,"0"));class Ct{static makeHexColor(it,et,xt){return`#${gt[it]}${gt[et]}${gt[xt]}`}static scaleMinMax(it,et){let xt;it[0]?(it[0]<0&&(xt=et[0],et[0]=et[1],et[1]=xt),et[0]*=it[0],et[1]*=it[0],it[3]<0&&(xt=et[2],et[2]=et[3],et[3]=xt),et[2]*=it[3],et[3]*=it[3]):(xt=et[0],et[0]=et[2],et[2]=xt,xt=et[1],et[1]=et[3],et[3]=xt,it[1]<0&&(xt=et[2],et[2]=et[3],et[3]=xt),et[2]*=it[1],et[3]*=it[1],it[2]<0&&(xt=et[0],et[0]=et[1],et[1]=xt),et[0]*=it[2],et[1]*=it[2]),et[0]+=it[4],et[1]+=it[4],et[2]+=it[5],et[3]+=it[5]}static transform(it,et){return[it[0]*et[0]+it[2]*et[1],it[1]*et[0]+it[3]*et[1],it[0]*et[2]+it[2]*et[3],it[1]*et[2]+it[3]*et[3],it[0]*et[4]+it[2]*et[5]+it[4],it[1]*et[4]+it[3]*et[5]+it[5]]}static applyTransform(it,et){const xt=it[0]*et[0]+it[1]*et[2]+et[4],ue=it[0]*et[1]+it[1]*et[3]+et[5];return[xt,ue]}static applyInverseTransform(it,et){const xt=et[0]*et[3]-et[1]*et[2],ue=(it[0]*et[3]-it[1]*et[2]+et[2]*et[5]-et[4]*et[3])/xt,Gt=(-it[0]*et[1]+it[1]*et[0]+et[4]*et[1]-et[5]*et[0])/xt;return[ue,Gt]}static getAxialAlignedBoundingBox(it,et){const xt=this.applyTransform(it,et),ue=this.applyTransform(it.slice(2,4),et),Gt=this.applyTransform([it[0],it[3]],et),ie=this.applyTransform([it[2],it[1]],et);return[Math.min(xt[0],ue[0],Gt[0],ie[0]),Math.min(xt[1],ue[1],Gt[1],ie[1]),Math.max(xt[0],ue[0],Gt[0],ie[0]),Math.max(xt[1],ue[1],Gt[1],ie[1])]}static inverseTransform(it){const et=it[0]*it[3]-it[1]*it[2];return[it[3]/et,-it[1]/et,-it[2]/et,it[0]/et,(it[2]*it[5]-it[4]*it[3])/et,(it[4]*it[1]-it[5]*it[0])/et]}static singularValueDecompose2dScale(it){const et=[it[0],it[2],it[1],it[3]],xt=it[0]*et[0]+it[1]*et[2],ue=it[0]*et[1]+it[1]*et[3],Gt=it[2]*et[0]+it[3]*et[2],ie=it[2]*et[1]+it[3]*et[3],Ye=(xt+ie)/2,Ke=Math.sqrt((xt+ie)**2-4*(xt*ie-Gt*ue))/2,Xe=Ye+Ke||1,De=Ye-Ke||1;return[Math.sqrt(Xe),Math.sqrt(De)]}static normalizeRect(it){const et=it.slice(0);return it[0]>it[2]&&(et[0]=it[2],et[2]=it[0]),it[1]>it[3]&&(et[1]=it[3],et[3]=it[1]),et}static intersect(it,et){const xt=Math.max(Math.min(it[0],it[2]),Math.min(et[0],et[2])),ue=Math.min(Math.max(it[0],it[2]),Math.max(et[0],et[2]));if(xt>ue)return null;const Gt=Math.max(Math.min(it[1],it[3]),Math.min(et[1],et[3])),ie=Math.min(Math.max(it[1],it[3]),Math.max(et[1],et[3]));return Gt>ie?null:[xt,Gt,ue,ie]}static bezierBoundingBox(it,et,xt,ue,Gt,ie,Ye,Ke){const Xe=[],De=[[],[]];let Ve,We,on,Ce,ln,cn,fn,pn;for(let gn=0;gn<2;++gn){if(gn===0?(We=6*it-12*xt+6*Gt,Ve=-3*it+9*xt-9*Gt+3*Ye,on=3*xt-3*it):(We=6*et-12*ue+6*ie,Ve=-3*et+9*ue-9*ie+3*Ke,on=3*ue-3*et),Math.abs(Ve)<1e-12){if(Math.abs(We)<1e-12)continue;Ce=-on/We,0<Ce&&Ce<1&&Xe.push(Ce);continue}fn=We*We-4*on*Ve,pn=Math.sqrt(fn),!(fn<0)&&(ln=(-We+pn)/(2*Ve),0<ln&&ln<1&&Xe.push(ln),cn=(-We-pn)/(2*Ve),0<cn&&cn<1&&Xe.push(cn))}let nn=Xe.length,Oe;const rn=nn;for(;nn--;)Ce=Xe[nn],Oe=1-Ce,De[0][nn]=Oe*Oe*Oe*it+3*Oe*Oe*Ce*xt+3*Oe*Ce*Ce*Gt+Ce*Ce*Ce*Ye,De[1][nn]=Oe*Oe*Oe*et+3*Oe*Oe*Ce*ue+3*Oe*Ce*Ce*ie+Ce*Ce*Ce*Ke;return De[0][rn]=it,De[1][rn]=et,De[0][rn+1]=Ye,De[1][rn+1]=Ke,De[0].length=De[1].length=rn+2,[Math.min(...De[0]),Math.min(...De[1]),Math.max(...De[0]),Math.max(...De[1])]}}o.Util=Ct;const Mt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ot(yt){if(yt[0]>="ï"){let et;if(yt[0]==="þ"&&yt[1]==="ÿ"?et="utf-16be":yt[0]==="ÿ"&&yt[1]==="þ"?et="utf-16le":yt[0]==="ï"&&yt[1]==="»"&&yt[2]==="¿"&&(et="utf-8"),et)try{const xt=new TextDecoder(et,{fatal:!0}),ue=Y(yt);return xt.decode(ue)}catch(xt){N(`stringToPDFString: "${xt}".`)}}const it=[];for(let et=0,xt=yt.length;et<xt;et++){const ue=Mt[yt.charCodeAt(et)];it.push(ue?String.fromCharCode(ue):yt.charAt(et))}return it.join("")}function Ut(yt){return decodeURIComponent(escape(yt))}function Wt(yt){return unescape(encodeURIComponent(yt))}function ee(yt){return typeof yt=="object"&&yt?.byteLength!==void 0}function Zt(yt,it){if(yt.length!==it.length)return!1;for(let et=0,xt=yt.length;et<xt;et++)if(yt[et]!==it[et])return!1;return!0}function fe(yt=new Date){return[yt.getUTCFullYear().toString(),(yt.getUTCMonth()+1).toString().padStart(2,"0"),yt.getUTCDate().toString().padStart(2,"0"),yt.getUTCHours().toString().padStart(2,"0"),yt.getUTCMinutes().toString().padStart(2,"0"),yt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ie{#t=!1;constructor(){this.promise=new Promise((it,et)=>{this.resolve=xt=>{this.#t=!0,it(xt)},this.reject=xt=>{this.#t=!0,et(xt)}})}get settled(){return this.#t}}o.PromiseCapability=Ie;let Ae=null,Fe=null;function je(yt){return Ae||(Ae=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Fe=new Map([["ﬅ","ſt"]])),yt.replaceAll(Ae,(it,et,xt)=>et?et.normalize("NFKC"):Fe.get(xt))}function Ge(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const yt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(yt);else for(let it=0;it<32;it++)yt[it]=Math.floor(Math.random()*255);return W(yt)}const Ue="pdfjs_internal_id_";o.AnnotationPrefix=Ue}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(n){if(typeof n=="string"||n instanceof URL?n={url:n}:(0,_util.isArrayBuffer)(n)&&(n={data:n}),typeof n!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!n.url&&!n.data&&!n.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const o=new PDFDocumentLoadingTask,{docId:P}=o,h=n.url?getUrlProp(n.url):null,_=n.data?getDataProp(n.data):null,i=n.httpHeaders||null,M=n.withCredentials===!0,V=n.password??null,z=n.range instanceof PDFDataRangeTransport?n.range:null,a=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let t=n.worker instanceof PDFWorker?n.worker:null;const r=n.verbosity,f=typeof n.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(n.docBaseUrl)?n.docBaseUrl:null,d=typeof n.cMapUrl=="string"?n.cMapUrl:null,e=n.cMapPacked!==!1,m=n.CMapReaderFactory||DefaultCMapReaderFactory,b=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,u=n.StandardFontDataFactory||DefaultStandardFontDataFactory,x=n.stopAtErrors!==!0,L=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,R=n.isEvalSupported!==!1,v=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!_util.isNodeJS,C=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,G=typeof n.disableFontFace=="boolean"?n.disableFontFace:_util.isNodeJS,K=n.fontExtraProperties===!0,U=n.enableXfa===!0,nt=n.ownerDocument||globalThis.document,rt=n.disableRange===!0,At=n.disableStream===!0,pt=n.disableAutoFetch===!0,bt=n.pdfBug===!0,wt=z?z.length:n.length??NaN,ht=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!_util.isNodeJS&&!G,N=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:m===_display_utils.DOMCMapReaderFactory&&u===_display_utils.DOMStandardFontDataFactory&&d&&b&&(0,_display_utils.isValidFetchUrl)(d,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(b,document.baseURI),S=n.canvasFactory||new DefaultCanvasFactory({ownerDocument:nt}),p=n.filterFactory||new DefaultFilterFactory({docId:P,ownerDocument:nt}),g=null;(0,_util.setVerbosityLevel)(r);const E={canvasFactory:S,filterFactory:p};if(N||(E.cMapReaderFactory=new m({baseUrl:d,isCompressed:e}),E.standardFontDataFactory=new u({baseUrl:b})),!t){const B={verbosity:r,port:_worker_options.GlobalWorkerOptions.workerPort};t=B.port?PDFWorker.fromPort(B):new PDFWorker(B),o._worker=t}const I={docId:P,apiVersion:"3.11.174",data:_,password:V,disableAutoFetch:pt,rangeChunkSize:a,length:wt,docBaseUrl:f,enableXfa:U,evaluatorOptions:{maxImageSize:L,disableFontFace:G,ignoreErrors:x,isEvalSupported:R,isOffscreenCanvasSupported:v,canvasMaxAreaInBytes:C,fontExtraProperties:K,useSystemFonts:ht,cMapUrl:N?d:null,standardFontDataUrl:N?b:null}},D={ignoreErrors:x,isEvalSupported:R,disableFontFace:G,fontExtraProperties:K,enableXfa:U,ownerDocument:nt,disableAutoFetch:pt,pdfBug:bt,styleElement:g};return t.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const B=_fetchDocument(t,I),k=new Promise(function(l){let y;z?y=new _transport_stream.PDFDataTransportStream({length:wt,initialData:z.initialData,progressiveDone:z.progressiveDone,contentDispositionFilename:z.contentDispositionFilename,disableRange:rt,disableStream:At},z):_||(y=(T=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(T):(0,_display_utils.isValidFetchUrl)(T.url)?new _displayFetch_stream.PDFFetchStream(T):new _displayNetwork.PDFNetworkStream(T))({url:h,length:wt,httpHeaders:i,withCredentials:M,rangeChunkSize:a,disableRange:rt,disableStream:At})),l(y)});return Promise.all([B,k]).then(function([l,y]){if(o.destroyed)throw new Error("Loading aborted");const w=new _message_handler.MessageHandler(P,l,t.port),T=new WorkerTransport(w,o,y,D,E);o._transport=T,w.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(n,o){if(n.destroyed)throw new Error("Worker was destroyed");const P=await n.messageHandler.sendWithPromise("GetDocRequest",o,o.data?[o.data.buffer]:null);if(n.destroyed)throw new Error("Worker was destroyed");return P}function getUrlProp(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(_util.isNodeJS&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(n){if(_util.isNodeJS&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return(0,_util.stringToBytes)(n);if(typeof n=="object"&&!isNaN(n?.length)||(0,_util.isArrayBuffer)(n))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(o){throw this._worker?.port&&delete this._worker._pendingDestroy,o}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,P,h=!1,_=null){this.length=o,this.initialData=P,this.progressiveDone=h,this.contentDispositionFilename=_,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,P){for(const h of this._rangeListeners)h(o,P)}onDataProgress(o,P){this._readyCapability.promise.then(()=>{for(const h of this._progressListeners)h(o,P)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const P of this._progressiveReadListeners)P(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,P){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,P){this._pdfInfo=o,this._transport=P,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(h=>{if(!h)return h;const _=[];for(const i in h)_.push(...h[i]);return _}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(o,P,h,_=!1){this._pageIndex=o,this._pageInfo=P,this._transport=h,this._stats=_?new _display_utils.StatTimer:null,this._pdfBug=_,this.commonObjs=h.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:P=this.rotate,offsetX:h=0,offsetY:_=0,dontFlip:i=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:P,offsetX:h,offsetY:_,dontFlip:i})}getAnnotations({intent:o="display"}={}){const P=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,P.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:o,viewport:P,intent:h="display",annotationMode:_=_util.AnnotationMode.ENABLE,transform:i=null,background:M=null,optionalContentConfigPromise:V=null,annotationCanvasMap:z=null,pageColors:a=null,printAnnotationStorage:t=null}){this._stats?.time("Overall");const r=this._transport.getRenderingIntent(h,_,t);this.#e=!1,this.#i(),V||(V=this._transport.getOptionalContentConfig());let f=this._intentStates.get(r.cacheKey);f||(f=Object.create(null),this._intentStates.set(r.cacheKey,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);const d=!!(r.renderingIntent&_util.RenderingIntentFlag.PRINT);f.displayReadyCapability||(f.displayReadyCapability=new _util.PromiseCapability,f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r));const e=u=>{f.renderTasks.delete(m),(this._maybeCleanupAfterRender||d)&&(this.#e=!0),this.#n(!d),u?(m.capability.reject(u),this._abortOperatorList({intentState:f,reason:u instanceof Error?u:new Error(u)})):m.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},m=new InternalRenderTask({callback:e,params:{canvasContext:o,viewport:P,transform:i,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:z,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!d,pdfBug:this._pdfBug,pageColors:a});(f.renderTasks||=new Set).add(m);const b=m.task;return Promise.all([f.displayReadyCapability.promise,V]).then(([u,x])=>{if(this.destroyed){e();return}this._stats?.time("Rendering"),m.initializeGraphics({transparency:u,optionalContentConfig:x}),m.operatorListChanged()}).catch(e),b}getOperatorList({intent:o="display",annotationMode:P=_util.AnnotationMode.ENABLE,printAnnotationStorage:h=null}={}){function _(){M.operatorList.lastChunk&&(M.opListReadCapability.resolve(M.operatorList),M.renderTasks.delete(V))}const i=this._transport.getRenderingIntent(o,P,h,!0);let M=this._intentStates.get(i.cacheKey);M||(M=Object.create(null),this._intentStates.set(i.cacheKey,M));let V;return M.opListReadCapability||(V=Object.create(null),V.operatorListChanged=_,M.opListReadCapability=new _util.PromiseCapability,(M.renderTasks||=new Set).add(V),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(i)),M.opListReadCapability.promise}streamTextContent({includeMarkedContent:o=!1,disableNormalization:P=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0,disableNormalization:P===!0},{highWaterMark:100,size(_){return _.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(h=>_xfa_text.XfaText.textContent(h));const P=this.streamTextContent(o);return new Promise(function(h,_){function i(){M.read().then(function({value:z,done:a}){if(a){h(V);return}Object.assign(V.styles,z.styles),V.items.push(...z.items),i()},_)}const M=P.getReader(),V={items:[],styles:Object.create(null)};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const P of this._intentStates.values())if(this._abortOperatorList({intentState:P,reason:new Error("Page was destroyed."),force:!0}),!P.opListReadCapability)for(const h of P.renderTasks)o.push(h.completed),h.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(o)}cleanup(o=!1){this.#e=!0;const P=this.#n(!1);return o&&P&&(this._stats&&=new _display_utils.StatTimer),P}#n(o=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(o)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:P,operatorList:h}of this._intentStates.values())if(P.size>0||!h.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(o,P){const h=this._intentStates.get(P);h&&(this._stats?.timeEnd("Page Request"),h.displayReadyCapability?.resolve(o))}_renderPageChunk(o,P){for(let h=0,_=o.length;h<_;h++)P.operatorList.fnArray.push(o.fnArray[h]),P.operatorList.argsArray.push(o.argsArray[h]);P.operatorList.lastChunk=o.lastChunk,P.operatorList.separateAnnots=o.separateAnnots;for(const h of P.renderTasks)h.operatorListChanged();o.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:o,cacheKey:P,annotationStorageSerializable:h}){const{map:_,transfers:i}=h,V=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:P,annotationStorage:_},i).getReader(),z=this._intentStates.get(P);z.streamReader=V;const a=()=>{V.read().then(({value:t,done:r})=>{if(r){z.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(t,z),a())},t=>{if(z.streamReader=null,!this._transport.destroyed){if(z.operatorList){z.operatorList.lastChunk=!0;for(const r of z.renderTasks)r.operatorListChanged();this.#n(!0)}if(z.displayReadyCapability)z.displayReadyCapability.reject(t);else if(z.opListReadCapability)z.opListReadCapability.reject(t);else throw t}})};a()}_abortOperatorList({intentState:o,reason:P,force:h=!1}){if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!h){if(o.renderTasks.size>0)return;if(P instanceof _display_utils.RenderingCancelledException){let _=RENDERING_CANCELLED_TIMEOUT;P.extraDelay>0&&P.extraDelay<1e3&&(_+=P.extraDelay),o.streamReaderCancelTimeout=setTimeout(()=>{o.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:o,reason:P,force:!0})},_);return}}if(o.streamReader.cancel(new _util.AbortException(P.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[_,i]of this._intentStates)if(i===o){this._intentStates.delete(_);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(o,P){const h={data:structuredClone(o,P?{transfer:P}:null)};this.#e.then(()=>{for(const _ of this.#t)_.call(this,h)})}addEventListener(o,P){this.#t.add(P)}removeEventListener(o,P){this.#t.delete(P)}terminate(){this.#t.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const n=document?.currentScript?.src;n&&(PDFWorkerUtil.fallbackWorkerSrc=n.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(n,o){let P;try{if(P=new URL(n),!P.origin||P.origin==="null")return!1}catch{return!1}const h=new URL(o,P);return P.origin===h.origin},PDFWorkerUtil.createCDNWrapper=function(n){const o=`importScripts("${n}");`;return URL.createObjectURL(new Blob([o]))}}class PDFWorker{static#workerPorts;constructor({name:n=null,port:o=null,verbosity:P=(0,_util.getVerbosityLevel)()}={}){if(this.name=n,this.destroyed=!1,this.verbosity=P,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,o){if(PDFWorker.#workerPorts?.has(o))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(n){this._port=n,this._messageHandler=new _message_handler.MessageHandler("main","worker",n),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:n}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,n)||(n=PDFWorkerUtil.createCDNWrapper(new URL(n,window.location).href));const o=new Worker(n),P=new _message_handler.MessageHandler("main","worker",o),h=()=>{o.removeEventListener("error",_),P.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},_=()=>{this._webWorker||h()};o.addEventListener("error",_),P.on("test",M=>{if(o.removeEventListener("error",_),this.destroyed){h();return}M?(this._messageHandler=P,this._port=o,this._webWorker=o,this._readyCapability.resolve(),P.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),P.destroy(),o.terminate())}),P.on("ready",M=>{if(o.removeEventListener("error",_),this.destroyed){h();return}try{i()}catch{this._setupFakeWorker()}});const i=()=>{const M=new Uint8Array;P.send("test",M,[M.buffer])};i();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(n=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const o=new LoopbackPort;this._port=o;const P=`fake${PDFWorkerUtil.fakeWorkerId++}`,h=new _message_handler.MessageHandler(P+"_worker",P,o);n.setup(h,o);const _=new _message_handler.MessageHandler(P,P+"_worker",o);this._messageHandler=_,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})}).catch(n=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${n.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(n){if(!n?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const o=this.#workerPorts?.get(n.port);if(o){if(o._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return o}return new PDFWorker(n)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#i=null;constructor(o,P,h,_,i){this.messageHandler=o,this.loadingTask=P,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:_.ownerDocument,styleElement:_.styleElement}),this._params=_,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=h,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(o,P=null){const h=this.#t.get(o);if(h)return h;const _=this.messageHandler.sendWithPromise(o,P);return this.#t.set(o,_),_}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(o,P=_util.AnnotationMode.ENABLE,h=null,_=!1){let i=_util.RenderingIntentFlag.DISPLAY,M=_annotation_storage.SerializableEmpty;switch(o){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(P){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,M=(i&_util.RenderingIntentFlag.PRINT&&h instanceof _annotation_storage.PrintAnnotationStorage?h:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${P}`)}return _&&(i+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:i,cacheKey:`${i}_${M.hash}`,annotationStorageSerializable:M}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const h of this.#e.values())o.push(h._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const P=this.messageHandler.sendWithPromise("Terminate",null);return o.push(P),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:P}=this;o.on("GetReader",(h,_)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},_.onPull=()=>{this._fullReader.read().then(function({value:i,done:M}){if(M){_.close();return}(0,_util.assert)(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{_.error(i)})},_.onCancel=i=>{this._fullReader.cancel(i),_.ready.catch(M=>{if(!this.destroyed)throw M})}}),o.on("ReaderHeadersReady",h=>{const _=new _util.PromiseCapability,i=this._fullReader;return i.headersReady.then(()=>{(!i.isStreamingSupported||!i.isRangeSupported)&&(this._lastProgress&&P.onProgress?.(this._lastProgress),i.onProgress=M=>{P.onProgress?.({loaded:M.loaded,total:M.total})}),_.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})},_.reject),_.promise}),o.on("GetRangeReader",(h,_)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(h.begin,h.end);if(!i){_.close();return}_.onPull=()=>{i.read().then(function({value:M,done:V}){if(V){_.close();return}(0,_util.assert)(M instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(M),1,[M])}).catch(M=>{_.error(M)})},_.onCancel=M=>{i.cancel(M),_.ready.catch(V=>{if(!this.destroyed)throw V})}}),o.on("GetDoc",({pdfInfo:h})=>{this._numPages=h.numPages,this._htmlForXfa=h.htmlForXfa,delete h.htmlForXfa,P._capability.resolve(new PDFDocumentProxy(h,this))}),o.on("DocException",function(h){let _;switch(h.name){case"PasswordException":_=new _util.PasswordException(h.message,h.code);break;case"InvalidPDFException":_=new _util.InvalidPDFException(h.message);break;case"MissingPDFException":_=new _util.MissingPDFException(h.message);break;case"UnexpectedResponseException":_=new _util.UnexpectedResponseException(h.message,h.status);break;case"UnknownErrorException":_=new _util.UnknownErrorException(h.message,h.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}P._capability.reject(_)}),o.on("PasswordRequest",h=>{if(this.#i=new _util.PromiseCapability,P.onPassword){const _=i=>{i instanceof Error?this.#i.reject(i):this.#i.resolve({password:i})};try{P.onPassword(_,h.code)}catch(i){this.#i.reject(i)}}else this.#i.reject(new _util.PasswordException(h.message,h.code));return this.#i.promise}),o.on("DataLoaded",h=>{P.onProgress?.({loaded:h.length,total:h.length}),this.downloadInfoCapability.resolve(h)}),o.on("StartRenderPage",h=>{if(this.destroyed)return;this.#e.get(h.pageIndex)._startRenderPage(h.transparency,h.cacheKey)}),o.on("commonobj",([h,_,i])=>{if(!this.destroyed&&!this.commonObjs.has(h))switch(_){case"Font":const M=this._params;if("error"in i){const a=i.error;(0,_util.warn)(`Error during font loading: ${a}`),this.commonObjs.resolve(h,a);break}const V=M.pdfBug&&globalThis.FontInspector?.enabled?(a,t)=>globalThis.FontInspector.fontAdded(a,t):null,z=new _font_loader.FontFaceObject(i,{isEvalSupported:M.isEvalSupported,disableFontFace:M.disableFontFace,ignoreErrors:M.ignoreErrors,inspectFont:V});this.fontLoader.bind(z).catch(a=>o.sendWithPromise("FontFallback",{id:h})).finally(()=>{!M.fontExtraProperties&&z.data&&(z.data=null),this.commonObjs.resolve(h,z)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(h,i);break;default:throw new Error(`Got unknown common object type ${_}`)}}),o.on("obj",([h,_,i,M])=>{if(this.destroyed)return;const V=this.#e.get(_);if(!V.objs.has(h))switch(i){case"Image":if(V.objs.resolve(h,M),M){let z;if(M.bitmap){const{width:a,height:t}=M;z=a*t*4}else z=M.data?.length||0;z>_util.MAX_IMAGE_SIZE_TO_CACHE&&(V._maybeCleanupAfterRender=!0)}break;case"Pattern":V.objs.resolve(h,M);break;default:throw new Error(`Got unknown object type ${i}`)}}),o.on("DocProgress",h=>{this.destroyed||P.onProgress?.({loaded:h.loaded,total:h.total})}),o.on("FetchBuiltInCMap",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(h):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(h):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:o,transfers:P}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:o,filename:this._fullReader?.filename??null},P).finally(()=>{this.annotationStorage.resetModified()})}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const P=o-1,h=this.#n.get(P);if(h)return h;const _=this.messageHandler.sendWithPromise("GetPage",{pageIndex:P}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");const M=new PDFPageProxy(P,i,this,this._params.pdfBug);return this.#e.set(P,M),M});return this.#n.set(P,_),_}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,P){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:P})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const o="GetMetadata",P=this.#t.get(o);if(P)return P;const h=this.messageHandler.sendWithPromise(o,null).then(_=>({info:_[0],metadata:_[1]?new _metadata.Metadata(_[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(o,h),h}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const P of this.#e.values())if(!P.cleanup())throw new Error(`startCleanup: Page ${P.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:o,enableXfa:P}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:P})}}class PDFObjects{#t=Object.create(null);#e(o){return this.#t[o]||={capability:new _util.PromiseCapability,data:null}}get(o,P=null){if(P){const _=this.#e(o);return _.capability.promise.then(()=>P(_.data)),null}const h=this.#t[o];if(!h?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${o}.`);return h.data}has(o){return this.#t[o]?.capability.settled||!1}resolve(o,P=null){const h=this.#e(o);h.data=P,h.capability.resolve()}clear(){for(const o in this.#t){const{data:P}=this.#t[o];P?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(o){this.#t=o,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(o=0){this.#t.cancel(null,o)}get separateAnnots(){const{separateAnnots:o}=this.#t.operatorList;if(!o)return!1;const{annotationCanvasMap:P}=this.#t;return o.form||o.canvas&&P?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:o,params:P,objs:h,commonObjs:_,annotationCanvasMap:i,operatorList:M,pageIndex:V,canvasFactory:z,filterFactory:a,useRequestAnimationFrame:t=!1,pdfBug:r=!1,pageColors:f=null}){this.callback=o,this.params=P,this.objs=h,this.commonObjs=_,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=M,this._pageIndex=V,this.canvasFactory=z,this.filterFactory=a,this._pdfBug=r,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=t===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=P.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:P}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:h,viewport:_,transform:i,background:M}=this.params;this.gfx=new _canvas.CanvasGraphics(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:P},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:_,transparency:o,background:M}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(o=null,P=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,P))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SerializableEmpty=o.PrintAnnotationStorage=o.AnnotationStorage=void 0;var h=P(1),_=P(4),i=P(8);const M=Object.freeze({map:null,hash:"",transfers:void 0});o.SerializableEmpty=M;class V{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,r){const f=this.#e.get(t);return f===void 0?r:Object.assign(r,f)}getRawValue(t){return this.#e.get(t)}remove(t){if(this.#e.delete(t),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const r of this.#e.values())if(r instanceof _.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,r){const f=this.#e.get(t);let d=!1;if(f!==void 0)for(const[e,m]of Object.entries(r))f[e]!==m&&(d=!0,f[e]=m);else d=!0,this.#e.set(t,r);d&&this.#n(),r instanceof _.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(r.constructor._type)}has(t){return this.#e.has(t)}getAll(){return this.#e.size>0?(0,h.objectFromMap)(this.#e):null}setAll(t){for(const[r,f]of Object.entries(t))this.setValue(r,f)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new z(this)}get serializable(){if(this.#e.size===0)return M;const t=new Map,r=new i.MurmurHash3_64,f=[],d=Object.create(null);let e=!1;for(const[m,b]of this.#e){const u=b instanceof _.AnnotationEditor?b.serialize(!1,d):b;u&&(t.set(m,u),r.update(`${m}:${JSON.stringify(u)}`),e||=!!u.bitmap)}if(e)for(const m of t.values())m.bitmap&&f.push(m.bitmap);return t.size>0?{map:t,hash:r.hexdigest(),transfers:f}:M}}o.AnnotationStorage=V;class z extends V{#t;constructor(t){super();const{map:r,hash:f,transfers:d}=t.serializable,e=structuredClone(r,d?{transfer:d}:null);this.#t={map:e,hash:f,transfers:d}}get print(){(0,h.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}o.PrintAnnotationStorage=z}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditor=void 0;var h=P(5),_=P(1),i=P(6);class M{#t="";#e=!1;#n=null;#i=null;#o=null;#a=!1;#s=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#r=!1;#f=!1;#h=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#d=!1;#p=M._zIndex++;static _borderLineWidth=-1;static _colorManager=new h.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(a){this.constructor===M&&(0,_.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=a.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:f,pageX:d,pageY:e}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,f],this.pageTranslation=[d,e];const[m,b]=this.parentDimensions;this.x=a.x/m,this.y=a.y/b,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,_.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(a){const t=new V({id:a.parent.getNextId(),parent:a.parent,uiManager:a._uiManager});t.annotationElementId=a.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(a,t=null){if(M._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(f=>[f,a.get(f)])),t?.strings)for(const f of t.strings)M._l10nPromise.set(f,a.get(f));if(M._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);M._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(a,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(a){return!1}static paste(a,t){(0,_.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#d}set _isDraggable(a){this.#d=a,this.div?.classList.toggle("draggable",a)}center(){const[a,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(a*2),this.y+=this.width*a/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(a*2),this.y-=this.width*a/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(a){a!==null&&(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions),this.parent=a}focusin(a){this._focusEventsAllowed&&(this.#r?this.#r=!1:this.parent.setSelected(this))}focusout(a){!this._focusEventsAllowed||!this.isAttachedToDOM||a.relatedTarget?.closest(`#${this.id}`)||(a.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(a,t,r,f){const[d,e]=this.parentDimensions;[r,f]=this.screenToPageTranslation(r,f),this.x=(a+r)/d,this.y=(t+f)/e,this.fixAndSetPosition()}#v([a,t],r,f){[r,f]=this.screenToPageTranslation(r,f),this.x+=r/a,this.y+=f/t,this.fixAndSetPosition()}translate(a,t){this.#v(this.parentDimensions,a,t)}translateInPage(a,t){this.#v(this.pageDimensions,a,t),this.div.scrollIntoView({block:"nearest"})}drag(a,t){const[r,f]=this.parentDimensions;if(this.x+=a/r,this.y+=t/f,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:d,y:e}=this;const[m,b]=this.#m();d+=m,e+=b,this.div.style.left=`${(100*d).toFixed(2)}%`,this.div.style.top=`${(100*e).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[a,t]=this.parentDimensions,{_borderLineWidth:r}=M,f=r/a,d=r/t;switch(this.rotation){case 90:return[-f,d];case 180:return[f,d];case 270:return[f,-d];default:return[-f,-d]}}fixAndSetPosition(){const[a,t]=this.pageDimensions;let{x:r,y:f,width:d,height:e}=this;switch(d*=a,e*=t,r*=a,f*=t,this.rotation){case 0:r=Math.max(0,Math.min(a-d,r)),f=Math.max(0,Math.min(t-e,f));break;case 90:r=Math.max(0,Math.min(a-e,r)),f=Math.min(t,Math.max(d,f));break;case 180:r=Math.min(a,Math.max(d,r)),f=Math.min(t,Math.max(e,f));break;case 270:r=Math.min(a,Math.max(e,r)),f=Math.max(0,Math.min(t-d,f));break}this.x=r/=a,this.y=f/=t;const[m,b]=this.#m();r+=m,f+=b;const{style:u}=this.div;u.left=`${(100*r).toFixed(2)}%`,u.top=`${(100*f).toFixed(2)}%`,this.moveInDOM()}static#g(a,t,r){switch(r){case 90:return[t,-a];case 180:return[-a,-t];case 270:return[-t,a];default:return[a,t]}}screenToPageTranslation(a,t){return M.#g(a,t,this.parentRotation)}pageTranslationToScreen(a,t){return M.#g(a,t,360-this.parentRotation)}#u(a){switch(a){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:a,pageDimensions:[t,r]}=this,f=t*a,d=r*a;return _.FeatureTest.isCSSRoundSupported?[Math.round(f),Math.round(d)]:[f,d]}setDims(a,t){const[r,f]=this.parentDimensions;this.div.style.width=`${(100*a/r).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*t/f).toFixed(2)}%`),this.#n?.classList.toggle("small",a<M.SMALL_EDITOR_SIZE||t<M.SMALL_EDITOR_SIZE)}fixDims(){const{style:a}=this.div,{height:t,width:r}=a,f=r.endsWith("%"),d=!this.#a&&t.endsWith("%");if(f&&d)return;const[e,m]=this.parentDimensions;f||(a.width=`${(100*parseFloat(r)/e).toFixed(2)}%`),!this.#a&&!d&&(a.height=`${(100*parseFloat(t)/m).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const a=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||a.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of a){const r=document.createElement("div");this.#s.append(r),r.classList.add("resizer",t),r.addEventListener("pointerdown",this.#E.bind(this,t)),r.addEventListener("contextmenu",i.noContextMenu)}this.div.prepend(this.#s)}#E(a,t){t.preventDefault();const{isMac:r}=_.FeatureTest.platform;if(t.button!==0||t.ctrlKey&&r)return;const f=this.#S.bind(this,a),d=this._isDraggable;this._isDraggable=!1;const e={passive:!0,capture:!0};window.addEventListener("pointermove",f,e);const m=this.x,b=this.y,u=this.width,x=this.height,L=this.parent.div.style.cursor,R=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const v=()=>{this._isDraggable=d,window.removeEventListener("pointerup",v),window.removeEventListener("blur",v),window.removeEventListener("pointermove",f,e),this.parent.div.style.cursor=L,this.div.style.cursor=R;const C=this.x,G=this.y,K=this.width,U=this.height;C===m&&G===b&&K===u&&U===x||this.addCommands({cmd:()=>{this.width=K,this.height=U,this.x=C,this.y=G;const[nt,rt]=this.parentDimensions;this.setDims(nt*K,rt*U),this.fixAndSetPosition()},undo:()=>{this.width=u,this.height=x,this.x=m,this.y=b;const[nt,rt]=this.parentDimensions;this.setDims(nt*u,rt*x),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",v),window.addEventListener("blur",v)}#S(a,t){const[r,f]=this.parentDimensions,d=this.x,e=this.y,m=this.width,b=this.height,u=M.MIN_SIZE/r,x=M.MIN_SIZE/f,L=k=>Math.round(k*1e4)/1e4,R=this.#u(this.rotation),v=(k,l)=>[R[0]*k+R[2]*l,R[1]*k+R[3]*l],C=this.#u(360-this.rotation),G=(k,l)=>[C[0]*k+C[2]*l,C[1]*k+C[3]*l];let K,U,nt=!1,rt=!1;switch(a){case"topLeft":nt=!0,K=(k,l)=>[0,0],U=(k,l)=>[k,l];break;case"topMiddle":K=(k,l)=>[k/2,0],U=(k,l)=>[k/2,l];break;case"topRight":nt=!0,K=(k,l)=>[k,0],U=(k,l)=>[0,l];break;case"middleRight":rt=!0,K=(k,l)=>[k,l/2],U=(k,l)=>[0,l/2];break;case"bottomRight":nt=!0,K=(k,l)=>[k,l],U=(k,l)=>[0,0];break;case"bottomMiddle":K=(k,l)=>[k/2,l],U=(k,l)=>[k/2,0];break;case"bottomLeft":nt=!0,K=(k,l)=>[0,l],U=(k,l)=>[k,0];break;case"middleLeft":rt=!0,K=(k,l)=>[0,l/2],U=(k,l)=>[k,l/2];break}const At=K(m,b),pt=U(m,b);let bt=v(...pt);const wt=L(d+bt[0]),ht=L(e+bt[1]);let N=1,S=1,[p,g]=this.screenToPageTranslation(t.movementX,t.movementY);if([p,g]=G(p/r,g/f),nt){const k=Math.hypot(m,b);N=S=Math.max(Math.min(Math.hypot(pt[0]-At[0]-p,pt[1]-At[1]-g)/k,1/m,1/b),u/m,x/b)}else rt?N=Math.max(u,Math.min(1,Math.abs(pt[0]-At[0]-p)))/m:S=Math.max(x,Math.min(1,Math.abs(pt[1]-At[1]-g)))/b;const E=L(m*N),I=L(b*S);bt=v(...U(E,I));const D=wt-bt[0],B=ht-bt[1];this.width=E,this.height=I,this.x=D,this.y=B,this.setDims(r*E,f*I),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const a=this.#n=document.createElement("button");a.className="altText";const t=await M._l10nPromise.get("editor_alt_text_button_label");a.textContent=t,a.setAttribute("aria-label",t),a.tabIndex="0",a.addEventListener("contextmenu",i.noContextMenu),a.addEventListener("pointerdown",r=>r.stopPropagation()),a.addEventListener("click",r=>{r.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),a.addEventListener("keydown",r=>{r.target===a&&r.key==="Enter"&&(r.preventDefault(),this._uiManager.editAltText(this))}),this.#C(),this.div.append(a),M.SMALL_EDITOR_SIZE||(M.SMALL_EDITOR_SIZE=Math.min(128,Math.round(a.getBoundingClientRect().width*1.4)))}async#C(){const a=this.#n;if(!a)return;if(!this.#t&&!this.#e){a.classList.remove("done"),this.#i?.remove();return}M._l10nPromise.get("editor_alt_text_edit_button_label").then(r=>{a.setAttribute("aria-label",r)});let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip");const r=t.id=`alt-text-tooltip-${this.id}`;a.setAttribute("aria-describedby",r);const f=100;a.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#i.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},f)}),a.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#i?.classList.remove("show")})}a.classList.add("done"),t.innerText=this.#e?await M._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,t.parentNode||a.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:a,decorative:t}){this.#t===a&&this.#e===t||(this.#t=a,this.#e=t,this.#C())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[a,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/a).toFixed(2)}%`,this.div.style.maxHeight=`${(100*a/t).toFixed(2)}%`);const[r,f]=this.getInitialTranslation();return this.translate(r,f),(0,h.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(a){const{isMac:t}=_.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&t){a.preventDefault();return}this.#r=!0,this.#T(a)}#T(a){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let r,f;t&&(r={passive:!0,capture:!0},f=e=>{const[m,b]=this.screenToPageTranslation(e.movementX,e.movementY);this._uiManager.dragSelectedEditors(m,b)},window.addEventListener("pointermove",f,r));const d=()=>{if(window.removeEventListener("pointerup",d),window.removeEventListener("blur",d),t&&window.removeEventListener("pointermove",f,r),this.#r=!1,!this._uiManager.endDragSession()){const{isMac:e}=_.FeatureTest.platform;a.ctrlKey&&!e||a.shiftKey||a.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",d),window.addEventListener("blur",d)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(a,t,r){a.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(a,t){const r=this.parentScale,[f,d]=this.pageDimensions,[e,m]=this.pageTranslation,b=a/r,u=t/r,x=this.x*f,L=this.y*d,R=this.width*f,v=this.height*d;switch(this.rotation){case 0:return[x+b+e,d-L-u-v+m,x+b+R+e,d-L-u+m];case 90:return[x+u+e,d-L+b+m,x+u+v+e,d-L+b+R+m];case 180:return[x-b-R+e,d-L+u+m,x-b+e,d-L+u+v+m];case 270:return[x-u-v+e,d-L-b-R+m,x-u+e,d-L-b+m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,t){const[r,f,d,e]=a,m=d-r,b=e-f;switch(this.rotation){case 0:return[r,t-e,m,b];case 90:return[r,t-f,b,m];case 180:return[d,t-f,m,b];case 270:return[d,t-e,b,m];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(a=!1,t=null){(0,_.unreachable)("An editor must be serializable")}static deserialize(a,t,r){const f=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});f.rotation=a.rotation;const[d,e]=f.pageDimensions,[m,b,u,x]=f.getRectInCurrentCoords(a.rect,e);return f.x=m/d,f.y=b/e,f.width=u/d,f.height=x/e,f}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(a,t){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(a){this.#f=a,this.parent&&(a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(a,t){this.#a=!0;const r=a/t,{style:f}=this.div;f.aspectRatio=r,f.height="auto"}static get MIN_SIZE(){return 16}}o.AnnotationEditor=M;class V extends M{constructor(a){super(a),this.annotationElementId=a.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.KeyboardManager=o.CommandManager=o.ColorManager=o.AnnotationEditorUIManager=void 0,o.bindEvents=i,o.opacityToHex=M;var h=P(1),_=P(6);function i(d,e,m){for(const b of m)e.addEventListener(b,d[b].bind(d))}function M(d){return Math.round(Math.min(255,Math.max(1,255*d))).toString(16).padStart(2,"0")}class V{#t=0;getId(){return`${h.AnnotationEditorPrefix}${this.#t++}`}}class z{#t=(0,h.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',b=new OffscreenCanvas(1,3).getContext("2d"),u=new Image;u.src=e;const x=u.decode().then(()=>(b.drawImage(u,0,0,1,1,0,0,1,3),new Uint32Array(b.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,h.shadow)(this,"_isSVGFittingCanvas",x)}async#i(e,m){this.#n||=new Map;let b=this.#n.get(e);if(b===null)return null;if(b?.bitmap)return b.refCounter+=1,b;try{b||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let u;if(typeof m=="string"){b.url=m;const x=await fetch(m);if(!x.ok)throw new Error(x.statusText);u=await x.blob()}else u=b.file=m;if(u.type==="image/svg+xml"){const x=z._isSVGFittingCanvas,L=new FileReader,R=new Image,v=new Promise((C,G)=>{R.onload=()=>{b.bitmap=R,b.isSvg=!0,C()},L.onload=async()=>{const K=b.svgUrl=L.result;R.src=await x?`${K}#svgView(preserveAspectRatio(none))`:K},R.onerror=L.onerror=G});L.readAsDataURL(u),await v}else b.bitmap=await createImageBitmap(u);b.refCounter=1}catch(u){console.error(u),b=null}return this.#n.set(e,b),b&&this.#n.set(b.id,b),b}async getFromFile(e){const{lastModified:m,name:b,size:u,type:x}=e;return this.#i(`${m}_${b}_${u}_${x}`,e)}async getFromUrl(e){return this.#i(e,e)}async getFromId(e){this.#n||=new Map;const m=this.#n.get(e);return m?m.bitmap?(m.refCounter+=1,m):m.file?this.getFromFile(m.file):this.getFromUrl(m.url):null}getSvgUrl(e){const m=this.#n.get(e);return m?.isSvg?m.svgUrl:null}deleteId(e){this.#n||=new Map;const m=this.#n.get(e);m&&(m.refCounter-=1,m.refCounter===0&&(m.bitmap=null))}isValidId(e){return e.startsWith(`image_${this.#t}_`)}}class a{#t=[];#e=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:m,mustExec:b,type:u=NaN,overwriteIfSameType:x=!1,keepUndo:L=!1}){if(b&&e(),this.#e)return;const R={cmd:e,undo:m,type:u};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(R);return}if(x&&this.#t[this.#i].type===u){L&&(R.undo=this.#t[this.#i].undo),this.#t[this.#i]=R;return}const v=this.#i+1;v===this.#n?this.#t.splice(0,1):(this.#i=v,v<this.#t.length&&this.#t.splice(v)),this.#t.push(R)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}o.CommandManager=a;class t{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:m}=h.FeatureTest.platform;for(const[b,u,x={}]of e)for(const L of b){const R=L.startsWith("mac+");m&&R?(this.callbacks.set(L.slice(4),{callback:u,options:x}),this.allKeys.add(L.split("+").at(-1))):!m&&!R&&(this.callbacks.set(L,{callback:u,options:x}),this.allKeys.add(L.split("+").at(-1)))}}#t(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const m=this.buffer.join("+");return this.buffer.length=0,m}exec(e,m){if(!this.allKeys.has(m.key))return;const b=this.callbacks.get(this.#t(m));if(!b)return;const{callback:u,options:{bubbles:x=!1,args:L=[],checker:R=null}}=b;R&&!R(e,m)||(u.bind(e,...L)(),x||(m.stopPropagation(),m.preventDefault()))}}o.KeyboardManager=t;class r{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,_.getColorValues)(e),(0,h.shadow)(this,"_colors",e)}convert(e){const m=(0,_.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return m;for(const[b,u]of this._colors)if(u.every((x,L)=>x===m[L]))return r._colorsMapping.get(b);return m}getHexCode(e){const m=this._colors.get(e);return m?h.Util.makeHexColor(...m):e}}o.ColorManager=r;class f{#t=null;#e=new Map;#n=new Map;#i=null;#o=null;#a=new a;#s=0;#l=new Set;#c=null;#r=null;#f=new Set;#h=null;#d=new V;#p=!1;#v=!1;#m=null;#g=h.AnnotationEditorType.NONE;#u=new Set;#b=null;#E=this.blur.bind(this);#S=this.focus.bind(this);#C=this.copy.bind(this);#T=this.cut.bind(this);#D=this.paste.bind(this);#I=this.keydown.bind(this);#O=this.onEditingAction.bind(this);#_=this.onPageChanging.bind(this);#L=this.onScaleChanging.bind(this);#k=this.onRotationChanging.bind(this);#R={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#y=[0,0];#P=null;#w=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=f.prototype,m=x=>{const{activeElement:L}=document;return L&&x.#w.contains(L)&&x.hasSomethingToControl()},b=this.TRANSLATE_SMALL,u=this.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new t([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-b,0],checker:m}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-u,0],checker:m}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[b,0],checker:m}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[u,0],checker:m}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-b],checker:m}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-u],checker:m}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,b],checker:m}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,u],checker:m}]]))}constructor(e,m,b,u,x,L){this.#w=e,this.#N=m,this.#i=b,this._eventBus=u,this._eventBus._on("editingaction",this.#O),this._eventBus._on("pagechanging",this.#_),this._eventBus._on("scalechanging",this.#L),this._eventBus._on("rotationchanging",this.#k),this.#o=x.annotationStorage,this.#h=x.filterFactory,this.#b=L,this.viewParameters={realScale:_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#M(),this.#B(),this._eventBus._off("editingaction",this.#O),this._eventBus._off("pagechanging",this.#_),this._eventBus._off("scalechanging",this.#L),this._eventBus._off("rotationchanging",this.#k);for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#u.clear(),this.#a.destroy(),this.#i.destroy()}get hcmFilter(){return(0,h.shadow)(this,"hcmFilter",this.#b?this.#h.addHCMFilter(this.#b.foreground,this.#b.background):"none")}get direction(){return(0,h.shadow)(this,"direction",getComputedStyle(this.#w).direction)}editAltText(e){this.#i?.editAltText(this,e)}onPageChanging({pageNumber:e}){this.#s=e-1}focusMainContainer(){this.#w.focus()}findParent(e,m){for(const b of this.#n.values()){const{x:u,y:x,width:L,height:R}=b.div.getBoundingClientRect();if(e>=u&&e<=u+L&&m>=x&&m<=x+R)return b}return null}disableUserSelect(e=!1){this.#N.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#f.add(e)}removeShouldRescale(e){this.#f.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*_.PixelsPerInch.PDF_TO_CSS_UNITS;for(const m of this.#f)m.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&this.#o&&!this.#o.has(e.id)&&this.#o.setValue(e.id,e)}#j(){window.addEventListener("focus",this.#S),window.addEventListener("blur",this.#E)}#B(){window.removeEventListener("focus",this.#S),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const m of this.#u)if(m.div.contains(e)){this.#m=[m,e],m._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[e,m]=this.#m;this.#m=null,m.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),m.focus()}#H(){window.addEventListener("keydown",this.#I,{capture:!0})}#M(){window.removeEventListener("keydown",this.#I,{capture:!0})}#F(){document.addEventListener("copy",this.#C),document.addEventListener("cut",this.#T),document.addEventListener("paste",this.#D)}#x(){document.removeEventListener("copy",this.#C),document.removeEventListener("cut",this.#T),document.removeEventListener("paste",this.#D)}addEditListeners(){this.#H(),this.#F()}removeEditListeners(){this.#M(),this.#x()}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const m=[];for(const b of this.#u){const u=b.serialize(!0);u&&m.push(u)}m.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(m))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:m}=e;for(const x of m.items)for(const L of this.#r)if(L.isHandlingMimeForPasting(x.type)){L.paste(x,this.currentLayer);return}let b=m.getData("application/pdfjs");if(!b)return;try{b=JSON.parse(b)}catch(x){(0,h.warn)(`paste: "${x.message}".`);return}if(!Array.isArray(b))return;this.unselectAll();const u=this.currentLayer;try{const x=[];for(const v of b){const C=u.deserialize(v);if(!C)return;x.push(C)}const L=()=>{for(const v of x)this.#z(v);this.#V(x)},R=()=>{for(const v of x)v.remove()};this.addCommands({cmd:L,undo:R,mustExec:!0})}catch(x){(0,h.warn)(`paste: "${x.message}".`)}}keydown(e){this.getActive()?.shouldGetKeyboardEvents()||f._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}#A(e){Object.entries(e).some(([b,u])=>this.#R[b]!==u)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#R,e)})}#U(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#j(),this.#H(),this.#F(),this.#A({isEditing:this.#g!==h.AnnotationEditorType.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#B(),this.#M(),this.#x(),this.#A({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#r){this.#r=e;for(const m of this.#r)this.#U(m.defaultPropertiesToUpdate)}}getId(){return this.#d.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#s}addLayer(e){this.#n.set(e.pageIndex,e),this.#p?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}updateMode(e,m=null){if(this.#g!==e){if(this.#g=e,e===h.AnnotationEditorType.NONE){this.setEditingState(!1),this.#G();return}this.setEditingState(!0),this.#q(),this.unselectAll();for(const b of this.#n.values())b.updateMode(e);if(m){for(const b of this.#e.values())if(b.annotationElementId===m){this.setSelected(b),b.enterInEditMode();break}}}}updateToolbar(e){e!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,m){if(this.#r){if(e===h.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(const b of this.#u)b.updateParams(e,m);for(const b of this.#r)b.updateDefaultParams(e,m)}}enableWaiting(e=!1){if(this.#v!==e){this.#v=e;for(const m of this.#n.values())e?m.disableClick():m.enableClick(),m.div.classList.toggle("waiting",e)}}#q(){if(!this.#p){this.#p=!0;for(const e of this.#n.values())e.enable()}}#G(){if(this.unselectAll(),this.#p){this.#p=!1;for(const e of this.#n.values())e.disable()}}getEditors(e){const m=[];for(const b of this.#e.values())b.pageIndex===e&&m.push(b);return m}getEditor(e){return this.#e.get(e)}addEditor(e){this.#e.set(e.id,e)}removeEditor(e){this.#e.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#l.has(e.annotationElementId))&&this.#o?.remove(e.id)}addDeletedAnnotationElement(e){this.#l.add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return this.#l.has(e)}removeDeletedAnnotationElement(e){this.#l.delete(e.annotationElementId),e.deleted=!1}#z(e){const m=this.#n.get(e.pageIndex);m?m.addOrRebuild(e):this.addEditor(e)}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#U(e.propertiesToUpdate))}toggleSelected(e){if(this.#u.has(e)){this.#u.delete(e),e.unselect(),this.#A({hasSelectedEditor:this.hasSelection});return}this.#u.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}setSelected(e){for(const m of this.#u)m!==e&&m.unselect();this.#u.clear(),this.#u.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}isSelected(e){return this.#u.has(e)}unselect(e){e.unselect(),this.#u.delete(e),this.#A({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#a.undo(),this.#A({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()})}redo(){this.#a.redo(),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#a.add(e),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}#W(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const e of this.#e.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#u],m=()=>{for(const u of e)u.remove()},b=()=>{for(const u of e)this.#z(u)};this.addCommands({cmd:m,undo:b,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#V(e){this.#u.clear();for(const m of e)m.isEmpty()||(this.#u.add(m),m.select());this.#A({hasSelectedEditor:!0})}selectAll(){for(const e of this.#u)e.commit();this.#V(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const e of this.#u)e.unselect();this.#u.clear(),this.#A({hasSelectedEditor:!1})}}translateSelectedEditors(e,m,b=!1){if(b||this.commitOrRemove(),!this.hasSelection)return;this.#y[0]+=e,this.#y[1]+=m;const[u,x]=this.#y,L=[...this.#u],R=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#y[0]=this.#y[1]=0,this.addCommands({cmd:()=>{for(const v of L)this.#e.has(v.id)&&v.translateInPage(u,x)},undo:()=>{for(const v of L)this.#e.has(v.id)&&v.translateInPage(-u,-x)},mustExec:!1})},R);for(const v of L)v.translateInPage(e,m)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const e of this.#u)this.#c.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const e=this.#c;this.#c=null;let m=!1;for(const[{x:u,y:x,pageIndex:L},R]of e)R.newX=u,R.newY=x,R.newPageIndex=L,m||=u!==R.savedX||x!==R.savedY||L!==R.savedPageIndex;if(!m)return!1;const b=(u,x,L,R)=>{if(this.#e.has(u.id)){const v=this.#n.get(R);v?u._setParentAndPosition(v,x,L):(u.pageIndex=R,u.x=x,u.y=L)}};return this.addCommands({cmd:()=>{for(const[u,{newX:x,newY:L,newPageIndex:R}]of e)b(u,x,L,R)},undo:()=>{for(const[u,{savedX:x,savedY:L,savedPageIndex:R}]of e)b(u,x,L,R)},mustExec:!0}),!0}dragSelectedEditors(e,m){if(this.#c)for(const b of this.#c.keys())b.drag(e,m)}rebuild(e){if(e.parent===null){const m=this.getLayer(e.pageIndex);m?(m.changeParent(e),m.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#g}get imageManager(){return(0,h.shadow)(this,"imageManager",new z)}}o.AnnotationEditorUIManager=f}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMFilterFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=void 0,o.deprecated=G,o.getColorValues=At,o.getCurrentTransform=pt,o.getCurrentTransformInverse=bt,o.getFilenameFromUrl=u,o.getPdfFilenameFromUrl=x,o.getRGB=rt,o.getXfaPageViewport=nt,o.isDataScheme=m,o.isPdfFile=b,o.isValidFetchUrl=R,o.loadScript=C,o.noContextMenu=v,o.setLayerDimensions=wt;var h=P(7),_=P(1);const i="http://www.w3.org/2000/svg";class M{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}o.PixelsPerInch=M;class V extends h.BaseFilterFactory{#t;#e;#n;#i;#o;#a;#s;#l;#c;#r;#f=0;constructor({docId:N,ownerDocument:S=globalThis.document}={}){super(),this.#n=N,this.#i=S}get#h(){return this.#t||=new Map}get#d(){if(!this.#e){const N=this.#i.createElement("div"),{style:S}=N;S.visibility="hidden",S.contain="strict",S.width=S.height=0,S.position="absolute",S.top=S.left=0,S.zIndex=-1;const p=this.#i.createElementNS(i,"svg");p.setAttribute("width",0),p.setAttribute("height",0),this.#e=this.#i.createElementNS(i,"defs"),N.append(p),p.append(this.#e),this.#i.body.append(N)}return this.#e}addFilter(N){if(!N)return"none";let S=this.#h.get(N);if(S)return S;let p,g,E,I;if(N.length===1){const l=N[0],y=new Array(256);for(let w=0;w<256;w++)y[w]=l[w]/255;I=p=g=E=y.join(",")}else{const[l,y,w]=N,T=new Array(256),F=new Array(256),W=new Array(256);for(let Y=0;Y<256;Y++)T[Y]=l[Y]/255,F[Y]=y[Y]/255,W[Y]=w[Y]/255;p=T.join(","),g=F.join(","),E=W.join(","),I=`${p}${g}${E}`}if(S=this.#h.get(I),S)return this.#h.set(N,S),S;const D=`g_${this.#n}_transfer_map_${this.#f++}`,B=`url(#${D})`;this.#h.set(N,B),this.#h.set(I,B);const k=this.#v(D);return this.#g(p,g,E,k),B}addHCMFilter(N,S){const p=`${N}-${S}`;if(this.#a===p)return this.#s;if(this.#a=p,this.#s="none",this.#o?.remove(),!N||!S)return this.#s;const g=this.#u(N);N=_.Util.makeHexColor(...g);const E=this.#u(S);if(S=_.Util.makeHexColor(...E),this.#d.style.color="",N==="#000000"&&S==="#ffffff"||N===S)return this.#s;const I=new Array(256);for(let y=0;y<=255;y++){const w=y/255;I[y]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const D=I.join(","),B=`g_${this.#n}_hcm_filter`,k=this.#l=this.#v(B);this.#g(D,D,D,k),this.#p(k);const l=(y,w)=>{const T=g[y]/255,F=E[y]/255,W=new Array(w+1);for(let Y=0;Y<=w;Y++)W[Y]=T+Y/w*(F-T);return W.join(",")};return this.#g(l(0,5),l(1,5),l(2,5),k),this.#s=`url(#${B})`,this.#s}addHighlightHCMFilter(N,S,p,g){const E=`${N}-${S}-${p}-${g}`;if(this.#c===E)return this.#r;if(this.#c=E,this.#r="none",this.#l?.remove(),!N||!S)return this.#r;const[I,D]=[N,S].map(this.#u.bind(this));let B=Math.round(.2126*I[0]+.7152*I[1]+.0722*I[2]),k=Math.round(.2126*D[0]+.7152*D[1]+.0722*D[2]),[l,y]=[p,g].map(this.#u.bind(this));k<B&&([B,k,l,y]=[k,B,y,l]),this.#d.style.color="";const w=(W,Y,st)=>{const Et=new Array(256),at=(k-B)/st,ot=W/255,lt=(Y-W)/(255*st);let ct=0;for(let gt=0;gt<=st;gt++){const Ct=Math.round(B+gt*at),Mt=ot+gt*lt;for(let Ot=ct;Ot<=Ct;Ot++)Et[Ot]=Mt;ct=Ct+1}for(let gt=ct;gt<256;gt++)Et[gt]=Et[ct-1];return Et.join(",")},T=`g_${this.#n}_hcm_highlight_filter`,F=this.#l=this.#v(T);return this.#p(F),this.#g(w(l[0],y[0],5),w(l[1],y[1],5),w(l[2],y[2],5),F),this.#r=`url(#${T})`,this.#r}destroy(N=!1){N&&(this.#s||this.#r)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(N){const S=this.#i.createElementNS(i,"feColorMatrix");S.setAttribute("type","matrix"),S.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),N.append(S)}#v(N){const S=this.#i.createElementNS(i,"filter");return S.setAttribute("color-interpolation-filters","sRGB"),S.setAttribute("id",N),this.#d.append(S),S}#m(N,S,p){const g=this.#i.createElementNS(i,S);g.setAttribute("type","discrete"),g.setAttribute("tableValues",p),N.append(g)}#g(N,S,p,g){const E=this.#i.createElementNS(i,"feComponentTransfer");g.append(E),this.#m(E,"feFuncR",N),this.#m(E,"feFuncG",S),this.#m(E,"feFuncB",p)}#u(N){return this.#d.style.color=N,rt(getComputedStyle(this.#d).getPropertyValue("color"))}}o.DOMFilterFactory=V;class z extends h.BaseCanvasFactory{constructor({ownerDocument:N=globalThis.document}={}){super(),this._document=N}_createCanvas(N,S){const p=this._document.createElement("canvas");return p.width=N,p.height=S,p}}o.DOMCanvasFactory=z;async function a(ht,N=!1){if(R(ht,document.baseURI)){const S=await fetch(ht);if(!S.ok)throw new Error(S.statusText);return N?new Uint8Array(await S.arrayBuffer()):(0,_.stringToBytes)(await S.text())}return new Promise((S,p)=>{const g=new XMLHttpRequest;g.open("GET",ht,!0),N&&(g.responseType="arraybuffer"),g.onreadystatechange=()=>{if(g.readyState===XMLHttpRequest.DONE){if(g.status===200||g.status===0){let E;if(N&&g.response?E=new Uint8Array(g.response):!N&&g.responseText&&(E=(0,_.stringToBytes)(g.responseText)),E){S(E);return}}p(new Error(g.statusText))}},g.send(null)})}class t extends h.BaseCMapReaderFactory{_fetchData(N,S){return a(N,this.isCompressed).then(p=>({cMapData:p,compressionType:S}))}}o.DOMCMapReaderFactory=t;class r extends h.BaseStandardFontDataFactory{_fetchData(N){return a(N,!0)}}o.DOMStandardFontDataFactory=r;class f extends h.BaseSVGFactory{_createSVG(N){return document.createElementNS(i,N)}}o.DOMSVGFactory=f;class d{constructor({viewBox:N,scale:S,rotation:p,offsetX:g=0,offsetY:E=0,dontFlip:I=!1}){this.viewBox=N,this.scale=S,this.rotation=p,this.offsetX=g,this.offsetY=E;const D=(N[2]+N[0])/2,B=(N[3]+N[1])/2;let k,l,y,w;switch(p%=360,p<0&&(p+=360),p){case 180:k=-1,l=0,y=0,w=1;break;case 90:k=0,l=1,y=1,w=0;break;case 270:k=0,l=-1,y=-1,w=0;break;case 0:k=1,l=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}I&&(y=-y,w=-w);let T,F,W,Y;k===0?(T=Math.abs(B-N[1])*S+g,F=Math.abs(D-N[0])*S+E,W=(N[3]-N[1])*S,Y=(N[2]-N[0])*S):(T=Math.abs(D-N[0])*S+g,F=Math.abs(B-N[1])*S+E,W=(N[2]-N[0])*S,Y=(N[3]-N[1])*S),this.transform=[k*S,l*S,y*S,w*S,T-k*S*D-y*S*B,F-l*S*D-w*S*B],this.width=W,this.height=Y}get rawDims(){const{viewBox:N}=this;return(0,_.shadow)(this,"rawDims",{pageWidth:N[2]-N[0],pageHeight:N[3]-N[1],pageX:N[0],pageY:N[1]})}clone({scale:N=this.scale,rotation:S=this.rotation,offsetX:p=this.offsetX,offsetY:g=this.offsetY,dontFlip:E=!1}={}){return new d({viewBox:this.viewBox.slice(),scale:N,rotation:S,offsetX:p,offsetY:g,dontFlip:E})}convertToViewportPoint(N,S){return _.Util.applyTransform([N,S],this.transform)}convertToViewportRectangle(N){const S=_.Util.applyTransform([N[0],N[1]],this.transform),p=_.Util.applyTransform([N[2],N[3]],this.transform);return[S[0],S[1],p[0],p[1]]}convertToPdfPoint(N,S){return _.Util.applyInverseTransform([N,S],this.transform)}}o.PageViewport=d;class e extends _.BaseException{constructor(N,S=0){super(N,"RenderingCancelledException"),this.extraDelay=S}}o.RenderingCancelledException=e;function m(ht){const N=ht.length;let S=0;for(;S<N&&ht[S].trim()==="";)S++;return ht.substring(S,S+5).toLowerCase()==="data:"}function b(ht){return typeof ht=="string"&&/\.pdf$/i.test(ht)}function u(ht,N=!1){return N||([ht]=ht.split(/[#?]/,1)),ht.substring(ht.lastIndexOf("/")+1)}function x(ht,N="document.pdf"){if(typeof ht!="string")return N;if(m(ht))return(0,_.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),N;const S=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,p=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,g=S.exec(ht);let E=p.exec(g[1])||p.exec(g[2])||p.exec(g[3]);if(E&&(E=E[0],E.includes("%")))try{E=p.exec(decodeURIComponent(E))[0]}catch{}return E||N}class L{started=Object.create(null);times=[];time(N){N in this.started&&(0,_.warn)(`Timer is already running for ${N}`),this.started[N]=Date.now()}timeEnd(N){N in this.started||(0,_.warn)(`Timer has not been started for ${N}`),this.times.push({name:N,start:this.started[N],end:Date.now()}),delete this.started[N]}toString(){const N=[];let S=0;for(const{name:p}of this.times)S=Math.max(p.length,S);for(const{name:p,start:g,end:E}of this.times)N.push(`${p.padEnd(S)} ${E-g}ms
`);return N.join("")}}o.StatTimer=L;function R(ht,N){try{const{protocol:S}=N?new URL(ht,N):new URL(ht);return S==="http:"||S==="https:"}catch{return!1}}function v(ht){ht.preventDefault()}function C(ht,N=!1){return new Promise((S,p)=>{const g=document.createElement("script");g.src=ht,g.onload=function(E){N&&g.remove(),S(E)},g.onerror=function(){p(new Error(`Cannot load script at: ${g.src}`))},(document.head||document.documentElement).append(g)})}function G(ht){console.log("Deprecated API usage: "+ht)}let K;class U{static toDateObject(N){if(!N||typeof N!="string")return null;K||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const S=K.exec(N);if(!S)return null;const p=parseInt(S[1],10);let g=parseInt(S[2],10);g=g>=1&&g<=12?g-1:0;let E=parseInt(S[3],10);E=E>=1&&E<=31?E:1;let I=parseInt(S[4],10);I=I>=0&&I<=23?I:0;let D=parseInt(S[5],10);D=D>=0&&D<=59?D:0;let B=parseInt(S[6],10);B=B>=0&&B<=59?B:0;const k=S[7]||"Z";let l=parseInt(S[8],10);l=l>=0&&l<=23?l:0;let y=parseInt(S[9],10)||0;return y=y>=0&&y<=59?y:0,k==="-"?(I+=l,D+=y):k==="+"&&(I-=l,D-=y),new Date(Date.UTC(p,g,E,I,D,B))}}o.PDFDateString=U;function nt(ht,{scale:N=1,rotation:S=0}){const{width:p,height:g}=ht.attributes.style,E=[0,0,parseInt(p),parseInt(g)];return new d({viewBox:E,scale:N,rotation:S})}function rt(ht){if(ht.startsWith("#")){const N=parseInt(ht.slice(1),16);return[(N&16711680)>>16,(N&65280)>>8,N&255]}return ht.startsWith("rgb(")?ht.slice(4,-1).split(",").map(N=>parseInt(N)):ht.startsWith("rgba(")?ht.slice(5,-1).split(",").map(N=>parseInt(N)).slice(0,3):((0,_.warn)(`Not a valid color format: "${ht}"`),[0,0,0])}function At(ht){const N=document.createElement("span");N.style.visibility="hidden",document.body.append(N);for(const S of ht.keys()){N.style.color=S;const p=window.getComputedStyle(N).color;ht.set(S,rt(p))}N.remove()}function pt(ht){const{a:N,b:S,c:p,d:g,e:E,f:I}=ht.getTransform();return[N,S,p,g,E,I]}function bt(ht){const{a:N,b:S,c:p,d:g,e:E,f:I}=ht.getTransform().invertSelf();return[N,S,p,g,E,I]}function wt(ht,N,S=!1,p=!0){if(N instanceof d){const{pageWidth:g,pageHeight:E}=N.rawDims,{style:I}=ht,D=_.FeatureTest.isCSSRoundSupported,B=`var(--scale-factor) * ${g}px`,k=`var(--scale-factor) * ${E}px`,l=D?`round(${B}, 1px)`:`calc(${B})`,y=D?`round(${k}, 1px)`:`calc(${k})`;!S||N.rotation%180===0?(I.width=l,I.height=y):(I.width=y,I.height=l)}p&&ht.setAttribute("data-main-rotation",N.rotation)}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseFilterFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var h=P(1);class _{constructor(){this.constructor===_&&(0,h.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,r){return"none"}addHighlightHCMFilter(t,r,f,d){return"none"}destroy(t=!1){}}o.BaseFilterFactory=_;class i{constructor(){this.constructor===i&&(0,h.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");const f=this._createCanvas(t,r);return{canvas:f,context:f.getContext("2d")}}reset(t,r,f){if(!t.canvas)throw new Error("Canvas is not specified");if(r<=0||f<=0)throw new Error("Invalid canvas size");t.canvas.width=r,t.canvas.height=f}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,r){(0,h.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=i;class M{constructor({baseUrl:t=null,isCompressed:r=!0}){this.constructor===M&&(0,h.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=r}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const r=this.baseUrl+t+(this.isCompressed?".bcmap":""),f=this.isCompressed?h.CMapCompressionType.BINARY:h.CMapCompressionType.NONE;return this._fetchData(r,f).catch(d=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})}_fetchData(t,r){(0,h.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=M;class V{constructor({baseUrl:t=null}){this.constructor===V&&(0,h.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const r=`${this.baseUrl}${t}`;return this._fetchData(r).catch(f=>{throw new Error(`Unable to load font data at: ${r}`)})}_fetchData(t){(0,h.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=V;class z{constructor(){this.constructor===z&&(0,h.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,r,f=!1){if(t<=0||r<=0)throw new Error("Invalid SVG dimensions");const d=this._createSVG("svg:svg");return d.setAttribute("version","1.1"),f||(d.setAttribute("width",`${t}px`),d.setAttribute("height",`${r}px`)),d.setAttribute("preserveAspectRatio","none"),d.setAttribute("viewBox",`0 0 ${t} ${r}`),d}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,h.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=z}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var h=P(1);const _=3285377520,i=4294901760,M=65535;class V{constructor(a){this.h1=a?a&4294967295:_,this.h2=a?a&4294967295:_}update(a){let t,r;if(typeof a=="string"){t=new Uint8Array(a.length*2),r=0;for(let G=0,K=a.length;G<K;G++){const U=a.charCodeAt(G);U<=255?t[r++]=U:(t[r++]=U>>>8,t[r++]=U&255)}}else if((0,h.isArrayBuffer)(a))t=a.slice(),r=t.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const f=r>>2,d=r-f*4,e=new Uint32Array(t.buffer,0,f);let m=0,b=0,u=this.h1,x=this.h2;const L=3432918353,R=461845907,v=L&M,C=R&M;for(let G=0;G<f;G++)G&1?(m=e[G],m=m*L&i|m*v&M,m=m<<15|m>>>17,m=m*R&i|m*C&M,u^=m,u=u<<13|u>>>19,u=u*5+3864292196):(b=e[G],b=b*L&i|b*v&M,b=b<<15|b>>>17,b=b*R&i|b*C&M,x^=b,x=x<<13|x>>>19,x=x*5+3864292196);switch(m=0,d){case 3:m^=t[f*4+2]<<16;case 2:m^=t[f*4+1]<<8;case 1:m^=t[f*4],m=m*L&i|m*v&M,m=m<<15|m>>>17,m=m*R&i|m*C&M,f&1?u^=m:x^=m}this.h1=u,this.h2=x}hexdigest(){let a=this.h1,t=this.h2;return a^=t>>>1,a=a*3981806797&i|a*36045&M,t=t*4283543511&i|((t<<16|a>>>16)*2950163797&i)>>>16,a^=t>>>1,a=a*444984403&i|a*60499&M,t=t*3301882366&i|((t<<16|a>>>16)*3120437893&i)>>>16,a^=t>>>1,(a>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}o.MurmurHash3_64=V}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var h=P(1);class _{#t=new Set;constructor({ownerDocument:V=globalThis.document,styleElement:z=null}){this._document=V,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(V){this.nativeFontFaces.add(V),this._document.fonts.add(V)}removeNativeFontFace(V){this.nativeFontFaces.delete(V),this._document.fonts.delete(V)}insertRule(V){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const z=this.styleElement.sheet;z.insertRule(V,z.cssRules.length)}clear(){for(const V of this.nativeFontFaces)this._document.fonts.delete(V);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(V){if(!(!V||this.#t.has(V.loadedName))){if((0,h.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:z,src:a,style:t}=V,r=new FontFace(z,a,t);this.addNativeFontFace(r);try{await r.load(),this.#t.add(z)}catch{(0,h.warn)(`Cannot load system font: ${V.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}(0,h.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(V){if(V.attached||V.missingFile&&!V.systemFontInfo)return;if(V.attached=!0,V.systemFontInfo){await this.loadSystemFont(V.systemFontInfo);return}if(this.isFontLoadingAPISupported){const a=V.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(t){throw(0,h.warn)(`Failed to load font '${a.family}': '${t}'.`),V.disableFontFace=!0,t}}return}const z=V.createFontFaceRule();if(z){if(this.insertRule(z),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const t=this._queueLoadingCallback(a);this._prepareFontLoadEvent(V,t)})}}get isFontLoadingAPISupported(){const V=!!this._document?.fonts;return(0,h.shadow)(this,"isFontLoadingAPISupported",V)}get isSyncFontLoadingSupported(){let V=!1;return(h.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(V=!0),(0,h.shadow)(this,"isSyncFontLoadingSupported",V)}_queueLoadingCallback(V){function z(){for((0,h.assert)(!t.done,"completeRequest() cannot be called twice."),t.done=!0;a.length>0&&a[0].done;){const r=a.shift();setTimeout(r.callback,0)}}const{loadingRequests:a}=this,t={done:!1,complete:z,callback:V};return a.push(t),t}get _loadTestFont(){const V=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,h.shadow)(this,"_loadTestFont",V)}_prepareFontLoadEvent(V,z){function a(nt,rt){return nt.charCodeAt(rt)<<24|nt.charCodeAt(rt+1)<<16|nt.charCodeAt(rt+2)<<8|nt.charCodeAt(rt+3)&255}function t(nt,rt,At,pt){const bt=nt.substring(0,rt),wt=nt.substring(rt+At);return bt+pt+wt}let r,f;const d=this._document.createElement("canvas");d.width=1,d.height=1;const e=d.getContext("2d");let m=0;function b(nt,rt){if(++m>30){(0,h.warn)("Load test font never loaded."),rt();return}if(e.font="30px "+nt,e.fillText(".",0,20),e.getImageData(0,0,1,1).data[3]>0){rt();return}setTimeout(b.bind(null,nt,rt))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=t(x,976,u.length,u);const R=16,v=1482184792;let C=a(x,R);for(r=0,f=u.length-3;r<f;r+=4)C=C-v+a(u,r)|0;r<u.length&&(C=C-v+a(u+"XXX",r)|0),x=t(x,R,4,(0,h.string32)(C));const G=`url(data:font/opentype;base64,${btoa(x)});`,K=`@font-face {font-family:"${u}";src:${G}}`;this.insertRule(K);const U=this._document.createElement("div");U.style.visibility="hidden",U.style.width=U.style.height="10px",U.style.position="absolute",U.style.top=U.style.left="0px";for(const nt of[V.loadedName,u]){const rt=this._document.createElement("span");rt.textContent="Hi",rt.style.fontFamily=nt,U.append(rt)}this._document.body.append(U),b(u,()=>{U.remove(),z.complete()})}}o.FontLoader=_;class i{constructor(V,{isEvalSupported:z=!0,disableFontFace:a=!1,ignoreErrors:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const f in V)this[f]=V[f];this.isEvalSupported=z!==!1,this.disableFontFace=a===!0,this.ignoreErrors=t===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let V;if(!this.cssFontInfo)V=new FontFace(this.loadedName,this.data,{});else{const z={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(z.style=`oblique ${this.cssFontInfo.italicAngle}deg`),V=new FontFace(this.cssFontInfo.fontFamily,this.data,z)}return this._inspectFont?.(this),V}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const V=(0,h.bytesToString)(this.data),z=`url(data:${this.mimetype};base64,${btoa(V)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${z}}`;else{let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${z}}`}return this._inspectFont?.(this,z),a}getPathGenerator(V,z){if(this.compiledGlyphs[z]!==void 0)return this.compiledGlyphs[z];let a;try{a=V.get(this.loadedName+"_path_"+z)}catch(t){if(!this.ignoreErrors)throw t;return(0,h.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[z]=function(r,f){}}if(this.isEvalSupported&&h.FeatureTest.isEvalSupported){const t=[];for(const r of a){const f=r.args!==void 0?r.args.join(","):"";t.push("c.",r.cmd,"(",f,`);
`)}return this.compiledGlyphs[z]=new Function("c","size",t.join(""))}return this.compiledGlyphs[z]=function(t,r){for(const f of a)f.cmd==="scale"&&(f.args=[r,-r]),t[f.cmd].apply(t,f.args)}}}o.FontFaceObject=i}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeFilterFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var h=P(7);P(1);const _=function(a){return new Promise((t,r)=>{require$$5.readFile(a,(d,e)=>{if(d||!e){r(new Error(d));return}t(new Uint8Array(e))})})};class i extends h.BaseFilterFactory{}o.NodeFilterFactory=i;class M extends h.BaseCanvasFactory{_createCanvas(t,r){return require$$5.createCanvas(t,r)}}o.NodeCanvasFactory=M;class V extends h.BaseCMapReaderFactory{_fetchData(t,r){return _(t).then(f=>({cMapData:f,compressionType:r}))}}o.NodeCMapReaderFactory=V;class z extends h.BaseStandardFontDataFactory{_fetchData(t){return _(t)}}o.NodeStandardFontDataFactory=z}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var h=P(1),_=P(6),i=P(12),M=P(13);const V=16,z=100,a=4096,t=15,r=10,f=1e3,d=16;function e(S,p){if(S._removeMirroring)throw new Error("Context is already forwarding operations.");S.__originalSave=S.save,S.__originalRestore=S.restore,S.__originalRotate=S.rotate,S.__originalScale=S.scale,S.__originalTranslate=S.translate,S.__originalTransform=S.transform,S.__originalSetTransform=S.setTransform,S.__originalResetTransform=S.resetTransform,S.__originalClip=S.clip,S.__originalMoveTo=S.moveTo,S.__originalLineTo=S.lineTo,S.__originalBezierCurveTo=S.bezierCurveTo,S.__originalRect=S.rect,S.__originalClosePath=S.closePath,S.__originalBeginPath=S.beginPath,S._removeMirroring=()=>{S.save=S.__originalSave,S.restore=S.__originalRestore,S.rotate=S.__originalRotate,S.scale=S.__originalScale,S.translate=S.__originalTranslate,S.transform=S.__originalTransform,S.setTransform=S.__originalSetTransform,S.resetTransform=S.__originalResetTransform,S.clip=S.__originalClip,S.moveTo=S.__originalMoveTo,S.lineTo=S.__originalLineTo,S.bezierCurveTo=S.__originalBezierCurveTo,S.rect=S.__originalRect,S.closePath=S.__originalClosePath,S.beginPath=S.__originalBeginPath,delete S._removeMirroring},S.save=function(){p.save(),this.__originalSave()},S.restore=function(){p.restore(),this.__originalRestore()},S.translate=function(E,I){p.translate(E,I),this.__originalTranslate(E,I)},S.scale=function(E,I){p.scale(E,I),this.__originalScale(E,I)},S.transform=function(E,I,D,B,k,l){p.transform(E,I,D,B,k,l),this.__originalTransform(E,I,D,B,k,l)},S.setTransform=function(E,I,D,B,k,l){p.setTransform(E,I,D,B,k,l),this.__originalSetTransform(E,I,D,B,k,l)},S.resetTransform=function(){p.resetTransform(),this.__originalResetTransform()},S.rotate=function(E){p.rotate(E),this.__originalRotate(E)},S.clip=function(E){p.clip(E),this.__originalClip(E)},S.moveTo=function(g,E){p.moveTo(g,E),this.__originalMoveTo(g,E)},S.lineTo=function(g,E){p.lineTo(g,E),this.__originalLineTo(g,E)},S.bezierCurveTo=function(g,E,I,D,B,k){p.bezierCurveTo(g,E,I,D,B,k),this.__originalBezierCurveTo(g,E,I,D,B,k)},S.rect=function(g,E,I,D){p.rect(g,E,I,D),this.__originalRect(g,E,I,D)},S.closePath=function(){p.closePath(),this.__originalClosePath()},S.beginPath=function(){p.beginPath(),this.__originalBeginPath()}}class m{constructor(p){this.canvasFactory=p,this.cache=Object.create(null)}getCanvas(p,g,E){let I;return this.cache[p]!==void 0?(I=this.cache[p],this.canvasFactory.reset(I,g,E)):(I=this.canvasFactory.create(g,E),this.cache[p]=I),I}delete(p){delete this.cache[p]}clear(){for(const p in this.cache){const g=this.cache[p];this.canvasFactory.destroy(g),delete this.cache[p]}}}function b(S,p,g,E,I,D,B,k,l,y){const[w,T,F,W,Y,st]=(0,_.getCurrentTransform)(S);if(T===0&&F===0){const ot=B*w+Y,lt=Math.round(ot),ct=k*W+st,gt=Math.round(ct),Ct=(B+l)*w+Y,Mt=Math.abs(Math.round(Ct)-lt)||1,Ot=(k+y)*W+st,Ut=Math.abs(Math.round(Ot)-gt)||1;return S.setTransform(Math.sign(w),0,0,Math.sign(W),lt,gt),S.drawImage(p,g,E,I,D,0,0,Mt,Ut),S.setTransform(w,T,F,W,Y,st),[Mt,Ut]}if(w===0&&W===0){const ot=k*F+Y,lt=Math.round(ot),ct=B*T+st,gt=Math.round(ct),Ct=(k+y)*F+Y,Mt=Math.abs(Math.round(Ct)-lt)||1,Ot=(B+l)*T+st,Ut=Math.abs(Math.round(Ot)-gt)||1;return S.setTransform(0,Math.sign(T),Math.sign(F),0,lt,gt),S.drawImage(p,g,E,I,D,0,0,Ut,Mt),S.setTransform(w,T,F,W,Y,st),[Ut,Mt]}S.drawImage(p,g,E,I,D,B,k,l,y);const Et=Math.hypot(w,T),at=Math.hypot(F,W);return[Et*l,at*y]}function u(S){const{width:p,height:g}=S;if(p>f||g>f)return null;const E=1e3,I=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),D=p+1;let B=new Uint8Array(D*(g+1)),k,l,y;const w=p+7&-8;let T=new Uint8Array(w*g),F=0;for(const at of S.data){let ot=128;for(;ot>0;)T[F++]=at&ot?0:255,ot>>=1}let W=0;for(F=0,T[F]!==0&&(B[0]=1,++W),l=1;l<p;l++)T[F]!==T[F+1]&&(B[l]=T[F]?2:1,++W),F++;for(T[F]!==0&&(B[l]=2,++W),k=1;k<g;k++){F=k*w,y=k*D,T[F-w]!==T[F]&&(B[y]=T[F]?1:8,++W);let at=(T[F]?4:0)+(T[F-w]?8:0);for(l=1;l<p;l++)at=(at>>2)+(T[F+1]?4:0)+(T[F-w+1]?8:0),I[at]&&(B[y+l]=I[at],++W),F++;if(T[F-w]!==T[F]&&(B[y+l]=T[F]?2:4,++W),W>E)return null}for(F=w*(g-1),y=k*D,T[F]!==0&&(B[y]=8,++W),l=1;l<p;l++)T[F]!==T[F+1]&&(B[y+l]=T[F]?4:8,++W),F++;if(T[F]!==0&&(B[y+l]=4,++W),W>E)return null;const Y=new Int32Array([0,D,-1,0,-D,0,0,0,1]),st=new Path2D;for(k=0;W&&k<=g;k++){let at=k*D;const ot=at+p;for(;at<ot&&!B[at];)at++;if(at===ot)continue;st.moveTo(at%D,k);const lt=at;let ct=B[at];do{const gt=Y[ct];do at+=gt;while(!B[at]);const Ct=B[at];Ct!==5&&Ct!==10?(ct=Ct,B[at]=0):(ct=Ct&51*ct>>4,B[at]&=ct>>2|ct<<2),st.lineTo(at%D,at/D|0),B[at]||--W}while(lt!==at);--k}return T=null,B=null,function(at){at.save(),at.scale(1/p,-1/g),at.translate(0,-g),at.fill(st),at.beginPath(),at.restore()}}class x{constructor(p,g){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=h.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=h.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,p,g])}clone(){const p=Object.create(this);return p.clipBox=this.clipBox.slice(),p}setCurrentPoint(p,g){this.x=p,this.y=g}updatePathMinMax(p,g,E){[g,E]=h.Util.applyTransform([g,E],p),this.minX=Math.min(this.minX,g),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,g),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(p,g){const E=h.Util.applyTransform(g,p),I=h.Util.applyTransform(g.slice(2),p);this.minX=Math.min(this.minX,E[0],I[0]),this.minY=Math.min(this.minY,E[1],I[1]),this.maxX=Math.max(this.maxX,E[0],I[0]),this.maxY=Math.max(this.maxY,E[1],I[1])}updateScalingPathMinMax(p,g){h.Util.scaleMinMax(p,g),this.minX=Math.min(this.minX,g[0]),this.maxX=Math.max(this.maxX,g[1]),this.minY=Math.min(this.minY,g[2]),this.maxY=Math.max(this.maxY,g[3])}updateCurvePathMinMax(p,g,E,I,D,B,k,l,y,w){const T=h.Util.bezierBoundingBox(g,E,I,D,B,k,l,y);if(w){w[0]=Math.min(w[0],T[0],T[2]),w[1]=Math.max(w[1],T[0],T[2]),w[2]=Math.min(w[2],T[1],T[3]),w[3]=Math.max(w[3],T[1],T[3]);return}this.updateRectMinMax(p,T)}getPathBoundingBox(p=i.PathType.FILL,g=null){const E=[this.minX,this.minY,this.maxX,this.maxY];if(p===i.PathType.STROKE){g||(0,h.unreachable)("Stroke bounding box must include transform.");const I=h.Util.singularValueDecompose2dScale(g),D=I[0]*this.lineWidth/2,B=I[1]*this.lineWidth/2;E[0]-=D,E[1]-=B,E[2]+=D,E[3]+=B}return E}updateClipFromPath(){const p=h.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(p||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(p){this.clipBox=p,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(p=i.PathType.FILL,g=null){return h.Util.intersect(this.clipBox,this.getPathBoundingBox(p,g))}}function L(S,p){if(typeof ImageData<"u"&&p instanceof ImageData){S.putImageData(p,0,0);return}const g=p.height,E=p.width,I=g%d,D=(g-I)/d,B=I===0?D:D+1,k=S.createImageData(E,d);let l=0,y;const w=p.data,T=k.data;let F,W,Y,st;if(p.kind===h.ImageKind.GRAYSCALE_1BPP){const Et=w.byteLength,at=new Uint32Array(T.buffer,0,T.byteLength>>2),ot=at.length,lt=E+7>>3,ct=4294967295,gt=h.FeatureTest.isLittleEndian?4278190080:255;for(F=0;F<B;F++){for(Y=F<D?d:I,y=0,W=0;W<Y;W++){const Ct=Et-l;let Mt=0;const Ot=Ct>lt?E:Ct*8-7,Ut=Ot&-8;let Wt=0,ee=0;for(;Mt<Ut;Mt+=8)ee=w[l++],at[y++]=ee&128?ct:gt,at[y++]=ee&64?ct:gt,at[y++]=ee&32?ct:gt,at[y++]=ee&16?ct:gt,at[y++]=ee&8?ct:gt,at[y++]=ee&4?ct:gt,at[y++]=ee&2?ct:gt,at[y++]=ee&1?ct:gt;for(;Mt<Ot;Mt++)Wt===0&&(ee=w[l++],Wt=128),at[y++]=ee&Wt?ct:gt,Wt>>=1}for(;y<ot;)at[y++]=0;S.putImageData(k,0,F*d)}}else if(p.kind===h.ImageKind.RGBA_32BPP){for(W=0,st=E*d*4,F=0;F<D;F++)T.set(w.subarray(l,l+st)),l+=st,S.putImageData(k,0,W),W+=d;F<B&&(st=E*I*4,T.set(w.subarray(l,l+st)),S.putImageData(k,0,W))}else if(p.kind===h.ImageKind.RGB_24BPP)for(Y=d,st=E*Y,F=0;F<B;F++){for(F>=D&&(Y=I,st=E*Y),y=0,W=st;W--;)T[y++]=w[l++],T[y++]=w[l++],T[y++]=w[l++],T[y++]=255;S.putImageData(k,0,F*d)}else throw new Error(`bad image kind: ${p.kind}`)}function R(S,p){if(p.bitmap){S.drawImage(p.bitmap,0,0);return}const g=p.height,E=p.width,I=g%d,D=(g-I)/d,B=I===0?D:D+1,k=S.createImageData(E,d);let l=0;const y=p.data,w=k.data;for(let T=0;T<B;T++){const F=T<D?d:I;({srcPos:l}=(0,M.convertBlackAndWhiteToRGBA)({src:y,srcPos:l,dest:w,width:E,height:F,nonBlackColor:0})),S.putImageData(k,0,T*d)}}function v(S,p){const g=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const E of g)S[E]!==void 0&&(p[E]=S[E]);S.setLineDash!==void 0&&(p.setLineDash(S.getLineDash()),p.lineDashOffset=S.lineDashOffset)}function C(S){if(S.strokeStyle=S.fillStyle="#000000",S.fillRule="nonzero",S.globalAlpha=1,S.lineWidth=1,S.lineCap="butt",S.lineJoin="miter",S.miterLimit=10,S.globalCompositeOperation="source-over",S.font="10px sans-serif",S.setLineDash!==void 0&&(S.setLineDash([]),S.lineDashOffset=0),!h.isNodeJS){const{filter:p}=S;p!=="none"&&p!==""&&(S.filter="none")}}function G(S,p,g,E){const I=S.length;for(let D=3;D<I;D+=4){const B=S[D];if(B===0)S[D-3]=p,S[D-2]=g,S[D-1]=E;else if(B<255){const k=255-B;S[D-3]=S[D-3]*B+p*k>>8,S[D-2]=S[D-2]*B+g*k>>8,S[D-1]=S[D-1]*B+E*k>>8}}}function K(S,p,g){const E=S.length,I=1/255;for(let D=3;D<E;D+=4){const B=g?g[S[D]]:S[D];p[D]=p[D]*B*I|0}}function U(S,p,g){const E=S.length;for(let I=3;I<E;I+=4){const D=S[I-3]*77+S[I-2]*152+S[I-1]*28;p[I]=g?p[I]*g[D>>8]>>8:p[I]*D>>16}}function nt(S,p,g,E,I,D,B,k,l,y,w){const T=!!D,F=T?D[0]:0,W=T?D[1]:0,Y=T?D[2]:0,st=I==="Luminosity"?U:K,at=Math.min(E,Math.ceil(1048576/g));for(let ot=0;ot<E;ot+=at){const lt=Math.min(at,E-ot),ct=S.getImageData(k-y,ot+(l-w),g,lt),gt=p.getImageData(k,ot+l,g,lt);T&&G(ct.data,F,W,Y),st(ct.data,gt.data,B),p.putImageData(gt,k,ot+l)}}function rt(S,p,g,E){const I=E[0],D=E[1],B=E[2]-I,k=E[3]-D;B===0||k===0||(nt(p.context,g,B,k,p.subtype,p.backdrop,p.transferMap,I,D,p.offsetX,p.offsetY),S.save(),S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),S.drawImage(g.canvas,0,0),S.restore())}function At(S,p){const g=h.Util.singularValueDecompose2dScale(S);g[0]=Math.fround(g[0]),g[1]=Math.fround(g[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*_.PixelsPerInch.PDF_TO_CSS_UNITS);return p!==void 0?p:g[0]<=E||g[1]<=E}const pt=["butt","round","square"],bt=["miter","round","bevel"],wt={},ht={};class N{constructor(p,g,E,I,D,{optionalContentConfig:B,markedContentStack:k=null},l,y){this.ctx=p,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=g,this.objs=E,this.canvasFactory=I,this.filterFactory=D,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=k||[],this.optionalContentConfig=B,this.cachedCanvases=new m(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=y,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(p,g=null){return typeof p=="string"?p.startsWith("g_")?this.commonObjs.get(p):this.objs.get(p):g}beginDrawing({transform:p,viewport:g,transparency:E=!1,background:I=null}){const D=this.ctx.canvas.width,B=this.ctx.canvas.height,k=this.ctx.fillStyle;if(this.ctx.fillStyle=I||"#ffffff",this.ctx.fillRect(0,0,D,B),this.ctx.fillStyle=k,E){const l=this.cachedCanvases.getCanvas("transparent",D,B);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...(0,_.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),C(this.ctx),p&&(this.ctx.transform(...p),this.outputScaleX=p[0],this.outputScaleY=p[0]),this.ctx.transform(...g.transform),this.viewportScale=g.scale,this.baseTransform=(0,_.getCurrentTransform)(this.ctx)}executeOperatorList(p,g,E,I){const D=p.argsArray,B=p.fnArray;let k=g||0;const l=D.length;if(l===k)return k;const y=l-k>r&&typeof E=="function",w=y?Date.now()+t:0;let T=0;const F=this.commonObjs,W=this.objs;let Y;for(;;){if(I!==void 0&&k===I.nextBreakPoint)return I.breakIt(k,E),k;if(Y=B[k],Y!==h.OPS.dependency)this[Y].apply(this,D[k]);else for(const st of D[k]){const Et=st.startsWith("g_")?F:W;if(!Et.has(st))return Et.get(st,E),k}if(k++,k===l)return k;if(y&&++T>r){if(Date.now()>w)return E(),k;T=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const p of this._cachedBitmapsMap.values()){for(const g of p.values())typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement&&(g.width=g.height=0);p.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const p=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(p!=="none"){const g=this.ctx.filter;this.ctx.filter=p,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=g}}}_scaleImage(p,g){const E=p.width,I=p.height;let D=Math.max(Math.hypot(g[0],g[1]),1),B=Math.max(Math.hypot(g[2],g[3]),1),k=E,l=I,y="prescale1",w,T;for(;D>2&&k>1||B>2&&l>1;){let F=k,W=l;D>2&&k>1&&(F=k>=16384?Math.floor(k/2)-1||1:Math.ceil(k/2),D/=k/F),B>2&&l>1&&(W=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,B/=l/W),w=this.cachedCanvases.getCanvas(y,F,W),T=w.context,T.clearRect(0,0,F,W),T.drawImage(p,0,0,k,l,0,0,F,W),p=w.canvas,k=F,l=W,y=y==="prescale1"?"prescale2":"prescale1"}return{img:p,paintWidth:k,paintHeight:l}}_createMaskCanvas(p){const g=this.ctx,{width:E,height:I}=p,D=this.current.fillColor,B=this.current.patternFill,k=(0,_.getCurrentTransform)(g);let l,y,w,T;if((p.bitmap||p.data)&&p.count>1){const Mt=p.bitmap||p.data.buffer;y=JSON.stringify(B?k:[k.slice(0,4),D]),l=this._cachedBitmapsMap.get(Mt),l||(l=new Map,this._cachedBitmapsMap.set(Mt,l));const Ot=l.get(y);if(Ot&&!B){const Ut=Math.round(Math.min(k[0],k[2])+k[4]),Wt=Math.round(Math.min(k[1],k[3])+k[5]);return{canvas:Ot,offsetX:Ut,offsetY:Wt}}w=Ot}w||(T=this.cachedCanvases.getCanvas("maskCanvas",E,I),R(T.context,p));let F=h.Util.transform(k,[1/E,0,0,-1/I,0,0]);F=h.Util.transform(F,[1,0,0,1,0,-I]);const W=h.Util.applyTransform([0,0],F),Y=h.Util.applyTransform([E,I],F),st=h.Util.normalizeRect([W[0],W[1],Y[0],Y[1]]),Et=Math.round(st[2]-st[0])||1,at=Math.round(st[3]-st[1])||1,ot=this.cachedCanvases.getCanvas("fillCanvas",Et,at),lt=ot.context,ct=Math.min(W[0],Y[0]),gt=Math.min(W[1],Y[1]);lt.translate(-ct,-gt),lt.transform(...F),w||(w=this._scaleImage(T.canvas,(0,_.getCurrentTransformInverse)(lt)),w=w.img,l&&B&&l.set(y,w)),lt.imageSmoothingEnabled=At((0,_.getCurrentTransform)(lt),p.interpolate),b(lt,w,0,0,w.width,w.height,0,0,E,I),lt.globalCompositeOperation="source-in";const Ct=h.Util.transform((0,_.getCurrentTransformInverse)(lt),[1,0,0,1,-ct,-gt]);return lt.fillStyle=B?D.getPattern(g,this,Ct,i.PathType.FILL):D,lt.fillRect(0,0,E,I),l&&!B&&(this.cachedCanvases.delete("fillCanvas"),l.set(y,ot.canvas)),{canvas:ot.canvas,offsetX:Math.round(ct),offsetY:Math.round(gt)}}setLineWidth(p){p!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=p,this.ctx.lineWidth=p}setLineCap(p){this.ctx.lineCap=pt[p]}setLineJoin(p){this.ctx.lineJoin=bt[p]}setMiterLimit(p){this.ctx.miterLimit=p}setDash(p,g){const E=this.ctx;E.setLineDash!==void 0&&(E.setLineDash(p),E.lineDashOffset=g)}setRenderingIntent(p){}setFlatness(p){}setGState(p){for(const[g,E]of p)switch(g){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=E;break;case"ca":this.current.fillAlpha=E,this.ctx.globalAlpha=E;break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(E);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const p=this.inSMaskMode;this.current.activeSMask&&!p?this.beginSMaskMode():!this.current.activeSMask&&p&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const p=this.ctx.canvas.width,g=this.ctx.canvas.height,E="smaskGroupAt"+this.groupLevel,I=this.cachedCanvases.getCanvas(E,p,g);this.suspendedCtx=this.ctx,this.ctx=I.context;const D=this.ctx;D.setTransform(...(0,_.getCurrentTransform)(this.suspendedCtx)),v(this.suspendedCtx,D),e(D,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),v(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(p){if(!this.current.activeSMask)return;p?(p[0]=Math.floor(p[0]),p[1]=Math.floor(p[1]),p[2]=Math.ceil(p[2]),p[3]=Math.ceil(p[3])):p=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const g=this.current.activeSMask,E=this.suspendedCtx;rt(E,g,this.ctx,p),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(v(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const p=this.current;this.stateStack.push(p),this.current=p.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),v(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(p,g,E,I,D,B){this.ctx.transform(p,g,E,I,D,B),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(p,g,E){const I=this.ctx,D=this.current;let B=D.x,k=D.y,l,y;const w=(0,_.getCurrentTransform)(I),T=w[0]===0&&w[3]===0||w[1]===0&&w[2]===0,F=T?E.slice(0):null;for(let W=0,Y=0,st=p.length;W<st;W++)switch(p[W]|0){case h.OPS.rectangle:B=g[Y++],k=g[Y++];const Et=g[Y++],at=g[Y++],ot=B+Et,lt=k+at;I.moveTo(B,k),Et===0||at===0?I.lineTo(ot,lt):(I.lineTo(ot,k),I.lineTo(ot,lt),I.lineTo(B,lt)),T||D.updateRectMinMax(w,[B,k,ot,lt]),I.closePath();break;case h.OPS.moveTo:B=g[Y++],k=g[Y++],I.moveTo(B,k),T||D.updatePathMinMax(w,B,k);break;case h.OPS.lineTo:B=g[Y++],k=g[Y++],I.lineTo(B,k),T||D.updatePathMinMax(w,B,k);break;case h.OPS.curveTo:l=B,y=k,B=g[Y+4],k=g[Y+5],I.bezierCurveTo(g[Y],g[Y+1],g[Y+2],g[Y+3],B,k),D.updateCurvePathMinMax(w,l,y,g[Y],g[Y+1],g[Y+2],g[Y+3],B,k,F),Y+=6;break;case h.OPS.curveTo2:l=B,y=k,I.bezierCurveTo(B,k,g[Y],g[Y+1],g[Y+2],g[Y+3]),D.updateCurvePathMinMax(w,l,y,B,k,g[Y],g[Y+1],g[Y+2],g[Y+3],F),B=g[Y+2],k=g[Y+3],Y+=4;break;case h.OPS.curveTo3:l=B,y=k,B=g[Y+2],k=g[Y+3],I.bezierCurveTo(g[Y],g[Y+1],B,k,B,k),D.updateCurvePathMinMax(w,l,y,g[Y],g[Y+1],B,k,B,k,F),Y+=4;break;case h.OPS.closePath:I.closePath();break}T&&D.updateScalingPathMinMax(w,F),D.setCurrentPoint(B,k)}closePath(){this.ctx.closePath()}stroke(p=!0){const g=this.ctx,E=this.current.strokeColor;g.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof E=="object"&&E?.getPattern?(g.save(),g.strokeStyle=E.getPattern(g,this,(0,_.getCurrentTransformInverse)(g),i.PathType.STROKE),this.rescaleAndStroke(!1),g.restore()):this.rescaleAndStroke(!0)),p&&this.consumePath(this.current.getClippedPathBoundingBox()),g.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(p=!0){const g=this.ctx,E=this.current.fillColor,I=this.current.patternFill;let D=!1;I&&(g.save(),g.fillStyle=E.getPattern(g,this,(0,_.getCurrentTransformInverse)(g),i.PathType.FILL),D=!0);const B=this.current.getClippedPathBoundingBox();this.contentVisible&&B!==null&&(this.pendingEOFill?(g.fill("evenodd"),this.pendingEOFill=!1):g.fill()),D&&g.restore(),p&&this.consumePath(B)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=wt}eoClip(){this.pendingClip=ht}beginText(){this.current.textMatrix=h.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const p=this.pendingTextPaths,g=this.ctx;if(p===void 0){g.beginPath();return}g.save(),g.beginPath();for(const E of p)g.setTransform(...E.transform),g.translate(E.x,E.y),E.addToPath(g,E.fontSize);g.restore(),g.clip(),g.beginPath(),delete this.pendingTextPaths}setCharSpacing(p){this.current.charSpacing=p}setWordSpacing(p){this.current.wordSpacing=p}setHScale(p){this.current.textHScale=p/100}setLeading(p){this.current.leading=-p}setFont(p,g){const E=this.commonObjs.get(p),I=this.current;if(!E)throw new Error(`Can't find font for ${p}`);if(I.fontMatrix=E.fontMatrix||h.FONT_IDENTITY_MATRIX,(I.fontMatrix[0]===0||I.fontMatrix[3]===0)&&(0,h.warn)("Invalid font matrix for font "+p),g<0?(g=-g,I.fontDirection=-1):I.fontDirection=1,this.current.font=E,this.current.fontSize=g,E.isType3Font)return;const D=E.loadedName||"sans-serif",B=E.systemFontInfo?.css||`"${D}", ${E.fallbackName}`;let k="normal";E.black?k="900":E.bold&&(k="bold");const l=E.italic?"italic":"normal";let y=g;g<V?y=V:g>z&&(y=z),this.current.fontSizeScale=g/y,this.ctx.font=`${l} ${k} ${y}px ${B}`}setTextRenderingMode(p){this.current.textRenderingMode=p}setTextRise(p){this.current.textRise=p}moveText(p,g){this.current.x=this.current.lineX+=p,this.current.y=this.current.lineY+=g}setLeadingMoveText(p,g){this.setLeading(-g),this.moveText(p,g)}setTextMatrix(p,g,E,I,D,B){this.current.textMatrix=[p,g,E,I,D,B],this.current.textMatrixScale=Math.hypot(p,g),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(p,g,E,I){const D=this.ctx,B=this.current,k=B.font,l=B.textRenderingMode,y=B.fontSize/B.fontSizeScale,w=l&h.TextRenderingMode.FILL_STROKE_MASK,T=!!(l&h.TextRenderingMode.ADD_TO_PATH_FLAG),F=B.patternFill&&!k.missingFile;let W;(k.disableFontFace||T||F)&&(W=k.getPathGenerator(this.commonObjs,p)),k.disableFontFace||F?(D.save(),D.translate(g,E),D.beginPath(),W(D,y),I&&D.setTransform(...I),(w===h.TextRenderingMode.FILL||w===h.TextRenderingMode.FILL_STROKE)&&D.fill(),(w===h.TextRenderingMode.STROKE||w===h.TextRenderingMode.FILL_STROKE)&&D.stroke(),D.restore()):((w===h.TextRenderingMode.FILL||w===h.TextRenderingMode.FILL_STROKE)&&D.fillText(p,g,E),(w===h.TextRenderingMode.STROKE||w===h.TextRenderingMode.FILL_STROKE)&&D.strokeText(p,g,E)),T&&(this.pendingTextPaths||=[]).push({transform:(0,_.getCurrentTransform)(D),x:g,y:E,fontSize:y,addToPath:W})}get isFontSubpixelAAEnabled(){const{context:p}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);p.scale(1.5,1),p.fillText("I",0,10);const g=p.getImageData(0,0,10,10).data;let E=!1;for(let I=3;I<g.length;I+=4)if(g[I]>0&&g[I]<255){E=!0;break}return(0,h.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(p){const g=this.current,E=g.font;if(E.isType3Font)return this.showType3Text(p);const I=g.fontSize;if(I===0)return;const D=this.ctx,B=g.fontSizeScale,k=g.charSpacing,l=g.wordSpacing,y=g.fontDirection,w=g.textHScale*y,T=p.length,F=E.vertical,W=F?1:-1,Y=E.defaultVMetrics,st=I*g.fontMatrix[0],Et=g.textRenderingMode===h.TextRenderingMode.FILL&&!E.disableFontFace&&!g.patternFill;D.save(),D.transform(...g.textMatrix),D.translate(g.x,g.y+g.textRise),y>0?D.scale(w,-1):D.scale(w,1);let at;if(g.patternFill){D.save();const Ct=g.fillColor.getPattern(D,this,(0,_.getCurrentTransformInverse)(D),i.PathType.FILL);at=(0,_.getCurrentTransform)(D),D.restore(),D.fillStyle=Ct}let ot=g.lineWidth;const lt=g.textMatrixScale;if(lt===0||ot===0){const Ct=g.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;(Ct===h.TextRenderingMode.STROKE||Ct===h.TextRenderingMode.FILL_STROKE)&&(ot=this.getSinglePixelWidth())}else ot/=lt;if(B!==1&&(D.scale(B,B),ot/=B),D.lineWidth=ot,E.isInvalidPDFjsFont){const Ct=[];let Mt=0;for(const Ot of p)Ct.push(Ot.unicode),Mt+=Ot.width;D.fillText(Ct.join(""),0,0),g.x+=Mt*st*w,D.restore(),this.compose();return}let ct=0,gt;for(gt=0;gt<T;++gt){const Ct=p[gt];if(typeof Ct=="number"){ct+=W*Ct*I/1e3;continue}let Mt=!1;const Ot=(Ct.isSpace?l:0)+k,Ut=Ct.fontChar,Wt=Ct.accent;let ee,Zt,fe=Ct.width;if(F){const Ae=Ct.vmetric||Y,Fe=-(Ct.vmetric?Ae[1]:fe*.5)*st,je=Ae[2]*st;fe=Ae?-Ae[0]:fe,ee=Fe/B,Zt=(ct+je)/B}else ee=ct/B,Zt=0;if(E.remeasure&&fe>0){const Ae=D.measureText(Ut).width*1e3/I*B;if(fe<Ae&&this.isFontSubpixelAAEnabled){const Fe=fe/Ae;Mt=!0,D.save(),D.scale(Fe,1),ee/=Fe}else fe!==Ae&&(ee+=(fe-Ae)/2e3*I/B)}if(this.contentVisible&&(Ct.isInFont||E.missingFile)){if(Et&&!Wt)D.fillText(Ut,ee,Zt);else if(this.paintChar(Ut,ee,Zt,at),Wt){const Ae=ee+I*Wt.offset.x/B,Fe=Zt-I*Wt.offset.y/B;this.paintChar(Wt.fontChar,Ae,Fe,at)}}const Ie=F?fe*st-Ot*y:fe*st+Ot*y;ct+=Ie,Mt&&D.restore()}F?g.y-=ct:g.x+=ct*w,D.restore(),this.compose()}showType3Text(p){const g=this.ctx,E=this.current,I=E.font,D=E.fontSize,B=E.fontDirection,k=I.vertical?1:-1,l=E.charSpacing,y=E.wordSpacing,w=E.textHScale*B,T=E.fontMatrix||h.FONT_IDENTITY_MATRIX,F=p.length,W=E.textRenderingMode===h.TextRenderingMode.INVISIBLE;let Y,st,Et,at;if(!(W||D===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,g.save(),g.transform(...E.textMatrix),g.translate(E.x,E.y),g.scale(w,B),Y=0;Y<F;++Y){if(st=p[Y],typeof st=="number"){at=k*st*D/1e3,this.ctx.translate(at,0),E.x+=at*w;continue}const ot=(st.isSpace?y:0)+l,lt=I.charProcOperatorList[st.operatorListId];if(!lt){(0,h.warn)(`Type3 character "${st.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=st,this.save(),g.scale(D,D),g.transform(...T),this.executeOperatorList(lt),this.restore()),Et=h.Util.applyTransform([st.width,0],T)[0]*D+ot,g.translate(Et,0),E.x+=Et*w}g.restore(),this.processingType3=null}}setCharWidth(p,g){}setCharWidthAndBounds(p,g,E,I,D,B){this.ctx.rect(E,I,D-E,B-I),this.ctx.clip(),this.endPath()}getColorN_Pattern(p){let g;if(p[0]==="TilingPattern"){const E=p[1],I=this.baseTransform||(0,_.getCurrentTransform)(this.ctx),D={createCanvasGraphics:B=>new N(B,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};g=new i.TilingPattern(p,E,this.ctx,D,I)}else g=this._getPattern(p[1],p[2]);return g}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(p,g,E){const I=h.Util.makeHexColor(p,g,E);this.ctx.strokeStyle=I,this.current.strokeColor=I}setFillRGBColor(p,g,E){const I=h.Util.makeHexColor(p,g,E);this.ctx.fillStyle=I,this.current.fillColor=I,this.current.patternFill=!1}_getPattern(p,g=null){let E;return this.cachedPatterns.has(p)?E=this.cachedPatterns.get(p):(E=(0,i.getShadingPattern)(this.getObject(p)),this.cachedPatterns.set(p,E)),g&&(E.matrix=g),E}shadingFill(p){if(!this.contentVisible)return;const g=this.ctx;this.save();const E=this._getPattern(p);g.fillStyle=E.getPattern(g,this,(0,_.getCurrentTransformInverse)(g),i.PathType.SHADING);const I=(0,_.getCurrentTransformInverse)(g);if(I){const{width:D,height:B}=g.canvas,[k,l,y,w]=h.Util.getAxialAlignedBoundingBox([0,0,D,B],I);this.ctx.fillRect(k,l,y-k,w-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,h.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,h.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(p,g){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(p)&&p.length===6&&this.transform(...p),this.baseTransform=(0,_.getCurrentTransform)(this.ctx),g)){const E=g[2]-g[0],I=g[3]-g[1];this.ctx.rect(g[0],g[1],E,I),this.current.updateRectMinMax((0,_.getCurrentTransform)(this.ctx),g),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(p){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const g=this.ctx;p.isolated||(0,h.info)("TODO: Support non-isolated groups."),p.knockout&&(0,h.warn)("Knockout groups not supported.");const E=(0,_.getCurrentTransform)(g);if(p.matrix&&g.transform(...p.matrix),!p.bbox)throw new Error("Bounding box is required.");let I=h.Util.getAxialAlignedBoundingBox(p.bbox,(0,_.getCurrentTransform)(g));const D=[0,0,g.canvas.width,g.canvas.height];I=h.Util.intersect(I,D)||[0,0,0,0];const B=Math.floor(I[0]),k=Math.floor(I[1]);let l=Math.max(Math.ceil(I[2])-B,1),y=Math.max(Math.ceil(I[3])-k,1),w=1,T=1;l>a&&(w=l/a,l=a),y>a&&(T=y/a,y=a),this.current.startNewPathAndClipBox([0,0,l,y]);let F="groupAt"+this.groupLevel;p.smask&&(F+="_smask_"+this.smaskCounter++%2);const W=this.cachedCanvases.getCanvas(F,l,y),Y=W.context;Y.scale(1/w,1/T),Y.translate(-B,-k),Y.transform(...E),p.smask?this.smaskStack.push({canvas:W.canvas,context:Y,offsetX:B,offsetY:k,scaleX:w,scaleY:T,subtype:p.smask.subtype,backdrop:p.smask.backdrop,transferMap:p.smask.transferMap||null,startTransformInverse:null}):(g.setTransform(1,0,0,1,0,0),g.translate(B,k),g.scale(w,T),g.save()),v(g,Y),this.ctx=Y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(g),this.groupLevel++}endGroup(p){if(!this.contentVisible)return;this.groupLevel--;const g=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,p.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const I=(0,_.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...I);const D=h.Util.getAxialAlignedBoundingBox([0,0,g.canvas.width,g.canvas.height],I);this.ctx.drawImage(g.canvas,0,0),this.ctx.restore(),this.compose(D)}}beginAnnotation(p,g,E,I,D){if(this.#t(),C(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(g)&&g.length===4){const B=g[2]-g[0],k=g[3]-g[1];if(D&&this.annotationCanvasMap){E=E.slice(),E[4]-=g[0],E[5]-=g[1],g=g.slice(),g[0]=g[1]=0,g[2]=B,g[3]=k;const[l,y]=h.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(this.ctx)),{viewportScale:w}=this,T=Math.ceil(B*this.outputScaleX*w),F=Math.ceil(k*this.outputScaleY*w);this.annotationCanvas=this.canvasFactory.create(T,F);const{canvas:W,context:Y}=this.annotationCanvas;this.annotationCanvasMap.set(p,W),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Y,this.ctx.save(),this.ctx.setTransform(l,0,0,-y,0,k*y),C(this.ctx)}else C(this.ctx),this.ctx.rect(g[0],g[1],B,k),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...I)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(p){if(!this.contentVisible)return;const g=p.count;p=this.getObject(p.data,p),p.count=g;const E=this.ctx,I=this.processingType3;if(I&&(I.compiled===void 0&&(I.compiled=u(p)),I.compiled)){I.compiled(E);return}const D=this._createMaskCanvas(p),B=D.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(B,D.offsetX,D.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(p,g,E=0,I=0,D,B){if(!this.contentVisible)return;p=this.getObject(p.data,p);const k=this.ctx;k.save();const l=(0,_.getCurrentTransform)(k);k.transform(g,E,I,D,0,0);const y=this._createMaskCanvas(p);k.setTransform(1,0,0,1,y.offsetX-l[4],y.offsetY-l[5]);for(let w=0,T=B.length;w<T;w+=2){const F=h.Util.transform(l,[g,E,I,D,B[w],B[w+1]]),[W,Y]=h.Util.applyTransform([0,0],F);k.drawImage(y.canvas,W,Y)}k.restore(),this.compose()}paintImageMaskXObjectGroup(p){if(!this.contentVisible)return;const g=this.ctx,E=this.current.fillColor,I=this.current.patternFill;for(const D of p){const{data:B,width:k,height:l,transform:y}=D,w=this.cachedCanvases.getCanvas("maskCanvas",k,l),T=w.context;T.save();const F=this.getObject(B,D);R(T,F),T.globalCompositeOperation="source-in",T.fillStyle=I?E.getPattern(T,this,(0,_.getCurrentTransformInverse)(g),i.PathType.FILL):E,T.fillRect(0,0,k,l),T.restore(),g.save(),g.transform(...y),g.scale(1,-1),b(g,w.canvas,0,0,k,l,0,-1,1,1),g.restore()}this.compose()}paintImageXObject(p){if(!this.contentVisible)return;const g=this.getObject(p);if(!g){(0,h.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g)}paintImageXObjectRepeat(p,g,E,I){if(!this.contentVisible)return;const D=this.getObject(p);if(!D){(0,h.warn)("Dependent image isn't ready yet");return}const B=D.width,k=D.height,l=[];for(let y=0,w=I.length;y<w;y+=2)l.push({transform:[g,0,0,E,I[y],I[y+1]],x:0,y:0,w:B,h:k});this.paintInlineImageXObjectGroup(D,l)}applyTransferMapsToCanvas(p){return this.current.transferMaps!=="none"&&(p.filter=this.current.transferMaps,p.drawImage(p.canvas,0,0),p.filter="none"),p.canvas}applyTransferMapsToBitmap(p){if(this.current.transferMaps==="none")return p.bitmap;const{bitmap:g,width:E,height:I}=p,D=this.cachedCanvases.getCanvas("inlineImage",E,I),B=D.context;return B.filter=this.current.transferMaps,B.drawImage(g,0,0),B.filter="none",D.canvas}paintInlineImageXObject(p){if(!this.contentVisible)return;const g=p.width,E=p.height,I=this.ctx;if(this.save(),!h.isNodeJS){const{filter:k}=I;k!=="none"&&k!==""&&(I.filter="none")}I.scale(1/g,-1/E);let D;if(p.bitmap)D=this.applyTransferMapsToBitmap(p);else if(typeof HTMLElement=="function"&&p instanceof HTMLElement||!p.data)D=p;else{const l=this.cachedCanvases.getCanvas("inlineImage",g,E).context;L(l,p),D=this.applyTransferMapsToCanvas(l)}const B=this._scaleImage(D,(0,_.getCurrentTransformInverse)(I));I.imageSmoothingEnabled=At((0,_.getCurrentTransform)(I),p.interpolate),b(I,B.img,0,0,B.paintWidth,B.paintHeight,0,-E,g,E),this.compose(),this.restore()}paintInlineImageXObjectGroup(p,g){if(!this.contentVisible)return;const E=this.ctx;let I;if(p.bitmap)I=p.bitmap;else{const D=p.width,B=p.height,l=this.cachedCanvases.getCanvas("inlineImage",D,B).context;L(l,p),I=this.applyTransferMapsToCanvas(l)}for(const D of g)E.save(),E.transform(...D.transform),E.scale(1,-1),b(E,I,D.x,D.y,D.w,D.h,0,-1,1,1),E.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(p){}markPointProps(p,g){}beginMarkedContent(p){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(p,g){p==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(g)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(p){const g=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(p);const E=this.ctx;this.pendingClip&&(g||(this.pendingClip===ht?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const p=(0,_.getCurrentTransform)(this.ctx);if(p[1]===0&&p[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(p[0]),Math.abs(p[3]));else{const g=Math.abs(p[0]*p[3]-p[2]*p[1]),E=Math.hypot(p[0],p[2]),I=Math.hypot(p[1],p[3]);this._cachedGetSinglePixelWidth=Math.max(E,I)/g}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:p}=this.current,{a:g,b:E,c:I,d:D}=this.ctx.getTransform();let B,k;if(E===0&&I===0){const l=Math.abs(g),y=Math.abs(D);if(l===y)if(p===0)B=k=1/l;else{const w=l*p;B=k=w<1?1/w:1}else if(p===0)B=1/l,k=1/y;else{const w=l*p,T=y*p;B=w<1?1/w:1,k=T<1?1/T:1}}else{const l=Math.abs(g*D-E*I),y=Math.hypot(g,E),w=Math.hypot(I,D);if(p===0)B=w/l,k=y/l;else{const T=p*l;B=w>T?w/T:1,k=y>T?y/T:1}}this._cachedScaleForStroking[0]=B,this._cachedScaleForStroking[1]=k}return this._cachedScaleForStroking}rescaleAndStroke(p){const{ctx:g}=this,{lineWidth:E}=this.current,[I,D]=this.getScaleForStroking();if(g.lineWidth=E||1,I===1&&D===1){g.stroke();return}const B=g.getLineDash();if(p&&g.save(),g.scale(I,D),B.length>0){const k=Math.max(I,D);g.setLineDash(B.map(l=>l/k)),g.lineDashOffset/=k}g.stroke(),p&&g.restore()}isContentVisible(){for(let p=this.markedContentStack.length-1;p>=0;p--)if(!this.markedContentStack[p].visible)return!1;return!0}}o.CanvasGraphics=N;for(const S in h.OPS)N.prototype[S]!==void 0&&(N.prototype[h.OPS[S]]=N.prototype[S])}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=d;var h=P(1),_=P(6);const i={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};o.PathType=i;function M(b,u){if(!u)return;const x=u[2]-u[0],L=u[3]-u[1],R=new Path2D;R.rect(u[0],u[1],x,L),b.clip(R)}class V{constructor(){this.constructor===V&&(0,h.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,h.unreachable)("Abstract method `getPattern` called.")}}class z extends V{constructor(u){super(),this._type=u[1],this._bbox=u[2],this._colorStops=u[3],this._p0=u[4],this._p1=u[5],this._r0=u[6],this._r1=u[7],this.matrix=null}_createGradient(u){let x;this._type==="axial"?x=u.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(x=u.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const L of this._colorStops)x.addColorStop(L[0],L[1]);return x}getPattern(u,x,L,R){let v;if(R===i.STROKE||R===i.FILL){const C=x.current.getClippedPathBoundingBox(R,(0,_.getCurrentTransform)(u))||[0,0,0,0],G=Math.ceil(C[2]-C[0])||1,K=Math.ceil(C[3]-C[1])||1,U=x.cachedCanvases.getCanvas("pattern",G,K,!0),nt=U.context;nt.clearRect(0,0,nt.canvas.width,nt.canvas.height),nt.beginPath(),nt.rect(0,0,nt.canvas.width,nt.canvas.height),nt.translate(-C[0],-C[1]),L=h.Util.transform(L,[1,0,0,1,C[0],C[1]]),nt.transform(...x.baseTransform),this.matrix&&nt.transform(...this.matrix),M(nt,this._bbox),nt.fillStyle=this._createGradient(nt),nt.fill(),v=u.createPattern(U.canvas,"no-repeat");const rt=new DOMMatrix(L);v.setTransform(rt)}else M(u,this._bbox),v=this._createGradient(u);return v}}function a(b,u,x,L,R,v,C,G){const K=u.coords,U=u.colors,nt=b.data,rt=b.width*4;let At;K[x+1]>K[L+1]&&(At=x,x=L,L=At,At=v,v=C,C=At),K[L+1]>K[R+1]&&(At=L,L=R,R=At,At=C,C=G,G=At),K[x+1]>K[L+1]&&(At=x,x=L,L=At,At=v,v=C,C=At);const pt=(K[x]+u.offsetX)*u.scaleX,bt=(K[x+1]+u.offsetY)*u.scaleY,wt=(K[L]+u.offsetX)*u.scaleX,ht=(K[L+1]+u.offsetY)*u.scaleY,N=(K[R]+u.offsetX)*u.scaleX,S=(K[R+1]+u.offsetY)*u.scaleY;if(bt>=S)return;const p=U[v],g=U[v+1],E=U[v+2],I=U[C],D=U[C+1],B=U[C+2],k=U[G],l=U[G+1],y=U[G+2],w=Math.round(bt),T=Math.round(S);let F,W,Y,st,Et,at,ot,lt;for(let ct=w;ct<=T;ct++){if(ct<ht){const Ut=ct<bt?0:(bt-ct)/(bt-ht);F=pt-(pt-wt)*Ut,W=p-(p-I)*Ut,Y=g-(g-D)*Ut,st=E-(E-B)*Ut}else{let Ut;ct>S?Ut=1:ht===S?Ut=0:Ut=(ht-ct)/(ht-S),F=wt-(wt-N)*Ut,W=I-(I-k)*Ut,Y=D-(D-l)*Ut,st=B-(B-y)*Ut}let gt;ct<bt?gt=0:ct>S?gt=1:gt=(bt-ct)/(bt-S),Et=pt-(pt-N)*gt,at=p-(p-k)*gt,ot=g-(g-l)*gt,lt=E-(E-y)*gt;const Ct=Math.round(Math.min(F,Et)),Mt=Math.round(Math.max(F,Et));let Ot=rt*ct+Ct*4;for(let Ut=Ct;Ut<=Mt;Ut++)gt=(F-Ut)/(F-Et),gt<0?gt=0:gt>1&&(gt=1),nt[Ot++]=W-(W-at)*gt|0,nt[Ot++]=Y-(Y-ot)*gt|0,nt[Ot++]=st-(st-lt)*gt|0,nt[Ot++]=255}}function t(b,u,x){const L=u.coords,R=u.colors;let v,C;switch(u.type){case"lattice":const G=u.verticesPerRow,K=Math.floor(L.length/G)-1,U=G-1;for(v=0;v<K;v++){let nt=v*G;for(let rt=0;rt<U;rt++,nt++)a(b,x,L[nt],L[nt+1],L[nt+G],R[nt],R[nt+1],R[nt+G]),a(b,x,L[nt+G+1],L[nt+1],L[nt+G],R[nt+G+1],R[nt+1],R[nt+G])}break;case"triangles":for(v=0,C=L.length;v<C;v+=3)a(b,x,L[v],L[v+1],L[v+2],R[v],R[v+1],R[v+2]);break;default:throw new Error("illegal figure")}}class r extends V{constructor(u){super(),this._coords=u[2],this._colors=u[3],this._figures=u[4],this._bounds=u[5],this._bbox=u[7],this._background=u[8],this.matrix=null}_createMeshCanvas(u,x,L){const G=Math.floor(this._bounds[0]),K=Math.floor(this._bounds[1]),U=Math.ceil(this._bounds[2])-G,nt=Math.ceil(this._bounds[3])-K,rt=Math.min(Math.ceil(Math.abs(U*u[0]*1.1)),3e3),At=Math.min(Math.ceil(Math.abs(nt*u[1]*1.1)),3e3),pt=U/rt,bt=nt/At,wt={coords:this._coords,colors:this._colors,offsetX:-G,offsetY:-K,scaleX:1/pt,scaleY:1/bt},ht=rt+4,N=At+4,S=L.getCanvas("mesh",ht,N,!1),p=S.context,g=p.createImageData(rt,At);if(x){const I=g.data;for(let D=0,B=I.length;D<B;D+=4)I[D]=x[0],I[D+1]=x[1],I[D+2]=x[2],I[D+3]=255}for(const I of this._figures)t(g,I,wt);return p.putImageData(g,2,2),{canvas:S.canvas,offsetX:G-2*pt,offsetY:K-2*bt,scaleX:pt,scaleY:bt}}getPattern(u,x,L,R){M(u,this._bbox);let v;if(R===i.SHADING)v=h.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(u));else if(v=h.Util.singularValueDecompose2dScale(x.baseTransform),this.matrix){const G=h.Util.singularValueDecompose2dScale(this.matrix);v=[v[0]*G[0],v[1]*G[1]]}const C=this._createMeshCanvas(v,R===i.SHADING?null:this._background,x.cachedCanvases);return R!==i.SHADING&&(u.setTransform(...x.baseTransform),this.matrix&&u.transform(...this.matrix)),u.translate(C.offsetX,C.offsetY),u.scale(C.scaleX,C.scaleY),u.createPattern(C.canvas,"no-repeat")}}class f extends V{getPattern(){return"hotpink"}}function d(b){switch(b[0]){case"RadialAxial":return new z(b);case"Mesh":return new r(b);case"Dummy":return new f}throw new Error(`Unknown IR type: ${b[0]}`)}const e={COLORED:1,UNCOLORED:2};class m{static MAX_PATTERN_SIZE=3e3;constructor(u,x,L,R,v){this.operatorList=u[2],this.matrix=u[3]||[1,0,0,1,0,0],this.bbox=u[4],this.xstep=u[5],this.ystep=u[6],this.paintType=u[7],this.tilingType=u[8],this.color=x,this.ctx=L,this.canvasGraphicsFactory=R,this.baseTransform=v}createPatternCanvas(u){const x=this.operatorList,L=this.bbox,R=this.xstep,v=this.ystep,C=this.paintType,G=this.tilingType,K=this.color,U=this.canvasGraphicsFactory;(0,h.info)("TilingType: "+G);const nt=L[0],rt=L[1],At=L[2],pt=L[3],bt=h.Util.singularValueDecompose2dScale(this.matrix),wt=h.Util.singularValueDecompose2dScale(this.baseTransform),ht=[bt[0]*wt[0],bt[1]*wt[1]],N=this.getSizeAndScale(R,this.ctx.canvas.width,ht[0]),S=this.getSizeAndScale(v,this.ctx.canvas.height,ht[1]),p=u.cachedCanvases.getCanvas("pattern",N.size,S.size,!0),g=p.context,E=U.createCanvasGraphics(g);E.groupLevel=u.groupLevel,this.setFillAndStrokeStyleToContext(E,C,K);let I=nt,D=rt,B=At,k=pt;return nt<0&&(I=0,B+=Math.abs(nt)),rt<0&&(D=0,k+=Math.abs(rt)),g.translate(-(N.scale*I),-(S.scale*D)),E.transform(N.scale,0,0,S.scale,0,0),g.save(),this.clipBbox(E,I,D,B,k),E.baseTransform=(0,_.getCurrentTransform)(E.ctx),E.executeOperatorList(x),E.endDrawing(),{canvas:p.canvas,scaleX:N.scale,scaleY:S.scale,offsetX:I,offsetY:D}}getSizeAndScale(u,x,L){u=Math.abs(u);const R=Math.max(m.MAX_PATTERN_SIZE,x);let v=Math.ceil(u*L);return v>=R?v=R:L=v/u,{scale:L,size:v}}clipBbox(u,x,L,R,v){const C=R-x,G=v-L;u.ctx.rect(x,L,C,G),u.current.updateRectMinMax((0,_.getCurrentTransform)(u.ctx),[x,L,R,v]),u.clip(),u.endPath()}setFillAndStrokeStyleToContext(u,x,L){const R=u.ctx,v=u.current;switch(x){case e.COLORED:const C=this.ctx;R.fillStyle=C.fillStyle,R.strokeStyle=C.strokeStyle,v.fillColor=C.fillStyle,v.strokeColor=C.strokeStyle;break;case e.UNCOLORED:const G=h.Util.makeHexColor(L[0],L[1],L[2]);R.fillStyle=G,R.strokeStyle=G,v.fillColor=G,v.strokeColor=G;break;default:throw new h.FormatError(`Unsupported paint type: ${x}`)}}getPattern(u,x,L,R){let v=L;R!==i.SHADING&&(v=h.Util.transform(v,x.baseTransform),this.matrix&&(v=h.Util.transform(v,this.matrix)));const C=this.createPatternCanvas(x);let G=new DOMMatrix(v);G=G.translate(C.offsetX,C.offsetY),G=G.scale(1/C.scaleX,1/C.scaleY);const K=u.createPattern(C.canvas,"repeat");return K.setTransform(G),K}}o.TilingPattern=m}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.convertBlackAndWhiteToRGBA=i,o.convertToRGBA=_,o.grayToRGBA=V;var h=P(1);function _(z){switch(z.kind){case h.ImageKind.GRAYSCALE_1BPP:return i(z);case h.ImageKind.RGB_24BPP:return M(z)}return null}function i({src:z,srcPos:a=0,dest:t,width:r,height:f,nonBlackColor:d=4294967295,inverseDecode:e=!1}){const m=h.FeatureTest.isLittleEndian?4278190080:255,[b,u]=e?[d,m]:[m,d],x=r>>3,L=r&7,R=z.length;t=new Uint32Array(t.buffer);let v=0;for(let C=0;C<f;C++){for(const K=a+x;a<K;a++){const U=a<R?z[a]:255;t[v++]=U&128?u:b,t[v++]=U&64?u:b,t[v++]=U&32?u:b,t[v++]=U&16?u:b,t[v++]=U&8?u:b,t[v++]=U&4?u:b,t[v++]=U&2?u:b,t[v++]=U&1?u:b}if(L===0)continue;const G=a<R?z[a++]:255;for(let K=0;K<L;K++)t[v++]=G&1<<7-K?u:b}return{srcPos:a,destPos:v}}function M({src:z,srcPos:a=0,dest:t,destPos:r=0,width:f,height:d}){let e=0;const m=z.length>>2,b=new Uint32Array(z.buffer,a,m);if(h.FeatureTest.isLittleEndian){for(;e<m-2;e+=3,r+=4){const u=b[e],x=b[e+1],L=b[e+2];t[r]=u|4278190080,t[r+1]=u>>>24|x<<8|4278190080,t[r+2]=x>>>16|L<<16|4278190080,t[r+3]=L>>>8|4278190080}for(let u=e*4,x=z.length;u<x;u+=3)t[r++]=z[u]|z[u+1]<<8|z[u+2]<<16|4278190080}else{for(;e<m-2;e+=3,r+=4){const u=b[e],x=b[e+1],L=b[e+2];t[r]=u|255,t[r+1]=u<<24|x>>>8|255,t[r+2]=x<<16|L>>>16|255,t[r+3]=L<<8|255}for(let u=e*4,x=z.length;u<x;u+=3)t[r++]=z[u]<<24|z[u+1]<<16|z[u+2]<<8|255}return{srcPos:a,destPos:r}}function V(z,a){if(h.FeatureTest.isLittleEndian)for(let t=0,r=z.length;t<r;t++)a[t]=z[t]*65793|4278190080;else for(let t=0,r=z.length;t<r;t++)a[t]=z[t]*16843008|255}}),((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const P=Object.create(null);o.GlobalWorkerOptions=P,P.workerPort=null,P.workerSrc=""}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var h=P(1);const _={DATA:1,ERROR:2},i={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function M(z){switch(z instanceof Error||typeof z=="object"&&z!==null||(0,h.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),z.name){case"AbortException":return new h.AbortException(z.message);case"MissingPDFException":return new h.MissingPDFException(z.message);case"PasswordException":return new h.PasswordException(z.message,z.code);case"UnexpectedResponseException":return new h.UnexpectedResponseException(z.message,z.status);case"UnknownErrorException":return new h.UnknownErrorException(z.message,z.details);default:return new h.UnknownErrorException(z.message,z.toString())}}class V{constructor(a,t,r){this.sourceName=a,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=f=>{const d=f.data;if(d.targetName!==this.sourceName)return;if(d.stream){this.#e(d);return}if(d.callback){const m=d.callbackId,b=this.callbackCapabilities[m];if(!b)throw new Error(`Cannot resolve callback ${m}`);if(delete this.callbackCapabilities[m],d.callback===_.DATA)b.resolve(d.data);else if(d.callback===_.ERROR)b.reject(M(d.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[d.action];if(!e)throw new Error(`Unknown action from worker: ${d.action}`);if(d.callbackId){const m=this.sourceName,b=d.sourceName;new Promise(function(u){u(e(d.data))}).then(function(u){r.postMessage({sourceName:m,targetName:b,callback:_.DATA,callbackId:d.callbackId,data:u})},function(u){r.postMessage({sourceName:m,targetName:b,callback:_.ERROR,callbackId:d.callbackId,reason:M(u)})});return}if(d.streamId){this.#t(d);return}e(d.data)},r.addEventListener("message",this._onComObjOnMessage)}on(a,t){const r=this.actionHandler;if(r[a])throw new Error(`There is already an actionName called "${a}"`);r[a]=t}send(a,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,data:t},r)}sendWithPromise(a,t,r){const f=this.callbackId++,d=new h.PromiseCapability;this.callbackCapabilities[f]=d;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,callbackId:f,data:t},r)}catch(e){d.reject(e)}return d.promise}sendWithStream(a,t,r,f){const d=this.streamId++,e=this.sourceName,m=this.targetName,b=this.comObj;return new ReadableStream({start:u=>{const x=new h.PromiseCapability;return this.streamControllers[d]={controller:u,startCall:x,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:e,targetName:m,action:a,streamId:d,data:t,desiredSize:u.desiredSize},f),x.promise},pull:u=>{const x=new h.PromiseCapability;return this.streamControllers[d].pullCall=x,b.postMessage({sourceName:e,targetName:m,stream:i.PULL,streamId:d,desiredSize:u.desiredSize}),x.promise},cancel:u=>{(0,h.assert)(u instanceof Error,"cancel must have a valid reason");const x=new h.PromiseCapability;return this.streamControllers[d].cancelCall=x,this.streamControllers[d].isClosed=!0,b.postMessage({sourceName:e,targetName:m,stream:i.CANCEL,streamId:d,reason:M(u)}),x.promise}},r)}#t(a){const t=a.streamId,r=this.sourceName,f=a.sourceName,d=this.comObj,e=this,m=this.actionHandler[a.action],b={enqueue(u,x=1,L){if(this.isCancelled)return;const R=this.desiredSize;this.desiredSize-=x,R>0&&this.desiredSize<=0&&(this.sinkCapability=new h.PromiseCapability,this.ready=this.sinkCapability.promise),d.postMessage({sourceName:r,targetName:f,stream:i.ENQUEUE,streamId:t,chunk:u},L)},close(){this.isCancelled||(this.isCancelled=!0,d.postMessage({sourceName:r,targetName:f,stream:i.CLOSE,streamId:t}),delete e.streamSinks[t])},error(u){(0,h.assert)(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,d.postMessage({sourceName:r,targetName:f,stream:i.ERROR,streamId:t,reason:M(u)}))},sinkCapability:new h.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:a.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[t]=b,new Promise(function(u){u(m(a.data,b))}).then(function(){d.postMessage({sourceName:r,targetName:f,stream:i.START_COMPLETE,streamId:t,success:!0})},function(u){d.postMessage({sourceName:r,targetName:f,stream:i.START_COMPLETE,streamId:t,reason:M(u)})})}#e(a){const t=a.streamId,r=this.sourceName,f=a.sourceName,d=this.comObj,e=this.streamControllers[t],m=this.streamSinks[t];switch(a.stream){case i.START_COMPLETE:a.success?e.startCall.resolve():e.startCall.reject(M(a.reason));break;case i.PULL_COMPLETE:a.success?e.pullCall.resolve():e.pullCall.reject(M(a.reason));break;case i.PULL:if(!m){d.postMessage({sourceName:r,targetName:f,stream:i.PULL_COMPLETE,streamId:t,success:!0});break}m.desiredSize<=0&&a.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=a.desiredSize,new Promise(function(b){b(m.onPull?.())}).then(function(){d.postMessage({sourceName:r,targetName:f,stream:i.PULL_COMPLETE,streamId:t,success:!0})},function(b){d.postMessage({sourceName:r,targetName:f,stream:i.PULL_COMPLETE,streamId:t,reason:M(b)})});break;case i.ENQUEUE:if((0,h.assert)(e,"enqueue should have stream controller"),e.isClosed)break;e.controller.enqueue(a.chunk);break;case i.CLOSE:if((0,h.assert)(e,"close should have stream controller"),e.isClosed)break;e.isClosed=!0,e.controller.close(),this.#n(e,t);break;case i.ERROR:(0,h.assert)(e,"error should have stream controller"),e.controller.error(M(a.reason)),this.#n(e,t);break;case i.CANCEL_COMPLETE:a.success?e.cancelCall.resolve():e.cancelCall.reject(M(a.reason)),this.#n(e,t);break;case i.CANCEL:if(!m)break;new Promise(function(b){b(m.onCancel?.(M(a.reason)))}).then(function(){d.postMessage({sourceName:r,targetName:f,stream:i.CANCEL_COMPLETE,streamId:t,success:!0})},function(b){d.postMessage({sourceName:r,targetName:f,stream:i.CANCEL_COMPLETE,streamId:t,reason:M(b)})}),m.sinkCapability.reject(M(a.reason)),m.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#n(a,t){await Promise.allSettled([a.startCall?.promise,a.pullCall?.promise,a.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}o.MessageHandler=V}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var h=P(1);class _{#t;#e;constructor({parsedData:M,rawData:V}){this.#t=M,this.#e=V}getRaw(){return this.#e}get(M){return this.#t.get(M)??null}getAll(){return(0,h.objectFromMap)(this.#t)}has(M){return this.#t.has(M)}}o.Metadata=_}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var h=P(1),_=P(8);const i=Symbol("INTERNAL");class M{#t=!0;constructor(a,t){this.name=a,this.intent=t}get visible(){return this.#t}_setVisible(a,t){a!==i&&(0,h.unreachable)("Internal method `_setVisible` called."),this.#t=t}}class V{#t=null;#e=new Map;#n=null;#i=null;constructor(a){if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,this.#i=a.order;for(const t of a.groups)this.#e.set(t.id,new M(t.name,t.intent));if(a.baseState==="OFF")for(const t of this.#e.values())t._setVisible(i,!1);for(const t of a.on)this.#e.get(t)._setVisible(i,!0);for(const t of a.off)this.#e.get(t)._setVisible(i,!1);this.#n=this.getHash()}}#o(a){const t=a.length;if(t<2)return!0;const r=a[0];for(let f=1;f<t;f++){const d=a[f];let e;if(Array.isArray(d))e=this.#o(d);else if(this.#e.has(d))e=this.#e.get(d).visible;else return(0,h.warn)(`Optional content group not found: ${d}`),!0;switch(r){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return r==="And"}isVisible(a){if(this.#e.size===0)return!0;if(!a)return(0,h.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return this.#e.has(a.id)?this.#e.get(a.id).visible:((0,h.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return this.#o(a.expression);if(!a.policy||a.policy==="AnyOn"){for(const t of a.ids){if(!this.#e.has(t))return(0,h.warn)(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const t of a.ids){if(!this.#e.has(t))return(0,h.warn)(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const t of a.ids){if(!this.#e.has(t))return(0,h.warn)(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const t of a.ids){if(!this.#e.has(t))return(0,h.warn)(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!1}return!0}return(0,h.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,h.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,t=!0){if(!this.#e.has(a)){(0,h.warn)(`Optional content group not found: ${a}`);return}this.#e.get(a)._setVisible(i,!!t),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,h.objectFromMap)(this.#e):null}getGroup(a){return this.#e.get(a)||null}getHash(){if(this.#t!==null)return this.#t;const a=new _.MurmurHash3_64;for(const[t,r]of this.#e)a.update(`${t}:${r.visible}`);return this.#t=a.hexdigest()}}o.OptionalContentConfig=V}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var h=P(1),_=P(6);class i{constructor({length:a,initialData:t,progressiveDone:r=!1,contentDispositionFilename:f=null,disableRange:d=!1,disableStream:e=!1},m){if((0,h.assert)(m,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=f,t?.length>0){const b=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=m,this._isStreamingSupported=!e,this._isRangeSupported=!d,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,u)=>{this._onReceiveData({begin:b,chunk:u})}),this._pdfDataRangeTransport.addProgressListener((b,u)=>{this._onProgress({loaded:b,total:u})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:a,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(a===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const f=this._rangeReaders.some(function(d){return d._begin!==a?!1:(d._enqueue(r),!0)});(0,h.assert)(f,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(a){a.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:a.loaded}):this._fullRequestReader?.onProgress?.({loaded:a.loaded,total:a.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(a){const t=this._rangeReaders.indexOf(a);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,h.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const a=this._queuedChunks;return this._queuedChunks=null,new M(this,a,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(a,t){if(t<=this._progressiveDataLength)return null;const r=new V(this,a,t);return this._pdfDataRangeTransport.requestDataRange(a,t),this._rangeReaders.push(r),r}cancelAllRequests(a){this._fullRequestReader?.cancel(a);for(const t of this._rangeReaders.slice(0))t.cancel(a);this._pdfDataRangeTransport.abort()}}o.PDFDataTransportStream=i;class M{constructor(a,t,r=!1,f=null){this._stream=a,this._done=r||!1,this._filename=(0,_.isPdfFile)(f)?f:null,this._queuedChunks=t||[],this._loaded=0;for(const d of this._queuedChunks)this._loaded+=d.byteLength;this._requests=[],this._headersReady=Promise.resolve(),a._fullRequestReader=this,this.onProgress=null}_enqueue(a){this._done||(this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunks.push(a),this._loaded+=a.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const a=new h.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class V{constructor(a,t,r){this._stream=a,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(a){if(!this._done){if(this._requests.length===0)this._queuedChunk=a;else{this._requests.shift().resolve({value:a,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const a=new h.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var h=P(1),_=P(20);function i(r,f,d){return{method:"GET",headers:r,signal:d.signal,mode:"cors",credentials:f?"include":"same-origin",redirect:"follow"}}function M(r){const f=new Headers;for(const d in r){const e=r[d];e!==void 0&&f.append(d,e)}return f}function V(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:((0,h.warn)(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class z{constructor(f){this.source=f,this.isHttp=/^https?:/i.test(f.url),this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a(this),this._fullRequestReader}getRangeReader(f,d){if(d<=this._progressiveDataLength)return null;const e=new t(this,f,d);return this._rangeRequestReaders.push(e),e}cancelAllRequests(f){this._fullRequestReader?.cancel(f);for(const d of this._rangeRequestReaders.slice(0))d.cancel(f)}}o.PDFFetchStream=z;class a{constructor(f){this._stream=f,this._reader=null,this._loaded=0,this._filename=null;const d=f.source;this._withCredentials=d.withCredentials||!1,this._contentLength=d.length,this._headersCapability=new h.PromiseCapability,this._disableRange=d.disableRange||!1,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._headers=M(this._stream.httpHeaders);const e=d.url;fetch(e,i(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,_.validateResponseStatus)(m.status))throw(0,_.createResponseStatusError)(m.status,e);this._reader=m.body.getReader(),this._headersCapability.resolve();const b=L=>m.headers.get(L),{allowRangeRequests:u,suggestedLength:x}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=x||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new h.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:f,done:d}=await this._reader.read();return d?{value:f,done:d}:(this._loaded+=f.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:V(f),done:!1})}cancel(f){this._reader?.cancel(f),this._abortController.abort()}}class t{constructor(f,d,e){this._stream=f,this._reader=null,this._loaded=0;const m=f.source;this._withCredentials=m.withCredentials||!1,this._readCapability=new h.PromiseCapability,this._isStreamingSupported=!m.disableStream,this._abortController=new AbortController,this._headers=M(this._stream.httpHeaders),this._headers.append("Range",`bytes=${d}-${e-1}`);const b=m.url;fetch(b,i(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,_.validateResponseStatus)(u.status))throw(0,_.createResponseStatusError)(u.status,b);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:f,done:d}=await this._reader.read();return d?{value:f,done:d}:(this._loaded+=f.byteLength,this.onProgress?.({loaded:this._loaded}),{value:V(f),done:!1})}cancel(f){this._reader?.cancel(f),this._abortController.abort()}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=z,o.extractFilenameFromHeader=V,o.validateRangeRequestCapabilities=M,o.validateResponseStatus=a;var h=P(1),_=P(21),i=P(6);function M({getResponseHeader:t,isHttp:r,rangeChunkSize:f,disableRange:d}){const e={allowRangeRequests:!1,suggestedLength:void 0},m=parseInt(t("Content-Length"),10);return!Number.isInteger(m)||(e.suggestedLength=m,m<=2*f)||d||!r||t("Accept-Ranges")!=="bytes"||(t("Content-Encoding")||"identity")!=="identity"||(e.allowRangeRequests=!0),e}function V(t){const r=t("Content-Disposition");if(r){let f=(0,_.getFilenameFromContentDispositionHeader)(r);if(f.includes("%"))try{f=decodeURIComponent(f)}catch{}if((0,i.isPdfFile)(f))return f}return null}function z(t,r){return t===404||t===0&&r.startsWith("file:")?new h.MissingPDFException('Missing PDF "'+r+'".'):new h.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${r}".`,t)}function a(t){return t===200||t===206}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=_;var h=P(1);function _(i){let M=!0,V=z("filename\\*","i").exec(i);if(V){V=V[1];let m=f(V);return m=unescape(m),m=d(m),m=e(m),t(m)}if(V=r(i),V){const m=e(V);return t(m)}if(V=z("filename","i").exec(i),V){V=V[1];let m=f(V);return m=e(m),t(m)}function z(m,b){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function a(m,b){if(m){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const u=new TextDecoder(m,{fatal:!0}),x=(0,h.stringToBytes)(b);b=u.decode(x),M=!1}catch{}}return b}function t(m){return M&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),M&&(m=a("iso-8859-1",m))),m}function r(m){const b=[];let u;const x=z("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=x.exec(m))!==null;){let[,R,v,C]=u;if(R=parseInt(R,10),R in b){if(R===0)break;continue}b[R]=[v,C]}const L=[];for(let R=0;R<b.length&&R in b;++R){let[v,C]=b[R];C=f(C),v&&(C=unescape(C),R===0&&(C=d(C))),L.push(C)}return L.join("")}function f(m){if(m.startsWith('"')){const b=m.slice(1).split('\\"');for(let u=0;u<b.length;++u){const x=b[u].indexOf('"');x!==-1&&(b[u]=b[u].slice(0,x),b.length=u+1),b[u]=b[u].replaceAll(/\\(.)/g,"$1")}m=b.join('"')}return m}function d(m){const b=m.indexOf("'");if(b===-1)return m;const u=m.slice(0,b),L=m.slice(b+1).replace(/^[^']*'/,"");return a(u,L)}function e(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,u,x,L){if(x==="q"||x==="Q")return L=L.replaceAll("_"," "),L=L.replaceAll(/=([0-9a-fA-F]{2})/g,function(R,v){return String.fromCharCode(parseInt(v,16))}),a(u,L);try{L=atob(L)}catch{}return a(u,L)})}return""}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var h=P(1),_=P(20);const i=200,M=206;function V(f){const d=f.response;return typeof d!="string"?d:(0,h.stringToBytes)(d).buffer}class z{constructor(d,e={}){this.url=d,this.isHttp=/^https?:/i.test(d),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(d,e,m){const b={begin:d,end:e};for(const u in m)b[u]=m[u];return this.request(b)}requestFull(d){return this.request(d)}request(d){const e=new XMLHttpRequest,m=this.currXhrId++,b=this.pendingRequests[m]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const u in this.httpHeaders){const x=this.httpHeaders[u];x!==void 0&&e.setRequestHeader(u,x)}return this.isHttp&&"begin"in d&&"end"in d?(e.setRequestHeader("Range",`bytes=${d.begin}-${d.end-1}`),b.expectedStatus=M):b.expectedStatus=i,e.responseType="arraybuffer",d.onError&&(e.onerror=function(u){d.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,m),e.onprogress=this.onProgress.bind(this,m),b.onHeadersReceived=d.onHeadersReceived,b.onDone=d.onDone,b.onError=d.onError,b.onProgress=d.onProgress,e.send(null),m}onProgress(d,e){const m=this.pendingRequests[d];m&&m.onProgress?.(e)}onStateChange(d,e){const m=this.pendingRequests[d];if(!m)return;const b=m.xhr;if(b.readyState>=2&&m.onHeadersReceived&&(m.onHeadersReceived(),delete m.onHeadersReceived),b.readyState!==4||!(d in this.pendingRequests))return;if(delete this.pendingRequests[d],b.status===0&&this.isHttp){m.onError?.(b.status);return}const u=b.status||i;if(!(u===i&&m.expectedStatus===M)&&u!==m.expectedStatus){m.onError?.(b.status);return}const L=V(b);if(u===M){const R=b.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(R);m.onDone({begin:parseInt(v[1],10),chunk:L})}else L?m.onDone({begin:0,chunk:L}):m.onError?.(b.status)}getRequestXhr(d){return this.pendingRequests[d].xhr}isPendingRequest(d){return d in this.pendingRequests}abortRequest(d){const e=this.pendingRequests[d].xhr;delete this.pendingRequests[d],e.abort()}}class a{constructor(d){this._source=d,this._manager=new z(d.url,{httpHeaders:d.httpHeaders,withCredentials:d.withCredentials}),this._rangeChunkSize=d.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(d){const e=this._rangeRequestReaders.indexOf(d);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new t(this._manager,this._source),this._fullRequestReader}getRangeReader(d,e){const m=new r(this._manager,d,e);return m.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(m),m}cancelAllRequests(d){this._fullRequestReader?.cancel(d);for(const e of this._rangeRequestReaders.slice(0))e.cancel(d)}}o.PDFNetworkStream=a;class t{constructor(d,e){this._manager=d;const m={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=d.requestFull(m),this._headersReceivedCapability=new h.PromiseCapability,this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const d=this._fullRequestId,e=this._manager.getRequestXhr(d),m=x=>e.getResponseHeader(x),{allowRangeRequests:b,suggestedLength:u}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(m),this._isRangeSupported&&this._manager.abortRequest(d),this._headersReceivedCapability.resolve()}_onDone(d){if(d&&(this._requests.length>0?this._requests.shift().resolve({value:d.chunk,done:!1}):this._cachedChunks.push(d.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(d){this._storedError=(0,_.createResponseStatusError)(d,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(d){this.onProgress?.({loaded:d.loaded,total:d.lengthComputable?d.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=new h.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0,this._headersReceivedCapability.reject(d);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class r{constructor(d,e,m){this._manager=d;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=d.url,this._requestId=d.requestRange(e,m,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(d){const e=d.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(d){this._storedError=(0,_.createResponseStatusError)(d,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(d){this.isStreamingSupported||this.onProgress?.({loaded:d.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const d=new h.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var h=P(1),_=P(20);const i=/^file:\/\/\/[a-zA-Z]:\//;function M(m){const b=require$$5,u=b.parse(m);return u.protocol==="file:"||u.host?u:/^[a-z]:[/\\]/i.test(m)?b.parse(`file:///${m}`):(u.host||(u.protocol="file:"),u)}class V{constructor(b){this.source=b,this.url=M(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new d(this):new r(this),this._fullRequestReader}getRangeReader(b,u){if(u<=this._progressiveDataLength)return null;const x=this.isFsUrl?new e(this,b,u):new f(this,b,u);return this._rangeRequestReaders.push(x),x}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(const u of this._rangeRequestReaders.slice(0))u.cancel(b)}}o.PDFNodeStream=V;class z{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const u=b.source;this._contentLength=u.length,this._loaded=0,this._filename=null,this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._readableStream=null,this._readCapability=new h.PromiseCapability,this._headersCapability=new h.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=b.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",u=>{this._error(u)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new h.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class a{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new h.PromiseCapability;const u=b.source;this._isStreamingSupported=!u.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=b.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",u=>{this._error(u)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function t(m,b){return{protocol:m.protocol,auth:m.auth,host:m.hostname,port:m.port,path:m.path,method:"GET",headers:b}}class r extends z{constructor(b){super(b);const u=x=>{if(x.statusCode===404){const C=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C,this._headersCapability.reject(C);return}this._headersCapability.resolve(),this._setReadableStream(x);const L=C=>this._readableStream.headers[C.toLowerCase()],{allowRangeRequests:R,suggestedLength:v}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:L,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=R,this._contentLength=v||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(L)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(t(this._url,b.httpHeaders),u)}else{const x=require$$5;this._request=x.request(t(this._url,b.httpHeaders),u)}this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class f extends a{constructor(b,u,x){super(b),this._httpHeaders={};for(const R in b.httpHeaders){const v=b.httpHeaders[R];v!==void 0&&(this._httpHeaders[R]=v)}this._httpHeaders.Range=`bytes=${u}-${x-1}`;const L=R=>{if(R.statusCode===404){const v=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=v;return}this._setReadableStream(R)};if(this._request=null,this._url.protocol==="http:"){const R=require$$5;this._request=R.request(t(this._url,this._httpHeaders),L)}else{const R=require$$5;this._request=R.request(t(this._url,this._httpHeaders),L)}this._request.on("error",R=>{this._storedError=R}),this._request.end()}}class d extends z{constructor(b){super(b);let u=decodeURIComponent(this._url.path);i.test(this._url.href)&&(u=u.replace(/^\//,""));const x=require$$5;x.lstat(u,(L,R)=>{if(L){L.code==="ENOENT"&&(L=new h.MissingPDFException(`Missing PDF "${u}".`)),this._storedError=L,this._headersCapability.reject(L);return}this._contentLength=R.size,this._setReadableStream(x.createReadStream(u)),this._headersCapability.resolve()})}}class e extends a{constructor(b,u,x){super(b);let L=decodeURIComponent(this._url.path);i.test(this._url.href)&&(L=L.replace(/^\//,""));const R=require$$5;this._setReadableStream(R.createReadStream(L,{start:u,end:x-1}))}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var h=P(6),_=P(1);const i={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},M="http://www.w3.org/XML/1998/namespace",V="http://www.w3.org/1999/xlink",z=["butt","round","square"],a=["miter","round","bevel"],t=function(R,v="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([R],{type:v}));const G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let K=`data:${v};base64,`;for(let U=0,nt=R.length;U<nt;U+=3){const rt=R[U]&255,At=R[U+1]&255,pt=R[U+2]&255,bt=rt>>2,wt=(rt&3)<<4|At>>4,ht=U+1<nt?(At&15)<<2|pt>>6:64,N=U+2<nt?pt&63:64;K+=G[bt]+G[wt]+G[ht]+G[N]}return K},r=(function(){const R=new Uint8Array([137,80,78,71,13,10,26,10]),v=12,C=new Int32Array(256);for(let pt=0;pt<256;pt++){let bt=pt;for(let wt=0;wt<8;wt++)bt=bt&1?3988292384^bt>>1&2147483647:bt>>1&2147483647;C[pt]=bt}function G(pt,bt,wt){let ht=-1;for(let N=bt;N<wt;N++){const S=(ht^pt[N])&255,p=C[S];ht=ht>>>8^p}return ht^-1}function K(pt,bt,wt,ht){let N=ht;const S=bt.length;wt[N]=S>>24&255,wt[N+1]=S>>16&255,wt[N+2]=S>>8&255,wt[N+3]=S&255,N+=4,wt[N]=pt.charCodeAt(0)&255,wt[N+1]=pt.charCodeAt(1)&255,wt[N+2]=pt.charCodeAt(2)&255,wt[N+3]=pt.charCodeAt(3)&255,N+=4,wt.set(bt,N),N+=bt.length;const p=G(wt,ht+4,N);wt[N]=p>>24&255,wt[N+1]=p>>16&255,wt[N+2]=p>>8&255,wt[N+3]=p&255}function U(pt,bt,wt){let ht=1,N=0;for(let S=bt;S<wt;++S)ht=(ht+(pt[S]&255))%65521,N=(N+ht)%65521;return N<<16|ht}function nt(pt){if(!_.isNodeJS)return rt(pt);try{const bt=parseInt(process.versions.node)>=8?pt:Buffer.from(pt),wt=require$$5.deflateSync(bt,{level:9});return wt instanceof Uint8Array?wt:new Uint8Array(wt)}catch(bt){(0,_.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+bt)}return rt(pt)}function rt(pt){let bt=pt.length;const wt=65535,ht=Math.ceil(bt/wt),N=new Uint8Array(2+bt+ht*5+4);let S=0;N[S++]=120,N[S++]=156;let p=0;for(;bt>wt;)N[S++]=0,N[S++]=255,N[S++]=255,N[S++]=0,N[S++]=0,N.set(pt.subarray(p,p+wt),S),S+=wt,p+=wt,bt-=wt;N[S++]=1,N[S++]=bt&255,N[S++]=bt>>8&255,N[S++]=~bt&65535&255,N[S++]=(~bt&65535)>>8&255,N.set(pt.subarray(p),S),S+=pt.length-p;const g=U(pt,0,pt.length);return N[S++]=g>>24&255,N[S++]=g>>16&255,N[S++]=g>>8&255,N[S++]=g&255,N}function At(pt,bt,wt,ht){const N=pt.width,S=pt.height;let p,g,E;const I=pt.data;switch(bt){case _.ImageKind.GRAYSCALE_1BPP:g=0,p=1,E=N+7>>3;break;case _.ImageKind.RGB_24BPP:g=2,p=8,E=N*3;break;case _.ImageKind.RGBA_32BPP:g=6,p=8,E=N*4;break;default:throw new Error("invalid format")}const D=new Uint8Array((1+E)*S);let B=0,k=0;for(let W=0;W<S;++W)D[B++]=0,D.set(I.subarray(k,k+E),B),k+=E,B+=E;if(bt===_.ImageKind.GRAYSCALE_1BPP&&ht){B=0;for(let W=0;W<S;W++){B++;for(let Y=0;Y<E;Y++)D[B++]^=255}}const l=new Uint8Array([N>>24&255,N>>16&255,N>>8&255,N&255,S>>24&255,S>>16&255,S>>8&255,S&255,p,g,0,0,0]),y=nt(D),w=R.length+v*3+l.length+y.length,T=new Uint8Array(w);let F=0;return T.set(R,F),F+=R.length,K("IHDR",l,T,F),F+=v+l.length,K("IDATA",y,T,F),F+=v+y.length,K("IEND",new Uint8Array(0),T,F),t(T,"image/png",wt)}return function(bt,wt,ht){const N=bt.kind===void 0?_.ImageKind.GRAYSCALE_1BPP:bt.kind;return At(bt,N,wt,ht)}})();class f{constructor(){this.fontSizeScale=1,this.fontWeight=i.fontWeight,this.fontSize=0,this.textMatrix=_.IDENTITY_MATRIX,this.fontMatrix=_.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=i.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(v,C){this.x=v,this.y=C}}function d(R){let v=[];const C=[];for(const G of R){if(G.fn==="save"){v.push({fnId:92,fn:"group",items:[]}),C.push(v),v=v.at(-1).items;continue}G.fn==="restore"?v=C.pop():v.push(G)}return v}function e(R){if(Number.isInteger(R))return R.toString();const v=R.toFixed(10);let C=v.length-1;if(v[C]!=="0")return v;do C--;while(v[C]==="0");return v.substring(0,v[C]==="."?C:C+1)}function m(R){if(R[4]===0&&R[5]===0){if(R[1]===0&&R[2]===0)return R[0]===1&&R[3]===1?"":`scale(${e(R[0])} ${e(R[3])})`;if(R[0]===R[3]&&R[1]===-R[2]){const v=Math.acos(R[0])*180/Math.PI;return`rotate(${e(v)})`}}else if(R[0]===1&&R[1]===0&&R[2]===0&&R[3]===1)return`translate(${e(R[4])} ${e(R[5])})`;return`matrix(${e(R[0])} ${e(R[1])} ${e(R[2])} ${e(R[3])} ${e(R[4])} ${e(R[5])})`}let b=0,u=0,x=0;class L{constructor(v,C,G=!1){(0,h.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new h.DOMSVGFactory,this.current=new f,this.transformMatrix=_.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=v,this.objs=C,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!G,this._operatorIdMapping=[];for(const K in _.OPS)this._operatorIdMapping[_.OPS[K]]=K}getObject(v,C=null){return typeof v=="string"?v.startsWith("g_")?this.commonObjs.get(v):this.objs.get(v):C}save(){this.transformStack.push(this.transformMatrix);const v=this.current;this.extraStack.push(v),this.current=v.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(v){this.save(),this.executeOpTree(v),this.restore()}loadDependencies(v){const C=v.fnArray,G=v.argsArray;for(let K=0,U=C.length;K<U;K++)if(C[K]===_.OPS.dependency)for(const nt of G[K]){const rt=nt.startsWith("g_")?this.commonObjs:this.objs,At=new Promise(pt=>{rt.get(nt,pt)});this.current.dependencies.push(At)}return Promise.all(this.current.dependencies)}transform(v,C,G,K,U,nt){const rt=[v,C,G,K,U,nt];this.transformMatrix=_.Util.transform(this.transformMatrix,rt),this.tgrp=null}getSVG(v,C){this.viewport=C;const G=this._initialize(C);return this.loadDependencies(v).then(()=>(this.transformMatrix=_.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(v)),G))}convertOpList(v){const C=this._operatorIdMapping,G=v.argsArray,K=v.fnArray,U=[];for(let nt=0,rt=K.length;nt<rt;nt++){const At=K[nt];U.push({fnId:At,fn:C[At],args:G[nt]})}return d(U)}executeOpTree(v){for(const C of v){const G=C.fn,K=C.fnId,U=C.args;switch(K|0){case _.OPS.beginText:this.beginText();break;case _.OPS.dependency:break;case _.OPS.setLeading:this.setLeading(U);break;case _.OPS.setLeadingMoveText:this.setLeadingMoveText(U[0],U[1]);break;case _.OPS.setFont:this.setFont(U);break;case _.OPS.showText:this.showText(U[0]);break;case _.OPS.showSpacedText:this.showText(U[0]);break;case _.OPS.endText:this.endText();break;case _.OPS.moveText:this.moveText(U[0],U[1]);break;case _.OPS.setCharSpacing:this.setCharSpacing(U[0]);break;case _.OPS.setWordSpacing:this.setWordSpacing(U[0]);break;case _.OPS.setHScale:this.setHScale(U[0]);break;case _.OPS.setTextMatrix:this.setTextMatrix(U[0],U[1],U[2],U[3],U[4],U[5]);break;case _.OPS.setTextRise:this.setTextRise(U[0]);break;case _.OPS.setTextRenderingMode:this.setTextRenderingMode(U[0]);break;case _.OPS.setLineWidth:this.setLineWidth(U[0]);break;case _.OPS.setLineJoin:this.setLineJoin(U[0]);break;case _.OPS.setLineCap:this.setLineCap(U[0]);break;case _.OPS.setMiterLimit:this.setMiterLimit(U[0]);break;case _.OPS.setFillRGBColor:this.setFillRGBColor(U[0],U[1],U[2]);break;case _.OPS.setStrokeRGBColor:this.setStrokeRGBColor(U[0],U[1],U[2]);break;case _.OPS.setStrokeColorN:this.setStrokeColorN(U);break;case _.OPS.setFillColorN:this.setFillColorN(U);break;case _.OPS.shadingFill:this.shadingFill(U[0]);break;case _.OPS.setDash:this.setDash(U[0],U[1]);break;case _.OPS.setRenderingIntent:this.setRenderingIntent(U[0]);break;case _.OPS.setFlatness:this.setFlatness(U[0]);break;case _.OPS.setGState:this.setGState(U[0]);break;case _.OPS.fill:this.fill();break;case _.OPS.eoFill:this.eoFill();break;case _.OPS.stroke:this.stroke();break;case _.OPS.fillStroke:this.fillStroke();break;case _.OPS.eoFillStroke:this.eoFillStroke();break;case _.OPS.clip:this.clip("nonzero");break;case _.OPS.eoClip:this.clip("evenodd");break;case _.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _.OPS.paintImageXObject:this.paintImageXObject(U[0]);break;case _.OPS.paintInlineImageXObject:this.paintInlineImageXObject(U[0]);break;case _.OPS.paintImageMaskXObject:this.paintImageMaskXObject(U[0]);break;case _.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(U[0],U[1]);break;case _.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _.OPS.closePath:this.closePath();break;case _.OPS.closeStroke:this.closeStroke();break;case _.OPS.closeFillStroke:this.closeFillStroke();break;case _.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _.OPS.nextLine:this.nextLine();break;case _.OPS.transform:this.transform(U[0],U[1],U[2],U[3],U[4],U[5]);break;case _.OPS.constructPath:this.constructPath(U[0],U[1]);break;case _.OPS.endPath:this.endPath();break;case 92:this.group(C.items);break;default:(0,_.warn)(`Unimplemented operator ${G}`);break}}}setWordSpacing(v){this.current.wordSpacing=v}setCharSpacing(v){this.current.charSpacing=v}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(v,C,G,K,U,nt){const rt=this.current;rt.textMatrix=rt.lineMatrix=[v,C,G,K,U,nt],rt.textMatrixScale=Math.hypot(v,C),rt.x=rt.lineX=0,rt.y=rt.lineY=0,rt.xcoords=[],rt.ycoords=[],rt.tspan=this.svgFactory.createElement("svg:tspan"),rt.tspan.setAttributeNS(null,"font-family",rt.fontFamily),rt.tspan.setAttributeNS(null,"font-size",`${e(rt.fontSize)}px`),rt.tspan.setAttributeNS(null,"y",e(-rt.y)),rt.txtElement=this.svgFactory.createElement("svg:text"),rt.txtElement.append(rt.tspan)}beginText(){const v=this.current;v.x=v.lineX=0,v.y=v.lineY=0,v.textMatrix=_.IDENTITY_MATRIX,v.lineMatrix=_.IDENTITY_MATRIX,v.textMatrixScale=1,v.tspan=this.svgFactory.createElement("svg:tspan"),v.txtElement=this.svgFactory.createElement("svg:text"),v.txtgrp=this.svgFactory.createElement("svg:g"),v.xcoords=[],v.ycoords=[]}moveText(v,C){const G=this.current;G.x=G.lineX+=v,G.y=G.lineY+=C,G.xcoords=[],G.ycoords=[],G.tspan=this.svgFactory.createElement("svg:tspan"),G.tspan.setAttributeNS(null,"font-family",G.fontFamily),G.tspan.setAttributeNS(null,"font-size",`${e(G.fontSize)}px`),G.tspan.setAttributeNS(null,"y",e(-G.y))}showText(v){const C=this.current,G=C.font,K=C.fontSize;if(K===0)return;const U=C.fontSizeScale,nt=C.charSpacing,rt=C.wordSpacing,At=C.fontDirection,pt=C.textHScale*At,bt=G.vertical,wt=bt?1:-1,ht=G.defaultVMetrics,N=K*C.fontMatrix[0];let S=0;for(const E of v){if(E===null){S+=At*rt;continue}else if(typeof E=="number"){S+=wt*E*K/1e3;continue}const I=(E.isSpace?rt:0)+nt,D=E.fontChar;let B,k,l=E.width;if(bt){let w;const T=E.vmetric||ht;w=E.vmetric?T[1]:l*.5,w=-w*N;const F=T[2]*N;l=T?-T[0]:l,B=w/U,k=(S+F)/U}else B=S/U,k=0;(E.isInFont||G.missingFile)&&(C.xcoords.push(C.x+B),bt&&C.ycoords.push(-C.y+k),C.tspan.textContent+=D);const y=bt?l*N-I*At:l*N+I*At;S+=y}C.tspan.setAttributeNS(null,"x",C.xcoords.map(e).join(" ")),bt?C.tspan.setAttributeNS(null,"y",C.ycoords.map(e).join(" ")):C.tspan.setAttributeNS(null,"y",e(-C.y)),bt?C.y-=S:C.x+=S*pt,C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${e(C.fontSize)}px`),C.fontStyle!==i.fontStyle&&C.tspan.setAttributeNS(null,"font-style",C.fontStyle),C.fontWeight!==i.fontWeight&&C.tspan.setAttributeNS(null,"font-weight",C.fontWeight);const p=C.textRenderingMode&_.TextRenderingMode.FILL_STROKE_MASK;if(p===_.TextRenderingMode.FILL||p===_.TextRenderingMode.FILL_STROKE?(C.fillColor!==i.fillColor&&C.tspan.setAttributeNS(null,"fill",C.fillColor),C.fillAlpha<1&&C.tspan.setAttributeNS(null,"fill-opacity",C.fillAlpha)):C.textRenderingMode===_.TextRenderingMode.ADD_TO_PATH?C.tspan.setAttributeNS(null,"fill","transparent"):C.tspan.setAttributeNS(null,"fill","none"),p===_.TextRenderingMode.STROKE||p===_.TextRenderingMode.FILL_STROKE){const E=1/(C.textMatrixScale||1);this._setStrokeAttributes(C.tspan,E)}let g=C.textMatrix;C.textRise!==0&&(g=g.slice(),g[5]+=C.textRise),C.txtElement.setAttributeNS(null,"transform",`${m(g)} scale(${e(pt)}, -1)`),C.txtElement.setAttributeNS(M,"xml:space","preserve"),C.txtElement.append(C.tspan),C.txtgrp.append(C.txtElement),this._ensureTransformGroup().append(C.txtElement)}setLeadingMoveText(v,C){this.setLeading(-C),this.moveText(v,C)}addFontStyle(v){if(!v.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const C=t(v.data,v.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${v.loadedName}"; src: url(${C}); }
`}setFont(v){const C=this.current,G=this.commonObjs.get(v[0]);let K=v[1];C.font=G,this.embedFonts&&!G.missingFile&&!this.embeddedFonts[G.loadedName]&&(this.addFontStyle(G),this.embeddedFonts[G.loadedName]=G),C.fontMatrix=G.fontMatrix||_.FONT_IDENTITY_MATRIX;let U="normal";G.black?U="900":G.bold&&(U="bold");const nt=G.italic?"italic":"normal";K<0?(K=-K,C.fontDirection=-1):C.fontDirection=1,C.fontSize=K,C.fontFamily=G.loadedName,C.fontWeight=U,C.fontStyle=nt,C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"y",e(-C.y)),C.xcoords=[],C.ycoords=[]}endText(){const v=this.current;v.textRenderingMode&_.TextRenderingMode.ADD_TO_PATH_FLAG&&v.txtElement?.hasChildNodes()&&(v.element=v.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(v){v>0&&(this.current.lineWidth=v)}setLineCap(v){this.current.lineCap=z[v]}setLineJoin(v){this.current.lineJoin=a[v]}setMiterLimit(v){this.current.miterLimit=v}setStrokeAlpha(v){this.current.strokeAlpha=v}setStrokeRGBColor(v,C,G){this.current.strokeColor=_.Util.makeHexColor(v,C,G)}setFillAlpha(v){this.current.fillAlpha=v}setFillRGBColor(v,C,G){this.current.fillColor=_.Util.makeHexColor(v,C,G),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(v){this.current.strokeColor=this._makeColorN_Pattern(v)}setFillColorN(v){this.current.fillColor=this._makeColorN_Pattern(v)}shadingFill(v){const{width:C,height:G}=this.viewport,K=_.Util.inverseTransform(this.transformMatrix),[U,nt,rt,At]=_.Util.getAxialAlignedBoundingBox([0,0,C,G],K),pt=this.svgFactory.createElement("svg:rect");pt.setAttributeNS(null,"x",U),pt.setAttributeNS(null,"y",nt),pt.setAttributeNS(null,"width",rt-U),pt.setAttributeNS(null,"height",At-nt),pt.setAttributeNS(null,"fill",this._makeShadingPattern(v)),this.current.fillAlpha<1&&pt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(pt)}_makeColorN_Pattern(v){return v[0]==="TilingPattern"?this._makeTilingPattern(v):this._makeShadingPattern(v)}_makeTilingPattern(v){const C=v[1],G=v[2],K=v[3]||_.IDENTITY_MATRIX,[U,nt,rt,At]=v[4],pt=v[5],bt=v[6],wt=v[7],ht=`shading${x++}`,[N,S,p,g]=_.Util.normalizeRect([..._.Util.applyTransform([U,nt],K),..._.Util.applyTransform([rt,At],K)]),[E,I]=_.Util.singularValueDecompose2dScale(K),D=pt*E,B=bt*I,k=this.svgFactory.createElement("svg:pattern");k.setAttributeNS(null,"id",ht),k.setAttributeNS(null,"patternUnits","userSpaceOnUse"),k.setAttributeNS(null,"width",D),k.setAttributeNS(null,"height",B),k.setAttributeNS(null,"x",`${N}`),k.setAttributeNS(null,"y",`${S}`);const l=this.svg,y=this.transformMatrix,w=this.current.fillColor,T=this.current.strokeColor,F=this.svgFactory.create(p-N,g-S);if(this.svg=F,this.transformMatrix=K,wt===2){const W=_.Util.makeHexColor(...C);this.current.fillColor=W,this.current.strokeColor=W}return this.executeOpTree(this.convertOpList(G)),this.svg=l,this.transformMatrix=y,this.current.fillColor=w,this.current.strokeColor=T,k.append(F.childNodes[0]),this.defs.append(k),`url(#${ht})`}_makeShadingPattern(v){switch(typeof v=="string"&&(v=this.objs.get(v)),v[0]){case"RadialAxial":const C=`shading${x++}`,G=v[3];let K;switch(v[1]){case"axial":const U=v[4],nt=v[5];K=this.svgFactory.createElement("svg:linearGradient"),K.setAttributeNS(null,"id",C),K.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),K.setAttributeNS(null,"x1",U[0]),K.setAttributeNS(null,"y1",U[1]),K.setAttributeNS(null,"x2",nt[0]),K.setAttributeNS(null,"y2",nt[1]);break;case"radial":const rt=v[4],At=v[5],pt=v[6],bt=v[7];K=this.svgFactory.createElement("svg:radialGradient"),K.setAttributeNS(null,"id",C),K.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),K.setAttributeNS(null,"cx",At[0]),K.setAttributeNS(null,"cy",At[1]),K.setAttributeNS(null,"r",bt),K.setAttributeNS(null,"fx",rt[0]),K.setAttributeNS(null,"fy",rt[1]),K.setAttributeNS(null,"fr",pt);break;default:throw new Error(`Unknown RadialAxial type: ${v[1]}`)}for(const U of G){const nt=this.svgFactory.createElement("svg:stop");nt.setAttributeNS(null,"offset",U[0]),nt.setAttributeNS(null,"stop-color",U[1]),K.append(nt)}return this.defs.append(K),`url(#${C})`;case"Mesh":return(0,_.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${v[0]}`)}}setDash(v,C){this.current.dashArray=v,this.current.dashPhase=C}constructPath(v,C){const G=this.current;let K=G.x,U=G.y,nt=[],rt=0;for(const At of v)switch(At|0){case _.OPS.rectangle:K=C[rt++],U=C[rt++];const pt=C[rt++],bt=C[rt++],wt=K+pt,ht=U+bt;nt.push("M",e(K),e(U),"L",e(wt),e(U),"L",e(wt),e(ht),"L",e(K),e(ht),"Z");break;case _.OPS.moveTo:K=C[rt++],U=C[rt++],nt.push("M",e(K),e(U));break;case _.OPS.lineTo:K=C[rt++],U=C[rt++],nt.push("L",e(K),e(U));break;case _.OPS.curveTo:K=C[rt+4],U=C[rt+5],nt.push("C",e(C[rt]),e(C[rt+1]),e(C[rt+2]),e(C[rt+3]),e(K),e(U)),rt+=6;break;case _.OPS.curveTo2:nt.push("C",e(K),e(U),e(C[rt]),e(C[rt+1]),e(C[rt+2]),e(C[rt+3])),K=C[rt+2],U=C[rt+3],rt+=4;break;case _.OPS.curveTo3:K=C[rt+2],U=C[rt+3],nt.push("C",e(C[rt]),e(C[rt+1]),e(K),e(U),e(K),e(U)),rt+=4;break;case _.OPS.closePath:nt.push("Z");break}nt=nt.join(" "),G.path&&v.length>0&&v[0]!==_.OPS.rectangle&&v[0]!==_.OPS.moveTo?nt=G.path.getAttributeNS(null,"d")+nt:(G.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(G.path)),G.path.setAttributeNS(null,"d",nt),G.path.setAttributeNS(null,"fill","none"),G.element=G.path,G.setCurrentPoint(K,U)}endPath(){const v=this.current;if(v.path=null,!this.pendingClip)return;if(!v.element){this.pendingClip=null;return}const C=`clippath${b++}`,G=this.svgFactory.createElement("svg:clipPath");G.setAttributeNS(null,"id",C),G.setAttributeNS(null,"transform",m(this.transformMatrix));const K=v.element.cloneNode(!0);if(this.pendingClip==="evenodd"?K.setAttributeNS(null,"clip-rule","evenodd"):K.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,G.append(K),this.defs.append(G),v.activeClipUrl){v.clipGroup=null;for(const U of this.extraStack)U.clipGroup=null;G.setAttributeNS(null,"clip-path",v.activeClipUrl)}v.activeClipUrl=`url(#${C})`,this.tgrp=null}clip(v){this.pendingClip=v}closePath(){const v=this.current;if(v.path){const C=`${v.path.getAttributeNS(null,"d")}Z`;v.path.setAttributeNS(null,"d",C)}}setLeading(v){this.current.leading=-v}setTextRise(v){this.current.textRise=v}setTextRenderingMode(v){this.current.textRenderingMode=v}setHScale(v){this.current.textHScale=v/100}setRenderingIntent(v){}setFlatness(v){}setGState(v){for(const[C,G]of v)switch(C){case"LW":this.setLineWidth(G);break;case"LC":this.setLineCap(G);break;case"LJ":this.setLineJoin(G);break;case"ML":this.setMiterLimit(G);break;case"D":this.setDash(G[0],G[1]);break;case"RI":this.setRenderingIntent(G);break;case"FL":this.setFlatness(G);break;case"Font":this.setFont(G);break;case"CA":this.setStrokeAlpha(G);break;case"ca":this.setFillAlpha(G);break;default:(0,_.warn)(`Unimplemented graphic state operator ${C}`);break}}fill(){const v=this.current;v.element&&(v.element.setAttributeNS(null,"fill",v.fillColor),v.element.setAttributeNS(null,"fill-opacity",v.fillAlpha),this.endPath())}stroke(){const v=this.current;v.element&&(this._setStrokeAttributes(v.element),v.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(v,C=1){const G=this.current;let K=G.dashArray;C!==1&&K.length>0&&(K=K.map(function(U){return C*U})),v.setAttributeNS(null,"stroke",G.strokeColor),v.setAttributeNS(null,"stroke-opacity",G.strokeAlpha),v.setAttributeNS(null,"stroke-miterlimit",e(G.miterLimit)),v.setAttributeNS(null,"stroke-linecap",G.lineCap),v.setAttributeNS(null,"stroke-linejoin",G.lineJoin),v.setAttributeNS(null,"stroke-width",e(C*G.lineWidth)+"px"),v.setAttributeNS(null,"stroke-dasharray",K.map(e).join(" ")),v.setAttributeNS(null,"stroke-dashoffset",e(C*G.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const v=this.svgFactory.createElement("svg:rect");v.setAttributeNS(null,"x","0"),v.setAttributeNS(null,"y","0"),v.setAttributeNS(null,"width","1px"),v.setAttributeNS(null,"height","1px"),v.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(v)}paintImageXObject(v){const C=this.getObject(v);if(!C){(0,_.warn)(`Dependent image with object ID ${v} is not ready yet`);return}this.paintInlineImageXObject(C)}paintInlineImageXObject(v,C){const G=v.width,K=v.height,U=r(v,this.forceDataSchema,!!C),nt=this.svgFactory.createElement("svg:rect");nt.setAttributeNS(null,"x","0"),nt.setAttributeNS(null,"y","0"),nt.setAttributeNS(null,"width",e(G)),nt.setAttributeNS(null,"height",e(K)),this.current.element=nt,this.clip("nonzero");const rt=this.svgFactory.createElement("svg:image");rt.setAttributeNS(V,"xlink:href",U),rt.setAttributeNS(null,"x","0"),rt.setAttributeNS(null,"y",e(-K)),rt.setAttributeNS(null,"width",e(G)+"px"),rt.setAttributeNS(null,"height",e(K)+"px"),rt.setAttributeNS(null,"transform",`scale(${e(1/G)} ${e(-1/K)})`),C?C.append(rt):this._ensureTransformGroup().append(rt)}paintImageMaskXObject(v){const C=this.getObject(v.data,v);if(C.bitmap){(0,_.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const G=this.current,K=C.width,U=C.height,nt=G.fillColor;G.maskId=`mask${u++}`;const rt=this.svgFactory.createElement("svg:mask");rt.setAttributeNS(null,"id",G.maskId);const At=this.svgFactory.createElement("svg:rect");At.setAttributeNS(null,"x","0"),At.setAttributeNS(null,"y","0"),At.setAttributeNS(null,"width",e(K)),At.setAttributeNS(null,"height",e(U)),At.setAttributeNS(null,"fill",nt),At.setAttributeNS(null,"mask",`url(#${G.maskId})`),this.defs.append(rt),this._ensureTransformGroup().append(At),this.paintInlineImageXObject(C,rt)}paintFormXObjectBegin(v,C){if(Array.isArray(v)&&v.length===6&&this.transform(v[0],v[1],v[2],v[3],v[4],v[5]),C){const G=C[2]-C[0],K=C[3]-C[1],U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x",C[0]),U.setAttributeNS(null,"y",C[1]),U.setAttributeNS(null,"width",e(G)),U.setAttributeNS(null,"height",e(K)),this.current.element=U,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(v){const C=this.svgFactory.create(v.width,v.height),G=this.svgFactory.createElement("svg:defs");C.append(G),this.defs=G;const K=this.svgFactory.createElement("svg:g");return K.setAttributeNS(null,"transform",m(v.transform)),C.append(K),this.svg=K,C}_ensureClipGroup(){if(!this.current.clipGroup){const v=this.svgFactory.createElement("svg:g");v.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(v),this.current.clipGroup=v}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",m(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}o.SVGGraphics=L}),((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class P{static textContent(_){const i=[],M={items:i,styles:Object.create(null)};function V(z){if(!z)return;let a=null;const t=z.name;if(t==="#text")a=z.value;else if(P.shouldBuildText(t))z?.attributes?.textContent?a=z.attributes.textContent:z.value&&(a=z.value);else return;if(a!==null&&i.push({str:a}),!!z.children)for(const r of z.children)V(r)}return V(_),M}static shouldBuildText(_){return!(_==="textarea"||_==="input"||_==="option"||_==="select")}}o.XfaText=P}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextLayerRenderTask=void 0,o.renderTextLayer=m,o.updateTextLayer=b;var h=P(1),_=P(6);const i=1e5,M=30,V=.8,z=new Map;function a(u,x){let L;if(x&&h.FeatureTest.isOffscreenCanvasSupported)L=new OffscreenCanvas(u,u).getContext("2d",{alpha:!1});else{const R=document.createElement("canvas");R.width=R.height=u,L=R.getContext("2d",{alpha:!1})}return L}function t(u,x){const L=z.get(u);if(L)return L;const R=a(M,x);R.font=`${M}px ${u}`;const v=R.measureText("");let C=v.fontBoundingBoxAscent,G=Math.abs(v.fontBoundingBoxDescent);if(C){const U=C/(C+G);return z.set(u,U),R.canvas.width=R.canvas.height=0,U}R.strokeStyle="red",R.clearRect(0,0,M,M),R.strokeText("g",0,0);let K=R.getImageData(0,0,M,M).data;G=0;for(let U=K.length-1-3;U>=0;U-=4)if(K[U]>0){G=Math.ceil(U/4/M);break}R.clearRect(0,0,M,M),R.strokeText("A",0,M),K=R.getImageData(0,0,M,M).data,C=0;for(let U=0,nt=K.length;U<nt;U+=4)if(K[U]>0){C=M-Math.floor(U/4/M);break}if(R.canvas.width=R.canvas.height=0,C){const U=C/(C+G);return z.set(u,U),U}return z.set(u,V),V}function r(u,x,L){const R=document.createElement("span"),v={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};u._textDivs.push(R);const C=h.Util.transform(u._transform,x.transform);let G=Math.atan2(C[1],C[0]);const K=L[x.fontName];K.vertical&&(G+=Math.PI/2);const U=Math.hypot(C[2],C[3]),nt=U*t(K.fontFamily,u._isOffscreenCanvasSupported);let rt,At;G===0?(rt=C[4],At=C[5]-nt):(rt=C[4]+nt*Math.sin(G),At=C[5]-nt*Math.cos(G));const pt="calc(var(--scale-factor)*",bt=R.style;u._container===u._rootContainer?(bt.left=`${(100*rt/u._pageWidth).toFixed(2)}%`,bt.top=`${(100*At/u._pageHeight).toFixed(2)}%`):(bt.left=`${pt}${rt.toFixed(2)}px)`,bt.top=`${pt}${At.toFixed(2)}px)`),bt.fontSize=`${pt}${U.toFixed(2)}px)`,bt.fontFamily=K.fontFamily,v.fontSize=U,R.setAttribute("role","presentation"),R.textContent=x.str,R.dir=x.dir,u._fontInspectorEnabled&&(R.dataset.fontName=x.fontName),G!==0&&(v.angle=G*(180/Math.PI));let wt=!1;if(x.str.length>1)wt=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const ht=Math.abs(x.transform[0]),N=Math.abs(x.transform[3]);ht!==N&&Math.max(ht,N)/Math.min(ht,N)>1.5&&(wt=!0)}wt&&(v.canvasWidth=K.vertical?x.height:x.width),u._textDivProperties.set(R,v),u._isReadableStream&&u._layoutText(R)}function f(u){const{div:x,scale:L,properties:R,ctx:v,prevFontSize:C,prevFontFamily:G}=u,{style:K}=x;let U="";if(R.canvasWidth!==0&&R.hasText){const{fontFamily:nt}=K,{canvasWidth:rt,fontSize:At}=R;(C!==At||G!==nt)&&(v.font=`${At*L}px ${nt}`,u.prevFontSize=At,u.prevFontFamily=nt);const{width:pt}=v.measureText(x.textContent);pt>0&&(U=`scaleX(${rt*L/pt})`)}R.angle!==0&&(U=`rotate(${R.angle}deg) ${U}`),U.length>0&&(K.transform=U)}function d(u){if(u._canceled)return;const x=u._textDivs,L=u._capability;if(x.length>i){L.resolve();return}if(!u._isReadableStream)for(const v of x)u._layoutText(v);L.resolve()}class e{constructor({textContentSource:x,container:L,viewport:R,textDivs:v,textDivProperties:C,textContentItemsStr:G,isOffscreenCanvasSupported:K}){this._textContentSource=x,this._isReadableStream=x instanceof ReadableStream,this._container=this._rootContainer=L,this._textDivs=v||[],this._textContentItemsStr=G||[],this._isOffscreenCanvasSupported=K,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new h.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:R.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:a(0,K)};const{pageWidth:U,pageHeight:nt,pageX:rt,pageY:At}=R.rawDims;this._transform=[1,0,0,-1,-rt,At+nt],this._pageWidth=U,this._pageHeight=nt,(0,_.setLayerDimensions)(L,R),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new h.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new h.AbortException("TextLayer task cancelled."))}_processItems(x,L){for(const R of x){if(R.str===void 0){if(R.type==="beginMarkedContentProps"||R.type==="beginMarkedContent"){const v=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),R.id!==null&&this._container.setAttribute("id",`${R.id}`),v.append(this._container)}else R.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(R.str),r(this,R,L)}}_layoutText(x){const L=this._layoutTextParams.properties=this._textDivProperties.get(x);if(this._layoutTextParams.div=x,f(this._layoutTextParams),L.hasText&&this._container.append(x),L.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),this._container.append(R)}}_render(){const x=new h.PromiseCapability;let L=Object.create(null);if(this._isReadableStream){const R=()=>{this._reader.read().then(({value:v,done:C})=>{if(C){x.resolve();return}Object.assign(L,v.styles),this._processItems(v.items,L),R()},x.reject)};this._reader=this._textContentSource.getReader(),R()}else if(this._textContentSource){const{items:R,styles:v}=this._textContentSource;this._processItems(R,v),x.resolve()}else throw new Error('No "textContentSource" parameter specified.');x.promise.then(()=>{L=null,d(this)},this._capability.reject)}}o.TextLayerRenderTask=e;function m(u){!u.textContentSource&&(u.textContent||u.textContentStream)&&((0,_.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),u.textContentSource=u.textContent||u.textContentStream);const{container:x,viewport:L}=u,R=getComputedStyle(x),v=R.getPropertyValue("visibility"),C=parseFloat(R.getPropertyValue("--scale-factor"));v==="visible"&&(!C||Math.abs(C-L.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const G=new e(u);return G._render(),G}function b({container:u,viewport:x,textDivs:L,textDivProperties:R,isOffscreenCanvasSupported:v,mustRotate:C=!0,mustRescale:G=!0}){if(C&&(0,_.setLayerDimensions)(u,{rotation:x.rotation}),G){const K=a(0,v),nt={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:K};for(const rt of L)nt.properties=R.get(rt),nt.div=rt,f(nt)}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditorLayer=void 0;var h=P(1),_=P(4),i=P(28),M=P(33),V=P(6),z=P(34);class a{#t;#e=!1;#n=null;#i=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#a=new Map;#s=!1;#l=!1;#c=!1;#r;static _initialized=!1;constructor({uiManager:r,pageIndex:f,div:d,accessibilityManager:e,annotationLayer:m,viewport:b,l10n:u}){const x=[i.FreeTextEditor,M.InkEditor,z.StampEditor];if(!a._initialized){a._initialized=!0;for(const L of x)L.initialize(u)}r.registerEditorTypes(x),this.#r=r,this.pageIndex=f,this.div=d,this.#t=e,this.#n=m,this.viewport=b,this.#r.addLayer(this)}get isEmpty(){return this.#a.size===0}updateToolbar(r){this.#r.updateToolbar(r)}updateMode(r=this.#r.getMode()){this.#p(),r===h.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),r!==h.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",r===h.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",r===h.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",r===h.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(r){if(!r&&this.#r.getMode()!==h.AnnotationEditorType.INK)return;if(!r){for(const d of this.#a.values())if(d.isEmpty()){d.setInBackground();return}}this.#h({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(r){this.#r.setEditingState(r)}addCommands(r){this.#r.addCommands(r)}enable(){this.div.style.pointerEvents="auto";const r=new Set;for(const d of this.#a.values())d.enableEditing(),d.annotationElementId&&r.add(d.annotationElementId);if(!this.#n)return;const f=this.#n.getEditableAnnotations();for(const d of f){if(d.hide(),this.#r.isDeletedAnnotationElement(d.data.id)||r.has(d.data.id))continue;const e=this.deserialize(d);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const r=new Set;for(const f of this.#a.values()){if(f.disableEditing(),!f.annotationElementId||f.serialize()!==null){r.add(f.annotationElementId);continue}this.getEditableAnnotation(f.annotationElementId)?.show(),f.remove()}if(this.#n){const f=this.#n.getEditableAnnotations();for(const d of f){const{id:e}=d.data;r.has(e)||this.#r.isDeletedAnnotationElement(e)||d.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(r){return this.#n?.getEditableAnnotation(r)||null}setActiveEditor(r){this.#r.getActive()!==r&&this.#r.setActiveEditor(r)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(r){this.#a.set(r.id,r);const{annotationElementId:f}=r;f&&this.#r.isDeletedAnnotationElement(f)&&this.#r.removeDeletedAnnotationElement(r)}detach(r){this.#a.delete(r.id),this.#t?.removePointerInTextLayer(r.contentDiv),!this.#c&&r.annotationElementId&&this.#r.addDeletedAnnotationElement(r)}remove(r){this.detach(r),this.#r.removeEditor(r),r.div.contains(document.activeElement)&&setTimeout(()=>{this.#r.focusMainContainer()},0),r.div.remove(),r.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(r){r.parent!==this&&(r.annotationElementId&&(this.#r.addDeletedAnnotationElement(r.annotationElementId),_.AnnotationEditor.deleteAnnotationElement(r),r.annotationElementId=null),this.attach(r),r.parent?.detach(r),r.setParent(this),r.div&&r.isAttachedToDOM&&(r.div.remove(),this.div.append(r.div)))}add(r){if(this.changeParent(r),this.#r.addEditor(r),this.attach(r),!r.isAttachedToDOM){const f=r.render();this.div.append(f),r.isAttachedToDOM=!0}r.fixAndSetPosition(),r.onceAdded(),this.#r.addToAnnotationStorage(r)}moveEditorInDOM(r){if(!r.isAttachedToDOM)return;const{activeElement:f}=document;r.div.contains(f)&&(r._focusEventsAllowed=!1,setTimeout(()=>{r.div.contains(document.activeElement)?r._focusEventsAllowed=!0:(r.div.addEventListener("focusin",()=>{r._focusEventsAllowed=!0},{once:!0}),f.focus())},0)),r._structTreeParentId=this.#t?.moveElementInDOM(this.div,r.div,r.contentDiv,!0)}addOrRebuild(r){r.needsToBeRebuilt()?r.rebuild():this.add(r)}addUndoableEditor(r){const f=()=>r._uiManager.rebuild(r),d=()=>{r.remove()};this.addCommands({cmd:f,undo:d,mustExec:!1})}getNextId(){return this.#r.getId()}#f(r){switch(this.#r.getMode()){case h.AnnotationEditorType.FREETEXT:return new i.FreeTextEditor(r);case h.AnnotationEditorType.INK:return new M.InkEditor(r);case h.AnnotationEditorType.STAMP:return new z.StampEditor(r)}return null}pasteEditor(r,f){this.#r.updateToolbar(r),this.#r.updateMode(r);const{offsetX:d,offsetY:e}=this.#d(),m=this.getNextId(),b=this.#f({parent:this,id:m,x:d,y:e,uiManager:this.#r,isCentered:!0,...f});b&&this.add(b)}deserialize(r){switch(r.annotationType??r.annotationEditorType){case h.AnnotationEditorType.FREETEXT:return i.FreeTextEditor.deserialize(r,this,this.#r);case h.AnnotationEditorType.INK:return M.InkEditor.deserialize(r,this,this.#r);case h.AnnotationEditorType.STAMP:return z.StampEditor.deserialize(r,this,this.#r)}return null}#h(r,f){const d=this.getNextId(),e=this.#f({parent:this,id:d,x:r.offsetX,y:r.offsetY,uiManager:this.#r,isCentered:f});return e&&this.add(e),e}#d(){const{x:r,y:f,width:d,height:e}=this.div.getBoundingClientRect(),m=Math.max(0,r),b=Math.max(0,f),u=Math.min(window.innerWidth,r+d),x=Math.min(window.innerHeight,f+e),L=(m+u)/2-r,R=(b+x)/2-f,[v,C]=this.viewport.rotation%180===0?[L,R]:[R,L];return{offsetX:v,offsetY:C}}addNewEditor(){this.#h(this.#d(),!0)}setSelected(r){this.#r.setSelected(r)}toggleSelected(r){this.#r.toggleSelected(r)}isSelected(r){return this.#r.isSelected(r)}unselect(r){this.#r.unselect(r)}pointerup(r){const{isMac:f}=h.FeatureTest.platform;if(!(r.button!==0||r.ctrlKey&&f)&&r.target===this.div&&this.#s){if(this.#s=!1,!this.#e){this.#e=!0;return}if(this.#r.getMode()===h.AnnotationEditorType.STAMP){this.#r.unselectAll();return}this.#h(r,!1)}}pointerdown(r){if(this.#s){this.#s=!1;return}const{isMac:f}=h.FeatureTest.platform;if(r.button!==0||r.ctrlKey&&f||r.target!==this.div)return;this.#s=!0;const d=this.#r.getActive();this.#e=!d||d.isEmpty()}findNewParent(r,f,d){const e=this.#r.findParent(f,d);return e===null||e===this?!1:(e.changeParent(r),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null));for(const r of this.#a.values())this.#t?.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,this.#a.clear(),this.#r.removeLayer(this)}#p(){this.#l=!0;for(const r of this.#a.values())r.isEmpty()&&r.remove();this.#l=!1}render({viewport:r}){this.viewport=r,(0,V.setLayerDimensions)(this.div,r);for(const f of this.#r.getEditors(this.pageIndex))this.add(f);this.updateMode()}update({viewport:r}){this.#r.commitOrRemove(),this.viewport=r,(0,V.setLayerDimensions)(this.div,{rotation:r.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:r,pageHeight:f}=this.viewport.rawDims;return[r,f]}}o.AnnotationEditorLayer=a}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FreeTextEditor=void 0;var h=P(1),_=P(5),i=P(4),M=P(29);class V extends i.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#o;#a="";#s=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const a=V.prototype,t=d=>d.isEmpty(),r=_.AnnotationEditorUIManager.TRANSLATE_SMALL,f=_.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new _.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],a.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],a._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],a._translateEmpty,{args:[-f,0],checker:t}],[["ArrowRight","mac+ArrowRight"],a._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],a._translateEmpty,{args:[f,0],checker:t}],[["ArrowUp","mac+ArrowUp"],a._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],a._translateEmpty,{args:[0,-f],checker:t}],[["ArrowDown","mac+ArrowDown"],a._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],a._translateEmpty,{args:[0,f],checker:t}]]))}static _type="freetext";constructor(a){super({...a,name:"freeTextEditor"}),this.#o=a.color||V._defaultColor||i.AnnotationEditor._defaultLineColor,this.#l=a.fontSize||V._defaultFontSize}static initialize(a){i.AnnotationEditor.initialize(a,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,t){switch(a){case h.AnnotationEditorParamsType.FREETEXT_SIZE:V._defaultFontSize=t;break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:V._defaultColor=t;break}}updateParams(a,t){switch(a){case h.AnnotationEditorParamsType.FREETEXT_SIZE:this.#r(t);break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(t);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,V._defaultFontSize],[h.AnnotationEditorParamsType.FREETEXT_COLOR,V._defaultColor||i.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[h.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#r(a){const t=f=>{this.editorDiv.style.fontSize=`calc(${f}px * var(--scale-factor))`,this.translate(0,-(f-this.#l)*this.parentScale),this.#l=f,this.#d()},r=this.#l;this.addCommands({cmd:()=>{t(a)},undo:()=>{t(r)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(a){const t=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=a},undo:()=>{this.#o=this.editorDiv.style.color=t},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(a,t){this._uiManager.translateSelectedEditors(a,t,!0)}getInitialTranslation(){const a=this.parentScale;return[-V._internalPadding*a,-(V._internalPadding+this.#l)*a]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(h.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(a){this._focusEventsAllowed&&(super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#h(){const a=this.editorDiv.getElementsByTagName("div");if(a.length===0)return this.editorDiv.innerText;const t=[];for(const r of a)t.push(r.innerText.replace(/\r\n?|\n/,""));return t.join(`
`)}#d(){const[a,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:f,div:d}=this,e=d.style.display;d.style.display="hidden",f.div.append(this.div),r=d.getBoundingClientRect(),d.remove(),d.style.display=e}this.rotation%180===this.parentRotation%180?(this.width=r.width/a,this.height=r.height/t):(this.width=r.height/a,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const a=this.#a,t=this.#a=this.#h().trimEnd();if(a===t)return;const r=f=>{if(this.#a=f,!f){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(a)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(a){this.enterInEditMode()}keydown(a){a.target===this.div&&a.key==="Enter"&&(this.enterInEditMode(),a.preventDefault())}editorDivKeydown(a){V._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let a,t;this.width&&(a=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),i.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(f=>this.editorDiv?.setAttribute("aria-label",f)),i.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(f=>this.editorDiv?.setAttribute("default-content",f)),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#l}px * var(--scale-factor))`,r.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[f,d]=this.parentDimensions;if(this.annotationElementId){const{position:e}=this.#c;let[m,b]=this.getInitialTranslation();[m,b]=this.pageTranslationToScreen(m,b);const[u,x]=this.pageDimensions,[L,R]=this.pageTranslation;let v,C;switch(this.rotation){case 0:v=a+(e[0]-L)/u,C=t+this.height-(e[1]-R)/x;break;case 90:v=a+(e[0]-L)/u,C=t-(e[1]-R)/x,[m,b]=[b,-m];break;case 180:v=a-this.width+(e[0]-L)/u,C=t-(e[1]-R)/x,[m,b]=[-m,-b];break;case 270:v=a+(e[0]-L-this.height*x)/u,C=t+(e[1]-R-this.width*u)/x,[m,b]=[-b,m];break}this.setAt(v*f,C*d,m,b)}else this.setAt(a*f,t*d,this.width*f,this.height*d);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#a)for(const a of this.#a.split(`
`)){const t=document.createElement("div");t.append(a?document.createTextNode(a):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(a,t,r){let f=null;if(a instanceof M.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:e,fontColor:m},rect:b,rotation:u,id:x},textContent:L,textPosition:R,parent:{page:{pageNumber:v}}}=a;if(!L||L.length===0)return null;f=a={annotationType:h.AnnotationEditorType.FREETEXT,color:Array.from(m),fontSize:e,value:L.join(`
`),position:R,pageIndex:v-1,rect:b,rotation:u,id:x,deleted:!1}}const d=super.deserialize(a,t,r);return d.#l=a.fontSize,d.#o=h.Util.makeHexColor(...a.color),d.#a=a.value,d.annotationElementId=a.id||null,d.#c=f,d}serialize(a=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=V._internalPadding*this.parentScale,r=this.getRect(t,t),f=i.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),d={annotationType:h.AnnotationEditorType.FREETEXT,color:f,fontSize:this.#l,value:this.#a,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return a?d:this.annotationElementId&&!this.#v(d)?null:(d.id=this.annotationElementId,d)}#v(a){const{value:t,fontSize:r,color:f,rect:d,pageIndex:e}=this.#c;return a.value!==t||a.fontSize!==r||a.rect.some((m,b)=>Math.abs(m-d[b])>=1)||a.color.some((m,b)=>m!==f[b])||a.pageIndex!==e}#m(a=!1){if(!this.annotationElementId)return;if(this.#d(),!a&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const t=V._internalPadding*this.parentScale;this.#c.rect=this.getRect(t,t)}}o.FreeTextEditor=V}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StampAnnotationElement=o.InkAnnotationElement=o.FreeTextAnnotationElement=o.AnnotationLayer=void 0;var h=P(1),_=P(6),i=P(3),M=P(30),V=P(31),z=P(32);const a=1e3,t=9,r=new WeakSet;function f(k){return{width:k[2]-k[0],height:k[3]-k[1]}}class d{static create(l){switch(l.data.annotationType){case h.AnnotationType.LINK:return new m(l);case h.AnnotationType.TEXT:return new b(l);case h.AnnotationType.WIDGET:switch(l.data.fieldType){case"Tx":return new x(l);case"Btn":return l.data.radioButton?new v(l):l.data.checkBox?new R(l):new C(l);case"Ch":return new G(l);case"Sig":return new L(l)}return new u(l);case h.AnnotationType.POPUP:return new K(l);case h.AnnotationType.FREETEXT:return new nt(l);case h.AnnotationType.LINE:return new rt(l);case h.AnnotationType.SQUARE:return new At(l);case h.AnnotationType.CIRCLE:return new pt(l);case h.AnnotationType.POLYLINE:return new bt(l);case h.AnnotationType.CARET:return new ht(l);case h.AnnotationType.INK:return new N(l);case h.AnnotationType.POLYGON:return new wt(l);case h.AnnotationType.HIGHLIGHT:return new S(l);case h.AnnotationType.UNDERLINE:return new p(l);case h.AnnotationType.SQUIGGLY:return new g(l);case h.AnnotationType.STRIKEOUT:return new E(l);case h.AnnotationType.STAMP:return new I(l);case h.AnnotationType.FILEATTACHMENT:return new D(l);default:return new e(l)}}}class e{#t=!1;constructor(l,{isRenderable:y=!1,ignoreBorder:w=!1,createQuadrilaterals:T=!1}={}){this.isRenderable=y,this.data=l.data,this.layer=l.layer,this.linkService=l.linkService,this.downloadManager=l.downloadManager,this.imageResourcesPath=l.imageResourcesPath,this.renderForms=l.renderForms,this.svgFactory=l.svgFactory,this.annotationStorage=l.annotationStorage,this.enableScripting=l.enableScripting,this.hasJSActions=l.hasJSActions,this._fieldObjects=l.fieldObjects,this.parent=l.parent,y&&(this.container=this._createContainer(w)),T&&this._createQuadrilaterals()}static _hasPopupData({titleObj:l,contentsObj:y,richText:w}){return!!(l?.str||y?.str||w?.str)}get hasPopupData(){return e._hasPopupData(this.data)}_createContainer(l){const{data:y,parent:{page:w,viewport:T}}=this,F=document.createElement("section");F.setAttribute("data-annotation-id",y.id),this instanceof u||(F.tabIndex=a),F.style.zIndex=this.parent.zIndex++,this.data.popupRef&&F.setAttribute("aria-haspopup","dialog"),y.noRotate&&F.classList.add("norotate");const{pageWidth:W,pageHeight:Y,pageX:st,pageY:Et}=T.rawDims;if(!y.rect||this instanceof K){const{rotation:gt}=y;return!y.hasOwnCanvas&&gt!==0&&this.setRotation(gt,F),F}const{width:at,height:ot}=f(y.rect),lt=h.Util.normalizeRect([y.rect[0],w.view[3]-y.rect[1]+w.view[1],y.rect[2],w.view[3]-y.rect[3]+w.view[1]]);if(!l&&y.borderStyle.width>0){F.style.borderWidth=`${y.borderStyle.width}px`;const gt=y.borderStyle.horizontalCornerRadius,Ct=y.borderStyle.verticalCornerRadius;if(gt>0||Ct>0){const Ot=`calc(${gt}px * var(--scale-factor)) / calc(${Ct}px * var(--scale-factor))`;F.style.borderRadius=Ot}else if(this instanceof v){const Ot=`calc(${at}px * var(--scale-factor)) / calc(${ot}px * var(--scale-factor))`;F.style.borderRadius=Ot}switch(y.borderStyle.style){case h.AnnotationBorderStyleType.SOLID:F.style.borderStyle="solid";break;case h.AnnotationBorderStyleType.DASHED:F.style.borderStyle="dashed";break;case h.AnnotationBorderStyleType.BEVELED:(0,h.warn)("Unimplemented border style: beveled");break;case h.AnnotationBorderStyleType.INSET:(0,h.warn)("Unimplemented border style: inset");break;case h.AnnotationBorderStyleType.UNDERLINE:F.style.borderBottomStyle="solid";break}const Mt=y.borderColor||null;Mt?(this.#t=!0,F.style.borderColor=h.Util.makeHexColor(Mt[0]|0,Mt[1]|0,Mt[2]|0)):F.style.borderWidth=0}F.style.left=`${100*(lt[0]-st)/W}%`,F.style.top=`${100*(lt[1]-Et)/Y}%`;const{rotation:ct}=y;return y.hasOwnCanvas||ct===0?(F.style.width=`${100*at/W}%`,F.style.height=`${100*ot/Y}%`):this.setRotation(ct,F),F}setRotation(l,y=this.container){if(!this.data.rect)return;const{pageWidth:w,pageHeight:T}=this.parent.viewport.rawDims,{width:F,height:W}=f(this.data.rect);let Y,st;l%180===0?(Y=100*F/w,st=100*W/T):(Y=100*W/w,st=100*F/T),y.style.width=`${Y}%`,y.style.height=`${st}%`,y.setAttribute("data-main-rotation",(360-l)%360)}get _commonActions(){const l=(y,w,T)=>{const F=T.detail[y],W=F[0],Y=F.slice(1);T.target.style[w]=M.ColorConverters[`${W}_HTML`](Y),this.annotationStorage.setValue(this.data.id,{[w]:M.ColorConverters[`${W}_rgb`](Y)})};return(0,h.shadow)(this,"_commonActions",{display:y=>{const{display:w}=y.detail,T=w%2===1;this.container.style.visibility=T?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:T,noPrint:w===1||w===2})},print:y=>{this.annotationStorage.setValue(this.data.id,{noPrint:!y.detail.print})},hidden:y=>{const{hidden:w}=y.detail;this.container.style.visibility=w?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:w,noView:w})},focus:y=>{setTimeout(()=>y.target.focus({preventScroll:!1}),0)},userName:y=>{y.target.title=y.detail.userName},readonly:y=>{y.target.disabled=y.detail.readonly},required:y=>{this._setRequired(y.target,y.detail.required)},bgColor:y=>{l("bgColor","backgroundColor",y)},fillColor:y=>{l("fillColor","backgroundColor",y)},fgColor:y=>{l("fgColor","color",y)},textColor:y=>{l("textColor","color",y)},borderColor:y=>{l("borderColor","borderColor",y)},strokeColor:y=>{l("strokeColor","borderColor",y)},rotation:y=>{const w=y.detail.rotation;this.setRotation(w),this.annotationStorage.setValue(this.data.id,{rotation:w})}})}_dispatchEventFromSandbox(l,y){const w=this._commonActions;for(const T of Object.keys(y.detail))(l[T]||w[T])?.(y)}_setDefaultPropertiesFromJS(l){if(!this.enableScripting)return;const y=this.annotationStorage.getRawValue(this.data.id);if(!y)return;const w=this._commonActions;for(const[T,F]of Object.entries(y)){const W=w[T];if(W){const Y={detail:{[T]:F},target:l};W(Y),delete y[T]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:l}=this.data;if(!l)return;const[y,w,T,F]=this.data.rect;if(l.length===1){const[,{x:Ct,y:Mt},{x:Ot,y:Ut}]=l[0];if(T===Ct&&F===Mt&&y===Ot&&w===Ut)return}const{style:W}=this.container;let Y;if(this.#t){const{borderColor:Ct,borderWidth:Mt}=W;W.borderWidth=0,Y=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ct}" stroke-width="${Mt}">`],this.container.classList.add("hasBorder")}const st=T-y,Et=F-w,{svgFactory:at}=this,ot=at.createElement("svg");ot.classList.add("quadrilateralsContainer"),ot.setAttribute("width",0),ot.setAttribute("height",0);const lt=at.createElement("defs");ot.append(lt);const ct=at.createElement("clipPath"),gt=`clippath_${this.data.id}`;ct.setAttribute("id",gt),ct.setAttribute("clipPathUnits","objectBoundingBox"),lt.append(ct);for(const[,{x:Ct,y:Mt},{x:Ot,y:Ut}]of l){const Wt=at.createElement("rect"),ee=(Ot-y)/st,Zt=(F-Mt)/Et,fe=(Ct-Ot)/st,Ie=(Mt-Ut)/Et;Wt.setAttribute("x",ee),Wt.setAttribute("y",Zt),Wt.setAttribute("width",fe),Wt.setAttribute("height",Ie),ct.append(Wt),Y?.push(`<rect vector-effect="non-scaling-stroke" x="${ee}" y="${Zt}" width="${fe}" height="${Ie}"/>`)}this.#t&&(Y.push("</g></svg>')"),W.backgroundImage=Y.join("")),this.container.append(ot),this.container.style.clipPath=`url(#${gt})`}_createPopup(){const{container:l,data:y}=this;l.setAttribute("aria-haspopup","dialog");const w=new K({data:{color:y.color,titleObj:y.titleObj,modificationDate:y.modificationDate,contentsObj:y.contentsObj,richText:y.richText,parentRect:y.rect,borderStyle:0,id:`popup_${y.id}`,rotation:y.rotation},parent:this.parent,elements:[this]});this.parent.div.append(w.render())}render(){(0,h.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(l,y=null){const w=[];if(this._fieldObjects){const T=this._fieldObjects[l];if(T)for(const{page:F,id:W,exportValues:Y}of T){if(F===-1||W===y)continue;const st=typeof Y=="string"?Y:null,Et=document.querySelector(`[data-element-id="${W}"]`);if(Et&&!r.has(Et)){(0,h.warn)(`_getElementsByName - element not allowed: ${W}`);continue}w.push({id:W,exportValue:st,domElement:Et})}return w}for(const T of document.getElementsByName(l)){const{exportValue:F}=T,W=T.getAttribute("data-element-id");W!==y&&r.has(T)&&w.push({id:W,exportValue:F,domElement:T})}return w}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const l=this.getElementsToTriggerPopup();if(Array.isArray(l))for(const y of l)y.classList.add("highlightArea");else l.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:l,data:{id:y}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:l,editId:y})})}}class m extends e{constructor(l,y=null){super(l,{isRenderable:!0,ignoreBorder:!!y?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:y}=this,w=document.createElement("a");w.setAttribute("data-element-id",l.id);let T=!1;return l.url?(y.addLinkAttributes(w,l.url,l.newWindow),T=!0):l.action?(this._bindNamedAction(w,l.action),T=!0):l.attachment?(this._bindAttachment(w,l.attachment),T=!0):l.setOCGState?(this.#e(w,l.setOCGState),T=!0):l.dest?(this._bindLink(w,l.dest),T=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(w,l),T=!0),l.resetForm?(this._bindResetFormAction(w,l.resetForm),T=!0):this.isTooltipOnly&&!T&&(this._bindLink(w,""),T=!0)),this.container.classList.add("linkAnnotation"),T&&this.container.append(w),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(l,y){l.href=this.linkService.getDestinationHash(y),l.onclick=()=>(y&&this.linkService.goToDestination(y),!1),(y||y==="")&&this.#t()}_bindNamedAction(l,y){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(y),!1),this.#t()}_bindAttachment(l,y){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,y.content,y.filename),!1),this.#t()}#e(l,y){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeSetOCGState(y),!1),this.#t()}_bindJSAction(l,y){l.href=this.linkService.getAnchorUrl("");const w=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const T of Object.keys(y.actions)){const F=w.get(T);F&&(l[F]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y.id,name:T}}),!1))}l.onclick||(l.onclick=()=>!1),this.#t()}_bindResetFormAction(l,y){const w=l.onclick;if(w||(l.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,h.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),w||(l.onclick=()=>!1);return}l.onclick=()=>{w?.();const{fields:T,refs:F,include:W}=y,Y=[];if(T.length!==0||F.length!==0){const at=new Set(F);for(const ot of T){const lt=this._fieldObjects[ot]||[];for(const{id:ct}of lt)at.add(ct)}for(const ot of Object.values(this._fieldObjects))for(const lt of ot)at.has(lt.id)===W&&Y.push(lt)}else for(const at of Object.values(this._fieldObjects))Y.push(...at);const st=this.annotationStorage,Et=[];for(const at of Y){const{id:ot}=at;switch(Et.push(ot),at.type){case"text":{const ct=at.defaultValue||"";st.setValue(ot,{value:ct});break}case"checkbox":case"radiobutton":{const ct=at.defaultValue===at.exportValues;st.setValue(ot,{value:ct});break}case"combobox":case"listbox":{const ct=at.defaultValue||"";st.setValue(ot,{value:ct});break}default:continue}const lt=document.querySelector(`[data-element-id="${ot}"]`);if(lt){if(!r.has(lt)){(0,h.warn)(`_bindResetFormAction - element not allowed: ${ot}`);continue}}else continue;lt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Et,name:"ResetForm"}}),!1}}}class b extends e{constructor(l){super(l,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const l=document.createElement("img");return l.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",l.alt="[{{type}} Annotation]",l.dataset.l10nId="text_annotation_type",l.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(l),this.container}}class u extends e{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(l){this.data.hasOwnCanvas&&(l.previousSibling?.nodeName==="CANVAS"&&(l.previousSibling.hidden=!0),l.hidden=!1)}_getKeyModifier(l){const{isWin:y,isMac:w}=h.FeatureTest.platform;return y&&l.ctrlKey||w&&l.metaKey}_setEventListener(l,y,w,T,F){w.includes("mouse")?l.addEventListener(w,W=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:T,value:F(W),shift:W.shiftKey,modifier:this._getKeyModifier(W)}})}):l.addEventListener(w,W=>{if(w==="blur"){if(!y.focused||!W.relatedTarget)return;y.focused=!1}else if(w==="focus"){if(y.focused)return;y.focused=!0}F&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:T,value:F(W)}})})}_setEventListeners(l,y,w,T){for(const[F,W]of w)(W==="Action"||this.data.actions?.[W])&&((W==="Focus"||W==="Blur")&&(y||={focused:!1}),this._setEventListener(l,y,F,W,T),W==="Focus"&&!this.data.actions?.Blur?this._setEventListener(l,y,"blur","Blur",null):W==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(l,y,"focus","Focus",null))}_setBackgroundColor(l){const y=this.data.backgroundColor||null;l.style.backgroundColor=y===null?"transparent":h.Util.makeHexColor(y[0],y[1],y[2])}_setTextStyle(l){const y=["left","center","right"],{fontColor:w}=this.data.defaultAppearanceData,T=this.data.defaultAppearanceData.fontSize||t,F=l.style;let W;const Y=2,st=Et=>Math.round(10*Et)/10;if(this.data.multiLine){const Et=Math.abs(this.data.rect[3]-this.data.rect[1]-Y),at=Math.round(Et/(h.LINE_FACTOR*T))||1,ot=Et/at;W=Math.min(T,st(ot/h.LINE_FACTOR))}else{const Et=Math.abs(this.data.rect[3]-this.data.rect[1]-Y);W=Math.min(T,st(Et/h.LINE_FACTOR))}F.fontSize=`calc(${W}px * var(--scale-factor))`,F.color=h.Util.makeHexColor(w[0],w[1],w[2]),this.data.textAlignment!==null&&(F.textAlign=y[this.data.textAlignment])}_setRequired(l,y){y?l.setAttribute("required",!0):l.removeAttribute("required"),l.setAttribute("aria-required",y)}}class x extends u{constructor(l){const y=l.renderForms||!l.data.hasAppearance&&!!l.data.fieldValue;super(l,{isRenderable:y})}setPropertyOnSiblings(l,y,w,T){const F=this.annotationStorage;for(const W of this._getElementsByName(l.name,l.id))W.domElement&&(W.domElement[y]=w),F.setValue(W.id,{[T]:w})}render(){const l=this.annotationStorage,y=this.data.id;this.container.classList.add("textWidgetAnnotation");let w=null;if(this.renderForms){const T=l.getValue(y,{value:this.data.fieldValue});let F=T.value||"";const W=l.getValue(y,{charLimit:this.data.maxLen}).charLimit;W&&F.length>W&&(F=F.slice(0,W));let Y=T.formattedValue||this.data.textContent?.join(`
`)||null;Y&&this.data.comb&&(Y=Y.replaceAll(/\s+/g,""));const st={userValue:F,formattedValue:Y,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(w=document.createElement("textarea"),w.textContent=Y??F,this.data.doNotScroll&&(w.style.overflowY="hidden")):(w=document.createElement("input"),w.type="text",w.setAttribute("value",Y??F),this.data.doNotScroll&&(w.style.overflowX="hidden")),this.data.hasOwnCanvas&&(w.hidden=!0),r.add(w),w.setAttribute("data-element-id",y),w.disabled=this.data.readOnly,w.name=this.data.fieldName,w.tabIndex=a,this._setRequired(w,this.data.required),W&&(w.maxLength=W),w.addEventListener("input",at=>{l.setValue(y,{value:at.target.value}),this.setPropertyOnSiblings(w,"value",at.target.value,"value"),st.formattedValue=null}),w.addEventListener("resetform",at=>{const ot=this.data.defaultFieldValue??"";w.value=st.userValue=ot,st.formattedValue=null});let Et=at=>{const{formattedValue:ot}=st;ot!=null&&(at.target.value=ot),at.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){w.addEventListener("focus",ot=>{if(st.focused)return;const{target:lt}=ot;st.userValue&&(lt.value=st.userValue),st.lastCommittedValue=lt.value,st.commitKey=1,st.focused=!0}),w.addEventListener("updatefromsandbox",ot=>{this.showElementAndHideCanvas(ot.target);const lt={value(ct){st.userValue=ct.detail.value??"",l.setValue(y,{value:st.userValue.toString()}),ct.target.value=st.userValue},formattedValue(ct){const{formattedValue:gt}=ct.detail;st.formattedValue=gt,gt!=null&&ct.target!==document.activeElement&&(ct.target.value=gt),l.setValue(y,{formattedValue:gt})},selRange(ct){ct.target.setSelectionRange(...ct.detail.selRange)},charLimit:ct=>{const{charLimit:gt}=ct.detail,{target:Ct}=ct;if(gt===0){Ct.removeAttribute("maxLength");return}Ct.setAttribute("maxLength",gt);let Mt=st.userValue;!Mt||Mt.length<=gt||(Mt=Mt.slice(0,gt),Ct.value=st.userValue=Mt,l.setValue(y,{value:Mt}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:Mt,willCommit:!0,commitKey:1,selStart:Ct.selectionStart,selEnd:Ct.selectionEnd}}))}};this._dispatchEventFromSandbox(lt,ot)}),w.addEventListener("keydown",ot=>{st.commitKey=1;let lt=-1;if(ot.key==="Escape"?lt=0:ot.key==="Enter"&&!this.data.multiLine?lt=2:ot.key==="Tab"&&(st.commitKey=3),lt===-1)return;const{value:ct}=ot.target;st.lastCommittedValue!==ct&&(st.lastCommittedValue=ct,st.userValue=ct,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:ct,willCommit:!0,commitKey:lt,selStart:ot.target.selectionStart,selEnd:ot.target.selectionEnd}}))});const at=Et;Et=null,w.addEventListener("blur",ot=>{if(!st.focused||!ot.relatedTarget)return;st.focused=!1;const{value:lt}=ot.target;st.userValue=lt,st.lastCommittedValue!==lt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:lt,willCommit:!0,commitKey:st.commitKey,selStart:ot.target.selectionStart,selEnd:ot.target.selectionEnd}}),at(ot)}),this.data.actions?.Keystroke&&w.addEventListener("beforeinput",ot=>{st.lastCommittedValue=null;const{data:lt,target:ct}=ot,{value:gt,selectionStart:Ct,selectionEnd:Mt}=ct;let Ot=Ct,Ut=Mt;switch(ot.inputType){case"deleteWordBackward":{const Wt=gt.substring(0,Ct).match(/\w*[^\w]*$/);Wt&&(Ot-=Wt[0].length);break}case"deleteWordForward":{const Wt=gt.substring(Ct).match(/^[^\w]*\w*/);Wt&&(Ut+=Wt[0].length);break}case"deleteContentBackward":Ct===Mt&&(Ot-=1);break;case"deleteContentForward":Ct===Mt&&(Ut+=1);break}ot.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:gt,change:lt||"",willCommit:!1,selStart:Ot,selEnd:Ut}})}),this._setEventListeners(w,st,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ot=>ot.target.value)}if(Et&&w.addEventListener("blur",Et),this.data.comb){const ot=(this.data.rect[2]-this.data.rect[0])/W;w.classList.add("comb"),w.style.letterSpacing=`calc(${ot}px * var(--scale-factor) - 1ch)`}}else w=document.createElement("div"),w.textContent=this.data.fieldValue,w.style.verticalAlign="middle",w.style.display="table-cell";return this._setTextStyle(w),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class L extends u{constructor(l){super(l,{isRenderable:!!l.data.hasOwnCanvas})}}class R extends u{constructor(l){super(l,{isRenderable:l.renderForms})}render(){const l=this.annotationStorage,y=this.data,w=y.id;let T=l.getValue(w,{value:y.exportValue===y.fieldValue}).value;typeof T=="string"&&(T=T!=="Off",l.setValue(w,{value:T})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const F=document.createElement("input");return r.add(F),F.setAttribute("data-element-id",w),F.disabled=y.readOnly,this._setRequired(F,this.data.required),F.type="checkbox",F.name=y.fieldName,T&&F.setAttribute("checked",!0),F.setAttribute("exportValue",y.exportValue),F.tabIndex=a,F.addEventListener("change",W=>{const{name:Y,checked:st}=W.target;for(const Et of this._getElementsByName(Y,w)){const at=st&&Et.exportValue===y.exportValue;Et.domElement&&(Et.domElement.checked=at),l.setValue(Et.id,{value:at})}l.setValue(w,{value:st})}),F.addEventListener("resetform",W=>{const Y=y.defaultFieldValue||"Off";W.target.checked=Y===y.exportValue}),this.enableScripting&&this.hasJSActions&&(F.addEventListener("updatefromsandbox",W=>{const Y={value(st){st.target.checked=st.detail.value!=="Off",l.setValue(w,{value:st.target.checked})}};this._dispatchEventFromSandbox(Y,W)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class v extends u{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const l=this.annotationStorage,y=this.data,w=y.id;let T=l.getValue(w,{value:y.fieldValue===y.buttonValue}).value;typeof T=="string"&&(T=T!==y.buttonValue,l.setValue(w,{value:T}));const F=document.createElement("input");if(r.add(F),F.setAttribute("data-element-id",w),F.disabled=y.readOnly,this._setRequired(F,this.data.required),F.type="radio",F.name=y.fieldName,T&&F.setAttribute("checked",!0),F.tabIndex=a,F.addEventListener("change",W=>{const{name:Y,checked:st}=W.target;for(const Et of this._getElementsByName(Y,w))l.setValue(Et.id,{value:!1});l.setValue(w,{value:st})}),F.addEventListener("resetform",W=>{const Y=y.defaultFieldValue;W.target.checked=Y!=null&&Y===y.buttonValue}),this.enableScripting&&this.hasJSActions){const W=y.buttonValue;F.addEventListener("updatefromsandbox",Y=>{const st={value:Et=>{const at=W===Et.detail.value;for(const ot of this._getElementsByName(Et.target.name)){const lt=at&&ot.id===w;ot.domElement&&(ot.domElement.checked=lt),l.setValue(ot.id,{value:lt})}}};this._dispatchEventFromSandbox(st,Y)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.checked)}return this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class C extends m{constructor(l){super(l,{ignoreBorder:l.data.hasAppearance})}render(){const l=super.render();l.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(l.title=this.data.alternativeText);const y=l.lastChild;return this.enableScripting&&this.hasJSActions&&y&&(this._setDefaultPropertiesFromJS(y),y.addEventListener("updatefromsandbox",w=>{this._dispatchEventFromSandbox({},w)})),l}}class G extends u{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const l=this.annotationStorage,y=this.data.id,w=l.getValue(y,{value:this.data.fieldValue}),T=document.createElement("select");r.add(T),T.setAttribute("data-element-id",y),T.disabled=this.data.readOnly,this._setRequired(T,this.data.required),T.name=this.data.fieldName,T.tabIndex=a;let F=this.data.combo&&this.data.options.length>0;this.data.combo||(T.size=this.data.options.length,this.data.multiSelect&&(T.multiple=!0)),T.addEventListener("resetform",at=>{const ot=this.data.defaultFieldValue;for(const lt of T.options)lt.selected=lt.value===ot});for(const at of this.data.options){const ot=document.createElement("option");ot.textContent=at.displayValue,ot.value=at.exportValue,w.value.includes(at.exportValue)&&(ot.setAttribute("selected",!0),F=!1),T.append(ot)}let W=null;if(F){const at=document.createElement("option");at.value=" ",at.setAttribute("hidden",!0),at.setAttribute("selected",!0),T.prepend(at),W=()=>{at.remove(),T.removeEventListener("input",W),W=null},T.addEventListener("input",W)}const Y=at=>{const ot=at?"value":"textContent",{options:lt,multiple:ct}=T;return ct?Array.prototype.filter.call(lt,gt=>gt.selected).map(gt=>gt[ot]):lt.selectedIndex===-1?null:lt[lt.selectedIndex][ot]};let st=Y(!1);const Et=at=>{const ot=at.target.options;return Array.prototype.map.call(ot,lt=>({displayValue:lt.textContent,exportValue:lt.value}))};return this.enableScripting&&this.hasJSActions?(T.addEventListener("updatefromsandbox",at=>{const ot={value(lt){W?.();const ct=lt.detail.value,gt=new Set(Array.isArray(ct)?ct:[ct]);for(const Ct of T.options)Ct.selected=gt.has(Ct.value);l.setValue(y,{value:Y(!0)}),st=Y(!1)},multipleSelection(lt){T.multiple=!0},remove(lt){const ct=T.options,gt=lt.detail.remove;ct[gt].selected=!1,T.remove(gt),ct.length>0&&Array.prototype.findIndex.call(ct,Mt=>Mt.selected)===-1&&(ct[0].selected=!0),l.setValue(y,{value:Y(!0),items:Et(lt)}),st=Y(!1)},clear(lt){for(;T.length!==0;)T.remove(0);l.setValue(y,{value:null,items:[]}),st=Y(!1)},insert(lt){const{index:ct,displayValue:gt,exportValue:Ct}=lt.detail.insert,Mt=T.children[ct],Ot=document.createElement("option");Ot.textContent=gt,Ot.value=Ct,Mt?Mt.before(Ot):T.append(Ot),l.setValue(y,{value:Y(!0),items:Et(lt)}),st=Y(!1)},items(lt){const{items:ct}=lt.detail;for(;T.length!==0;)T.remove(0);for(const gt of ct){const{displayValue:Ct,exportValue:Mt}=gt,Ot=document.createElement("option");Ot.textContent=Ct,Ot.value=Mt,T.append(Ot)}T.options.length>0&&(T.options[0].selected=!0),l.setValue(y,{value:Y(!0),items:Et(lt)}),st=Y(!1)},indices(lt){const ct=new Set(lt.detail.indices);for(const gt of lt.target.options)gt.selected=ct.has(gt.index);l.setValue(y,{value:Y(!0)}),st=Y(!1)},editable(lt){lt.target.disabled=!lt.detail.editable}};this._dispatchEventFromSandbox(ot,at)}),T.addEventListener("input",at=>{const ot=Y(!0);l.setValue(y,{value:ot}),at.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:st,changeEx:ot,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(T,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],at=>at.target.value)):T.addEventListener("input",function(at){l.setValue(y,{value:Y(!0)})}),this.data.combo&&this._setTextStyle(T),this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class K extends e{constructor(l){const{data:y,elements:w}=l;super(l,{isRenderable:e._hasPopupData(y)}),this.elements=w}render(){this.container.classList.add("popupAnnotation");const l=new U({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),y=[];for(const w of this.elements)w.popup=l,y.push(w.data.id),w.addHighlightArea();return this.container.setAttribute("aria-controls",y.map(w=>`${h.AnnotationPrefix}${w}`).join(",")),this.container}}class U{#t=null;#e=this.#u.bind(this);#n=this.#S.bind(this);#i=this.#E.bind(this);#o=this.#b.bind(this);#a=null;#s=null;#l=null;#c=null;#r=null;#f=null;#h=!1;#d=null;#p=null;#v=null;#m=null;#g=!1;constructor({container:l,color:y,elements:w,titleObj:T,modificationDate:F,contentsObj:W,richText:Y,parent:st,rect:Et,parentRect:at,open:ot}){this.#s=l,this.#m=T,this.#l=W,this.#v=Y,this.#r=st,this.#a=y,this.#p=Et,this.#f=at,this.#c=w;const lt=_.PDFDateString.toDateObject(F);lt&&(this.#t=st.l10n.get("annotation_date_string",{date:lt.toLocaleDateString(),time:lt.toLocaleTimeString()})),this.trigger=w.flatMap(ct=>ct.getElementsToTriggerPopup());for(const ct of this.trigger)ct.addEventListener("click",this.#o),ct.addEventListener("mouseenter",this.#i),ct.addEventListener("mouseleave",this.#n),ct.classList.add("popupTriggerArea");for(const ct of w)ct.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,ot&&this.#b()}render(){if(this.#d)return;const{page:{view:l},viewport:{rawDims:{pageWidth:y,pageHeight:w,pageX:T,pageY:F}}}=this.#r,W=this.#d=document.createElement("div");if(W.className="popup",this.#a){const Wt=W.style.outlineColor=h.Util.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?W.style.backgroundColor=`color-mix(in srgb, ${Wt} 30%, white)`:W.style.backgroundColor=h.Util.makeHexColor(...this.#a.map(Zt=>Math.floor(.7*(255-Zt)+Zt)))}const Y=document.createElement("span");Y.className="header";const st=document.createElement("h1");if(Y.append(st),{dir:st.dir,str:st.textContent}=this.#m,W.append(Y),this.#t){const Wt=document.createElement("span");Wt.classList.add("popupDate"),this.#t.then(ee=>{Wt.textContent=ee}),Y.append(Wt)}const Et=this.#l,at=this.#v;if(at?.str&&(!Et?.str||Et.str===at.str))z.XfaLayer.render({xfaHtml:at.html,intent:"richText",div:W}),W.lastChild.classList.add("richText","popupContent");else{const Wt=this._formatContents(Et);W.append(Wt)}let ot=!!this.#f,lt=ot?this.#f:this.#p;for(const Wt of this.#c)if(!lt||h.Util.intersect(Wt.data.rect,lt)!==null){lt=Wt.data.rect,ot=!0;break}const ct=h.Util.normalizeRect([lt[0],l[3]-lt[1]+l[1],lt[2],l[3]-lt[3]+l[1]]),Ct=ot?lt[2]-lt[0]+5:0,Mt=ct[0]+Ct,Ot=ct[1],{style:Ut}=this.#s;Ut.left=`${100*(Mt-T)/y}%`,Ut.top=`${100*(Ot-F)/w}%`,this.#s.append(W)}_formatContents({str:l,dir:y}){const w=document.createElement("p");w.classList.add("popupContent"),w.dir=y;const T=l.split(/(?:\r\n?|\n)/);for(let F=0,W=T.length;F<W;++F){const Y=T[F];w.append(document.createTextNode(Y)),F<W-1&&w.append(document.createElement("br"))}return w}#u(l){l.altKey||l.shiftKey||l.ctrlKey||l.metaKey||(l.key==="Enter"||l.key==="Escape"&&this.#h)&&this.#b()}#b(){this.#h=!this.#h,this.#h?(this.#E(),this.#s.addEventListener("click",this.#o),this.#s.addEventListener("keydown",this.#e)):(this.#S(),this.#s.removeEventListener("click",this.#o),this.#s.removeEventListener("keydown",this.#e))}#E(){this.#d||this.render(),this.isVisible?this.#h&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#S(){this.#s.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class nt extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0}),this.textContent=l.data.textContent,this.textPosition=l.data.textPosition,this.annotationEditorType=h.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const l=document.createElement("div");l.classList.add("annotationTextContent"),l.setAttribute("role","comment");for(const y of this.textContent){const w=document.createElement("span");w.textContent=y,l.append(w)}this.container.append(l)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}o.FreeTextAnnotationElement=nt;class rt extends e{#t=null;constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0),F=this.#t=this.svgFactory.createElement("svg:line");return F.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),F.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),F.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),F.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),F.setAttribute("stroke-width",l.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),T.append(F),this.container.append(T),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class At extends e{#t=null;constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0),F=l.borderStyle.width,W=this.#t=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",F/2),W.setAttribute("y",F/2),W.setAttribute("width",y-F),W.setAttribute("height",w-F),W.setAttribute("stroke-width",F||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),T.append(W),this.container.append(T),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class pt extends e{#t=null;constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0),F=l.borderStyle.width,W=this.#t=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",y/2),W.setAttribute("cy",w/2),W.setAttribute("rx",y/2-F/2),W.setAttribute("ry",w/2-F/2),W.setAttribute("stroke-width",F||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),T.append(W),this.container.append(T),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class bt extends e{#t=null;constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0);let F=[];for(const Y of l.vertices){const st=Y.x-l.rect[0],Et=l.rect[3]-Y.y;F.push(st+","+Et)}F=F.join(" ");const W=this.#t=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",F),W.setAttribute("stroke-width",l.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),T.append(W),this.container.append(T),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class wt extends bt{constructor(l){super(l),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ht extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class N extends e{#t=[];constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=h.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0);for(const F of l.inkLists){let W=[];for(const st of F){const Et=st.x-l.rect[0],at=l.rect[3]-st.y;W.push(`${Et},${at}`)}W=W.join(" ");const Y=this.svgFactory.createElement(this.svgElementName);this.#t.push(Y),Y.setAttribute("points",W),Y.setAttribute("stroke-width",l.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),!l.popupRef&&this.hasPopupData&&this._createPopup(),T.append(Y)}return this.container.append(T),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}o.InkAnnotationElement=N;class S extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class p extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class g extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class E extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class I extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}o.StampAnnotationElement=I;class D extends e{#t=null;constructor(l){super(l,{isRenderable:!0});const{filename:y,content:w}=this.data.file;this.filename=(0,_.getFilenameFromUrl)(y,!0),this.content=w,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:y,content:w})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:l,data:y}=this;let w;y.hasAppearance||y.fillAlpha===0?w=document.createElement("div"):(w=document.createElement("img"),w.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(y.name)?"paperclip":"pushpin"}.svg`,y.fillAlpha&&y.fillAlpha<1&&(w.style=`filter: opacity(${Math.round(y.fillAlpha*100)}%);`)),w.addEventListener("dblclick",this.#e.bind(this)),this.#t=w;const{isMac:T}=h.FeatureTest.platform;return l.addEventListener("keydown",F=>{F.key==="Enter"&&(T?F.metaKey:F.ctrlKey)&&this.#e()}),!y.popupRef&&this.hasPopupData?this._createPopup():w.classList.add("popupTriggerArea"),l.append(w),l}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class B{#t=null;#e=null;#n=new Map;constructor({div:l,accessibilityManager:y,annotationCanvasMap:w,l10n:T,page:F,viewport:W}){this.div=l,this.#t=y,this.#e=w,this.l10n=T,this.page=F,this.viewport=W,this.zIndex=0,this.l10n||=V.NullL10n}#i(l,y){const w=l.firstChild||l;w.id=`${h.AnnotationPrefix}${y}`,this.div.append(l),this.#t?.moveElementInDOM(this.div,l,w,!1)}async render(l){const{annotations:y}=l,w=this.div;(0,_.setLayerDimensions)(w,this.viewport);const T=new Map,F={data:null,layer:w,linkService:l.linkService,downloadManager:l.downloadManager,imageResourcesPath:l.imageResourcesPath||"",renderForms:l.renderForms!==!1,svgFactory:new _.DOMSVGFactory,annotationStorage:l.annotationStorage||new i.AnnotationStorage,enableScripting:l.enableScripting===!0,hasJSActions:l.hasJSActions,fieldObjects:l.fieldObjects,parent:this,elements:null};for(const W of y){if(W.noHTML)continue;const Y=W.annotationType===h.AnnotationType.POPUP;if(Y){const at=T.get(W.id);if(!at)continue;F.elements=at}else{const{width:at,height:ot}=f(W.rect);if(at<=0||ot<=0)continue}F.data=W;const st=d.create(F);if(!st.isRenderable)continue;if(!Y&&W.popupRef){const at=T.get(W.popupRef);at?at.push(st):T.set(W.popupRef,[st])}st.annotationEditorType>0&&this.#n.set(st.data.id,st);const Et=st.render();W.hidden&&(Et.style.visibility="hidden"),this.#i(Et,W.id)}this.#o(),await this.l10n.translate(w)}update({viewport:l}){const y=this.div;this.viewport=l,(0,_.setLayerDimensions)(y,{rotation:l.rotation}),this.#o(),y.hidden=!1}#o(){if(!this.#e)return;const l=this.div;for(const[y,w]of this.#e){const T=l.querySelector(`[data-annotation-id="${y}"]`);if(!T)continue;const{firstChild:F}=T;F?F.nodeName==="CANVAS"?F.replaceWith(w):F.before(w):T.append(w)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(l){return this.#n.get(l)}}o.AnnotationLayer=B}),((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0;function P(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function h(i){return Math.max(0,Math.min(255,255*i))}class _{static CMYK_G([M,V,z,a]){return["G",1-Math.min(1,.3*M+.59*z+.11*V+a)]}static G_CMYK([M]){return["CMYK",0,0,0,1-M]}static G_RGB([M]){return["RGB",M,M,M]}static G_rgb([M]){return M=h(M),[M,M,M]}static G_HTML([M]){const V=P(M);return`#${V}${V}${V}`}static RGB_G([M,V,z]){return["G",.3*M+.59*V+.11*z]}static RGB_rgb(M){return M.map(h)}static RGB_HTML(M){return`#${M.map(P).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([M,V,z,a]){return["RGB",1-Math.min(1,M+a),1-Math.min(1,z+a),1-Math.min(1,V+a)]}static CMYK_rgb([M,V,z,a]){return[h(1-Math.min(1,M+a)),h(1-Math.min(1,z+a)),h(1-Math.min(1,V+a))]}static CMYK_HTML(M){const V=this.CMYK_RGB(M).slice(1);return this.RGB_HTML(V)}static RGB_CMYK([M,V,z]){const a=1-M,t=1-V,r=1-z,f=Math.min(a,t,r);return["CMYK",a,t,r,f]}}o.ColorConverters=_}),((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NullL10n=void 0,o.getL10nFallback=h;const P={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};P.print_progress_percent="{{progress}}%";function h(M,V){switch(M){case"find_match_count":M=`find_match_count[${V.total===1?"one":"other"}]`;break;case"find_match_count_limit":M=`find_match_count_limit[${V.limit===1?"one":"other"}]`;break}return P[M]||""}function _(M,V){return V?M.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(z,a)=>a in V?V[a]:"{{"+a+"}}"):M}const i={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(M,V=null,z=h(M,V)){return _(z,V)},async translate(M){}};o.NullL10n=i}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var h=P(25);class _{static setupStorage(M,V,z,a,t){const r=a.getValue(V,{value:null});switch(z.name){case"textarea":if(r.value!==null&&(M.textContent=r.value),t==="print")break;M.addEventListener("input",f=>{a.setValue(V,{value:f.target.value})});break;case"input":if(z.attributes.type==="radio"||z.attributes.type==="checkbox"){if(r.value===z.attributes.xfaOn?M.setAttribute("checked",!0):r.value===z.attributes.xfaOff&&M.removeAttribute("checked"),t==="print")break;M.addEventListener("change",f=>{a.setValue(V,{value:f.target.checked?f.target.getAttribute("xfaOn"):f.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&M.setAttribute("value",r.value),t==="print")break;M.addEventListener("input",f=>{a.setValue(V,{value:f.target.value})})}break;case"select":if(r.value!==null){M.setAttribute("value",r.value);for(const f of z.children)f.attributes.value===r.value?f.attributes.selected=!0:f.attributes.hasOwnProperty("selected")&&delete f.attributes.selected}M.addEventListener("input",f=>{const d=f.target.options,e=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(V,{value:e})});break}}static setAttributes({html:M,element:V,storage:z=null,intent:a,linkService:t}){const{attributes:r}=V,f=M instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${a}`);for(const[d,e]of Object.entries(r))if(e!=null)switch(d){case"class":e.length&&M.setAttribute(d,e.join(" "));break;case"dataId":break;case"id":M.setAttribute("data-element-id",e);break;case"style":Object.assign(M.style,e);break;case"textContent":M.textContent=e;break;default:(!f||d!=="href"&&d!=="newWindow")&&M.setAttribute(d,e)}f&&t.addLinkAttributes(M,r.href,r.newWindow),z&&r.dataId&&this.setupStorage(M,r.dataId,V,z)}static render(M){const V=M.annotationStorage,z=M.linkService,a=M.xfaHtml,t=M.intent||"display",r=document.createElement(a.name);a.attributes&&this.setAttributes({html:r,element:a,intent:t,linkService:z});const f=[[a,-1,r]],d=M.div;if(d.append(r),M.viewport){const m=`matrix(${M.viewport.transform.join(",")})`;d.style.transform=m}t!=="richText"&&d.setAttribute("class","xfaLayer xfaFont");const e=[];for(;f.length>0;){const[m,b,u]=f.at(-1);if(b+1===m.children.length){f.pop();continue}const x=m.children[++f.at(-1)[1]];if(x===null)continue;const{name:L}=x;if(L==="#text"){const v=document.createTextNode(x.value);e.push(v),u.append(v);continue}const R=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,L):document.createElement(L);if(u.append(R),x.attributes&&this.setAttributes({html:R,element:x,storage:V,intent:t,linkService:z}),x.children&&x.children.length>0)f.push([x,-1,R]);else if(x.value){const v=document.createTextNode(x.value);h.XfaText.shouldBuildText(L)&&e.push(v),R.append(v)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:e}}static update(M){const V=`matrix(${M.viewport.transform.join(",")})`;M.div.style.transform=V,M.div.hidden=!1}}o.XfaLayer=_}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InkEditor=void 0;var h=P(1),_=P(4),i=P(29),M=P(6),V=P(5);class z extends _.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#s=new Path2D;#l=!1;#c=!1;#r=!1;#f=null;#h=0;#d=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){_.AnnotationEditor.initialize(t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(t,r){switch(t){case h.AnnotationEditorParamsType.INK_THICKNESS:z._defaultThickness=r;break;case h.AnnotationEditorParamsType.INK_COLOR:z._defaultColor=r;break;case h.AnnotationEditorParamsType.INK_OPACITY:z._defaultOpacity=r/100;break}}updateParams(t,r){switch(t){case h.AnnotationEditorParamsType.INK_THICKNESS:this.#v(r);break;case h.AnnotationEditorParamsType.INK_COLOR:this.#m(r);break;case h.AnnotationEditorParamsType.INK_OPACITY:this.#g(r);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,z._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,z._defaultColor||_.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(z._defaultOpacity*100)]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||z._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,this.color||z._defaultColor||_.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??z._defaultOpacity))]]}#v(t){const r=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#x()},undo:()=>{this.thickness=r,this.#x()},mustExec:!0,type:h.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(t){const r=this.color;this.addCommands({cmd:()=>{this.color=t,this.#_()},undo:()=>{this.color=r,this.#_()},mustExec:!0,type:h.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(t){t/=100;const r=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#_()},undo:()=>{this.opacity=r,this.#_()},mustExec:!0,type:h.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#k(),this.#R()),this.isAttachedToDOM||(this.parent.add(this),this.#y()),this.#x()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,r]=this.parentDimensions,f=this.width*t,d=this.height*r;this.setDimensions(f,d)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#a))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#a))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:t,parentDimensions:[r,f]}=this;switch(t){case 90:return[0,f,f,r];case 180:return[r,f,r,f];case 270:return[r,0,f,r];default:return[0,0,r,f]}}#b(){const{ctx:t,color:r,opacity:f,thickness:d,parentScale:e,scaleFactor:m}=this;t.lineWidth=d*e/m,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${r}${(0,V.opacityToHex)(f)}`}#E(t,r){this.canvas.addEventListener("contextmenu",M.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#a),this.isEditing=!0,this.#r||(this.#r=!0,this.#y(),this.thickness||=z._defaultThickness,this.color||=z._defaultColor||_.AnnotationEditor._defaultLineColor,this.opacity??=z._defaultOpacity),this.currentPath.push([t,r]),this.#c=!1,this.#b(),this.#p=()=>{this.#D(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#S(t,r){const[f,d]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===f&&r===d)return;const e=this.currentPath;let m=this.#s;if(e.push([t,r]),this.#c=!0,e.length<=2){m.moveTo(...e[0]),m.lineTo(t,r);return}e.length===3&&(this.#s=m=new Path2D,m.moveTo(...e[0])),this.#I(m,...e.at(-3),...e.at(-2),t,r)}#C(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#s.lineTo(...t)}#T(t,r){this.#p=null,t=Math.min(Math.max(t,0),this.canvas.width),r=Math.min(Math.max(r,0),this.canvas.height),this.#S(t,r),this.#C();let f;if(this.currentPath.length!==1)f=this.#O();else{const u=[t,r];f=[[u,u.slice(),u.slice(),u]]}const d=this.#s,e=this.currentPath;this.currentPath=[],this.#s=new Path2D;const m=()=>{this.allRawPaths.push(e),this.paths.push(f),this.bezierPath2D.push(d),this.rebuild()},b=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#k(),this.#R()),this.#x())};this.addCommands({cmd:m,undo:b,mustExec:!0})}#D(){if(!this.#c)return;this.#c=!1;const t=Math.ceil(this.thickness*this.parentScale),r=this.currentPath.slice(-3),f=r.map(m=>m[0]),d=r.map(m=>m[1]);Math.min(...f)-t,Math.max(...f)+t,Math.min(...d)-t,Math.max(...d)+t;const{ctx:e}=this;e.save(),e.clearRect(0,0,this.canvas.width,this.canvas.height);for(const m of this.bezierPath2D)e.stroke(m);e.stroke(this.#s),e.restore()}#I(t,r,f,d,e,m,b){const u=(r+d)/2,x=(f+e)/2,L=(d+m)/2,R=(e+b)/2;t.bezierCurveTo(u+2*(d-u)/3,x+2*(e-x)/3,L+2*(d-L)/3,R+2*(e-R)/3,L,R)}#O(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const r=[];let f,[d,e]=t[0];for(f=1;f<t.length-2;f++){const[v,C]=t[f],[G,K]=t[f+1],U=(v+G)/2,nt=(C+K)/2,rt=[d+2*(v-d)/3,e+2*(C-e)/3],At=[U+2*(v-U)/3,nt+2*(C-nt)/3];r.push([[d,e],rt,At,[U,nt]]),[d,e]=[U,nt]}const[m,b]=t[f],[u,x]=t[f+1],L=[d+2*(m-d)/3,e+2*(b-e)/3],R=[u+2*(m-u)/3,x+2*(b-x)/3];return r.push([[d,e],L,R,[u,x]]),r}#_(){if(this.isEmpty()){this.#w();return}this.#b();const{canvas:t,ctx:r}=this;r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),this.#w();for(const f of this.bezierPath2D)r.stroke(f)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#x(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),t.preventDefault(),t.type!=="mouse"&&this.div.focus(),this.#E(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#S(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#L(t)}canvasPointerleave(t){this.#L(t)}#L(t){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#a),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",M.noContextMenu)},10),this.#T(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#k(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",_.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>this.canvas?.setAttribute("aria-label",t)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#R(){this.#f=new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&this.setDimensions(r.width,r.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),_.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(b=>this.div?.setAttribute("aria-label",b));const[f,d,e,m]=this.#u();if(this.setAt(f,d,0,0),this.setDims(e,m),this.#k(),this.width){const[b,u]=this.parentDimensions;this.setAspectRatio(this.width*b,this.height*u),this.setAt(t*b,r*u,this.width*b,this.height*u),this.#r=!0,this.#y(),this.setDims(this.width*b,this.height*u),this.#_(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#R(),this.div}#y(){if(!this.#r)return;const[t,r]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*r),this.#w()}setDimensions(t,r){const f=Math.round(t),d=Math.round(r);if(this.#h===f&&this.#d===d)return;this.#h=f,this.#d=d,this.canvas.style.visibility="hidden";const[e,m]=this.parentDimensions;this.width=t/e,this.height=r/m,this.fixAndSetPosition(),this.#l&&this.#P(t,r),this.#y(),this.#_(),this.canvas.style.visibility="visible",this.fixDims()}#P(t,r){const f=this.#F(),d=(t-f)/this.#e,e=(r-f)/this.#t;this.scaleFactor=Math.min(d,e)}#w(){const t=this.#F()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#N(t){const r=new Path2D;for(let f=0,d=t.length;f<d;f++){const[e,m,b,u]=t[f];f===0&&r.moveTo(...e),r.bezierCurveTo(m[0],m[1],b[0],b[1],u[0],u[1])}return r}static#j(t,r,f){const[d,e,m,b]=r;switch(f){case 0:for(let u=0,x=t.length;u<x;u+=2)t[u]+=d,t[u+1]=b-t[u+1];break;case 90:for(let u=0,x=t.length;u<x;u+=2){const L=t[u];t[u]=t[u+1]+d,t[u+1]=L+e}break;case 180:for(let u=0,x=t.length;u<x;u+=2)t[u]=m-t[u],t[u+1]+=e;break;case 270:for(let u=0,x=t.length;u<x;u+=2){const L=t[u];t[u]=m-t[u+1],t[u+1]=b-L}break;default:throw new Error("Invalid rotation")}return t}static#B(t,r,f){const[d,e,m,b]=r;switch(f){case 0:for(let u=0,x=t.length;u<x;u+=2)t[u]-=d,t[u+1]=b-t[u+1];break;case 90:for(let u=0,x=t.length;u<x;u+=2){const L=t[u];t[u]=t[u+1]-e,t[u+1]=L-d}break;case 180:for(let u=0,x=t.length;u<x;u+=2)t[u]=m-t[u],t[u+1]-=e;break;case 270:for(let u=0,x=t.length;u<x;u+=2){const L=t[u];t[u]=b-t[u+1],t[u+1]=m-L}break;default:throw new Error("Invalid rotation")}return t}#H(t,r,f,d){const e=[],m=this.thickness/2,b=t*r+m,u=t*f+m;for(const x of this.paths){const L=[],R=[];for(let v=0,C=x.length;v<C;v++){const[G,K,U,nt]=x[v],rt=t*G[0]+b,At=t*G[1]+u,pt=t*K[0]+b,bt=t*K[1]+u,wt=t*U[0]+b,ht=t*U[1]+u,N=t*nt[0]+b,S=t*nt[1]+u;v===0&&(L.push(rt,At),R.push(rt,At)),L.push(pt,bt,wt,ht,N,S),R.push(pt,bt),v===C-1&&R.push(N,S)}e.push({bezier:z.#j(L,d,this.rotation),points:z.#j(R,d,this.rotation)})}return e}#M(){let t=1/0,r=-1/0,f=1/0,d=-1/0;for(const e of this.paths)for(const[m,b,u,x]of e){const L=h.Util.bezierBoundingBox(...m,...b,...u,...x);t=Math.min(t,L[0]),f=Math.min(f,L[1]),r=Math.max(r,L[2]),d=Math.max(d,L[3])}return[t,f,r,d]}#F(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#x(t=!1){if(this.isEmpty())return;if(!this.#l){this.#_();return}const r=this.#M(),f=this.#F();this.#e=Math.max(_.AnnotationEditor.MIN_SIZE,r[2]-r[0]),this.#t=Math.max(_.AnnotationEditor.MIN_SIZE,r[3]-r[1]);const d=Math.ceil(f+this.#e*this.scaleFactor),e=Math.ceil(f+this.#t*this.scaleFactor),[m,b]=this.parentDimensions;this.width=d/m,this.height=e/b,this.setAspectRatio(d,e);const u=this.translationX,x=this.translationY;this.translationX=-r[0],this.translationY=-r[1],this.#y(),this.#_(),this.#h=d,this.#d=e,this.setDims(d,e);const L=t?f/this.scaleFactor/2:0;this.translate(u-this.translationX-L,x-this.translationY-L)}static deserialize(t,r,f){if(t instanceof i.InkAnnotationElement)return null;const d=super.deserialize(t,r,f);d.thickness=t.thickness,d.color=h.Util.makeHexColor(...t.color),d.opacity=t.opacity;const[e,m]=d.pageDimensions,b=d.width*e,u=d.height*m,x=d.parentScale,L=t.thickness/2;d.#l=!0,d.#h=Math.round(b),d.#d=Math.round(u);const{paths:R,rect:v,rotation:C}=t;for(let{bezier:K}of R){K=z.#B(K,v,C);const U=[];d.paths.push(U);let nt=x*(K[0]-L),rt=x*(K[1]-L);for(let pt=2,bt=K.length;pt<bt;pt+=6){const wt=x*(K[pt]-L),ht=x*(K[pt+1]-L),N=x*(K[pt+2]-L),S=x*(K[pt+3]-L),p=x*(K[pt+4]-L),g=x*(K[pt+5]-L);U.push([[nt,rt],[wt,ht],[N,S],[p,g]]),nt=p,rt=g}const At=this.#N(U);d.bezierPath2D.push(At)}const G=d.#M();return d.#e=Math.max(_.AnnotationEditor.MIN_SIZE,G[2]-G[0]),d.#t=Math.max(_.AnnotationEditor.MIN_SIZE,G[3]-G[1]),d.#P(b,u),d}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),r=_.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:h.AnnotationEditorType.INK,color:r,thickness:this.thickness,opacity:this.opacity,paths:this.#H(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}o.InkEditor=z}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StampEditor=void 0;var h=P(1),_=P(4),i=P(6),M=P(29);class V extends _.AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#o=null;#a=null;#s=null;#l=null;#c=!1;#r=!1;static _type="stamp";constructor(a){super({...a,name:"stampEditor"}),this.#i=a.bitmapUrl,this.#o=a.bitmapFile}static initialize(a){_.AnnotationEditor.initialize(a)}static get supportedTypes(){const a=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,h.shadow)(this,"supportedTypes",a.map(t=>`image/${t}`))}static get supportedTypesStr(){return(0,h.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(a){return this.supportedTypes.includes(a)}static paste(a,t){t.pasteEditor(h.AnnotationEditorType.STAMP,{bitmapFile:a.getAsFile()})}#f(a,t=!1){if(!a){this.remove();return}this.#t=a.bitmap,t||(this.#e=a.id,this.#c=a.isSvg),this.#p()}#h(){this.#n=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#d(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(t=>this.#f(t,!0)).finally(()=>this.#h());return}if(this.#i){const t=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(t).then(r=>this.#f(r)).finally(()=>this.#h());return}if(this.#o){const t=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(t).then(r=>this.#f(r)).finally(()=>this.#h());return}const a=document.createElement("input");a.type="file",a.accept=V.supportedTypesStr,this.#n=new Promise(t=>{a.addEventListener("change",async()=>{if(!a.files||a.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(a.files[0]);this.#f(r)}t()}),a.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>this.#h()),a.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#d();return}super.rebuild(),this.div!==null&&(this.#e&&this.#d(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let a,t;if(this.width&&(a=this.x,t=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#d(),this.width){const[r,f]=this.parentDimensions;this.setAt(a*r,t*f,this.width*r,this.height*f)}return this.div}#p(){const{div:a}=this;let{width:t,height:r}=this.#t;const[f,d]=this.pageDimensions,e=.75;if(this.width)t=this.width*f,r=this.height*d;else if(t>e*f||r>e*d){const x=Math.min(e*f/t,e*d/r);t*=x,r*=x}const[m,b]=this.parentDimensions;this.setDims(t*m/f,r*b/d),this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");a.append(u),a.hidden=!1,this.#g(t,r),this.#b(),this.#r||(this.parent.addUndoableEditor(this),this.#r=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(a,t){const[r,f]=this.parentDimensions;this.width=a/r,this.height=t/f,this.setDims(a,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const d=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(a,t)},d)}#m(a,t){const{width:r,height:f}=this.#t;let d=r,e=f,m=this.#t;for(;d>2*a||e>2*t;){const b=d,u=e;d>2*a&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2)),e>2*t&&(e=e>=16384?Math.floor(e/2)-1:Math.ceil(e/2));const x=new OffscreenCanvas(d,e);x.getContext("2d").drawImage(m,0,0,b,u,0,0,d,e),m=x.transferToImageBitmap()}return m}#g(a,t){a=Math.ceil(a),t=Math.ceil(t);const r=this.#a;if(!r||r.width===a&&r.height===t)return;r.width=a,r.height=t;const f=this.#c?this.#t:this.#m(a,t),d=r.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(f,0,0,f.width,f.height,0,0,a,t)}#u(a){if(a){if(this.#c){const f=this._uiManager.imageManager.getSvgUrl(this.#e);if(f)return f}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#t,t.getContext("2d").drawImage(this.#t,0,0),t.toDataURL()}if(this.#c){const[t,r]=this.pageDimensions,f=Math.round(this.width*t*i.PixelsPerInch.PDF_TO_CSS_UNITS),d=Math.round(this.height*r*i.PixelsPerInch.PDF_TO_CSS_UNITS),e=new OffscreenCanvas(f,d);return e.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,f,d),e.transferToImageBitmap()}return structuredClone(this.#t)}#b(){this.#s=new ResizeObserver(a=>{const t=a[0].contentRect;t.width&&t.height&&this.#v(t.width,t.height)}),this.#s.observe(this.div)}static deserialize(a,t,r){if(a instanceof M.StampAnnotationElement)return null;const f=super.deserialize(a,t,r),{rect:d,bitmapUrl:e,bitmapId:m,isSvg:b,accessibilityData:u}=a;m&&r.imageManager.isValidId(m)?f.#e=m:f.#i=e,f.#c=b;const[x,L]=f.pageDimensions;return f.width=(d[2]-d[0])/x,f.height=(d[3]-d[1])/L,u&&(f.altTextData=u),f}serialize(a=!1,t=null){if(this.isEmpty())return null;const r={annotationType:h.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(a)return r.bitmapUrl=this.#u(!0),r.accessibilityData=this.altTextData,r;const{decorative:f,altText:d}=this.altTextData;if(!f&&d&&(r.accessibilityData={type:"Figure",alt:d}),t===null)return r;t.stamps||=new Map;const e=this.#c?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#e))t.stamps.set(this.#e,{area:e,serialized:r}),r.bitmap=this.#u(!1);else if(this.#c){const m=t.stamps.get(this.#e);e>m.area&&(m.area=e,m.serialized.bitmap.close(),m.serialized.bitmap=this.#u(!1))}return r}}o.StampEditor=V})],__webpack_module_cache__={};function __w_pdfjs_require__(n){var o=__webpack_module_cache__[n];if(o!==void 0)return o.exports;var P=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n](P,P.exports,__w_pdfjs_require__),P.exports}var __webpack_exports__={};return(()=>{var n=__webpack_exports__;Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AbortException",{enumerable:!0,get:function(){return o.AbortException}}),Object.defineProperty(n,"AnnotationEditorLayer",{enumerable:!0,get:function(){return i.AnnotationEditorLayer}}),Object.defineProperty(n,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return o.AnnotationEditorParamsType}}),Object.defineProperty(n,"AnnotationEditorType",{enumerable:!0,get:function(){return o.AnnotationEditorType}}),Object.defineProperty(n,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return M.AnnotationEditorUIManager}}),Object.defineProperty(n,"AnnotationLayer",{enumerable:!0,get:function(){return V.AnnotationLayer}}),Object.defineProperty(n,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(n,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(n,"DOMSVGFactory",{enumerable:!0,get:function(){return h.DOMSVGFactory}}),Object.defineProperty(n,"FeatureTest",{enumerable:!0,get:function(){return o.FeatureTest}}),Object.defineProperty(n,"GlobalWorkerOptions",{enumerable:!0,get:function(){return z.GlobalWorkerOptions}}),Object.defineProperty(n,"ImageKind",{enumerable:!0,get:function(){return o.ImageKind}}),Object.defineProperty(n,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(n,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(n,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(n,"PDFDataRangeTransport",{enumerable:!0,get:function(){return P.PDFDataRangeTransport}}),Object.defineProperty(n,"PDFDateString",{enumerable:!0,get:function(){return h.PDFDateString}}),Object.defineProperty(n,"PDFWorker",{enumerable:!0,get:function(){return P.PDFWorker}}),Object.defineProperty(n,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(n,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(n,"PixelsPerInch",{enumerable:!0,get:function(){return h.PixelsPerInch}}),Object.defineProperty(n,"PromiseCapability",{enumerable:!0,get:function(){return o.PromiseCapability}}),Object.defineProperty(n,"RenderingCancelledException",{enumerable:!0,get:function(){return h.RenderingCancelledException}}),Object.defineProperty(n,"SVGGraphics",{enumerable:!0,get:function(){return P.SVGGraphics}}),Object.defineProperty(n,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(n,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(n,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(n,"XfaLayer",{enumerable:!0,get:function(){return a.XfaLayer}}),Object.defineProperty(n,"build",{enumerable:!0,get:function(){return P.build}}),Object.defineProperty(n,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(n,"getDocument",{enumerable:!0,get:function(){return P.getDocument}}),Object.defineProperty(n,"getFilenameFromUrl",{enumerable:!0,get:function(){return h.getFilenameFromUrl}}),Object.defineProperty(n,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return h.getPdfFilenameFromUrl}}),Object.defineProperty(n,"getXfaPageViewport",{enumerable:!0,get:function(){return h.getXfaPageViewport}}),Object.defineProperty(n,"isDataScheme",{enumerable:!0,get:function(){return h.isDataScheme}}),Object.defineProperty(n,"isPdfFile",{enumerable:!0,get:function(){return h.isPdfFile}}),Object.defineProperty(n,"loadScript",{enumerable:!0,get:function(){return h.loadScript}}),Object.defineProperty(n,"noContextMenu",{enumerable:!0,get:function(){return h.noContextMenu}}),Object.defineProperty(n,"normalizeUnicode",{enumerable:!0,get:function(){return o.normalizeUnicode}}),Object.defineProperty(n,"renderTextLayer",{enumerable:!0,get:function(){return _.renderTextLayer}}),Object.defineProperty(n,"setLayerDimensions",{enumerable:!0,get:function(){return h.setLayerDimensions}}),Object.defineProperty(n,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(n,"updateTextLayer",{enumerable:!0,get:function(){return _.updateTextLayer}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return P.version}});var o=__w_pdfjs_require__(1),P=__w_pdfjs_require__(2),h=__w_pdfjs_require__(6),_=__w_pdfjs_require__(26),i=__w_pdfjs_require__(27),M=__w_pdfjs_require__(5),V=__w_pdfjs_require__(29),z=__w_pdfjs_require__(14),a=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var hasRequiredCore_min;function requireCore_min(){return hasRequiredCore_min||(hasRequiredCore_min=1,(function(n){var o=requireReact(),P=requirePdf();function h(c){var A=Object.create(null);return c&&Object.keys(c).forEach((function(O){if(O!=="default"){var j=Object.getOwnPropertyDescriptor(c,O);Object.defineProperty(A,O,j.get?j:{enumerable:!0,get:function(){return c[O]}})}})),A.default=c,Object.freeze(A)}var _,i=h(o),M=h(P);n.AnnotationType=void 0,(_=n.AnnotationType||(n.AnnotationType={}))[_.Text=1]="Text",_[_.Link=2]="Link",_[_.FreeText=3]="FreeText",_[_.Line=4]="Line",_[_.Square=5]="Square",_[_.Circle=6]="Circle",_[_.Polygon=7]="Polygon",_[_.Polyline=8]="Polyline",_[_.Highlight=9]="Highlight",_[_.Underline=10]="Underline",_[_.Squiggly=11]="Squiggly",_[_.StrikeOut=12]="StrikeOut",_[_.Stamp=13]="Stamp",_[_.Caret=14]="Caret",_[_.Ink=15]="Ink",_[_.Popup=16]="Popup",_[_.FileAttachment=17]="FileAttachment";var V=function(c,A){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,j){O.__proto__=j}||function(O,j){for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(O[q]=j[q])},V(c,A)};function z(c,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function O(){this.constructor=c}V(c,A),c.prototype=A===null?Object.create(A):(O.prototype=A.prototype,new O)}var a,t=function(){return t=Object.assign||function(c){for(var A,O=1,j=arguments.length;O<j;O++)for(var q in A=arguments[O])Object.prototype.hasOwnProperty.call(A,q)&&(c[q]=A[q]);return c},t.apply(this,arguments)};n.TextDirection=void 0,(a=n.TextDirection||(n.TextDirection={})).RightToLeft="RTL",a.LeftToRight="LTR";var r,f=i.createContext({currentTheme:"light",direction:n.TextDirection.LeftToRight,setCurrentTheme:function(){}}),d=function(c){var A=[];return Object.keys(c).forEach((function(O){O&&c[O]&&A.push(O)})),A.join(" ")},e=typeof window<"u"?i.useLayoutEffect:i.useEffect,m=function(c){var A=i.useRef(null),O=c.once,j=c.threshold,q=c.onVisibilityChanged;return e((function(){var $=A.current;if($){var tt=new IntersectionObserver((function(J){J.forEach((function(H){var Q=H.isIntersecting,Z=H.intersectionRatio;q({isVisible:Q,ratio:Z}),Q&&O&&(tt.unobserve($),tt.disconnect())}))}),{threshold:j||0});return tt.observe($),function(){tt.unobserve($),tt.disconnect()}}}),[]),A},b=function(c){var A=c.children,O=c.ignoreDirection,j=O!==void 0&&O,q=c.size,$=q===void 0?24:q,tt=i.useContext(f).direction,J=!j&&tt===n.TextDirection.RightToLeft,H="".concat($||24,"px");return i.createElement("svg",{"aria-hidden":"true",className:d({"rpv-core__icon":!0,"rpv-core__icon--rtl":J}),focusable:"false",height:H,viewBox:"0 0 24 24",width:H},A)},u=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},x=function(c){var A=c.children,O=c.testId,j=c.onClick,q=i.useContext(f).direction===n.TextDirection.RightToLeft,$=O?{"data-testid":O}:{};return i.createElement("button",t({className:d({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":q}),type:"button",onClick:j},$),A)},L=function(c){var A=c.size,O=A===void 0?"4rem":A,j=c.testId,q=i.useState(!1),$=q[0],tt=q[1],J=j?{"data-testid":j}:{},H=m({onVisibilityChanged:function(Q){tt(Q.isVisible)}});return i.createElement("div",t({},J,{className:d({"rpv-core__spinner":!0,"rpv-core__spinner--animating":$}),ref:H,style:{height:O,width:O}}))},R=function(c){var A=c.ariaLabel,O=A===void 0?"":A,j=c.autoFocus,q=j!==void 0&&j,$=c.placeholder,tt=$===void 0?"":$,J=c.testId,H=c.type,Q=H===void 0?"text":H,Z=c.value,ft=Z===void 0?"":Z,dt=c.onChange,ut=c.onKeyDown,St=ut===void 0?function(){}:ut,_t=i.useContext(f).direction,vt=i.useRef(),Kt=_t===n.TextDirection.RightToLeft,Dt={ref:vt,"data-testid":"","aria-label":O,className:d({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Kt}),placeholder:tt,value:ft,onChange:function(It){return dt(It.target.value)},onKeyDown:St};return J&&(Dt["data-testid"]=J),e((function(){if(q){var It=vt.current;if(It){var Ht=window.scrollX,Tt=window.scrollY;It.focus(),window.scrollTo(Ht,Tt)}}}),[]),Q==="text"?i.createElement("input",t({type:"text"},Dt)):i.createElement("input",t({type:"password"},Dt))};(function(c){c[c.ExitFullScreen=0]="ExitFullScreen",c[c.FullScreenChange=1]="FullScreenChange",c[c.FullScreenElement=2]="FullScreenElement",c[c.FullScreenEnabled=3]="FullScreenEnabled",c[c.RequestFullScreen=4]="RequestFullScreen"})(r||(r={}));var v,C={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},G={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},K={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},U=typeof window<"u",nt=U&&(r.FullScreenEnabled in document&&C||G.FullScreenEnabled in document&&G||K.FullScreenEnabled in document&&K)||C,rt=function(){return U&&nt.FullScreenEnabled in document&&document[nt.FullScreenEnabled]===!0},At=function(c){return U?c[nt.ExitFullScreen]():Promise.resolve({})},pt=function(){return U?document[nt.FullScreenElement]:null},bt=function(c,A){var O=i.useRef(),j=function(){O.current&&clearTimeout(O.current)};return i.useEffect((function(){return function(){return j()}}),[]),i.useCallback((function(){for(var q=[],$=0;$<arguments.length;$++)q[$]=arguments[$];j(),O.current=setTimeout((function(){c.apply(void 0,q)}),A)}),[c,A])},wt=function(){var c=i.useRef(!1);return i.useEffect((function(){return c.current=!0,function(){c.current=!1}}),[]),c},ht=function(c){var A=i.useRef(c);return i.useEffect((function(){A.current=c}),[c]),A.current};(function(c){c.NotRenderedYet="NotRenderedYet",c.Rendering="Rendering",c.Rendered="Rendered"})(v||(v={}));var N,S=-9999,p=function(c){var A=c.doc,O=A.numPages,j=A.loadingTask.docId,q=i.useMemo((function(){return Array(O).fill(null).map((function(J,H){return{pageIndex:H,renderStatus:v.NotRenderedYet,visibility:S}}))}),[j]),$=i.useRef({currentRenderingPage:-1,startRange:0,endRange:O-1,visibilities:q}),tt=function(J,H){$.current.visibilities[J].visibility=H};return{getHighestPriorityPage:function(){var J=$.current.visibilities.slice($.current.startRange,$.current.endRange+1).filter((function(dt){return dt.visibility>S}));if(!J.length)return-1;for(var H=J[0].pageIndex,Q=J[J.length-1].pageIndex,Z=J.length,ft=0;ft<Z;ft++){if(J[ft].renderStatus===v.Rendering)return-1;if(J[ft].renderStatus===v.NotRenderedYet)return J[ft].pageIndex}return Q+1<O&&$.current.visibilities[Q+1].renderStatus!==v.Rendered?Q+1:H-1>=0&&$.current.visibilities[H-1].renderStatus!==v.Rendered?H-1:-1},isInRange:function(J){return J>=$.current.startRange&&J<=$.current.endRange},markNotRendered:function(){for(var J=0;J<O;J++)$.current.visibilities[J].renderStatus=v.NotRenderedYet},markRendered:function(J){$.current.visibilities[J].renderStatus=v.Rendered},markRendering:function(J){$.current.currentRenderingPage!==-1&&$.current.currentRenderingPage!==J&&$.current.visibilities[$.current.currentRenderingPage].renderStatus===v.Rendering&&($.current.visibilities[$.current.currentRenderingPage].renderStatus=v.NotRenderedYet),$.current.visibilities[J].renderStatus=v.Rendering,$.current.currentRenderingPage=J},setOutOfRange:function(J){tt(J,S)},setRange:function(J,H){$.current.startRange=J,$.current.endRange=H;for(var Q=0;Q<O;Q++)(Q<J||Q>H)&&($.current.visibilities[Q].visibility=S,$.current.visibilities[Q].renderStatus=v.NotRenderedYet)},setVisibility:tt}},g={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},E=i.createContext({l10n:g,setL10n:function(){}}),I=0,D=function(){return I++},B=function(c,A,O){var j=function(q){var $=A.current;if($){var tt=q.target;if(tt instanceof Element&&tt.shadowRoot){var J=q.composedPath();J.length>0&&!$.contains(J[0])&&O()}else $.contains(tt)||O()}};i.useEffect((function(){if(c){var q={capture:!0};return document.addEventListener("click",j,q),function(){document.removeEventListener("click",j,q)}}}),[])},k=function(c){var A=function(O){O.key==="Escape"&&c()};i.useEffect((function(){return document.addEventListener("keyup",A),function(){document.removeEventListener("keyup",A)}}),[])},l=function(c){var A=c.ariaControlsSuffix,O=c.children,j=c.closeOnClickOutside,q=c.closeOnEscape,$=c.onToggle,tt=i.useRef(),J=i.useContext(f).direction===n.TextDirection.RightToLeft;return i.useEffect((function(){var H=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=H}}),[]),k((function(){tt.current&&q&&$()})),B(j,tt,$),e((function(){var H=tt.current;if(H){var Q=.75*document.body.clientHeight;H.getBoundingClientRect().height>=Q&&(H.style.overflow="auto",H.style.maxHeight="".concat(Q,"px"))}}),[]),i.createElement("div",{"aria-modal":"true",className:d({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":J}),id:"rpv-core__modal-body-".concat(A),ref:tt,role:"dialog",tabIndex:-1},O)},y=function(c){var A=c.children;return i.createElement("div",{className:"rpv-core__modal-overlay"},A)};n.ToggleStatus=void 0,(N=n.ToggleStatus||(n.ToggleStatus={})).Close="Close",N.Open="Open",N.Toggle="Toggle";var w,T=function(c){var A=i.useState(c),O=A[0],j=A[1];return{opened:O,toggle:function(q){switch(q){case n.ToggleStatus.Close:j(!1);break;case n.ToggleStatus.Open:j(!0);break;case n.ToggleStatus.Toggle:default:j((function($){return!$}))}}}},F=function(c){var A=c.content,O=c.isOpened,j=O!==void 0&&O,q=c.target,$=T(j),tt=$.opened,J=$.toggle;return i.createElement(i.Fragment,null,q&&q(J,tt),tt&&A(J))};n.Position=void 0,(w=n.Position||(n.Position={})).TopLeft="TOP_LEFT",w.TopCenter="TOP_CENTER",w.TopRight="TOP_RIGHT",w.RightTop="RIGHT_TOP",w.RightCenter="RIGHT_CENTER",w.RightBottom="RIGHT_BOTTOM",w.BottomLeft="BOTTOM_LEFT",w.BottomCenter="BOTTOM_CENTER",w.BottomRight="BOTTOM_RIGHT",w.LeftTop="LEFT_TOP",w.LeftCenter="LEFT_CENTER",w.LeftBottom="LEFT_BOTTOM";var W,Y,st,Et,at,ot,lt,ct,gt=function(c,A,O,j,q){e((function(){var $=A.current,tt=c.current,J=O.current;if(tt&&$&&J){var H=J.getBoundingClientRect(),Q=(function(dt,ut,St,_t){var vt=ut.getBoundingClientRect(),Kt=dt.getBoundingClientRect(),Dt=Kt.height,It=Kt.width,Ht=0,Tt=0;switch(St){case n.Position.TopLeft:Ht=vt.top-Dt,Tt=vt.left;break;case n.Position.TopCenter:Ht=vt.top-Dt,Tt=vt.left+vt.width/2-It/2;break;case n.Position.TopRight:Ht=vt.top-Dt,Tt=vt.left+vt.width-It;break;case n.Position.RightTop:Ht=vt.top,Tt=vt.left+vt.width;break;case n.Position.RightCenter:Ht=vt.top+vt.height/2-Dt/2,Tt=vt.left+vt.width;break;case n.Position.RightBottom:Ht=vt.top+vt.height-Dt,Tt=vt.left+vt.width;break;case n.Position.BottomLeft:Ht=vt.top+vt.height,Tt=vt.left;break;case n.Position.BottomCenter:Ht=vt.top+vt.height,Tt=vt.left+vt.width/2-It/2;break;case n.Position.BottomRight:Ht=vt.top+vt.height,Tt=vt.left+vt.width-It;break;case n.Position.LeftTop:Ht=vt.top,Tt=vt.left-It;break;case n.Position.LeftCenter:Ht=vt.top+vt.height/2-Dt/2,Tt=vt.left-It;break;case n.Position.LeftBottom:Ht=vt.top+vt.height-Dt,Tt=vt.left-It}return{left:Tt+(_t.left||0),top:Ht+(_t.top||0)}})(tt,$,j,q),Z=Q.top,ft=Q.left;tt.style.top="".concat(Z-H.top,"px"),tt.style.left="".concat(ft-H.left,"px")}}),[])},Ct=function(c){var A,O=c.customClassName,j=c.position;return i.createElement("div",{className:d((A={"rpv-core__arrow":!0,"rpv-core__arrow--tl":j===n.Position.TopLeft,"rpv-core__arrow--tc":j===n.Position.TopCenter,"rpv-core__arrow--tr":j===n.Position.TopRight,"rpv-core__arrow--rt":j===n.Position.RightTop,"rpv-core__arrow--rc":j===n.Position.RightCenter,"rpv-core__arrow--rb":j===n.Position.RightBottom,"rpv-core__arrow--bl":j===n.Position.BottomLeft,"rpv-core__arrow--bc":j===n.Position.BottomCenter,"rpv-core__arrow--br":j===n.Position.BottomRight,"rpv-core__arrow--lt":j===n.Position.LeftTop,"rpv-core__arrow--lc":j===n.Position.LeftCenter,"rpv-core__arrow--lb":j===n.Position.LeftBottom},A["".concat(O)]=O!=="",A))})},Mt=function(c){var A=c.ariaControlsSuffix,O=c.children,j=c.closeOnClickOutside,q=c.offset,$=c.position,tt=c.targetRef,J=c.onClose,H=i.useRef(),Q=i.useRef(),Z=i.useRef(),ft=i.useContext(f).direction===n.TextDirection.RightToLeft;B(j,H,J),gt(H,tt,Z,$,q),e((function(){var ut=Q.current;if(ut){var St=.75*document.body.clientHeight;ut.getBoundingClientRect().height>=St&&(ut.style.overflow="auto",ut.style.maxHeight="".concat(St,"px"))}}),[]);var dt="rpv-core__popover-body-inner-".concat(A);return i.createElement(i.Fragment,null,i.createElement("div",{ref:Z,style:{left:0,position:"absolute",top:0}}),i.createElement("div",{"aria-describedby":dt,className:d({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":ft}),id:"rpv-core__popover-body-".concat(A),ref:H,role:"dialog",tabIndex:-1},i.createElement(Ct,{customClassName:"rpv-core__popover-body-arrow",position:$}),i.createElement("div",{id:dt,ref:Q},O)))},Ot=function(c){var A=c.closeOnEscape,O=c.onClose,j=i.useRef();return k((function(){j.current&&A&&O()})),i.createElement("div",{className:"rpv-core__popover-overlay",ref:j})},Ut=function(c){var A=c.ariaControlsSuffix,O=c.children,j=c.contentRef,q=c.offset,$=c.position,tt=c.targetRef,J=i.useRef(),H=i.useContext(f).direction===n.TextDirection.RightToLeft;return gt(j,tt,J,$,q),i.createElement(i.Fragment,null,i.createElement("div",{ref:J,style:{left:0,position:"absolute",top:0}}),i.createElement("div",{className:d({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":H}),id:"rpv-core__tooltip-body-".concat(A),ref:j,role:"tooltip"},i.createElement(Ct,{customClassName:"rpv-core__tooltip-body-arrow",position:$}),i.createElement("div",{className:"rpv-core__tooltip-body-content"},O)))};n.FullScreenMode=void 0,(W=n.FullScreenMode||(n.FullScreenMode={})).Normal="Normal",W.Entering="Entering",W.Entered="Entered",W.EnteredCompletely="EnteredCompletely",W.Exitting="Exitting",W.Exited="Exited",n.LayerRenderStatus=void 0,(Y=n.LayerRenderStatus||(n.LayerRenderStatus={}))[Y.PreRender=0]="PreRender",Y[Y.DidRender=1]="DidRender",n.PageMode=void 0,(st=n.PageMode||(n.PageMode={})).Attachments="UseAttachments",st.Bookmarks="UseOutlines",st.ContentGroup="UseOC",st.Default="UserNone",st.FullScreen="FullScreen",st.Thumbnails="UseThumbs",n.PasswordStatus=void 0,(Et=n.PasswordStatus||(n.PasswordStatus={})).RequiredPassword="RequiredPassword",Et.WrongPassword="WrongPassword",n.RotateDirection=void 0,(at=n.RotateDirection||(n.RotateDirection={})).Backward="Backward",at.Forward="Forward",n.ScrollMode=void 0,(ot=n.ScrollMode||(n.ScrollMode={})).Page="Page",ot.Horizontal="Horizontal",ot.Vertical="Vertical",ot.Wrapped="Wrapped",n.SpecialZoomLevel=void 0,(lt=n.SpecialZoomLevel||(n.SpecialZoomLevel={})).ActualSize="ActualSize",lt.PageFit="PageFit",lt.PageWidth="PageWidth",n.ViewMode=void 0,(ct=n.ViewMode||(n.ViewMode={})).DualPage="DualPage",ct.DualPageWithCover="DualPageWithCover",ct.SinglePage="SinglePage";var Wt,ee=function(c,A){return c.reduce((function(O,j,q){return q%A?O[O.length-1].push(j):O.push([j]),O}),[])},Zt=function(c,A){switch(A[1].name){case"XYZ":return{bottomOffset:function(O,j){return A[3]===null?j:A[3]},leftOffset:function(O,j){return A[2]===null?0:A[2]},pageIndex:c,scaleTo:A[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:c,scaleTo:n.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:A[2],leftOffset:0,pageIndex:c,scaleTo:n.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:c,scaleTo:1}}},fe=new Map,Ie=new Map,Ae=function(c,A){return"".concat(c.loadingTask.docId,"___").concat(A.num,"R").concat(A.gen===0?"":A.gen)},Fe=function(c,A,O){fe.set(Ae(c,A),O)},je=function(c,A){if(!c)return Promise.reject("The document is not loaded yet");var O="".concat(c.loadingTask.docId,"___").concat(A),j=Ie.get(O);return j?Promise.resolve(j):new Promise((function(q,$){c.getPage(A+1).then((function(tt){Ie.set(O,tt),tt.ref&&Fe(c,tt.ref,A),q(tt)}))}))},Ge=function(c,A){return new Promise((function(O){new Promise((function(j){typeof A=="string"?c.getDestination(A).then((function(q){j(q)})):j(A)})).then((function(j){if(typeof j[0]=="object"&&j[0]!==null){var q=j[0],$=(function(J,H){var Q=Ae(J,H);return fe.has(Q)?fe.get(Q):null})(c,q);$===null?c.getPageIndex(q).then((function(J){Fe(c,q,J),Ge(c,A).then((function(H){return O(H)}))})):O(Zt($,j))}else{var tt=Zt(j[0],j);O(tt)}}))}))};(function(c){c[c.Solid=1]="Solid",c[c.Dashed=2]="Dashed",c[c.Beveled=3]="Beveled",c[c.Inset=4]="Inset",c[c.Underline=5]="Underline"})(Wt||(Wt={}));var Ue,yt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),it=function(c,A,O,j){var q=parseInt(c,10);return q>=A&&q<=O?q:j},et=function(c){return c.contentsObj?c.contentsObj.str:c.contents||""},xt=function(c){return c.titleObj?c.titleObj.str:c.title||""},ue=function(c){var A=c.annotation,O=i.useContext(f).direction,j=xt(A),q=et(A),$=O===n.TextDirection.RightToLeft,tt=i.useRef(),J="";if(A.modificationDate){var H=(function(Q){var Z=yt.exec(Q);if(!Z)return null;var ft=parseInt(Z[1],10),dt=it(Z[2],1,12,1)-1,ut=it(Z[3],1,31,1),St=it(Z[4],0,23,0),_t=it(Z[5],0,59,0),vt=it(Z[6],0,59,0),Kt=Z[7]||"Z",Dt=it(Z[8],0,23,0),It=it(Z[9],0,59,0);switch(Kt){case"-":St+=Dt,_t+=It;break;case"+":St-=Dt,_t-=It}return new Date(Date.UTC(ft,dt,ut,St,_t,vt))})(A.modificationDate);J=H?"".concat(H.toLocaleDateString(),", ").concat(H.toLocaleTimeString()):""}return i.useLayoutEffect((function(){if(tt.current){var Q=document.querySelector('[data-annotation-id="'.concat(A.id,'"]'));if(Q){var Z=Q;return Z.style.zIndex+=1,function(){Z.style.zIndex="".concat(parseInt(Z.style.zIndex,10)-1)}}}}),[]),i.createElement("div",{ref:tt,className:d({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":$}),style:{top:A.annotationType===n.AnnotationType.Popup?"":"100%"}},j&&i.createElement(i.Fragment,null,i.createElement("div",{className:d({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!$,"rpv-core__annotation-popup-title--rtl":$})},j),i.createElement("div",{className:"rpv-core__annotation-popup-date"},J)),q&&i.createElement("div",{className:"rpv-core__annotation-popup-content"},q.split(`
`).map((function(Q,Z){return i.createElement(i.Fragment,{key:Z},Q,i.createElement("br",null))}))))};(function(c){c.Click="Click",c.Hover="Hover"})(Ue||(Ue={}));var Gt,ie=function(c){var A,O=c.annotation,j=c.children,q=c.ignoreBorder,$=c.hasPopup,tt=c.isRenderable,J=c.page,H=c.viewport,Q=O.rect,Z=(function(){var jt=T(!1),re=jt.opened,ne=jt.toggle,se=i.useState(Ue.Hover),ae=se[0],le=se[1];return{opened:re,closeOnHover:function(){ae===Ue.Hover&&ne(n.ToggleStatus.Close)},openOnHover:function(){ae===Ue.Hover&&ne(n.ToggleStatus.Open)},toggleOnClick:function(){switch(ae){case Ue.Click:re&&le(Ue.Hover),ne(n.ToggleStatus.Toggle);break;case Ue.Hover:le(Ue.Click),ne(n.ToggleStatus.Open)}}}})(),ft=Z.closeOnHover,dt=Z.opened,ut=Z.openOnHover,St=Z.toggleOnClick,_t=(A=[Q[0],J.view[3]+J.view[1]-Q[1],Q[2],J.view[3]+J.view[1]-Q[3]],[Math.min(A[0],A[2]),Math.min(A[1],A[3]),Math.max(A[0],A[2]),Math.max(A[1],A[3])]),vt=Q[2]-Q[0],Kt=Q[3]-Q[1],Dt={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!q&&O.borderStyle.width>0){switch(O.borderStyle.style){case Wt.Dashed:Dt.borderStyle="dashed";break;case Wt.Solid:Dt.borderStyle="solid";break;case Wt.Underline:Dt=Object.assign({borderBottomStyle:"solid"},Dt);case Wt.Beveled:case Wt.Inset:}var It=O.borderStyle.width;Dt.borderWidth="".concat(It,"px"),O.borderStyle.style!==Wt.Underline&&(vt-=2*It,Kt-=2*It);var Ht=O.borderStyle,Tt=Ht.horizontalCornerRadius,zt=Ht.verticalCornerRadius;(Tt>0||zt>0)&&(Dt.borderRadius="".concat(Tt,"px / ").concat(zt,"px")),O.color?Dt.borderColor="rgb(".concat(0|O.color[0],", ").concat(0|O.color[1],", ").concat(0|O.color[2],")"):Dt.borderWidth="0"}return i.createElement(i.Fragment,null,tt&&j({popup:{opened:dt,closeOnHover:ft,openOnHover:ut,toggleOnClick:St},slot:{attrs:{style:Object.assign({height:"".concat(Kt,"px"),left:"".concat(_t[0],"px"),top:"".concat(_t[1],"px"),transform:"matrix(".concat(H.transform.join(","),")"),transformOrigin:"-".concat(_t[0],"px -").concat(_t[1],"px"),width:"".concat(vt,"px")},Dt)},children:i.createElement(i.Fragment,null,$&&dt&&i.createElement(ue,{annotation:O}))}}))},Ye=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(H){return i.createElement("div",t({},H.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":A.id,onClick:H.popup.toggleOnClick,onMouseEnter:H.popup.openOnHover,onMouseLeave:H.popup.closeOnHover}),H.slot.children)}))},Ke=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),H=A.rect,Q=H[2]-H[0],Z=H[3]-H[1],ft=A.borderStyle.width;return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(dt){return i.createElement("div",t({},dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":A.id,onClick:dt.popup.toggleOnClick,onMouseEnter:dt.popup.openOnHover,onMouseLeave:dt.popup.closeOnHover}),i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("circle",{cy:Z/2,fill:"none",rx:Q/2-ft/2,ry:Z/2-ft/2,stroke:"transparent",strokeWidth:ft||1})),dt.slot.children)}))},Xe=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=xt(A),$=et(A),tt=!(A.hasPopup!==!1||!q&&!$),J=function(){var H,Q,Z,ft,dt=A.file;dt&&(H=dt.filename,Q=dt.content,Z=typeof Q=="string"?"":URL.createObjectURL(new Blob([Q],{type:""})),(ft=document.createElement("a")).style.display="none",ft.href=Z||H,ft.setAttribute("download",(function(ut){var St=ut.split("/").pop();return St?St.split("#")[0].split("?")[0]:ut})(H)),document.body.appendChild(ft),ft.click(),document.body.removeChild(ft),Z&&URL.revokeObjectURL(Z))};return i.createElement(ie,{annotation:A,hasPopup:tt,ignoreBorder:!0,isRenderable:!0,page:O,viewport:j},(function(H){return i.createElement("div",t({},H.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":A.id,onClick:H.popup.toggleOnClick,onDoubleClick:J,onMouseEnter:H.popup.openOnHover,onMouseLeave:H.popup.closeOnHover}),H.slot.children)}))},De=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(H){return i.createElement("div",t({},H.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":A.id,onClick:H.popup.toggleOnClick,onMouseEnter:H.popup.openOnHover,onMouseLeave:H.popup.closeOnHover}),H.slot.children)}))},Ve=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=xt(A),$=et(A),tt=!(!q&&!$),J=!A.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(A.parentType)!==-1;return e((function(){if(A.parentId){var H=document.querySelector('[data-annotation-id="'.concat(A.parentId,'"]')),Q=document.querySelector('[data-annotation-id="'.concat(A.id,'"]'));if(H&&Q){var Z=parseFloat(H.style.left),ft=parseFloat(H.style.top)+parseFloat(H.style.height);Q.style.left="".concat(Z,"px"),Q.style.top="".concat(ft,"px"),Q.style.transformOrigin="-".concat(Z,"px -").concat(ft,"px")}}}),[]),i.createElement(ie,{annotation:A,hasPopup:J,ignoreBorder:!1,isRenderable:tt,page:O,viewport:j},(function(H){return i.createElement("div",t({},H.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":A.id}),i.createElement(ue,{annotation:A}))}))},We=function(c){var A=c.annotation,O=c.childAnnotation,j=c.page,q=c.viewport,$=A.hasPopup===!1,tt=xt(A),J=et(A),H=!!(A.hasPopup||tt||J);if(A.quadPoints&&A.quadPoints.length>0){var Q=A.quadPoints.map((function(Z){return Object.assign({},A,{rect:[Z[2].x,Z[2].y,Z[1].x,Z[1].y],quadPoints:[]})}));return i.createElement(i.Fragment,null,Q.map((function(Z,ft){return i.createElement(We,{key:ft,annotation:Z,childAnnotation:O,page:j,viewport:q})})))}return i.createElement(ie,{annotation:A,hasPopup:$,ignoreBorder:!0,isRenderable:H,page:j,viewport:q},(function(Z){return i.createElement(i.Fragment,null,i.createElement("div",t({},Z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":A.id,onClick:Z.popup.toggleOnClick,onMouseEnter:Z.popup.openOnHover,onMouseLeave:Z.popup.closeOnHover}),Z.slot.children),O&&O.annotationType===n.AnnotationType.Popup&&Z.popup.opened&&i.createElement(Ve,{annotation:O,page:j,viewport:q}))}))},on=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),H=A.rect,Q=H[2]-H[0],Z=H[3]-H[1],ft=A.borderStyle.width;return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(dt){return i.createElement("div",t({},dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":A.id,onClick:dt.popup.toggleOnClick,onMouseEnter:dt.popup.openOnHover,onMouseLeave:dt.popup.closeOnHover}),A.inkLists&&A.inkLists.length&&i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},A.inkLists.map((function(ut,St){return i.createElement("polyline",{key:St,fill:"none",stroke:"transparent",strokeWidth:ft||1,points:ut.map((function(_t){return"".concat(_t.x-H[0],",").concat(H[3]-_t.y)})).join(" ")})}))),dt.slot.children)}))},Ce=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),H=A.rect,Q=H[2]-H[0],Z=H[3]-H[1],ft=A.borderStyle.width;return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(dt){return i.createElement("div",t({},dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":A.id,onClick:dt.popup.toggleOnClick,onMouseEnter:dt.popup.openOnHover,onMouseLeave:dt.popup.closeOnHover}),i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("line",{stroke:"transparent",strokeWidth:ft||1,x1:H[2]-A.lineCoordinates[0],x2:H[2]-A.lineCoordinates[2],y1:H[3]-A.lineCoordinates[1],y2:H[3]-A.lineCoordinates[3]})),dt.slot.children)}))},ln=/^([^\w]*)(javascript|data|vbscript)/im,cn=/&#(\w+)(^\w|;)?/g,fn=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,pn=/^([^:]+):/gm,nn=function(c,A){var O,j=(O=c||"",O.replace(cn,(function(J,H){return String.fromCharCode(H)}))).replace(fn,"").trim();if(!j)return A;var q=j[0];if(q==="."||q==="/")return j;var $=j.match(pn);if(!$)return j;var tt=$[0];return ln.test(tt)?A:j},Oe=function(c){var A,O=c.annotation,j=c.annotationContainerRef,q=c.doc,$=c.outlines,tt=c.page,J=c.pageIndex,H=c.scale,Q=c.viewport,Z=c.onExecuteNamedAction,ft=c.onJumpFromLinkAnnotation,dt=c.onJumpToDest,ut=i.useRef(),St=$&&$.length&&O.dest&&typeof O.dest=="string"?(A=$.find((function(Dt){return Dt.dest===O.dest})))===null||A===void 0?void 0:A.title:"",_t=!!(O.url||O.dest||O.action||O.unsafeUrl),vt={};if(O.url||O.unsafeUrl){var Kt=nn(O.url||O.unsafeUrl,"");Kt?vt={"data-target":"external",href:Kt,rel:"noopener noreferrer nofollow",target:O.newWindow?"_blank":"",title:Kt}:_t=!1}else vt={href:"","data-annotation-link":O.id,onClick:function(Dt){Dt.preventDefault(),O.action?Z(O.action):Ge(q,O.dest).then((function(It){var Ht=ut.current,Tt=j.current;if(Ht&&Tt){var zt=Ht.getBoundingClientRect();Tt.style.setProperty("height","100%"),Tt.style.setProperty("width","100%");var jt=Tt.getBoundingClientRect();Tt.style.removeProperty("height"),Tt.style.removeProperty("width");var re=(zt.left-jt.left)/H,ne=(jt.bottom-zt.bottom+zt.height)/H;ft({bottomOffset:ne,label:St,leftOffset:re,pageIndex:J})}dt(It)}))}};return St&&(vt=Object.assign({},vt,{title:St,"aria-label":St})),i.createElement(ie,{annotation:O,hasPopup:!1,ignoreBorder:!1,isRenderable:_t,page:tt,viewport:Q},(function(Dt){return i.createElement("div",t({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":O.id,"data-testid":"core__annotation--link-".concat(O.id)}),i.createElement("a",t({ref:ut},vt)))}))},rn=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),H=A.rect,Q=H[2]-H[0],Z=H[3]-H[1],ft=A.borderStyle.width;return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(dt){return i.createElement("div",t({},dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":A.id,onClick:dt.popup.toggleOnClick,onMouseEnter:dt.popup.openOnHover,onMouseLeave:dt.popup.closeOnHover}),A.vertices&&A.vertices.length&&i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:ft||1,points:A.vertices.map((function(ut){return"".concat(ut.x-H[0],",").concat(H[3]-ut.y)})).join(" ")})),dt.slot.children)}))},gn=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),H=A.rect,Q=H[2]-H[0],Z=H[3]-H[1],ft=A.borderStyle.width;return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(dt){return i.createElement("div",t({},dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":A.id,onClick:dt.popup.toggleOnClick,onMouseEnter:dt.popup.openOnHover,onMouseLeave:dt.popup.closeOnHover}),A.vertices&&A.vertices.length&&i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:ft||1,points:A.vertices.map((function(ut){return"".concat(ut.x-H[0],",").concat(H[3]-ut.y)})).join(" ")})),dt.slot.children)}))},ei=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),H=A.rect,Q=H[2]-H[0],Z=H[3]-H[1],ft=A.borderStyle.width;return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(dt){return i.createElement("div",t({},dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":A.id,onClick:dt.popup.toggleOnClick,onMouseEnter:dt.popup.openOnHover,onMouseLeave:dt.popup.closeOnHover}),i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("rect",{height:Z-ft,fill:"none",stroke:"transparent",strokeWidth:ft||1,x:ft/2,y:ft/2,width:Q-ft})),dt.slot.children)}))},ni=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(H){return i.createElement("div",t({},H.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":A.id,onClick:H.popup.toggleOnClick,onMouseEnter:H.popup.openOnHover,onMouseLeave:H.popup.closeOnHover}),H.slot.children)}))},ii=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(H){return i.createElement("div",t({},H.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":A.id,onClick:H.popup.toggleOnClick,onMouseEnter:H.popup.openOnHover,onMouseLeave:H.popup.closeOnHover}),H.slot.children)}))},ri=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(H){return i.createElement("div",t({},H.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":A.id,onClick:H.popup.toggleOnClick,onMouseEnter:H.popup.openOnHover,onMouseLeave:H.popup.closeOnHover}),H.slot.children)}))},si=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),i.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),i.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),i.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ai=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),i.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),i.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),i.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),i.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),i.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),i.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),i.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),i.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),i.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},oi=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),i.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},li=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),i.createElement("path",{d:"M6 4.5L6 0.5"}),i.createElement("path",{d:"M18 4.5L18 0.5"}),i.createElement("path",{d:"M10 4.5L10 0.5"}),i.createElement("path",{d:"M14 4.5L14 0.5"}))},ci=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),i.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),i.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},ui=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},hi=function(c){var A=c.annotation,O=c.childAnnotation,j=c.page,q=c.viewport,$=A.hasPopup===!1,tt=xt(A),J=et(A),H=!!(A.hasPopup||tt||J),Q=A.name?A.name.toLowerCase():"";return i.createElement(ie,{annotation:A,hasPopup:$,ignoreBorder:!1,isRenderable:H,page:j,viewport:q},(function(Z){return i.createElement(i.Fragment,null,i.createElement("div",t({},Z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":A.id,onClick:Z.popup.toggleOnClick,onMouseEnter:Z.popup.openOnHover,onMouseLeave:Z.popup.closeOnHover}),Q&&i.createElement("div",{className:"rpv-core__annotation-text-icon"},Q==="check"&&i.createElement(u,null),Q==="comment"&&i.createElement(si,null),Q==="help"&&i.createElement(ai,null),Q==="insert"&&i.createElement(ui,null),Q==="key"&&i.createElement(oi,null),Q==="note"&&i.createElement(li,null),(Q==="newparagraph"||Q==="paragraph")&&i.createElement(ci,null)),Z.slot.children),O&&O.annotationType===n.AnnotationType.Popup&&Z.popup.opened&&i.createElement(Ve,{annotation:O,page:j,viewport:q}))}))},di=function(c){var A=c.annotation,O=c.page,j=c.viewport,q=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ie,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(H){return i.createElement("div",t({},H.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":A.id,onClick:H.popup.toggleOnClick,onMouseEnter:H.popup.openOnHover,onMouseLeave:H.popup.closeOnHover}),H.slot.children)}))},fi=function(c){var A=c.annotations,O=c.doc,j=c.outlines,q=c.page,$=c.pageIndex,tt=c.plugins,J=c.rotation,H=c.scale,Q=c.onExecuteNamedAction,Z=c.onJumpFromLinkAnnotation,ft=c.onJumpToDest,dt=i.useRef(),ut=q.getViewport({rotation:J,scale:H}).clone({dontFlip:!0}),St=A.filter((function(_t){return!_t.parentId}));return e((function(){var _t=dt.current;_t&&tt.forEach((function(vt){vt.onAnnotationLayerRender&&vt.onAnnotationLayerRender({annotations:St,container:_t,pageIndex:$,rotation:J,scale:H})}))}),[]),i.createElement("div",{ref:dt,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat($)},St.map((function(_t){var vt=A.find((function(Kt){return Kt.parentId===_t.id}));switch(_t.annotationType){case n.AnnotationType.Caret:return i.createElement(Ye,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Circle:return i.createElement(Ke,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.FileAttachment:return i.createElement(Xe,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.FreeText:return i.createElement(De,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Highlight:return i.createElement(We,{key:_t.id,annotation:_t,childAnnotation:vt,page:q,viewport:ut});case n.AnnotationType.Ink:return i.createElement(on,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Line:return i.createElement(Ce,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Link:return i.createElement(Oe,{key:_t.id,annotation:_t,annotationContainerRef:dt,doc:O,outlines:j,page:q,pageIndex:$,scale:H,viewport:ut,onExecuteNamedAction:Q,onJumpFromLinkAnnotation:Z,onJumpToDest:ft});case n.AnnotationType.Polygon:return i.createElement(rn,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Polyline:return i.createElement(gn,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Popup:return i.createElement(Ve,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Square:return i.createElement(ei,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Squiggly:return i.createElement(ni,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Stamp:return i.createElement(ii,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.StrikeOut:return i.createElement(ri,{key:_t.id,annotation:_t,page:q,viewport:ut});case n.AnnotationType.Text:return i.createElement(hi,{key:_t.id,annotation:_t,childAnnotation:vt,page:q,viewport:ut});case n.AnnotationType.Underline:return i.createElement(di,{key:_t.id,annotation:_t,page:q,viewport:ut});default:return i.createElement(i.Fragment,{key:_t.id})}})))},pi=function(c){var A=c.page,O=c.renderAnnotations,j=wt(),q=i.useState({loading:!0,annotations:[]}),$=q[0],tt=q[1];return i.useEffect((function(){A.getAnnotations({intent:"display"}).then((function(J){j.current&&tt({loading:!1,annotations:J})}))}),[]),$.loading?i.createElement(i.Fragment,null):O($.annotations)},gi=function(c){var A=c.doc,O=c.outlines,j=c.page,q=c.pageIndex,$=c.plugins,tt=c.rotation,J=c.scale,H=c.onExecuteNamedAction,Q=c.onJumpFromLinkAnnotation,Z=c.onJumpToDest;return i.createElement(pi,{page:j,renderAnnotations:function(ft){return i.createElement(fi,{annotations:ft,doc:A,outlines:O,page:j,pageIndex:q,plugins:$,rotation:tt,scale:J,onExecuteNamedAction:H,onJumpFromLinkAnnotation:Q,onJumpToDest:Z})}})},bn=function(c,A){var O=c%A;return O===0?c:Math.floor(c-O)},mi=function(c){var A=c.canvasLayerRef,O=c.height,j=c.page,q=c.pageIndex,$=c.plugins,tt=c.rotation,J=c.scale,H=c.width,Q=c.onRenderCanvasCompleted,Z=i.useRef();return e((function(){var ft=Z.current;ft&&ft.cancel();var dt=A.current;dt.removeAttribute("data-testid"),$.forEach((function(jt){jt.onCanvasLayerRender&&jt.onCanvasLayerRender({ele:dt,pageIndex:q,rotation:tt,scale:J,status:n.LayerRenderStatus.PreRender})}));var ut=j.getViewport({rotation:tt,scale:J}),St=window.devicePixelRatio||1,_t=Math.sqrt(16777216/(ut.width*ut.height)),vt=St>_t;vt?dt.style.transform="scale(1, 1)":dt.style.removeProperty("transform");var Kt=Math.min(_t,St),Dt=(function(jt,re){var ne,se;if(Math.floor(jt)===jt)return[jt,1];var ae=1/jt;if(ae>re)return[1,re];if(Math.floor(ae)===ae)return[1,ae];for(var le=jt>1?ae:jt,we=0,ve=1,xe=1,_e=1;;){var Se=we+xe,Ee=ve+_e;if(Ee>re)break;le<=Se/Ee?(xe=(ne=[Se,Ee])[0],_e=ne[1]):(we=(se=[Se,Ee])[0],ve=se[1])}return le<(we/ve+xe/_e)/2?le===jt?[we,ve]:[ve,we]:le===jt?[xe,_e]:[_e,xe]})(Kt,8),It=Dt[0],Ht=Dt[1];dt.width=bn(ut.width*Kt,It),dt.height=bn(ut.height*Kt,It),dt.style.width="".concat(bn(ut.width,Ht),"px"),dt.style.height="".concat(bn(ut.height,Ht),"px"),dt.hidden=!0;var Tt=dt.getContext("2d",{alpha:!1}),zt=vt||St!==1?[Kt,0,0,Kt,0,0]:null;return Z.current=j.render({canvasContext:Tt,transform:zt,viewport:ut}),Z.current.promise.then((function(){dt.hidden=!1,dt.setAttribute("data-testid","core__canvas-layer-".concat(q)),$.forEach((function(jt){jt.onCanvasLayerRender&&jt.onCanvasLayerRender({ele:dt,pageIndex:q,rotation:tt,scale:J,status:n.LayerRenderStatus.DidRender})})),Q()}),(function(){Q()})),function(){dt&&(dt.width=0,dt.height=0)}}),[]),i.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(O,"px"),width:"".concat(H,"px")}},i.createElement("canvas",{ref:A}))},vi=function(c){var A=c.height,O=c.page,j=c.rotation,q=c.scale,$=c.width,tt=i.useRef();return e((function(){var J=tt.current,H=O.getViewport({rotation:j,scale:q});O.getOperatorList().then((function(Q){(function(){var Z=tt.current;Z&&(Z.innerHTML="")})(),new M.SVGGraphics(O.commonObjs,O.objs).getSVG(Q,H).then((function(Z){Z.style.height="".concat(A,"px"),Z.style.width="".concat($,"px"),J.appendChild(Z)}))}))}),[]),i.createElement("div",{className:"rpv-core__svg-layer",ref:tt})},bi=function(c){var A=c.containerRef,O=c.page,j=c.pageIndex,q=c.plugins,$=c.rotation,tt=c.scale,J=c.onRenderTextCompleted,H=i.useRef(),Q=function(){var Z=A.current;Z&&([].slice.call(Z.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(ft){return Z.removeChild(ft)})),[].slice.call(Z.querySelectorAll('br[role="presentation"]')).forEach((function(ft){return Z.removeChild(ft)})))};return e((function(){var Z=H.current;Z&&Z.cancel();var ft=A.current;if(ft){ft.removeAttribute("data-testid");var dt=O.getViewport({rotation:$,scale:tt});return q.forEach((function(ut){ut.onTextLayerRender&&ut.onTextLayerRender({ele:ft,pageIndex:j,scale:tt,status:n.LayerRenderStatus.PreRender})})),O.getTextContent().then((function(ut){Q(),H.current=M.renderTextLayer({container:ft,textContent:ut,textContentSource:ut,viewport:dt}),H.current.promise.then((function(){ft.setAttribute("data-testid","core__text-layer-".concat(j)),[].slice.call(ft.children).forEach((function(St){St.classList.contains("rpv-core__text-layer-text--not")||St.classList.add("rpv-core__text-layer-text")})),q.forEach((function(St){St.onTextLayerRender&&St.onTextLayerRender({ele:ft,pageIndex:j,scale:tt,status:n.LayerRenderStatus.DidRender})})),J()}),(function(){ft.removeAttribute("data-testid"),J()}))})),function(){var ut;Q(),(ut=H.current)===null||ut===void 0||ut.cancel()}}}),[]),i.createElement("div",{className:"rpv-core__text-layer",ref:A})},_i=function(c){var A=c.doc,O=c.measureRef,j=c.outlines,q=c.pageIndex,$=c.pageRotation,tt=c.pageSize,J=c.plugins,H=c.renderPage,Q=c.renderQueueKey,Z=c.rotation,ft=c.scale,dt=c.shouldRender,ut=c.viewMode,St=c.onExecuteNamedAction,_t=c.onJumpFromLinkAnnotation,vt=c.onJumpToDest,Kt=c.onRenderCompleted,Dt=c.onRotatePage,It=wt(),Ht=i.useState(null),Tt=Ht[0],zt=Ht[1],jt=i.useState(!1),re=jt[0],ne=jt[1],se=i.useState(!1),ae=se[0],le=se[1],we=i.useRef(),ve=i.useRef(),xe=Math.abs(Z+$)%180==0,_e=tt.pageWidth*ft,Se=tt.pageHeight*ft,Ee=xe?_e:Se,ye=xe?Se:_e,Le=(tt.rotation+Z+$)%360,qe=i.useRef(0),ze=H||function(ke){return i.createElement(i.Fragment,null,ke.canvasLayer.children,ke.textLayer.children,ke.annotationLayer.children)};return i.useEffect((function(){zt(null),ne(!1),le(!1)}),[$,Z,ft]),i.useEffect((function(){dt&&It.current&&!Tt&&je(A,q).then((function(ke){It.current&&(qe.current=Q,zt(ke))}))}),[dt,Tt]),i.useEffect((function(){re&&ae&&(Q!==qe.current?(zt(null),ne(!1),le(!1)):Kt(q))}),[re,ae]),i.createElement("div",{className:d({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":ut===n.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":ut===n.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":ut===n.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(q),ref:O,style:{height:"".concat(ye,"px"),width:"".concat(Ee,"px")}},Tt?i.createElement(i.Fragment,null,ze({annotationLayer:{attrs:{},children:i.createElement(gi,{doc:A,outlines:j,page:Tt,pageIndex:q,plugins:J,rotation:Le,scale:ft,onExecuteNamedAction:St,onJumpFromLinkAnnotation:_t,onJumpToDest:vt})},canvasLayer:{attrs:{},children:i.createElement(mi,{canvasLayerRef:we,height:ye,page:Tt,pageIndex:q,plugins:J,rotation:Le,scale:ft,width:Ee,onRenderCanvasCompleted:function(){It.current&&ne(!0)}})},canvasLayerRendered:re,doc:A,height:ye,pageIndex:q,rotation:Le,scale:ft,svgLayer:{attrs:{},children:i.createElement(vi,{height:ye,page:Tt,rotation:Le,scale:ft,width:Ee})},textLayer:{attrs:{},children:i.createElement(bi,{containerRef:ve,page:Tt,pageIndex:q,plugins:J,rotation:Le,scale:ft,onRenderTextCompleted:function(){It.current&&le(!0)}})},textLayerRendered:ae,width:Ee,markRendered:Kt,onRotatePage:function(ke){return Dt(q,ke)}}),J.map((function(ke,Ne){return ke.renderPageLayer?i.createElement(i.Fragment,{key:Ne},ke.renderPageLayer({canvasLayerRef:we,canvasLayerRendered:re,doc:A,height:ye,pageIndex:q,rotation:Le,scale:ft,textLayerRef:ve,textLayerRendered:ae,width:Ee})):i.createElement(i.Fragment,{key:Ne})}))):i.createElement(L,{testId:"core__page-layer-loading-".concat(q)}))},yi=function(c,A){var O=A.rect;return c.height!==O.height||c.width!==O.width?O:c};(function(c){c.Horizontal="Horizontal",c.Vertical="Vertical",c.Both="Both"})(Gt||(Gt={}));var Ai=function(c){return 1-Math.pow(1-c,4)},_n=1e-4,Nn={left:0,top:0},jn={capture:!1,passive:!0},Si=function(c){var A=c.elementRef,O=c.enableSmoothScroll,j=c.isRtl,q=c.scrollDirection,$=c.onSmoothScroll,tt=i.useState(Nn),J=tt[0],H=tt[1],Q=i.useState(A.current),Z=Q[0],ft=Q[1],dt=j?-1:1,ut=i.useRef(q);ut.current=q;var St=i.useRef(Nn),_t=i.useRef(!0),vt=i.useCallback((function(){_t.current=!0,O&&H(St.current),$(!1)}),[]),Kt=i.useCallback((function(){if(Z){switch(ut.current){case Gt.Horizontal:St.current={left:dt*Z.scrollLeft,top:0};break;case Gt.Both:St.current={left:dt*Z.scrollLeft,top:Z.scrollTop};break;case Gt.Vertical:default:St.current={left:0,top:Z.scrollTop}}O&&!_t.current||H(St.current)}}),[Z]);e((function(){ft(A.current)})),e((function(){if(Z)return Z.addEventListener("scroll",Kt,jn),function(){Z.removeEventListener("scroll",Kt,jn)}}),[Z]);var Dt=i.useCallback((function(It,Ht){var Tt=A.current;if(!Tt)return Promise.resolve();var zt={left:0,top:0};switch(ut.current){case Gt.Horizontal:zt.left=dt*It.left;break;case Gt.Both:zt.left=dt*It.left,zt.top=It.top;break;case Gt.Vertical:default:zt.top=It.top}return Ht?(_t.current=!1,$(!0),new Promise((function(jt,re){(function(ne,se,ae,le,we,ve){we===void 0&&(we=function(Ne){return Ne}),ve===void 0&&(ve=function(){});var xe=0,_e=0,Se=!1;switch(se){case Gt.Horizontal:_e=ne.scrollLeft,xe=0;case Gt.Both:_e=ne.scrollLeft,xe=ne.scrollTop;break;case Gt.Vertical:default:_e=0,xe=ne.scrollTop}var Ee=function(){Se||(Se=!0,ne.scrollLeft=ae.left,ne.scrollTop=ae.top,ve())};if(Math.abs(xe-ae.top)<=_n&&se===Gt.Vertical)Ee();else if(Math.abs(_e-ae.left)<=_n&&se===Gt.Horizontal)Ee();else{var ye,Le=-1,qe=_e-ae.left,ze=xe-ae.top,ke=function(Ne){Le===-1&&(Le=Ne);var $e=Ne-Le,Bt=Math.min($e/le,1),Nt=we(Bt),kt={left:_e-qe*Nt,top:xe-ze*Nt};switch(se){case Gt.Horizontal:ne.scrollLeft=kt.left;break;case Gt.Both:ne.scrollLeft=kt.left,ne.scrollTop=kt.top;break;case Gt.Vertical:default:ne.scrollTop=kt.top}Math.abs(kt.top-ae.top)<=_n&&Math.abs(kt.left-ae.left)<=_n&&!Se&&(window.cancelAnimationFrame(ye),Ee()),$e<le?ye=window.requestAnimationFrame(ke):window.cancelAnimationFrame(ye)};ye=window.requestAnimationFrame(ke)}})(Tt,ut.current,zt,400,Ai,(function(){vt(),jt()}))}))):new Promise((function(jt,re){switch(ut.current){case Gt.Horizontal:Tt.scrollLeft=zt.left;break;case Gt.Both:Tt.scrollLeft=zt.left,Tt.scrollTop=zt.top;break;case Gt.Vertical:default:Tt.scrollTop=zt.top}jt()}))}),[A]);return{scrollOffset:J,scrollTo:Dt}},mn=function(c,A,O){return Math.max(c,Math.min(O,A))},Ei=function(c,A){if(A!==n.ViewMode.DualPageWithCover)return 0;if(!(function(q){var $=q.length;if($===1)return!1;for(var tt=1;tt<$;tt++)if(q[tt].height!==q[0].height||q[tt].width!==q[0].width)return!0;return!1})(c))return 2*c[0].width;var O=ee(c.slice(1),2).map((function(q){return q.length===2?q[0].width+q[1].width:q[0].width})),j=[c[0].width].concat(O);return Math.max.apply(Math,j)},wi={left:0,top:0},xi={left:0,top:0},xn={left:0,top:0},Ci={left:0,top:0},Pi={height:0,width:0},Bn={left:0,top:0},Hn="data-virtual-index",Ti=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],ki=function(c){var A=c.enableSmoothScroll,O=c.isRtl,j=c.numberOfItems,q=c.parentRef,$=c.setRenderRange,tt=c.sizes,J=c.scrollMode,H=c.viewMode,Q=i.useState(!1),Z=Q[0],ft=Q[1],dt=i.useCallback((function(Bt){return ft(Bt)}),[]),ut=i.useRef(J);ut.current=J;var St=i.useRef(H);St.current=H;var _t=J===n.ScrollMode.Wrapped||H===n.ViewMode.DualPageWithCover||H===n.ViewMode.DualPage?Gt.Both:J===n.ScrollMode.Horizontal?Gt.Horizontal:Gt.Vertical,vt=Si({elementRef:q,enableSmoothScroll:A,isRtl:O,scrollDirection:_t,onSmoothScroll:dt}),Kt=vt.scrollOffset,Dt=vt.scrollTo,It=(function(Bt){var Nt=Bt.elementRef,kt=i.useState(Nt.current),Ft=kt[0],Rt=kt[1],Vt=i.useRef(!1),qt=i.useReducer(yi,{height:0,width:0}),Lt=qt[0],Pt=qt[1];return e((function(){Nt.current!==Ft&&Rt(Nt.current)})),e((function(){if(Ft&&!Vt.current){Vt.current=!0;var $t=Ft.getBoundingClientRect(),Jt=$t.height,ge=$t.width;Pt({rect:{height:Jt,width:ge}})}}),[Ft]),i.useEffect((function(){if(Ft){var $t=new ResizeObserver((function(Jt,ge){Jt.forEach((function(de){if(de.target===Ft){var Re=de.contentRect,Be=Re.height,Yt=Re.width;Pt({rect:{height:Be,width:Yt}})}}))}));return $t.observe(Ft),function(){$t.unobserve(Ft)}}}),[Ft]),Lt})({elementRef:q}),Ht=i.useRef({scrollOffset:Bn,measurements:[]});Ht.current.scrollOffset=Kt;var Tt=i.useMemo((function(){return Array(j).fill(-1)}),[]),zt=i.useState(Tt),jt=zt[0],re=zt[1],ne=i.useMemo((function(){var Bt=new IntersectionObserver((function(Nt){Nt.forEach((function(kt){var Ft=kt.isIntersecting?kt.intersectionRatio:-1,Rt=kt.target.getAttribute(Hn);if(Rt){var Vt=parseInt(Rt,10);0<=Vt&&Vt<j&&re((function(qt){return qt[Vt]=Ft,(function(Lt,Pt,$t){for(var Jt,ge=0,de=Pt.length;ge<de;ge++)!Jt&&ge in Pt||(Jt||(Jt=Array.prototype.slice.call(Pt,0,ge)),Jt[ge]=Pt[ge]);return Lt.concat(Jt||Array.prototype.slice.call(Pt))})([],qt)}))}}))}),{threshold:Ti});return Bt}),[]),se=i.useMemo((function(){return J===n.ScrollMode.Page&&H===n.ViewMode.SinglePage?(function(Bt,Nt,kt){for(var Ft=[],Rt=0;Rt<Bt;Rt++){var Vt={height:Math.max(Nt.height,kt[Rt].height),width:Math.max(Nt.width,kt[Rt].width)},qt=Rt===0?Ci:Ft[Rt-1].end,Lt={left:qt.left+Vt.width,top:qt.top+Vt.height};Ft[Rt]={index:Rt,start:qt,size:Vt,end:Lt,visibility:-1}}return Ft})(j,It,tt):H===n.ViewMode.DualPageWithCover?(function(Bt,Nt,kt,Ft){for(var Rt=[],Vt=0,qt=0,Lt=xn,Pt=0;Pt<Bt;Pt++){var $t=Pt===0?{height:Ft===n.ScrollMode.Page?Math.max(Nt.height,kt[Pt].height):kt[Pt].height,width:Ft===n.ScrollMode.Page?Math.max(Nt.width,kt[Pt].width):kt[Pt].width}:{height:Ft===n.ScrollMode.Page?Math.max(Nt.height,kt[Pt].height):kt[Pt].height,width:Math.max(Nt.width/2,kt[Pt].width)};Ft===n.ScrollMode.Page?Lt=Pt===0?xn:{left:Pt%2==0?$t.width:0,top:Math.floor((Pt-1)/2)*$t.height+Rt[0].end.top}:Pt===0?(Lt=xn,Vt=kt[0].height,qt=0):Pt%2==1?(Lt={left:0,top:Vt+=qt},qt=Pt===Bt-1?kt[Pt].height:Math.max(kt[Pt].height,kt[Pt+1].height)):Lt={left:Rt[Pt-1].end.left,top:Vt};var Jt={left:Lt.left+$t.width,top:Lt.top+$t.height};Rt[Pt]={index:Pt,start:Lt,size:$t,end:Jt,visibility:-1}}return Rt})(j,It,tt,J):H===n.ViewMode.DualPage?(function(Bt,Nt,kt,Ft){for(var Rt=[],Vt=0,qt=0,Lt=xi,Pt=0;Pt<Bt;Pt++){var $t={height:Ft===n.ScrollMode.Page?Math.max(Nt.height,kt[Pt].height):kt[Pt].height,width:Math.max(Nt.width/2,kt[Pt].width)};Ft===n.ScrollMode.Page?Lt={left:Pt%2==0?0:$t.width,top:Math.floor(Pt/2)*$t.height}:Pt%2==0?(Lt={left:0,top:Vt+=qt},qt=Pt===Bt-1?kt[Pt].height:Math.max(kt[Pt].height,kt[Pt+1].height)):Lt={left:Rt[Pt-1].end.left,top:Vt};var Jt={left:Lt.left+$t.width,top:Lt.top+$t.height};Rt[Pt]={index:Pt,start:Lt,size:$t,end:Jt,visibility:-1}}return Rt})(j,It,tt,J):(function(Bt,Nt,kt,Ft){for(var Rt=[],Vt=0,qt={left:0,top:0},Lt=0,Pt=wi,$t=0;$t<Bt;$t++){var Jt=kt[$t];if($t===0)Vt=Jt.width,qt={left:0,top:0},Lt=Jt.height;else switch(Ft){case n.ScrollMode.Wrapped:(Vt+=Jt.width)<Nt.width?(Pt={left:Rt[$t-1].end.left,top:qt.top},Lt=Math.max(Lt,Jt.height)):(Vt=Jt.width,qt={left:(Pt={left:qt.left,top:qt.top+Lt}).left,top:Pt.top},Lt=Jt.height);break;case n.ScrollMode.Horizontal:case n.ScrollMode.Vertical:default:Pt=Rt[$t-1].end}var ge={left:Pt.left+Jt.width,top:Pt.top+Jt.height};Rt[$t]={index:$t,start:Pt,size:Jt,end:ge,visibility:-1}}return Rt})(j,It,tt,J)}),[J,tt,H,It]),ae=se[j-1]?{height:se[j-1].end.top,width:se[j-1].end.left}:Pi;Ht.current.measurements=se;var le=i.useMemo((function(){var Bt=(function($t,Jt,ge,de){var Re=0;switch($t){case Gt.Horizontal:Re=de.left;break;case Gt.Vertical:default:Re=de.top}var Be=Jt.length-1,Yt=(function(he,Je,hn,An){for(;he<=Je;){var sn=(he+Je)/2|0,vn=An(sn);if(vn<hn)he=sn+1;else{if(!(vn>hn))return sn;Je=sn-1}}return he>0?he-1:0})(0,Be,Re,(function(he){switch($t){case Gt.Horizontal:return Jt[he].start.left;case Gt.Both:case Gt.Vertical:default:return Jt[he].start.top}}));if($t===Gt.Both)for(var Me=Jt[Yt].start.top;Yt-1>=0&&Jt[Yt-1].start.top===Me&&Jt[Yt-1].start.left>=de.left;)Yt--;for(var me=Yt;me<=Be;){var be={top:Jt[me].start.top-de.top,left:Jt[me].start.left-de.left},Pe={height:ge.height-be.top,width:ge.width-be.left};if($t===Gt.Horizontal&&Pe.width<0||$t===Gt.Vertical&&Pe.height<0||$t===Gt.Both&&(Pe.width<0||Pe.height<0))break;me++}return{start:Yt,end:me}})(_t,se,It,Kt),Nt=Bt.start,kt=Bt.end,Ft=jt.slice(mn(0,j,Nt),mn(0,j,kt)),Rt=Nt+Ft.reduce((function($t,Jt,ge,de){return Jt>de[$t]?ge:$t}),0),Vt=Rt=mn(0,j-1,Rt),qt=$({endPage:kt,numPages:j,startPage:Nt}),Lt=qt.startPage,Pt=qt.endPage;switch(Lt=Math.max(Lt,0),Pt=Math.min(Pt,j-1),H){case n.ViewMode.DualPageWithCover:Rt>0&&(Vt=Rt%2==1?Rt:Rt-1),Lt=Lt===0?0:Lt%2==1?Lt:Lt-1,j-(Pt=Pt%2==1?Pt-1:Pt)<=2&&(Pt=j-1);break;case n.ViewMode.DualPage:Vt=Rt%2==0?Rt:Rt-1,Lt=Lt%2==0?Lt:Lt-1,Pt=Pt%2==1?Pt:Pt-1;break;case n.ViewMode.SinglePage:default:Vt=Rt}return{startPage:Lt,endPage:Pt,maxVisbilityIndex:Vt}}),[se,It,Kt,H,jt]),we=le.startPage,ve=le.endPage,xe=le.maxVisbilityIndex,_e=i.useMemo((function(){for(var Bt=[],Nt=function(Ft){var Rt=se[Ft],Vt=t(t({},Rt),{visibility:jt[Ft]!==void 0?jt[Ft]:-1,measureRef:function(qt){qt&&(qt.setAttribute(Hn,"".concat(Ft)),ne.observe(qt))}});Bt.push(Vt)},kt=we;kt<=ve;kt++)Nt(kt);return Bt}),[we,ve,jt,se]),Se=i.useCallback((function(Bt,Nt){var kt=Ht.current.measurements[mn(0,j-1,Bt)],Ft=ut.current===n.ScrollMode.Page?Bn:Nt;return kt?Dt({left:Ft.left+kt.start.left,top:Ft.top+kt.start.top},A):Promise.resolve()}),[Dt,A]),Ee=i.useCallback((function(Bt,Nt){var kt=Ht.current.measurements,Ft=kt[Bt].start,Rt=kt.find((function(qt){return qt.start.top-Ft.top>1e-12}));if(!Rt)return Promise.resolve();var Vt=Rt.index;switch(St.current){case n.ViewMode.DualPage:Vt=Vt%2==0?Vt:Vt+1;break;case n.ViewMode.DualPageWithCover:Vt=Vt%2==1?Vt:Vt+1}return Se(Vt,Nt)}),[]),ye=i.useCallback((function(Bt,Nt){for(var kt=Ht.current.measurements,Ft=kt[Bt].start,Rt=Bt,Vt=!1,qt=j-1;qt>=0;qt--)if(Ft.top-kt[qt].start.top>1e-12){Vt=!0,Rt=kt[qt].index;break}if(!Vt)return Promise.resolve();switch(St.current){case n.ViewMode.DualPage:Rt=Rt%2==0?Rt:Rt-1;break;case n.ViewMode.DualPageWithCover:Rt=Rt%2==0?Rt-1:Rt}return Rt===Bt&&(Rt=Bt-1),Se(Rt,Nt)}),[]),Le=i.useCallback((function(Bt,Nt){if(St.current===n.ViewMode.DualPageWithCover||St.current===n.ViewMode.DualPage)return Ee(Bt,Nt);switch(ut.current){case n.ScrollMode.Wrapped:return Ee(Bt,Nt);case n.ScrollMode.Horizontal:case n.ScrollMode.Vertical:default:return Se(Bt+1,Nt)}}),[]),qe=i.useCallback((function(Bt,Nt){if(St.current===n.ViewMode.DualPageWithCover||St.current===n.ViewMode.DualPage)return ye(Bt,Nt);switch(ut.current){case n.ScrollMode.Wrapped:return ye(Bt,Nt);case n.ScrollMode.Horizontal:case n.ScrollMode.Vertical:default:return Se(Bt-1,Nt)}}),[]),ze=i.useCallback((function(){return(function(Bt,Nt){switch(Nt){case n.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Bt.width,"px")};case n.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Bt.height,"px"),width:"100%"}}})(ae,ut.current)}),[ae]),ke=i.useCallback((function(Bt){return(function(Nt,kt,Ft){return Ft!==n.ScrollMode.Page?{}:{height:"".concat(kt.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Nt.start.top,"px)")}})(Bt,It,ut.current)}),[It]),Ne=i.useCallback((function(Bt){return(function(Nt,kt,Ft,Rt,Vt){var qt,Lt,Pt,$t,Jt,ge,de,Re=kt?"right":"left",Be=kt?-1:1,Yt=Ft.length,Me=Nt.start.left*Be,me=Nt.size,be=me.height,Pe=me.width;if(Rt===n.ViewMode.DualPageWithCover){var he=Vt===n.ScrollMode.Page?0:Nt.start.top;return Nt.index===0||Yt%2==0&&Nt.index===Yt-1?((qt={height:"".concat(be,"px"),minWidth:"".concat(Ei(Ft,Rt),"px"),width:"100%"})[Re]=0,qt.position="absolute",qt.top=0,qt.transform="translate(".concat(Me,"px, ").concat(he,"px)"),qt):((Lt={height:"".concat(be,"px"),width:"".concat(Pe,"px")})[Re]=0,Lt.position="absolute",Lt.top=0,Lt.transform="translate(".concat(Me,"px, ").concat(he,"px)"),Lt)}if(Rt===n.ViewMode.DualPage)return(Pt={height:"".concat(be,"px"),width:"".concat(Pe,"px")})[Re]=0,Pt.position="absolute",Pt.top=0,Pt.transform="translate(".concat(Me,"px, ").concat(Vt===n.ScrollMode.Page?0:Nt.start.top,"px)"),Pt;switch(Vt){case n.ScrollMode.Horizontal:return($t={height:"100%",width:"".concat(Pe,"px")})[Re]=0,$t.position="absolute",$t.top=0,$t.transform="translateX(".concat(Me,"px)"),$t;case n.ScrollMode.Page:return(Jt={height:"".concat(be,"px"),width:"".concat(Pe,"px")})[Re]=0,Jt.position="absolute",Jt.top=0,Jt;case n.ScrollMode.Wrapped:return(ge={height:"".concat(be,"px"),width:"".concat(Pe,"px")})[Re]=0,ge.position="absolute",ge.top=0,ge.transform="translate(".concat(Me,"px, ").concat(Nt.start.top,"px)"),ge;case n.ScrollMode.Vertical:default:return(de={height:"".concat(be,"px"),width:"100%"})[Re]=0,de.position="absolute",de.top=0,de.transform="translateY(".concat(Nt.start.top,"px)"),de}})(Bt,O,tt,St.current,ut.current)}),[O,tt]),$e=i.useCallback((function(Bt,Nt){var kt=Ht.current,Ft=kt.measurements,Rt=kt.scrollOffset,Vt=Ft[mn(0,j-1,Nt)];if(Vt){var qt=ut.current===n.ScrollMode.Page?{left:Vt.start.left,top:Vt.start.top}:{left:Rt.left*Bt,top:Rt.top*Bt};return Dt(qt,!1)}return Promise.resolve()}),[]);return i.useEffect((function(){return function(){ne.disconnect()}}),[]),{boundingClientRect:It,isSmoothScrolling:Z,startPage:we,endPage:ve,maxVisbilityIndex:xe,virtualItems:_e,getContainerStyles:ze,getItemContainerStyles:ke,getItemStyles:Ne,scrollToItem:Se,scrollToNextItem:Le,scrollToPreviousItem:qe,zoom:$e}},Cn=function(c,A,O,j,q,$){var tt=O;switch(!0){case(q===n.ViewMode.DualPageWithCover&&$>=3):case(q===n.ViewMode.DualPage&&$>=3):tt=2*O;break;default:tt=O}switch(j){case n.SpecialZoomLevel.ActualSize:return 1;case n.SpecialZoomLevel.PageFit:return Math.min((c.clientWidth-17)/tt,(c.clientHeight-16)/A);case n.SpecialZoomLevel.PageWidth:return(c.clientWidth-17)/tt}},Ri=function(c){var A,O,j=c.getCurrentPage,q=(A=50,O=i.useRef([]),i.useEffect((function(){return function(){O.current=[]}}),[]),{push:function(Q){var Z=O.current;Z.length+1>A&&Z.shift(),Z.push(Q),O.current=Z},map:function(Q){return O.current.map((function(Z){return Q(Z)}))},pop:function(){var Q=O.current;if(Q.length===0)return null;var Z=Q.pop();return O.current=Q,Z}}),$=(function(Q){var Z=i.useRef([]);return i.useEffect((function(){return function(){Z.current=[]}}),[]),{dequeue:function(){var ft=Z.current;if(ft.length===0)return null;var dt=ft.shift();return Z.current=ft,dt||null},enqueue:function(ft){var dt=Z.current;dt.length+1>Q&&dt.pop(),Z.current=[ft].concat(dt)},map:function(ft){return Z.current.map((function(dt){return ft(dt)}))}}})(50),tt=function(){var Q=$.dequeue();return Q&&q.push(Q),Q&&Q.pageIndex===j()?tt():Q},J=function(){var Q=q.pop();return Q&&$.enqueue(Q),Q&&Q.pageIndex===j()?J():Q},H=i.useCallback((function(Q){q.push(Q)}),[]);return{getNextDestination:tt,getPreviousDestination:J,markVisitedDestination:H}},Un=function(c){var A=[];return c.map((function(O){A=A.concat(O).concat((function(j){var q=[];return j.items&&j.items.length>0&&(q=q.concat(Un(j.items))),q})(O))})),A},Wn={capture:!1,passive:!0},Mi={height:0,width:0},Pn={height:0,width:0},Fi=function(c){var A=c.getCurrentPage,O=c.getCurrentScrollMode,j=c.jumpToPage,q=c.targetRef,$=i.useState(n.FullScreenMode.Normal),tt=$[0],J=$[1],H=(function(){var jt=i.useState(Mi),re=jt[0],ne=jt[1],se=bt((function(){ne({height:window.innerHeight,width:window.innerWidth})}),100);return e((function(){return window.addEventListener("resize",se,Wn),function(){window.removeEventListener("resize",se,Wn)}}),[]),re})(),Q=i.useState(Pn),Z=Q[0],ft=Q[1],dt=i.useRef(Pn),ut=i.useRef(A()),St=i.useRef(Pn),_t=i.useState(q.current),vt=_t[0],Kt=_t[1],Dt=i.useRef();e((function(){q.current!==vt&&Kt(q.current)}),[]),e((function(){if(vt){var jt=new ResizeObserver((function(re){re.forEach((function(ne){var se=ne.target.getBoundingClientRect(),ae=se.height,le=se.width;ft({height:ae,width:le})}))}));return jt.observe(vt),function(){jt.unobserve(vt),jt.disconnect()}}}),[vt]);var It=i.useCallback((function(jt){var re=pt();return re&&re!==jt?(J(n.FullScreenMode.Normal),At(re)):Promise.resolve()}),[]),Ht=i.useCallback((function(jt){jt&&rt()&&(Kt(jt),It(jt).then((function(){Dt.current=jt,J(n.FullScreenMode.Entering),(function(re){U&&re[nt.RequestFullScreen]()})(jt)})))}),[]),Tt=i.useCallback((function(){pt()&&(J(n.FullScreenMode.Exitting),At(document))}),[]),zt=i.useCallback((function(){vt&&pt()!==vt&&J(n.FullScreenMode.Exitting)}),[vt]);return i.useEffect((function(){switch(tt){case n.FullScreenMode.Entering:Dt.current&&(Dt.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),ut.current=A(),dt.current={height:window.innerHeight,width:window.innerWidth};break;case n.FullScreenMode.Entered:O()===n.ScrollMode.Page?j(ut.current).then((function(){J(n.FullScreenMode.EnteredCompletely)})):J(n.FullScreenMode.EnteredCompletely);break;case n.FullScreenMode.Exitting:Dt.current&&(Dt.current.style.backgroundColor="",Dt.current=null),ut.current=A();break;case n.FullScreenMode.Exited:J(n.FullScreenMode.Normal),O()===n.ScrollMode.Page&&j(ut.current)}}),[tt]),i.useEffect((function(){if(tt!==n.FullScreenMode.Normal)return tt===n.FullScreenMode.Entering&&H.height===Z.height&&H.width===Z.width&&H.height>0&&H.width>0&&(St.current.height===0||H.height==St.current.height)?(St.current={height:window.innerHeight,width:window.innerWidth},void J(n.FullScreenMode.Entered)):void(tt===n.FullScreenMode.Exitting&&dt.current.height===H.height&&dt.current.width===H.width&&H.height>0&&H.width>0&&J(n.FullScreenMode.Exited))}),[tt,H,Z]),i.useEffect((function(){var jt;return jt=zt,U&&document.addEventListener(nt.FullScreenChange,jt),function(){(function(re){U&&document.removeEventListener(nt.FullScreenChange,re)})(zt)}}),[vt]),{enterFullScreenMode:Ht,exitFullScreenMode:Tt,fullScreenMode:tt}},Li={buildPageStyles:function(){return{}},transformSize:function(c){return c.size}},un={left:0,top:0},Di=function(c){var A=c.currentFile,O=c.defaultScale,j=c.doc,q=c.enableSmoothScroll,$=c.initialPage,tt=c.initialRotation,J=c.initialScale,H=c.pageLayout,Q=c.pageSizes,Z=c.plugins,ft=c.renderPage,dt=c.scrollMode,ut=c.setRenderRange,St=c.viewMode,_t=c.viewerState,vt=c.onDocumentLoad,Kt=c.onOpenFile,Dt=c.onPageChange,It=c.onRotate,Ht=c.onRotatePage,Tt=c.onZoom,zt=j.numPages,jt=j.loadingTask.docId,re=i.useContext(E).l10n,ne=i.useContext(f),se=ne.direction===n.TextDirection.RightToLeft,ae=i.useRef(),le=i.useRef(),we=i.useState($),ve=we[0],xe=we[1],_e=i.useRef(null),Se=Ri({getCurrentPage:function(){return Yt.current.pageIndex}}),Ee=i.useState(tt),ye=Ee[0],Le=Ee[1],qe=ht(ye),ze=i.useState(!1),ke=ze[0],Ne=ze[1],$e=i.useState(new Map),Bt=$e[0],Nt=$e[1],kt=i.useState(dt),Ft=kt[0],Rt=kt[1],Vt=ht(Ft),qt=i.useState(St),Lt=qt[0],Pt=qt[1],$t=ht(Lt),Jt=(function(mt){var Xt=wt(),Qt=i.useState([]),ce=Qt[0],oe=Qt[1];return i.useEffect((function(){mt.getOutline().then((function(te){if(Xt.current&&te!==null){var Te=Un(te);oe(Te)}}))}),[]),ce})(j),ge=i.useState(J),de=ge[0],Re=ge[1],Be=ht(de),Yt=i.useRef(_t),Me=i.useRef(typeof O=="string"?O:null),me=i.useRef(-1),be=i.useRef(-1),Pe=i.useRef($),he=Fi({getCurrentPage:function(){return Yt.current.pageIndex},getCurrentScrollMode:function(){return Yt.current.scrollMode},jumpToPage:function(mt){return Qe(mt)},targetRef:le}),Je=i.useState(-1),hn=Je[0],An=Je[1],sn=i.useState(0),vn=sn[0],Hi=sn[1],He=p({doc:j});i.useEffect((function(){return function(){fe.clear(),Ie.clear()}}),[jt]);var Gn=i.useMemo((function(){return Object.assign({},Li,H)}),[]),Ui=i.useMemo((function(){return Array(zt).fill(0).map((function(mt,Xt){var Qt=[Q[Xt].pageHeight,Q[Xt].pageWidth],ce=Math.abs(ye)%180==0?{height:Qt[0],width:Qt[1]}:{height:Qt[1],width:Qt[0]},oe={height:ce.height*de,width:ce.width*de};return Gn.transformSize({numPages:zt,pageIndex:Xt,size:oe})}))}),[ye,de]),pe=ki({enableSmoothScroll:q,isRtl:se,numberOfItems:zt,parentRef:le,scrollMode:Ft,setRenderRange:ut,sizes:Ui,viewMode:Lt}),Wi=bt((function(){!Me.current||Yt.current.fullScreenMode!==n.FullScreenMode.Normal||$>0&&Pe.current===$||an(Me.current)}),200);(function(mt){var Xt=mt.targetRef,Qt=mt.onResize;e((function(){var ce=new ResizeObserver((function(te){te.forEach((function(Te){Qt(Te.target)}))})),oe=Xt.current;if(oe)return ce.observe(oe),function(){ce.unobserve(oe)}}),[])})({targetRef:le,onResize:Wi});var Ze=function(mt){var Xt=mt;Z.forEach((function(Qt){Qt.onViewerStateChange&&(Xt=Qt.onViewerStateChange(Xt))})),Yt.current=Xt},zi=function(){return le.current},Vi=function(){return Yt.current},qi=i.useCallback((function(mt){Se.markVisitedDestination(mt)}),[]),Rn=i.useCallback((function(mt){var Xt=mt.pageIndex,Qt=mt.bottomOffset,ce=mt.leftOffset,oe=mt.scaleTo,te=le.current,Te=Yt.current;return te&&Te?new Promise((function(tn,On){je(j,Xt).then((function(Sn){var en=Sn.getViewport({scale:1}),En=0,ti=(typeof Qt=="function"?Qt(en.width,en.height):Qt)||0,wn=(typeof ce=="function"?ce(en.width,en.height):ce)||0,dn=Te.scale;switch(oe){case n.SpecialZoomLevel.PageFit:En=0,wn=0,an(n.SpecialZoomLevel.PageFit);break;case n.SpecialZoomLevel.PageWidth:dn=Cn(te,Q[Xt].pageHeight,Q[Xt].pageWidth,n.SpecialZoomLevel.PageWidth,St,zt),En=(en.height-ti)*dn,wn*=dn,an(dn);break;default:En=(en.height-ti)*dn,wn*=dn}switch(Te.scrollMode){case n.ScrollMode.Horizontal:pe.scrollToItem(Xt,{left:wn,top:0}).then((function(){tn()}));break;case n.ScrollMode.Vertical:default:pe.scrollToItem(Xt,{left:0,top:En}).then((function(){tn()}))}}))})):Promise.resolve()}),[]),Xn=i.useCallback((function(mt){return Se.markVisitedDestination(mt),Rn(mt)}),[]),Gi=i.useCallback((function(){var mt=Se.getNextDestination();return mt?Rn(mt):Promise.resolve()}),[]),Xi=i.useCallback((function(){var mt=Se.getPreviousDestination();return mt?Rn(mt):Promise.resolve()}),[]),$i=i.useCallback((function(){return pe.scrollToNextItem(Yt.current.pageIndex,un)}),[]),Qe=i.useCallback((function(mt){return 0<=mt&&mt<zt?pe.scrollToItem(mt,un):Promise.resolve()}),[]),Yi=i.useCallback((function(){return pe.scrollToPreviousItem(Yt.current.pageIndex,un)}),[]),$n=i.useCallback((function(mt){var Xt,Qt;(Xt=mt.name,Qt=Xt.split(/\./).pop(),Qt?Qt.toLowerCase():"").toLowerCase()==="pdf"&&new Promise((function(ce){var oe=new FileReader;oe.readAsArrayBuffer(mt),oe.onload=function(){var te=new Uint8Array(oe.result);ce(te)}})).then((function(ce){Kt(mt.name,ce)}))}),[Kt]),Yn=i.useCallback((function(mt){var Xt=mt===n.RotateDirection.Backward?-90:90,Qt=Yt.current.rotation,ce=Qt===360||Qt===-360?Xt:Qt+Xt;He.markNotRendered(),Le(ce),Ze(t(t({},Yt.current),{rotation:ce})),It({direction:mt,doc:j,rotation:ce})}),[]),Mn=i.useCallback((function(mt,Xt){var Qt=Xt===n.RotateDirection.Backward?-90:90,ce=Yt.current.pagesRotation,oe=(ce.has(mt)?ce.get(mt):tt)+Qt,te=ce.set(mt,oe);Nt(te),Ne((function(Te){return!Te})),Ze(t(t({},Yt.current),{pagesRotation:te,rotatedPage:mt})),Ht({direction:Xt,doc:j,pageIndex:mt,rotation:oe}),He.markRendering(mt),An(mt)}),[]),Kn=i.useCallback((function(mt){Ze(t(t({},Yt.current),{scrollMode:mt})),Rt(mt)}),[]),Jn=i.useCallback((function(mt){Ze(t(t({},Yt.current),{viewMode:mt})),Pt(mt)}),[]),an=i.useCallback((function(mt){var Xt=le.current,Qt=Yt.current.pageIndex;if(!(Qt<0||Qt>=zt)){var ce=Q[Qt].pageHeight,oe=Q[Qt].pageWidth,te=Xt?typeof mt=="string"?Cn(Xt,ce,oe,mt,Yt.current.viewMode,zt):mt:1;Me.current=typeof mt=="string"?mt:null,te!==Yt.current.scale&&(Hi((function(Te){return Te+1})),He.markNotRendered(),Re(te),Tt({doc:j,scale:te}),Ze(t(t({},Yt.current),{scale:te})))}}),[]),Ki=i.useCallback((function(mt){he.enterFullScreenMode(mt)}),[]),Ji=i.useCallback((function(){he.exitFullScreenMode()}),[]);i.useEffect((function(){Ze(t(t({},Yt.current),{fullScreenMode:he.fullScreenMode}))}),[he.fullScreenMode]),i.useEffect((function(){var mt={enterFullScreenMode:Ki,exitFullScreenMode:Ji,getPagesContainer:zi,getViewerState:Vi,jumpToDestination:Xn,jumpToNextDestination:Gi,jumpToPreviousDestination:Xi,jumpToNextPage:$i,jumpToPreviousPage:Yi,jumpToPage:Qe,openFile:$n,rotate:Yn,rotatePage:Mn,setViewerState:Ze,switchScrollMode:Kn,switchViewMode:Jn,zoom:an};return Z.forEach((function(Xt){Xt.install&&Xt.install(mt)})),function(){Z.forEach((function(Xt){Xt.uninstall&&Xt.uninstall(mt)}))}}),[jt]),i.useEffect((function(){vt({doc:j,file:A}),Z.forEach((function(mt){mt.onDocumentLoad&&mt.onDocumentLoad({doc:j,file:A})}))}),[jt]);var Fn,Ln,Dn,Zn=pe.boundingClientRect;Fn=function(){$&&Qe($)},Ln=Zn.height>0&&Zn.width>0,Dn=i.useRef(!1),e((function(){Ln&&!Dn.current&&(Dn.current=!0,Fn())}),[Fn,Ln]),e((function(){var mt=Yt.current.pageIndex;mt>-1&&Vt!==Ft&&pe.scrollToItem(mt,un).then((function(){he.fullScreenMode===n.FullScreenMode.EnteredCompletely&&(q||He.markNotRendered(),me.current=-1)}))}),[Ft]),e((function(){var mt=Yt.current.pageIndex;mt>-1&&qe!==ye&&pe.scrollToItem(mt,un)}),[ye]),e((function(){Be!=0&&Be!=Yt.current.scale&&pe.zoom(Yt.current.scale/Be,Yt.current.pageIndex).then((function(){he.fullScreenMode===n.FullScreenMode.EnteredCompletely&&(be.current=-1)}))}),[de]),e((function(){if($t!==Yt.current.viewMode){var mt=pe.startPage,Xt=pe.endPage,Qt=pe.virtualItems;He.markNotRendered(),He.setRange(mt,Xt);for(var ce=function(te){var Te=Qt.find((function(tn){return tn.index===te}));Te&&He.setVisibility(te,Te.visibility)},oe=mt;oe<=Xt;oe++)ce(oe);In()}}),[Lt]),e((function(){var mt=Yt.current.pageIndex;mt>-1&&$t!==Lt&&pe.scrollToItem(mt,un)}),[Lt]),e((function(){var mt=Yt.current.pageIndex;mt>0&&mt===$&&Pe.current===$&&Me.current&&(Pe.current=-1,an(Me.current))}),[ve]),i.useEffect((function(){pe.isSmoothScrolling||_e.current!==null&&_e.current===ve||(_e.current=ve,Dt({currentPage:ve,doc:j}))}),[ve,pe.isSmoothScrolling]),i.useEffect((function(){he.fullScreenMode===n.FullScreenMode.Entering&&Yt.current.scrollMode===n.ScrollMode.Page&&(me.current=Yt.current.pageIndex),he.fullScreenMode===n.FullScreenMode.EnteredCompletely&&Yt.current.scrollMode===n.ScrollMode.Page&&q&&(me.current=-1),he.fullScreenMode===n.FullScreenMode.EnteredCompletely&&Me.current&&(be.current=Yt.current.pageIndex,an(Me.current))}),[he.fullScreenMode]),i.useEffect((function(){if(he.fullScreenMode!==n.FullScreenMode.Entering&&he.fullScreenMode!==n.FullScreenMode.Exitting&&!pe.isSmoothScrolling){var mt=pe.startPage,Xt=pe.endPage,Qt=pe.maxVisbilityIndex,ce=pe.virtualItems,oe=Qt,te=he.fullScreenMode===n.FullScreenMode.Entered||he.fullScreenMode===n.FullScreenMode.EnteredCompletely;if(!(te&&oe!==me.current&&me.current>-1||te&&oe!==be.current&&be.current>-1)){xe(oe),Ze(t(t({},Yt.current),{pageIndex:oe})),He.setRange(mt,Xt);for(var Te=function(On){var Sn=ce.find((function(en){return en.index===On}));Sn&&He.setVisibility(On,Sn.visibility)},tn=mt;tn<=Xt;tn++)Te(tn);In()}}}),[pe.startPage,pe.endPage,pe.isSmoothScrolling,pe.maxVisbilityIndex,he.fullScreenMode,ke,ye,de]);var Zi=i.useCallback((function(mt){He.markRendered(mt),In()}),[vn]),In=function(){var mt=He.getHighestPriorityPage();mt>-1&&He.isInRange(mt)&&(He.markRendering(mt),An(mt))},Qi=function(mt){var Xt=ve-1,Qt=ve+1;switch(mt){case"FirstPage":Qe(0);break;case"LastPage":Qe(zt-1);break;case"NextPage":Qt<zt&&Qe(Qt);break;case"PrevPage":Xt>=0&&Qe(Xt)}},tr=i.useCallback((function(){var mt=pe.virtualItems,Xt=[];switch(Lt){case n.ViewMode.DualPage:Xt=ee(mt,2);break;case n.ViewMode.DualPageWithCover:mt.length&&(Xt=mt[0].index===0?[[mt[0]]].concat(ee(mt.slice(1),2)):ee(mt,2));break;case n.ViewMode.SinglePage:default:Xt=ee(mt,1)}var Qt=re&&re.core?re.core.pageLabel:"Page {{pageIndex}}",ce={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:ae,style:{height:"100%"}},children:i.createElement(i.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:d({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Ft===n.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":se,"rpv-core__inner-pages--single":Ft===n.ScrollMode.Page,"rpv-core__inner-pages--vertical":Ft===n.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Ft===n.ScrollMode.Wrapped}),ref:le,style:{height:"100%",position:"relative"}},children:i.createElement("div",{"data-testid":"core__inner-current-page-".concat(ve),style:Object.assign({"--scale-factor":de},pe.getContainerStyles())},Xt.map((function(oe){return i.createElement("div",{className:d({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Ft===n.ScrollMode.Page}),style:pe.getItemContainerStyles(oe[0]),key:"".concat(oe[0].index,"-").concat(Lt)},oe.map((function(te){var Te=Lt===n.ViewMode.DualPageWithCover&&(te.index===0||zt%2==0&&te.index===zt-1);return i.createElement("div",{"aria-label":Qt.replace("{{pageIndex}}","".concat(te.index+1)),className:d({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Lt===n.ViewMode.DualPage&&te.index%2==0,"rpv-core__inner-page--dual-odd":Lt===n.ViewMode.DualPage&&te.index%2==1,"rpv-core__inner-page--dual-cover":Te,"rpv-core__inner-page--dual-cover-even":Lt===n.ViewMode.DualPageWithCover&&!Te&&te.index%2==0,"rpv-core__inner-page--dual-cover-odd":Lt===n.ViewMode.DualPageWithCover&&!Te&&te.index%2==1,"rpv-core__inner-page--single":Lt===n.ViewMode.SinglePage&&Ft===n.ScrollMode.Page}),role:"region",key:"".concat(te.index,"-").concat(Lt),style:Object.assign({},pe.getItemStyles(te),Gn.buildPageStyles({numPages:zt,pageIndex:te.index,scrollMode:Ft,viewMode:Lt}))},i.createElement(_i,{doc:j,measureRef:te.measureRef,outlines:Jt,pageIndex:te.index,pageRotation:Bt.has(te.index)?Bt.get(te.index):0,pageSize:Q[te.index],plugins:Z,renderPage:ft,renderQueueKey:vn,rotation:ye,scale:de,shouldRender:hn===te.index,viewMode:Lt,onExecuteNamedAction:Qi,onJumpFromLinkAnnotation:qi,onJumpToDest:Xn,onRenderCompleted:Zi,onRotatePage:Mn}))})))})))}};return Z.forEach((function(oe){oe.renderViewer&&(ce=oe.renderViewer({containerRef:ae,doc:j,pagesContainerRef:le,pagesRotation:Bt,pageSizes:Q,rotation:ye,slot:ce,themeContext:ne,jumpToPage:Qe,openFile:$n,rotate:Yn,rotatePage:Mn,switchScrollMode:Kn,switchViewMode:Jn,zoom:an}))})),ce}),[Z,pe]),Qn=i.useCallback((function(mt){return i.createElement("div",t({},mt.attrs,{style:mt.attrs&&mt.attrs.style?mt.attrs.style:{}}),mt.children,mt.subSlot&&Qn(mt.subSlot))}),[]);return Qn(tr())},zn=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Ii=function(c){var A=c.defaultScale,O=c.doc,j=c.render,q=c.scrollMode,$=c.viewMode,tt=i.useRef(),J=i.useState({pageSizes:[],scale:0}),H=J[0],Q=J[1];return i.useLayoutEffect((function(){var Z=Array(O.numPages).fill(0).map((function(ft,dt){return new Promise((function(ut,St){je(O,dt).then((function(_t){var vt=_t.getViewport({scale:1});ut({pageHeight:vt.height,pageWidth:vt.width,rotation:vt.rotation})}))}))}));Promise.all(Z).then((function(ft){var dt=tt.current;if(dt&&ft.length!==0){var ut=ft[0].pageWidth,St=ft[0].pageHeight,_t=dt.parentElement,vt=(_t.clientWidth-45)/ut,Kt=(_t.clientHeight-45)/St,Dt=vt;switch(q){case n.ScrollMode.Horizontal:Dt=Math.min(vt,Kt);break;case n.ScrollMode.Vertical:default:Dt=vt}var It,Ht,Tt=A?typeof A=="string"?Cn(_t,St,ut,A,$,O.numPages):A:(It=Dt,(Ht=zn.findIndex((function(zt){return zt>=It})))===-1||Ht===0?It:zn[Ht-1]);Q({pageSizes:ft,scale:Tt})}}))}),[O.loadingTask.docId]),H.pageSizes.length===0||H.scale===0?i.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:tt},i.createElement(L,null)):j(H.pageSizes,H.scale)},yn=function(){},Tn=(function(c){function A(O,j){var q=c.call(this)||this;return q.verifyPassword=O,q.passwordStatus=j,q}return z(A,c),A})(yn),Oi=function(c){var A=c.passwordStatus,O=c.renderProtectedView,j=c.verifyPassword,q=c.onDocumentAskPassword,$=i.useContext(E).l10n,tt=i.useState(""),J=tt[0],H=tt[1],Q=i.useContext(f).direction===n.TextDirection.RightToLeft,Z=function(){return j(J)};return i.useEffect((function(){q&&q({verifyPassword:j})}),[]),O?O({passwordStatus:A,verifyPassword:j}):i.createElement("div",{className:"rpv-core__asking-password-wrapper"},i.createElement("div",{className:d({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":Q})},i.createElement("div",{className:"rpv-core__asking-password-message"},A===n.PasswordStatus.RequiredPassword&&$.core.askingPassword.requirePasswordToOpen,A===n.PasswordStatus.WrongPassword&&$.core.wrongPassword.tryAgain),i.createElement("div",{className:"rpv-core__asking-password-body"},i.createElement("div",{className:d({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!Q,"rpv-core__asking-password-input--rtl":Q})},i.createElement(R,{testId:"core__asking-password-input",type:"password",value:J,onChange:H,onKeyDown:function(ft){ft.key==="Enter"&&Z()}})),i.createElement(x,{onClick:Z},$.core.askingPassword.submit))))},Vn=(function(c){function A(O){var j=c.call(this)||this;return j.doc=O,j}return z(A,c),A})(yn),qn=(function(c){function A(O){var j=c.call(this)||this;return j.error=O,j}return z(A,c),A})(yn),kn=(function(c){function A(O){var j=c.call(this)||this;return j.percentages=O,j}return z(A,c),A})(yn),Ni=function(c){var A=c.characterMap,O=c.file,j=c.httpHeaders,q=c.render,$=c.renderError,tt=c.renderLoader,J=c.renderProtectedView,H=c.transformGetDocumentParams,Q=c.withCredentials,Z=c.onDocumentAskPassword,ft=i.useContext(f).direction===n.TextDirection.RightToLeft,dt=i.useState(new kn(0)),ut=dt[0],St=dt[1],_t=i.useRef(""),vt=wt();return i.useEffect((function(){_t.current="",St(new kn(0));var Kt=new M.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Dt=Object.assign({httpHeaders:j,withCredentials:Q,worker:Kt},typeof O=="string"?{url:O}:{data:O},A?{cMapUrl:A.url,cMapPacked:A.isCompressed}:{}),It=H?H(Dt):Dt,Ht=M.getDocument(It);return Ht.onPassword=function(Tt,zt){switch(zt){case M.PasswordResponses.NEED_PASSWORD:vt.current&&St(new Tn(Tt,n.PasswordStatus.RequiredPassword));break;case M.PasswordResponses.INCORRECT_PASSWORD:vt.current&&St(new Tn(Tt,n.PasswordStatus.WrongPassword))}},Ht.onProgress=function(Tt){var zt=Tt.total>0?Math.min(100,100*Tt.loaded/Tt.total):100;vt.current&&_t.current===""&&St(new kn(zt))},Ht.promise.then((function(Tt){_t.current=Tt.loadingTask.docId,vt.current&&St(new Vn(Tt))}),(function(Tt){return vt.current&&!Kt.destroyed&&St(new qn({message:Tt.message||"Cannot load document",name:Tt.name}))})),function(){Ht.destroy(),Kt.destroy()}}),[O]),ut instanceof Tn?i.createElement(Oi,{passwordStatus:ut.passwordStatus,renderProtectedView:J,verifyPassword:ut.verifyPassword,onDocumentAskPassword:Z}):ut instanceof Vn?q(ut.doc):ut instanceof qn?$?$(ut.error):i.createElement("div",{className:d({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":ft})},i.createElement("div",{className:"rpv-core__doc-error-text"},ut.error.message)):i.createElement("div",{"data-testid":"core__doc-loading",className:d({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":ft})},tt?tt(ut.percentages):i.createElement(L,null))},ji=function(c,A){var O=i.useMemo((function(){return c==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":c}),[]),j=i.useState(O),q=j[0],$=j[1],tt=ht(q);return i.useEffect((function(){if(c==="auto"){var J=window.matchMedia("(prefers-color-scheme: dark)"),H=function(Q){$(Q.matches?"dark":"light")};return J.addEventListener("change",H),function(){return J.removeEventListener("change",H)}}}),[]),i.useEffect((function(){q!==tt&&A&&A(q)}),[q]),i.useEffect((function(){c!==q&&$(c)}),[c]),{currentTheme:q,setCurrentTheme:$}},Bi=function(c){return{startPage:c.startPage-3,endPage:c.endPage+3}};n.Button=function(c){var A=c.children,O=c.testId,j=c.onClick,q=i.useContext(f).direction===n.TextDirection.RightToLeft,$=O?{"data-testid":O}:{};return i.createElement("button",t({className:d({"rpv-core__button":!0,"rpv-core__button--rtl":q}),type:"button",onClick:j},$),A)},n.Icon=b,n.LazyRender=function(c){var A=c.attrs,O=c.children,j=c.testId,q=i.useState(!1),$=q[0],tt=q[1],J=j?t(t({},A),{"data-testid":j}):A,H=m({once:!0,onVisibilityChanged:function(Q){Q.isVisible&&tt(!0)}});return i.createElement("div",t({ref:H},J),$&&O)},n.LocalizationContext=E,n.Menu=function(c){var A=c.children,O=i.useRef(),j=i.useRef([]),q=i.useContext(f).direction===n.TextDirection.RightToLeft,$=function(J){if(O.current)switch(J.key){case"Tab":J.preventDefault();break;case"ArrowDown":J.preventDefault(),tt((function(H,Q){return Q+1}));break;case"ArrowUp":J.preventDefault(),tt((function(H,Q){return Q-1}));break;case"End":J.preventDefault(),tt((function(H,Q){return H.length-1}));break;case"Home":J.preventDefault(),tt((function(H,Q){return 0}))}},tt=function(J){if(O.current){var H=j.current,Q=H.findIndex((function(ft){return ft.getAttribute("tabindex")==="0"})),Z=Math.min(H.length-1,Math.max(0,J(H,Q)));Q>=0&&Q<=H.length-1&&H[Q].setAttribute("tabindex","-1"),H[Z].setAttribute("tabindex","0"),H[Z].focus()}};return e((function(){var J=O.current;if(J){var H=(function(Q){var Z=[];return Q.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach((function(ft){if(ft instanceof HTMLElement){var dt=ft.parentElement;(dt===Q||window.getComputedStyle(dt).display!=="none")&&Z.push(ft)}})),Z})(J);j.current=H}}),[]),e((function(){return document.addEventListener("keydown",$),function(){document.removeEventListener("keydown",$)}}),[]),i.createElement("div",{ref:O,"aria-orientation":"vertical",className:d({"rpv-core__menu":!0,"rpv-core__menu--rtl":q}),role:"menu",tabIndex:0},A)},n.MenuDivider=function(){return i.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},n.MenuItem=function(c){var A=c.checked,O=A!==void 0&&A,j=c.children,q=c.icon,$=q===void 0?null:q,tt=c.isDisabled,J=tt!==void 0&&tt,H=c.testId,Q=c.onClick,Z=i.useContext(f).direction===n.TextDirection.RightToLeft,ft=H?{"data-testid":H}:{};return i.createElement("button",t({className:d({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":J,"rpv-core__menu-item--ltr":!Z,"rpv-core__menu-item--rtl":Z}),role:"menuitem",tabIndex:-1,type:"button",onClick:Q},ft),i.createElement("div",{className:d({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!Z,"rpv-core__menu-item-icon--rtl":Z})},$),i.createElement("div",{className:d({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!Z,"rpv-core__menu-item-label--rtl":Z})},j),i.createElement("div",{className:d({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!Z,"rpv-core__menu-item-check--rtl":Z})},O&&i.createElement(u,null)))},n.MinimalButton=function(c){var A=c.ariaLabel,O=A===void 0?"":A,j=c.ariaKeyShortcuts,q=j===void 0?"":j,$=c.children,tt=c.isDisabled,J=tt!==void 0&&tt,H=c.isSelected,Q=H!==void 0&&H,Z=c.testId,ft=c.onClick,dt=i.useContext(f).direction===n.TextDirection.RightToLeft,ut=Z?{"data-testid":Z}:{};return i.createElement("button",t({"aria-label":O},q&&{"aria-keyshortcuts":q},J&&{"aria-disabled":!0},{className:d({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":J,"rpv-core__minimal-button--rtl":dt,"rpv-core__minimal-button--selected":Q}),type:"button",onClick:ft},ut),$)},n.Modal=function(c){var A=c.ariaControlsSuffix,O=c.closeOnClickOutside,j=c.closeOnEscape,q=c.content,$=c.isOpened,tt=$!==void 0&&$,J=c.target,H=A||"".concat(D());return i.createElement(F,{target:J?function(Q,Z){return i.createElement("div",{"aria-expanded":Z?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(H)},J(Q,Z))}:null,content:function(Q){return i.createElement(y,null,i.createElement(l,{ariaControlsSuffix:H,closeOnClickOutside:O,closeOnEscape:j,onToggle:Q},q(Q)))},isOpened:tt})},n.Popover=function(c){var A=c.ariaHasPopup,O=A===void 0?"dialog":A,j=c.ariaControlsSuffix,q=c.closeOnClickOutside,$=c.closeOnEscape,tt=c.content,J=c.lockScroll,H=J===void 0||J,Q=c.offset,Z=c.position,ft=c.target,dt=T(!1),ut=dt.opened,St=dt.toggle,_t=i.useRef(),vt=i.useMemo((function(){return j||"".concat(D())}),[]);return i.createElement("div",{ref:_t,"aria-expanded":ut?"true":"false","aria-haspopup":O,"aria-controls":"rpv-core__popver-body-".concat(vt)},ft(St,ut),ut&&i.createElement(i.Fragment,null,H&&i.createElement(Ot,{closeOnEscape:$,onClose:St}),i.createElement(Mt,{ariaControlsSuffix:vt,closeOnClickOutside:q,offset:Q,position:Z,targetRef:_t,onClose:St},tt(St))))},n.PrimaryButton=x,n.ProgressBar=function(c){var A=c.progress,O=i.useContext(f).direction===n.TextDirection.RightToLeft;return i.createElement("div",{className:d({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":O})},i.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(A,"%")}},A,"%"))},n.Separator=function(){return i.createElement("div",{className:"rpv-core__separator"})},n.Spinner=L,n.Splitter=function(c){var A=c.constrain,O=i.useContext(f).direction===n.TextDirection.RightToLeft,j=i.useRef(),q=i.useRef(),$=i.useRef(),tt=i.useRef(0),J=i.useRef(0),H=i.useRef(0),Q=i.useRef(0),Z={capture:!0},ft=function(ut){var St=j.current,_t=q.current,vt=$.current;if(St&&_t&&vt){var Kt=Q.current,Dt=ut.clientX-tt.current,It=H.current+(O?-Dt:Dt),Ht=St.parentElement.getBoundingClientRect().width,Tt=100*It/Ht;if(St.classList.add("rpv-core__splitter--resizing"),A){var zt=Ht-It-Kt;if(!A({firstHalfPercentage:Tt,firstHalfSize:It,secondHalfPercentage:100*zt/Ht,secondHalfSize:zt}))return}_t.style.width="".concat(Tt,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),_t.classList.add("rpv-core__splitter-sibling--resizing"),vt.classList.add("rpv-core__splitter-sibling--resizing")}},dt=function(ut){var St=j.current,_t=q.current,vt=$.current;St&&_t&&vt&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),St.classList.remove("rpv-core__splitter--resizing"),_t.classList.remove("rpv-core__splitter-sibling--resizing"),vt.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",ft,Z),document.removeEventListener("mouseup",dt,Z))};return i.useEffect((function(){var ut=j.current;ut&&(Q.current=ut.getBoundingClientRect().width,q.current=ut.previousElementSibling,$.current=ut.nextElementSibling)}),[]),i.createElement("div",{ref:j,className:"rpv-core__splitter",onMouseDown:function(ut){var St=q.current;St&&(tt.current=ut.clientX,J.current=ut.clientY,H.current=St.getBoundingClientRect().width,document.addEventListener("mousemove",ft,Z),document.addEventListener("mouseup",dt,Z))}})},n.TextBox=R,n.ThemeContext=f,n.Tooltip=function(c){var A=c.ariaControlsSuffix,O=c.content,j=c.offset,q=c.position,$=c.target,tt=T(!1),J=tt.opened,H=tt.toggle,Q=i.useRef(),Z=i.useRef(),ft=i.useMemo((function(){return A||"".concat(D())}),[]);k((function(){Q.current&&document.activeElement&&Q.current.contains(document.activeElement)&&ut()}));var dt=function(){H(n.ToggleStatus.Open)},ut=function(){H(n.ToggleStatus.Close)};return i.createElement(i.Fragment,null,i.createElement("div",{ref:Q,"aria-describedby":"rpv-core__tooltip-body-".concat(ft),onBlur:function(St){St.relatedTarget instanceof HTMLElement&&St.currentTarget.parentElement&&St.currentTarget.parentElement.contains(St.relatedTarget)?Z.current&&(Z.current.style.display="none"):ut()},onFocus:dt,onMouseEnter:dt,onMouseLeave:ut},$),J&&i.createElement(Ut,{ariaControlsSuffix:ft,contentRef:Z,offset:j,position:q,targetRef:Q},O()))},n.Viewer=function(c){var A=c.characterMap,O=c.defaultScale,j=c.enableSmoothScroll,q=j===void 0||j,$=c.fileUrl,tt=c.httpHeaders,J=tt===void 0?{}:tt,H=c.initialPage,Q=H===void 0?0:H,Z=c.pageLayout,ft=c.initialRotation,dt=ft===void 0?0:ft,ut=c.localization,St=c.plugins,_t=St===void 0?[]:St,vt=c.renderError,Kt=c.renderLoader,Dt=c.renderPage,It=c.renderProtectedView,Ht=c.scrollMode,Tt=Ht===void 0?n.ScrollMode.Vertical:Ht,zt=c.setRenderRange,jt=zt===void 0?Bi:zt,re=c.transformGetDocumentParams,ne=c.theme,se=ne===void 0?{direction:n.TextDirection.LeftToRight,theme:"light"}:ne,ae=c.viewMode,le=ae===void 0?n.ViewMode.SinglePage:ae,we=c.withCredentials,ve=we!==void 0&&we,xe=c.onDocumentAskPassword,_e=c.onDocumentLoad,Se=_e===void 0?function(){}:_e,Ee=c.onPageChange,ye=Ee===void 0?function(){}:Ee,Le=c.onRotate,qe=Le===void 0?function(){}:Le,ze=c.onRotatePage,ke=ze===void 0?function(){}:ze,Ne=c.onSwitchTheme,$e=Ne===void 0?function(){}:Ne,Bt=c.onZoom,Nt=Bt===void 0?function(){}:Bt,kt=i.useState({data:$,name:typeof $=="string"?$:"",shouldLoad:!1}),Ft=kt[0],Rt=kt[1],Vt=function(me,be){Rt({data:be,name:me,shouldLoad:!0})},qt=i.useState(!1),Lt=qt[0],Pt=qt[1],$t=ht(Ft);i.useEffect((function(){var me,be,Pe,he;me=$t.data,he=typeof(be=$),(Pe=typeof me)=="string"&&he==="string"&&me===be||Pe==="object"&&he==="object"&&me.length===be.length&&me.every((function(Je,hn){return Je===be[hn]}))||Rt({data:$,name:typeof $=="string"?$:"",shouldLoad:Lt})}),[$,Lt]);var Jt=m({onVisibilityChanged:function(me){Pt(me.isVisible),me.isVisible&&Rt((function(be){return Object.assign({},be,{shouldLoad:!0})}))}}),ge=typeof se=="string"?{direction:n.TextDirection.LeftToRight,theme:se}:se,de=i.useState(ut||g),Re=de[0],Be=de[1],Yt={l10n:Re,setL10n:Be},Me=Object.assign({},{direction:ge.direction},ji(ge.theme||"light",$e));return i.useEffect((function(){ut&&Be(ut)}),[ut]),i.createElement(E.Provider,{value:Yt},i.createElement(f.Provider,{value:Me},i.createElement("div",{ref:Jt,className:"rpv-core__viewer rpv-core__viewer--".concat(Me.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Ft.shouldLoad&&i.createElement(Ni,{characterMap:A,file:Ft.data,httpHeaders:J,render:function(me){return i.createElement(Ii,{defaultScale:O,doc:me,render:function(be,Pe){return i.createElement(Di,{currentFile:{data:Ft.data,name:Ft.name},defaultScale:O,doc:me,enableSmoothScroll:q,initialPage:Q,initialRotation:dt,initialScale:Pe,pageLayout:Z,pageSizes:be,plugins:_t,renderPage:Dt,scrollMode:Tt,setRenderRange:jt,viewMode:le,viewerState:{file:Ft,fullScreenMode:n.FullScreenMode.Normal,pageIndex:-1,pageHeight:be[0].pageHeight,pageWidth:be[0].pageWidth,pagesRotation:new Map,rotation:dt,scale:Pe,scrollMode:Tt,viewMode:le},onDocumentLoad:Se,onOpenFile:Vt,onPageChange:ye,onRotate:qe,onRotatePage:ke,onZoom:Nt})},scrollMode:Tt,viewMode:le})},renderError:vt,renderLoader:Kt,renderProtectedView:It,transformGetDocumentParams:re,withCredentials:ve,onDocumentAskPassword:xe}))))},n.Worker=function(c){var A=c.children,O=c.workerUrl;return M.GlobalWorkerOptions.workerSrc=O,i.createElement(i.Fragment,null,A)},n.chunk=ee,n.classNames=d,n.createStore=function(c){var A=c||{},O={},j=function($,tt){var J;A=t(t({},A),((J={})[$]=tt,J)),(O[$]||[]).forEach((function(H){return H(A[$])}))},q=function($){return A[$]};return{subscribe:function($,tt){O[$]=(O[$]||[]).concat(tt)},unsubscribe:function($,tt){O[$]=(O[$]||[]).filter((function(J){return J!==tt}))},update:function($,tt){j($,tt)},updateCurrentValue:function($,tt){var J=q($);J!==void 0&&j($,tt(J))},get:function($){return q($)}}},n.getDestination=Ge,n.getPage=je,n.isFullScreenEnabled=rt,n.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},n.useDebounceCallback=bt,n.useIntersectionObserver=m,n.useIsMounted=wt,n.useIsomorphicLayoutEffect=e,n.usePrevious=ht,n.useRenderQueue=p})(core_min)),core_min}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib.exports;hasRequiredLib=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib.exports=requireCore_min(),lib.exports}var libExports=requireLib();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("ArrowLeft",__iconNode$4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],CircleUser=createLucideIcon("CircleUser",__iconNode$3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Download=createLucideIcon("Download",__iconNode$2);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Heart=createLucideIcon("Heart",__iconNode$1);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],MessageCircle=createLucideIcon("MessageCircle",__iconNode);var pdfExports=requirePdf();const PdfModal=n=>{const o=compilerRuntimeExports.c(13),{fileUrl:P,title:h,isOpen:_,onClose:i}=n;if(!_)return null;let M;o[0]!==h?(M=jsxRuntimeExports.jsxs("h2",{className:"truncate text-lg font-semibold text-gray-900 dark:text-white",children:["Reading: ",h]}),o[0]=h,o[1]=M):M=o[1];let V;o[2]===Symbol.for("react.memo_cache_sentinel")?(V=jsxRuntimeExports.jsx(X,{size:24}),o[2]=V):V=o[2];let z;o[3]!==i?(z=jsxRuntimeExports.jsx("button",{onClick:i,className:"rounded-full p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-white",children:V}),o[3]=i,o[4]=z):z=o[4];let a;o[5]!==M||o[6]!==z?(a=jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-4 dark:border-gray-800",children:[M,z]}),o[5]=M,o[6]=z,o[7]=a):a=o[7];let t;o[8]!==P?(t=jsxRuntimeExports.jsx("div",{className:"h-[calc(100%-65px)] p-2",children:jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:`https://unpkg.com/pdfjs-dist@${pdfExports.version}/build/pdf.worker.min.js`,children:jsxRuntimeExports.jsx(libExports.Viewer,{fileUrl:P,defaultScale:libExports.SpecialZoomLevel.PageFit})})}),o[8]=P,o[9]=t):t=o[9];let r;return o[10]!==a||o[11]!==t?(r=jsxRuntimeExports.jsx("div",{className:"bg-opacity-90 fixed inset-0 z-50 flex items-center justify-center bg-gray-900 p-4 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"relative h-full w-full max-w-7xl rounded-xl bg-white md:h-[90%] md:w-[90%] dark:bg-gray-950",children:[a,t]})}),o[10]=a,o[11]=t,o[12]=r):r=o[12],r};function PostDetails(){const n=compilerRuntimeExports.c(100),{props:o}=usePage(),{module:P,auth:h,likeCount:_,isLiked:i}=o,[M,V]=reactExports.useState(!1),[z,a]=reactExports.useState(_??P?.likes_count??0),[t,r]=reactExports.useState(i??!1);let f;n[0]===Symbol.for("react.memo_cache_sentinel")?(f={body:""},n[0]=f):f=n[0];const{data:d,setData:e,post:m,processing:b,reset:u}=useForm(f);if(!P){let Zt;return n[1]===Symbol.for("react.memo_cache_sentinel")?(Zt=jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Module not found."}),n[1]=Zt):Zt=n[1],Zt}let x;n[2]!==P.comments?(x=P.comments??[],n[2]=P.comments,n[3]=x):x=n[3];const L=x;let R;n[4]!==h.user||n[5]!==P.id||n[6]!==m||n[7]!==u?(R=function(fe){fe.preventDefault(),h.user&&m(s("modules.comment",{module:P.id}),{preserveScroll:!0,onSuccess:()=>{u("body")},onError:_temp})},n[4]=h.user,n[5]=P.id,n[6]=m,n[7]=u,n[8]=R):R=n[8];const v=R;let C;n[9]!==h.user||n[10]!==t||n[11]!==z||n[12]!==P.id?(C=function(){if(!h.user){alert("You must be logged in to like a module.");return}const fe=!t,Ie=fe?z+1:z-1;r(fe),a(Ie),router3.post(s("modules.like.toggle",{module:P.id}),{},{preserveScroll:!0,onError:Ae=>{r(!fe),a(fe?Ie-1:Ie+1),alert("An error occurred while liking/unliking."),console.error("Like toggle error:",Ae)}})},n[9]=h.user,n[10]=t,n[11]=z,n[12]=P.id,n[13]=C):C=n[13];const G=C;let K;if(n[14]!==P.description){let Zt;n[16]===Symbol.for("react.memo_cache_sentinel")?(Zt=/src="(?:\/)?storage\/([^"]+)"/g,n[16]=Zt):Zt=n[16],K=P.description.replace(Zt,_temp2),n[14]=P.description,n[15]=K}else K=n[15];const U=K,nt=_temp3;let rt;n[17]===Symbol.for("react.memo_cache_sentinel")?(rt=Zt=>{if(!Zt)return"";const fe=new Date(Zt),Ae=Math.round((new Date().getTime()-fe.getTime())/1e3);if(Ae<60)return"just now";const Fe=Math.round(Ae/60);if(Fe<60)return`${Fe} minute${Fe>1?"s":""} ago`;const je=Math.round(Fe/60);if(je<24)return`${je} hour${je>1?"s":""} ago`;const Ge=Math.round(je/24);return Ge<7?`${Ge} day${Ge>1?"s":""} ago`:nt(Zt)},n[17]=rt):rt=n[17];const At=rt;let pt;n[18]!==P.title?(pt=jsxRuntimeExports.jsx(Head_default,{title:P.title}),n[18]=P.title,n[19]=pt):pt=n[19];let bt;n[20]===Symbol.for("react.memo_cache_sentinel")?(bt=()=>V(!1),n[20]=bt):bt=n[20];let wt;n[21]!==P.file_url||n[22]!==P.title||n[23]!==M?(wt=jsxRuntimeExports.jsx(PdfModal,{fileUrl:P.file_url,title:P.title,isOpen:M,onClose:bt}),n[21]=P.file_url,n[22]=P.title,n[23]=M,n[24]=wt):wt=n[24];let ht;n[25]===Symbol.for("react.memo_cache_sentinel")?(ht=jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-10 w-full border-b border-gray-100 bg-white/90 backdrop-blur-md dark:border-gray-800 dark:bg-gray-950/90",children:jsxRuntimeExports.jsx("div",{className:"mx-auto flex h-16 max-w-6xl items-center px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("button",{onClick:_temp4,className:"flex items-center gap-2 rounded-full p-2 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-100 hover:text-indigo-600 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-indigo-400",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),"Back to Dashboard"]})})}),n[25]=ht):ht=n[25];let N;n[26]!==P.thumbnail_url||n[27]!==P.title?(N=jsxRuntimeExports.jsx("div",{className:"relative aspect-video w-full overflow-hidden",children:jsxRuntimeExports.jsx("img",{className:"h-full w-full object-cover transition-transform duration-500 hover:scale-105",src:P.thumbnail_url,alt:P.title})}),n[26]=P.thumbnail_url,n[27]=P.title,n[28]=N):N=n[28];let S;n[29]===Symbol.for("react.memo_cache_sentinel")?(S=jsxRuntimeExports.jsx(CircleUser,{size:16,className:"text-indigo-500"}),n[29]=S):S=n[29];let p;n[30]!==P.author_name?(p=jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[S,jsxRuntimeExports.jsx("span",{children:P.author_name})]}),n[30]=P.author_name,n[31]=p):p=n[31];let g;n[32]!==P.published_at?(g=At(P.published_at),n[32]=P.published_at,n[33]=g):g=n[33];let E;n[34]!==g?(E=jsxRuntimeExports.jsx("time",{children:g}),n[34]=g,n[35]=E):E=n[35];let I;n[36]!==p||n[37]!==E?(I=jsxRuntimeExports.jsxs("div",{className:"mb-2 flex items-center gap-3 text-sm font-medium text-gray-500 dark:text-gray-400",children:[p,E]}),n[36]=p,n[37]=E,n[38]=I):I=n[38];let D;n[39]!==P.title?(D=jsxRuntimeExports.jsx("h1",{className:"text-3xl leading-tight font-extrabold tracking-tight text-gray-900 sm:text-4xl lg:text-5xl dark:text-white",children:P.title}),n[39]=P.title,n[40]=D):D=n[40];let B;n[41]!==I||n[42]!==D?(B=jsxRuntimeExports.jsxs("div",{className:"mb-8 border-b border-gray-100 pb-6 dark:border-gray-800",children:[I,D]}),n[41]=I,n[42]=D,n[43]=B):B=n[43];let k;n[44]!==U?(k=jsxRuntimeExports.jsx("div",{className:"prose dark:prose-invert prose-lg sm:prose-xl max-w-none space-y-6 text-gray-700 dark:text-gray-300",dangerouslySetInnerHTML:{__html:U}}),n[44]=U,n[45]=k):k=n[45];const l=`flex items-center gap-2 rounded-full p-3 text-sm font-semibold transition-colors hover:scale-[1.05] disabled:cursor-not-allowed disabled:opacity-50 ${t?"bg-red-100 text-red-600 dark:bg-red-900/50 dark:text-red-400":"bg-red-50 text-red-600 hover:bg-red-100 dark:bg-gray-800 dark:text-red-400 dark:hover:bg-gray-700"}`,y=t?"fill-red-600 dark:fill-red-400":"fill-none";let w;n[46]!==y?(w=jsxRuntimeExports.jsx(Heart,{size:20,className:y}),n[46]=y,n[47]=w):w=n[47];let T;n[48]!==z?(T=jsxRuntimeExports.jsxs("span",{children:[z," Likes"]}),n[48]=z,n[49]=T):T=n[49];let F;n[50]!==l||n[51]!==w||n[52]!==T||n[53]!==G?(F=jsxRuntimeExports.jsxs("button",{onClick:G,className:l,children:[w,T]}),n[50]=l,n[51]=w,n[52]=T,n[53]=G,n[54]=F):F=n[54];let W;n[55]===Symbol.for("react.memo_cache_sentinel")?(W=jsxRuntimeExports.jsx(MessageCircle,{size:20}),n[55]=W):W=n[55];let Y;n[56]!==L.length?(Y=jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[W,jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:[L.length," Comments"]})]}),n[56]=L.length,n[57]=Y):Y=n[57];let st;n[58]!==F||n[59]!==Y?(st=jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[F,Y]}),n[58]=F,n[59]=Y,n[60]=st):st=n[60];let Et;n[61]!==P.file_url||n[62]!==P.id?(Et=P.file_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:()=>V(!0),className:"flex w-full transform items-center justify-center gap-3 rounded-full bg-indigo-600 px-6 py-3 text-base font-bold text-white shadow-lg shadow-indigo-500/50 transition-all duration-300 hover:scale-[1.02] hover:bg-indigo-700 sm:w-auto",children:[jsxRuntimeExports.jsx(BookOpen,{size:20}),"Read Online"]}),jsxRuntimeExports.jsxs("a",{href:s("modules.read",{module:P.id}),target:"_blank",rel:"noopener noreferrer",download:!0,className:"flex w-full transform items-center justify-center gap-3 rounded-full border border-indigo-600 bg-transparent px-6 py-3 text-base font-bold text-indigo-600 transition-all duration-300 hover:scale-[1.02] hover:bg-indigo-50 sm:w-auto dark:text-indigo-400 dark:hover:bg-gray-800",children:[jsxRuntimeExports.jsx(Download,{size:20}),"Download"]})]}),n[61]=P.file_url,n[62]=P.id,n[63]=Et):Et=n[63];let at;n[64]!==Et?(at=jsxRuntimeExports.jsx("div",{className:"flex w-full flex-col gap-4 sm:w-auto sm:flex-row",children:Et}),n[64]=Et,n[65]=at):at=n[65];let ot;n[66]!==st||n[67]!==at?(ot=jsxRuntimeExports.jsxs("div",{className:"mt-10 flex flex-col items-center justify-between gap-6 border-t border-gray-100 pt-8 sm:flex-row dark:border-gray-800",children:[st,at]}),n[66]=st,n[67]=at,n[68]=ot):ot=n[68];let lt;n[69]!==B||n[70]!==k||n[71]!==ot?(lt=jsxRuntimeExports.jsxs("div",{className:"p-6 sm:p-10 lg:p-12",children:[B,k,ot]}),n[69]=B,n[70]=k,n[71]=ot,n[72]=lt):lt=n[72];let ct;n[73]!==N||n[74]!==lt?(ct=jsxRuntimeExports.jsxs("article",{className:"mx-auto max-w-4xl overflow-hidden rounded-xl bg-white shadow-2xl dark:border dark:border-gray-800 dark:bg-gray-900 dark:shadow-none",children:[N,lt]}),n[73]=N,n[74]=lt,n[75]=ct):ct=n[75];let gt;n[76]!==L.length?(gt=jsxRuntimeExports.jsxs("h2",{className:"mb-8 text-xl font-bold text-gray-900 dark:text-white",children:[L.length," Comments"]}),n[76]=L.length,n[77]=gt):gt=n[77];let Ct;n[78]!==h.user||n[79]!==d||n[80]!==b||n[81]!==u||n[82]!==e||n[83]!==v?(Ct=h.user?jsxRuntimeExports.jsxs("div",{className:"mb-10 flex gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:h.user.name?jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-indigo-100 text-sm font-bold text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400",children:h.user.name.charAt(0)}):jsxRuntimeExports.jsx(CircleUser,{size:40,className:"text-gray-400"})}),jsxRuntimeExports.jsxs("form",{className:"w-full",onSubmit:v,children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("input",{type:"text",value:d.body,onChange:Zt=>e("body",Zt.target.value),className:"w-full border-b border-gray-300 bg-transparent py-2 text-gray-900 placeholder-gray-500 transition-colors focus:border-indigo-600 focus:outline-none focus:ring-0 dark:border-gray-700 dark:text-white dark:focus:border-indigo-400",placeholder:"Add a comment...",required:!0})}),jsxRuntimeExports.jsxs("div",{className:`mt-3 flex justify-end gap-2 transition-opacity duration-200 ${d.body.trim().length>0?"opacity-100":"opacity-0 pointer-events-none"}`,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>u("body"),className:"rounded-full px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",children:"Cancel"}),jsxRuntimeExports.jsx("button",{disabled:b||d.body.trim().length===0,className:"rounded-full bg-indigo-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-indigo-700 disabled:bg-gray-300 dark:disabled:bg-gray-700",children:"Comment"})]})]})]}):jsxRuntimeExports.jsx("div",{className:"mb-10 rounded-lg border border-dashed border-gray-300 bg-gray-50 p-6 text-center dark:border-gray-700 dark:bg-gray-900/50",children:jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("a",{href:s("login"),className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Log in"})," to join the discussion."]})}),n[78]=h.user,n[79]=d,n[80]=b,n[81]=u,n[82]=e,n[83]=v,n[84]=Ct):Ct=n[84];let Mt;n[85]!==L?(Mt=L.length>0?L.map(Zt=>jsxRuntimeExports.jsxs("div",{className:"group flex gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 text-sm font-bold text-gray-600 dark:bg-gray-800 dark:text-gray-400",children:Zt.user.name.charAt(0)})}),jsxRuntimeExports.jsxs("div",{className:"flex-grow",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:Zt.user.name}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:At(Zt.created_at)})]}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm leading-relaxed text-gray-800 dark:text-gray-200",children:Zt.body})]})]},Zt.id)):jsxRuntimeExports.jsx("p",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No comments yet. Be the first to share your thoughts!"}),n[85]=L,n[86]=Mt):Mt=n[86];let Ot;n[87]!==Mt?(Ot=jsxRuntimeExports.jsx("div",{className:"space-y-8",children:Mt}),n[87]=Mt,n[88]=Ot):Ot=n[88];let Ut;n[89]!==gt||n[90]!==Ct||n[91]!==Ot?(Ut=jsxRuntimeExports.jsxs("section",{className:"mx-auto mt-12 max-w-4xl",children:[gt,Ct,Ot]}),n[89]=gt,n[90]=Ct,n[91]=Ot,n[92]=Ut):Ut=n[92];let Wt;n[93]!==ct||n[94]!==Ut?(Wt=jsxRuntimeExports.jsxs("main",{className:"container mx-auto px-4 py-12",children:[ct,Ut]}),n[93]=ct,n[94]=Ut,n[95]=Wt):Wt=n[95];let ee;return n[96]!==Wt||n[97]!==pt||n[98]!==wt?(ee=jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans antialiased transition-colors duration-300 dark:bg-gray-950",children:[pt,wt,ht,Wt]}),n[96]=Wt,n[97]=pt,n[98]=wt,n[99]=ee):ee=n[99],ee}function _temp4(){return router3.get(s("dashboard"))}function _temp3(n){return n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function _temp2(n,o){return`src="/storage/${o}"`}function _temp(n){console.error("Comment submission error:",n)}export{PostDetails as default};
