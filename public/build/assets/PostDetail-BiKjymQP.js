import{r as require$$5,a as requireReact,c as compilerRuntimeExports,u as usePage,b as reactExports,d as useForm,j as jsxRuntimeExports,H as Head_default,e as router3}from"./app-8GApVt7d.js";import{s}from"./index-ikzcNs2d.js";import{B as BookOpen}from"./book-open-Dv_tXYlK.js";import{c as createLucideIcon}from"./createLucideIcon-BX7wIIuK.js";import{X}from"./x-Dm9lzsqk.js";/* empty css            */var lib={exports:{}},core_min={};function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(o,P){module.exports=o.pdfjsLib=P()})(globalThis,()=>(()=>{var __webpack_modules__=[,((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.TextRenderingMode=o.RenderingIntentFlag=o.PromiseCapability=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.MAX_IMAGE_SIZE_TO_CACHE=o.LINE_FACTOR=o.LINE_DESCENT_FACTOR=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.BASELINE_FACTOR=o.AnnotationType=o.AnnotationReplyType=o.AnnotationPrefix=o.AnnotationMode=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationEditorType=o.AnnotationEditorPrefix=o.AnnotationEditorParamsType=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.assert=p,o.bytesToString=W,o.createValidAbsoluteUrl=E,o.getModificationDate=_e,o.getUuid=Ve,o.getVerbosityLevel=wt,o.info=lt,o.isArrayBuffer=Zt,o.isArrayEqual=Se,o.isNodeJS=void 0,o.normalizeUnicode=Ue,o.objectFromMap=at,o.objectSize=Et,o.setVerbosityLevel=vt,o.shadow=D,o.string32=st,o.stringToBytes=Y,o.stringToPDFString=Ot,o.stringToUTF8String=Vt,o.unreachable=S,o.utf8StringToString=Ut,o.warn=N;const P=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");o.isNodeJS=P;const d=[1,0,0,1,0,0];o.IDENTITY_MATRIX=d;const _=[.001,0,0,.001,0,0];o.FONT_IDENTITY_MATRIX=_;const i=1e7;o.MAX_IMAGE_SIZE_TO_CACHE=i;const M=1.35;o.LINE_FACTOR=M;const z=.35;o.LINE_DESCENT_FACTOR=z;const V=z/M;o.BASELINE_FACTOR=V;const a={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};o.RenderingIntentFlag=a;const t={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};o.AnnotationMode=t;const r="pdfjs_internal_editor_";o.AnnotationEditorPrefix=r;const f={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};o.AnnotationEditorType=f;const h={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};o.AnnotationEditorParamsType=h;const e={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};o.PermissionFlag=e;const m={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};o.TextRenderingMode=m;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};o.ImageKind=b;const u={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};o.AnnotationType=u;const x={GROUP:"Group",REPLY:"R"};o.AnnotationReplyType=x;const I={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};o.AnnotationFlag=I;const R={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};o.AnnotationFieldFlag=R;const v={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};o.AnnotationBorderStyleType=v;const C={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};o.AnnotationActionEventType=C;const q={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};o.DocumentActionEventType=q;const K={O:"PageOpen",C:"PageClose"};o.PageActionEventType=K;const H={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=H;const nt={NONE:0,BINARY:1};o.CMapCompressionType=nt;const rt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};o.OPS=rt;const At={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};o.PasswordResponses=At;let pt=H.WARNINGS;function vt(_t){Number.isInteger(_t)&&(pt=_t)}function wt(){return pt}function lt(_t){pt>=H.INFOS&&console.log(`Info: ${_t}`)}function N(_t){pt>=H.WARNINGS&&console.log(`Warning: ${_t}`)}function S(_t){throw new Error(_t)}function p(_t,it){_t||S(it)}function g(_t){switch(_t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function E(_t,it=null,et=null){if(!_t)return null;try{if(et&&typeof _t=="string"&&(et.addDefaultProtocol&&_t.startsWith("www.")&&_t.match(/\./g)?.length>=2&&(_t=`http://${_t}`),et.tryConvertEncoding))try{_t=Vt(_t)}catch{}const xt=it?new URL(_t,it):new URL(_t);if(g(xt))return xt}catch{}return null}function D(_t,it,et,xt=!1){return Object.defineProperty(_t,it,{value:et,enumerable:!xt,configurable:!0,writable:!1}),et}const L=(function(){function it(et,xt){this.constructor===it&&S("Cannot initialize BaseException."),this.message=et,this.name=xt}return it.prototype=new Error,it.constructor=it,it})();o.BaseException=L;class U extends L{constructor(it,et){super(it,"PasswordException"),this.code=et}}o.PasswordException=U;class k extends L{constructor(it,et){super(it,"UnknownErrorException"),this.details=et}}o.UnknownErrorException=k;class l extends L{constructor(it){super(it,"InvalidPDFException")}}o.InvalidPDFException=l;class y extends L{constructor(it){super(it,"MissingPDFException")}}o.MissingPDFException=y;class w extends L{constructor(it,et){super(it,"UnexpectedResponseException"),this.status=et}}o.UnexpectedResponseException=w;class T extends L{constructor(it){super(it,"FormatError")}}o.FormatError=T;class F extends L{constructor(it){super(it,"AbortException")}}o.AbortException=F;function W(_t){(typeof _t!="object"||_t?.length===void 0)&&S("Invalid argument for bytesToString");const it=_t.length,et=8192;if(it<et)return String.fromCharCode.apply(null,_t);const xt=[];for(let ue=0;ue<it;ue+=et){const Gt=Math.min(ue+et,it),ne=_t.subarray(ue,Gt);xt.push(String.fromCharCode.apply(null,ne))}return xt.join("")}function Y(_t){typeof _t!="string"&&S("Invalid argument for stringToBytes");const it=_t.length,et=new Uint8Array(it);for(let xt=0;xt<it;++xt)et[xt]=_t.charCodeAt(xt)&255;return et}function st(_t){return String.fromCharCode(_t>>24&255,_t>>16&255,_t>>8&255,_t&255)}function Et(_t){return Object.keys(_t).length}function at(_t){const it=Object.create(null);for(const[et,xt]of _t)it[et]=xt;return it}function ot(){const _t=new Uint8Array(4);return _t[0]=1,new Uint32Array(_t.buffer,0,1)[0]===1}function ct(){try{return new Function(""),!0}catch{return!1}}class ut{static get isLittleEndian(){return D(this,"isLittleEndian",ot())}static get isEvalSupported(){return D(this,"isEvalSupported",ct())}static get isOffscreenCanvasSupported(){return D(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?D(this,"platform",{isWin:!1,isMac:!1}):D(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return D(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}o.FeatureTest=ut;const gt=[...Array(256).keys()].map(_t=>_t.toString(16).padStart(2,"0"));class Ct{static makeHexColor(it,et,xt){return`#${gt[it]}${gt[et]}${gt[xt]}`}static scaleMinMax(it,et){let xt;it[0]?(it[0]<0&&(xt=et[0],et[0]=et[1],et[1]=xt),et[0]*=it[0],et[1]*=it[0],it[3]<0&&(xt=et[2],et[2]=et[3],et[3]=xt),et[2]*=it[3],et[3]*=it[3]):(xt=et[0],et[0]=et[2],et[2]=xt,xt=et[1],et[1]=et[3],et[3]=xt,it[1]<0&&(xt=et[2],et[2]=et[3],et[3]=xt),et[2]*=it[1],et[3]*=it[1],it[2]<0&&(xt=et[0],et[0]=et[1],et[1]=xt),et[0]*=it[2],et[1]*=it[2]),et[0]+=it[4],et[1]+=it[4],et[2]+=it[5],et[3]+=it[5]}static transform(it,et){return[it[0]*et[0]+it[2]*et[1],it[1]*et[0]+it[3]*et[1],it[0]*et[2]+it[2]*et[3],it[1]*et[2]+it[3]*et[3],it[0]*et[4]+it[2]*et[5]+it[4],it[1]*et[4]+it[3]*et[5]+it[5]]}static applyTransform(it,et){const xt=it[0]*et[0]+it[1]*et[2]+et[4],ue=it[0]*et[1]+it[1]*et[3]+et[5];return[xt,ue]}static applyInverseTransform(it,et){const xt=et[0]*et[3]-et[1]*et[2],ue=(it[0]*et[3]-it[1]*et[2]+et[2]*et[5]-et[4]*et[3])/xt,Gt=(-it[0]*et[1]+it[1]*et[0]+et[4]*et[1]-et[5]*et[0])/xt;return[ue,Gt]}static getAxialAlignedBoundingBox(it,et){const xt=this.applyTransform(it,et),ue=this.applyTransform(it.slice(2,4),et),Gt=this.applyTransform([it[0],it[3]],et),ne=this.applyTransform([it[2],it[1]],et);return[Math.min(xt[0],ue[0],Gt[0],ne[0]),Math.min(xt[1],ue[1],Gt[1],ne[1]),Math.max(xt[0],ue[0],Gt[0],ne[0]),Math.max(xt[1],ue[1],Gt[1],ne[1])]}static inverseTransform(it){const et=it[0]*it[3]-it[1]*it[2];return[it[3]/et,-it[1]/et,-it[2]/et,it[0]/et,(it[2]*it[5]-it[4]*it[3])/et,(it[4]*it[1]-it[5]*it[0])/et]}static singularValueDecompose2dScale(it){const et=[it[0],it[2],it[1],it[3]],xt=it[0]*et[0]+it[1]*et[2],ue=it[0]*et[1]+it[1]*et[3],Gt=it[2]*et[0]+it[3]*et[2],ne=it[2]*et[1]+it[3]*et[3],Ye=(xt+ne)/2,Ke=Math.sqrt((xt+ne)**2-4*(xt*ne-Gt*ue))/2,Xe=Ye+Ke||1,Oe=Ye-Ke||1;return[Math.sqrt(Xe),Math.sqrt(Oe)]}static normalizeRect(it){const et=it.slice(0);return it[0]>it[2]&&(et[0]=it[2],et[2]=it[0]),it[1]>it[3]&&(et[1]=it[3],et[3]=it[1]),et}static intersect(it,et){const xt=Math.max(Math.min(it[0],it[2]),Math.min(et[0],et[2])),ue=Math.min(Math.max(it[0],it[2]),Math.max(et[0],et[2]));if(xt>ue)return null;const Gt=Math.max(Math.min(it[1],it[3]),Math.min(et[1],et[3])),ne=Math.min(Math.max(it[1],it[3]),Math.max(et[1],et[3]));return Gt>ne?null:[xt,Gt,ue,ne]}static bezierBoundingBox(it,et,xt,ue,Gt,ne,Ye,Ke){const Xe=[],Oe=[[],[]];let qe,We,on,Pe,ln,cn,fn,pn;for(let gn=0;gn<2;++gn){if(gn===0?(We=6*it-12*xt+6*Gt,qe=-3*it+9*xt-9*Gt+3*Ye,on=3*xt-3*it):(We=6*et-12*ue+6*ne,qe=-3*et+9*ue-9*ne+3*Ke,on=3*ue-3*et),Math.abs(qe)<1e-12){if(Math.abs(We)<1e-12)continue;Pe=-on/We,0<Pe&&Pe<1&&Xe.push(Pe);continue}fn=We*We-4*on*qe,pn=Math.sqrt(fn),!(fn<0)&&(ln=(-We+pn)/(2*qe),0<ln&&ln<1&&Xe.push(ln),cn=(-We-pn)/(2*qe),0<cn&&cn<1&&Xe.push(cn))}let nn=Xe.length,Ne;const rn=nn;for(;nn--;)Pe=Xe[nn],Ne=1-Pe,Oe[0][nn]=Ne*Ne*Ne*it+3*Ne*Ne*Pe*xt+3*Ne*Pe*Pe*Gt+Pe*Pe*Pe*Ye,Oe[1][nn]=Ne*Ne*Ne*et+3*Ne*Ne*Pe*ue+3*Ne*Pe*Pe*ne+Pe*Pe*Pe*Ke;return Oe[0][rn]=it,Oe[1][rn]=et,Oe[0][rn+1]=Ye,Oe[1][rn+1]=Ke,Oe[0].length=Oe[1].length=rn+2,[Math.min(...Oe[0]),Math.min(...Oe[1]),Math.max(...Oe[0]),Math.max(...Oe[1])]}}o.Util=Ct;const Mt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ot(_t){if(_t[0]>="ï"){let et;if(_t[0]==="þ"&&_t[1]==="ÿ"?et="utf-16be":_t[0]==="ÿ"&&_t[1]==="þ"?et="utf-16le":_t[0]==="ï"&&_t[1]==="»"&&_t[2]==="¿"&&(et="utf-8"),et)try{const xt=new TextDecoder(et,{fatal:!0}),ue=Y(_t);return xt.decode(ue)}catch(xt){N(`stringToPDFString: "${xt}".`)}}const it=[];for(let et=0,xt=_t.length;et<xt;et++){const ue=Mt[_t.charCodeAt(et)];it.push(ue?String.fromCharCode(ue):_t.charAt(et))}return it.join("")}function Vt(_t){return decodeURIComponent(escape(_t))}function Ut(_t){return unescape(encodeURIComponent(_t))}function Zt(_t){return typeof _t=="object"&&_t?.byteLength!==void 0}function Se(_t,it){if(_t.length!==it.length)return!1;for(let et=0,xt=_t.length;et<xt;et++)if(_t[et]!==it[et])return!1;return!0}function _e(_t=new Date){return[_t.getUTCFullYear().toString(),(_t.getUTCMonth()+1).toString().padStart(2,"0"),_t.getUTCDate().toString().padStart(2,"0"),_t.getUTCHours().toString().padStart(2,"0"),_t.getUTCMinutes().toString().padStart(2,"0"),_t.getUTCSeconds().toString().padStart(2,"0")].join("")}class se{#t=!1;constructor(){this.promise=new Promise((it,et)=>{this.resolve=xt=>{this.#t=!0,it(xt)},this.reject=xt=>{this.#t=!0,et(xt)}})}get settled(){return this.#t}}o.PromiseCapability=se;let me=null,Le=null;function Ue(_t){return me||(me=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Le=new Map([["ﬅ","ſt"]])),_t.replaceAll(me,(it,et,xt)=>et?et.normalize("NFKC"):Le.get(xt))}function Ve(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const _t=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(_t);else for(let it=0;it<32;it++)_t[it]=Math.floor(Math.random()*255);return W(_t)}const Ie="pdfjs_internal_id_";o.AnnotationPrefix=Ie}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(n){if(typeof n=="string"||n instanceof URL?n={url:n}:(0,_util.isArrayBuffer)(n)&&(n={data:n}),typeof n!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!n.url&&!n.data&&!n.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const o=new PDFDocumentLoadingTask,{docId:P}=o,d=n.url?getUrlProp(n.url):null,_=n.data?getDataProp(n.data):null,i=n.httpHeaders||null,M=n.withCredentials===!0,z=n.password??null,V=n.range instanceof PDFDataRangeTransport?n.range:null,a=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let t=n.worker instanceof PDFWorker?n.worker:null;const r=n.verbosity,f=typeof n.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(n.docBaseUrl)?n.docBaseUrl:null,h=typeof n.cMapUrl=="string"?n.cMapUrl:null,e=n.cMapPacked!==!1,m=n.CMapReaderFactory||DefaultCMapReaderFactory,b=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,u=n.StandardFontDataFactory||DefaultStandardFontDataFactory,x=n.stopAtErrors!==!0,I=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,R=n.isEvalSupported!==!1,v=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!_util.isNodeJS,C=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,q=typeof n.disableFontFace=="boolean"?n.disableFontFace:_util.isNodeJS,K=n.fontExtraProperties===!0,H=n.enableXfa===!0,nt=n.ownerDocument||globalThis.document,rt=n.disableRange===!0,At=n.disableStream===!0,pt=n.disableAutoFetch===!0,vt=n.pdfBug===!0,wt=V?V.length:n.length??NaN,lt=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!_util.isNodeJS&&!q,N=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:m===_display_utils.DOMCMapReaderFactory&&u===_display_utils.DOMStandardFontDataFactory&&h&&b&&(0,_display_utils.isValidFetchUrl)(h,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(b,document.baseURI),S=n.canvasFactory||new DefaultCanvasFactory({ownerDocument:nt}),p=n.filterFactory||new DefaultFilterFactory({docId:P,ownerDocument:nt}),g=null;(0,_util.setVerbosityLevel)(r);const E={canvasFactory:S,filterFactory:p};if(N||(E.cMapReaderFactory=new m({baseUrl:h,isCompressed:e}),E.standardFontDataFactory=new u({baseUrl:b})),!t){const U={verbosity:r,port:_worker_options.GlobalWorkerOptions.workerPort};t=U.port?PDFWorker.fromPort(U):new PDFWorker(U),o._worker=t}const D={docId:P,apiVersion:"3.11.174",data:_,password:z,disableAutoFetch:pt,rangeChunkSize:a,length:wt,docBaseUrl:f,enableXfa:H,evaluatorOptions:{maxImageSize:I,disableFontFace:q,ignoreErrors:x,isEvalSupported:R,isOffscreenCanvasSupported:v,canvasMaxAreaInBytes:C,fontExtraProperties:K,useSystemFonts:lt,cMapUrl:N?h:null,standardFontDataUrl:N?b:null}},L={ignoreErrors:x,isEvalSupported:R,disableFontFace:q,fontExtraProperties:K,enableXfa:H,ownerDocument:nt,disableAutoFetch:pt,pdfBug:vt,styleElement:g};return t.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const U=_fetchDocument(t,D),k=new Promise(function(l){let y;V?y=new _transport_stream.PDFDataTransportStream({length:wt,initialData:V.initialData,progressiveDone:V.progressiveDone,contentDispositionFilename:V.contentDispositionFilename,disableRange:rt,disableStream:At},V):_||(y=(T=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(T):(0,_display_utils.isValidFetchUrl)(T.url)?new _displayFetch_stream.PDFFetchStream(T):new _displayNetwork.PDFNetworkStream(T))({url:d,length:wt,httpHeaders:i,withCredentials:M,rangeChunkSize:a,disableRange:rt,disableStream:At})),l(y)});return Promise.all([U,k]).then(function([l,y]){if(o.destroyed)throw new Error("Loading aborted");const w=new _message_handler.MessageHandler(P,l,t.port),T=new WorkerTransport(w,o,y,L,E);o._transport=T,w.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(n,o){if(n.destroyed)throw new Error("Worker was destroyed");const P=await n.messageHandler.sendWithPromise("GetDocRequest",o,o.data?[o.data.buffer]:null);if(n.destroyed)throw new Error("Worker was destroyed");return P}function getUrlProp(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(_util.isNodeJS&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(n){if(_util.isNodeJS&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return(0,_util.stringToBytes)(n);if(typeof n=="object"&&!isNaN(n?.length)||(0,_util.isArrayBuffer)(n))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(o){throw this._worker?.port&&delete this._worker._pendingDestroy,o}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,P,d=!1,_=null){this.length=o,this.initialData=P,this.progressiveDone=d,this.contentDispositionFilename=_,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,P){for(const d of this._rangeListeners)d(o,P)}onDataProgress(o,P){this._readyCapability.promise.then(()=>{for(const d of this._progressListeners)d(o,P)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const P of this._progressiveReadListeners)P(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,P){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,P){this._pdfInfo=o,this._transport=P,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(d=>{if(!d)return d;const _=[];for(const i in d)_.push(...d[i]);return _}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(o,P,d,_=!1){this._pageIndex=o,this._pageInfo=P,this._transport=d,this._stats=_?new _display_utils.StatTimer:null,this._pdfBug=_,this.commonObjs=d.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:P=this.rotate,offsetX:d=0,offsetY:_=0,dontFlip:i=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:P,offsetX:d,offsetY:_,dontFlip:i})}getAnnotations({intent:o="display"}={}){const P=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,P.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:o,viewport:P,intent:d="display",annotationMode:_=_util.AnnotationMode.ENABLE,transform:i=null,background:M=null,optionalContentConfigPromise:z=null,annotationCanvasMap:V=null,pageColors:a=null,printAnnotationStorage:t=null}){this._stats?.time("Overall");const r=this._transport.getRenderingIntent(d,_,t);this.#e=!1,this.#i(),z||(z=this._transport.getOptionalContentConfig());let f=this._intentStates.get(r.cacheKey);f||(f=Object.create(null),this._intentStates.set(r.cacheKey,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);const h=!!(r.renderingIntent&_util.RenderingIntentFlag.PRINT);f.displayReadyCapability||(f.displayReadyCapability=new _util.PromiseCapability,f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r));const e=u=>{f.renderTasks.delete(m),(this._maybeCleanupAfterRender||h)&&(this.#e=!0),this.#n(!h),u?(m.capability.reject(u),this._abortOperatorList({intentState:f,reason:u instanceof Error?u:new Error(u)})):m.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},m=new InternalRenderTask({callback:e,params:{canvasContext:o,viewport:P,transform:i,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:V,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!h,pdfBug:this._pdfBug,pageColors:a});(f.renderTasks||=new Set).add(m);const b=m.task;return Promise.all([f.displayReadyCapability.promise,z]).then(([u,x])=>{if(this.destroyed){e();return}this._stats?.time("Rendering"),m.initializeGraphics({transparency:u,optionalContentConfig:x}),m.operatorListChanged()}).catch(e),b}getOperatorList({intent:o="display",annotationMode:P=_util.AnnotationMode.ENABLE,printAnnotationStorage:d=null}={}){function _(){M.operatorList.lastChunk&&(M.opListReadCapability.resolve(M.operatorList),M.renderTasks.delete(z))}const i=this._transport.getRenderingIntent(o,P,d,!0);let M=this._intentStates.get(i.cacheKey);M||(M=Object.create(null),this._intentStates.set(i.cacheKey,M));let z;return M.opListReadCapability||(z=Object.create(null),z.operatorListChanged=_,M.opListReadCapability=new _util.PromiseCapability,(M.renderTasks||=new Set).add(z),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(i)),M.opListReadCapability.promise}streamTextContent({includeMarkedContent:o=!1,disableNormalization:P=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0,disableNormalization:P===!0},{highWaterMark:100,size(_){return _.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(d=>_xfa_text.XfaText.textContent(d));const P=this.streamTextContent(o);return new Promise(function(d,_){function i(){M.read().then(function({value:V,done:a}){if(a){d(z);return}Object.assign(z.styles,V.styles),z.items.push(...V.items),i()},_)}const M=P.getReader(),z={items:[],styles:Object.create(null)};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const P of this._intentStates.values())if(this._abortOperatorList({intentState:P,reason:new Error("Page was destroyed."),force:!0}),!P.opListReadCapability)for(const d of P.renderTasks)o.push(d.completed),d.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(o)}cleanup(o=!1){this.#e=!0;const P=this.#n(!1);return o&&P&&(this._stats&&=new _display_utils.StatTimer),P}#n(o=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(o)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:P,operatorList:d}of this._intentStates.values())if(P.size>0||!d.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(o,P){const d=this._intentStates.get(P);d&&(this._stats?.timeEnd("Page Request"),d.displayReadyCapability?.resolve(o))}_renderPageChunk(o,P){for(let d=0,_=o.length;d<_;d++)P.operatorList.fnArray.push(o.fnArray[d]),P.operatorList.argsArray.push(o.argsArray[d]);P.operatorList.lastChunk=o.lastChunk,P.operatorList.separateAnnots=o.separateAnnots;for(const d of P.renderTasks)d.operatorListChanged();o.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:o,cacheKey:P,annotationStorageSerializable:d}){const{map:_,transfers:i}=d,z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:P,annotationStorage:_},i).getReader(),V=this._intentStates.get(P);V.streamReader=z;const a=()=>{z.read().then(({value:t,done:r})=>{if(r){V.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(t,V),a())},t=>{if(V.streamReader=null,!this._transport.destroyed){if(V.operatorList){V.operatorList.lastChunk=!0;for(const r of V.renderTasks)r.operatorListChanged();this.#n(!0)}if(V.displayReadyCapability)V.displayReadyCapability.reject(t);else if(V.opListReadCapability)V.opListReadCapability.reject(t);else throw t}})};a()}_abortOperatorList({intentState:o,reason:P,force:d=!1}){if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!d){if(o.renderTasks.size>0)return;if(P instanceof _display_utils.RenderingCancelledException){let _=RENDERING_CANCELLED_TIMEOUT;P.extraDelay>0&&P.extraDelay<1e3&&(_+=P.extraDelay),o.streamReaderCancelTimeout=setTimeout(()=>{o.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:o,reason:P,force:!0})},_);return}}if(o.streamReader.cancel(new _util.AbortException(P.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[_,i]of this._intentStates)if(i===o){this._intentStates.delete(_);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(o,P){const d={data:structuredClone(o,P?{transfer:P}:null)};this.#e.then(()=>{for(const _ of this.#t)_.call(this,d)})}addEventListener(o,P){this.#t.add(P)}removeEventListener(o,P){this.#t.delete(P)}terminate(){this.#t.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const n=document?.currentScript?.src;n&&(PDFWorkerUtil.fallbackWorkerSrc=n.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(n,o){let P;try{if(P=new URL(n),!P.origin||P.origin==="null")return!1}catch{return!1}const d=new URL(o,P);return P.origin===d.origin},PDFWorkerUtil.createCDNWrapper=function(n){const o=`importScripts("${n}");`;return URL.createObjectURL(new Blob([o]))}}class PDFWorker{static#workerPorts;constructor({name:n=null,port:o=null,verbosity:P=(0,_util.getVerbosityLevel)()}={}){if(this.name=n,this.destroyed=!1,this.verbosity=P,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,o){if(PDFWorker.#workerPorts?.has(o))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(n){this._port=n,this._messageHandler=new _message_handler.MessageHandler("main","worker",n),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:n}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,n)||(n=PDFWorkerUtil.createCDNWrapper(new URL(n,window.location).href));const o=new Worker(n),P=new _message_handler.MessageHandler("main","worker",o),d=()=>{o.removeEventListener("error",_),P.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},_=()=>{this._webWorker||d()};o.addEventListener("error",_),P.on("test",M=>{if(o.removeEventListener("error",_),this.destroyed){d();return}M?(this._messageHandler=P,this._port=o,this._webWorker=o,this._readyCapability.resolve(),P.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),P.destroy(),o.terminate())}),P.on("ready",M=>{if(o.removeEventListener("error",_),this.destroyed){d();return}try{i()}catch{this._setupFakeWorker()}});const i=()=>{const M=new Uint8Array;P.send("test",M,[M.buffer])};i();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(n=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const o=new LoopbackPort;this._port=o;const P=`fake${PDFWorkerUtil.fakeWorkerId++}`,d=new _message_handler.MessageHandler(P+"_worker",P,o);n.setup(d,o);const _=new _message_handler.MessageHandler(P,P+"_worker",o);this._messageHandler=_,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})}).catch(n=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${n.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(n){if(!n?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const o=this.#workerPorts?.get(n.port);if(o){if(o._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return o}return new PDFWorker(n)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#i=null;constructor(o,P,d,_,i){this.messageHandler=o,this.loadingTask=P,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:_.ownerDocument,styleElement:_.styleElement}),this._params=_,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=d,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(o,P=null){const d=this.#t.get(o);if(d)return d;const _=this.messageHandler.sendWithPromise(o,P);return this.#t.set(o,_),_}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(o,P=_util.AnnotationMode.ENABLE,d=null,_=!1){let i=_util.RenderingIntentFlag.DISPLAY,M=_annotation_storage.SerializableEmpty;switch(o){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(P){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,M=(i&_util.RenderingIntentFlag.PRINT&&d instanceof _annotation_storage.PrintAnnotationStorage?d:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${P}`)}return _&&(i+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:i,cacheKey:`${i}_${M.hash}`,annotationStorageSerializable:M}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const d of this.#e.values())o.push(d._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const P=this.messageHandler.sendWithPromise("Terminate",null);return o.push(P),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:P}=this;o.on("GetReader",(d,_)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},_.onPull=()=>{this._fullReader.read().then(function({value:i,done:M}){if(M){_.close();return}(0,_util.assert)(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{_.error(i)})},_.onCancel=i=>{this._fullReader.cancel(i),_.ready.catch(M=>{if(!this.destroyed)throw M})}}),o.on("ReaderHeadersReady",d=>{const _=new _util.PromiseCapability,i=this._fullReader;return i.headersReady.then(()=>{(!i.isStreamingSupported||!i.isRangeSupported)&&(this._lastProgress&&P.onProgress?.(this._lastProgress),i.onProgress=M=>{P.onProgress?.({loaded:M.loaded,total:M.total})}),_.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})},_.reject),_.promise}),o.on("GetRangeReader",(d,_)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(d.begin,d.end);if(!i){_.close();return}_.onPull=()=>{i.read().then(function({value:M,done:z}){if(z){_.close();return}(0,_util.assert)(M instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(M),1,[M])}).catch(M=>{_.error(M)})},_.onCancel=M=>{i.cancel(M),_.ready.catch(z=>{if(!this.destroyed)throw z})}}),o.on("GetDoc",({pdfInfo:d})=>{this._numPages=d.numPages,this._htmlForXfa=d.htmlForXfa,delete d.htmlForXfa,P._capability.resolve(new PDFDocumentProxy(d,this))}),o.on("DocException",function(d){let _;switch(d.name){case"PasswordException":_=new _util.PasswordException(d.message,d.code);break;case"InvalidPDFException":_=new _util.InvalidPDFException(d.message);break;case"MissingPDFException":_=new _util.MissingPDFException(d.message);break;case"UnexpectedResponseException":_=new _util.UnexpectedResponseException(d.message,d.status);break;case"UnknownErrorException":_=new _util.UnknownErrorException(d.message,d.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}P._capability.reject(_)}),o.on("PasswordRequest",d=>{if(this.#i=new _util.PromiseCapability,P.onPassword){const _=i=>{i instanceof Error?this.#i.reject(i):this.#i.resolve({password:i})};try{P.onPassword(_,d.code)}catch(i){this.#i.reject(i)}}else this.#i.reject(new _util.PasswordException(d.message,d.code));return this.#i.promise}),o.on("DataLoaded",d=>{P.onProgress?.({loaded:d.length,total:d.length}),this.downloadInfoCapability.resolve(d)}),o.on("StartRenderPage",d=>{if(this.destroyed)return;this.#e.get(d.pageIndex)._startRenderPage(d.transparency,d.cacheKey)}),o.on("commonobj",([d,_,i])=>{if(!this.destroyed&&!this.commonObjs.has(d))switch(_){case"Font":const M=this._params;if("error"in i){const a=i.error;(0,_util.warn)(`Error during font loading: ${a}`),this.commonObjs.resolve(d,a);break}const z=M.pdfBug&&globalThis.FontInspector?.enabled?(a,t)=>globalThis.FontInspector.fontAdded(a,t):null,V=new _font_loader.FontFaceObject(i,{isEvalSupported:M.isEvalSupported,disableFontFace:M.disableFontFace,ignoreErrors:M.ignoreErrors,inspectFont:z});this.fontLoader.bind(V).catch(a=>o.sendWithPromise("FontFallback",{id:d})).finally(()=>{!M.fontExtraProperties&&V.data&&(V.data=null),this.commonObjs.resolve(d,V)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(d,i);break;default:throw new Error(`Got unknown common object type ${_}`)}}),o.on("obj",([d,_,i,M])=>{if(this.destroyed)return;const z=this.#e.get(_);if(!z.objs.has(d))switch(i){case"Image":if(z.objs.resolve(d,M),M){let V;if(M.bitmap){const{width:a,height:t}=M;V=a*t*4}else V=M.data?.length||0;V>_util.MAX_IMAGE_SIZE_TO_CACHE&&(z._maybeCleanupAfterRender=!0)}break;case"Pattern":z.objs.resolve(d,M);break;default:throw new Error(`Got unknown object type ${i}`)}}),o.on("DocProgress",d=>{this.destroyed||P.onProgress?.({loaded:d.loaded,total:d.total})}),o.on("FetchBuiltInCMap",d=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(d):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",d=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(d):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:o,transfers:P}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:o,filename:this._fullReader?.filename??null},P).finally(()=>{this.annotationStorage.resetModified()})}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const P=o-1,d=this.#n.get(P);if(d)return d;const _=this.messageHandler.sendWithPromise("GetPage",{pageIndex:P}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");const M=new PDFPageProxy(P,i,this,this._params.pdfBug);return this.#e.set(P,M),M});return this.#n.set(P,_),_}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,P){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:P})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const o="GetMetadata",P=this.#t.get(o);if(P)return P;const d=this.messageHandler.sendWithPromise(o,null).then(_=>({info:_[0],metadata:_[1]?new _metadata.Metadata(_[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(o,d),d}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const P of this.#e.values())if(!P.cleanup())throw new Error(`startCleanup: Page ${P.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:o,enableXfa:P}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:P})}}class PDFObjects{#t=Object.create(null);#e(o){return this.#t[o]||={capability:new _util.PromiseCapability,data:null}}get(o,P=null){if(P){const _=this.#e(o);return _.capability.promise.then(()=>P(_.data)),null}const d=this.#t[o];if(!d?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${o}.`);return d.data}has(o){return this.#t[o]?.capability.settled||!1}resolve(o,P=null){const d=this.#e(o);d.data=P,d.capability.resolve()}clear(){for(const o in this.#t){const{data:P}=this.#t[o];P?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(o){this.#t=o,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(o=0){this.#t.cancel(null,o)}get separateAnnots(){const{separateAnnots:o}=this.#t.operatorList;if(!o)return!1;const{annotationCanvasMap:P}=this.#t;return o.form||o.canvas&&P?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:o,params:P,objs:d,commonObjs:_,annotationCanvasMap:i,operatorList:M,pageIndex:z,canvasFactory:V,filterFactory:a,useRequestAnimationFrame:t=!1,pdfBug:r=!1,pageColors:f=null}){this.callback=o,this.params=P,this.objs=d,this.commonObjs=_,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=M,this._pageIndex=z,this.canvasFactory=V,this.filterFactory=a,this._pdfBug=r,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=t===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=P.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:P}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:d,viewport:_,transform:i,background:M}=this.params;this.gfx=new _canvas.CanvasGraphics(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:P},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:_,transparency:o,background:M}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(o=null,P=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,P))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SerializableEmpty=o.PrintAnnotationStorage=o.AnnotationStorage=void 0;var d=P(1),_=P(4),i=P(8);const M=Object.freeze({map:null,hash:"",transfers:void 0});o.SerializableEmpty=M;class z{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,r){const f=this.#e.get(t);return f===void 0?r:Object.assign(r,f)}getRawValue(t){return this.#e.get(t)}remove(t){if(this.#e.delete(t),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const r of this.#e.values())if(r instanceof _.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,r){const f=this.#e.get(t);let h=!1;if(f!==void 0)for(const[e,m]of Object.entries(r))f[e]!==m&&(h=!0,f[e]=m);else h=!0,this.#e.set(t,r);h&&this.#n(),r instanceof _.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(r.constructor._type)}has(t){return this.#e.has(t)}getAll(){return this.#e.size>0?(0,d.objectFromMap)(this.#e):null}setAll(t){for(const[r,f]of Object.entries(t))this.setValue(r,f)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new V(this)}get serializable(){if(this.#e.size===0)return M;const t=new Map,r=new i.MurmurHash3_64,f=[],h=Object.create(null);let e=!1;for(const[m,b]of this.#e){const u=b instanceof _.AnnotationEditor?b.serialize(!1,h):b;u&&(t.set(m,u),r.update(`${m}:${JSON.stringify(u)}`),e||=!!u.bitmap)}if(e)for(const m of t.values())m.bitmap&&f.push(m.bitmap);return t.size>0?{map:t,hash:r.hexdigest(),transfers:f}:M}}o.AnnotationStorage=z;class V extends z{#t;constructor(t){super();const{map:r,hash:f,transfers:h}=t.serializable,e=structuredClone(r,h?{transfer:h}:null);this.#t={map:e,hash:f,transfers:h}}get print(){(0,d.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}o.PrintAnnotationStorage=V}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditor=void 0;var d=P(5),_=P(1),i=P(6);class M{#t="";#e=!1;#n=null;#i=null;#o=null;#a=!1;#s=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#r=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=M._zIndex++;static _borderLineWidth=-1;static _colorManager=new d.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(a){this.constructor===M&&(0,_.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=a.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:f,pageX:h,pageY:e}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,f],this.pageTranslation=[h,e];const[m,b]=this.parentDimensions;this.x=a.x/m,this.y=a.y/b,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,_.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(a){const t=new z({id:a.parent.getNextId(),parent:a.parent,uiManager:a._uiManager});t.annotationElementId=a.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(a,t=null){if(M._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(f=>[f,a.get(f)])),t?.strings)for(const f of t.strings)M._l10nPromise.set(f,a.get(f));if(M._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);M._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(a,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(a){return!1}static paste(a,t){(0,_.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(a){this.#h=a,this.div?.classList.toggle("draggable",a)}center(){const[a,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(a*2),this.y+=this.width*a/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(a*2),this.y-=this.width*a/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(a){a!==null&&(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions),this.parent=a}focusin(a){this._focusEventsAllowed&&(this.#r?this.#r=!1:this.parent.setSelected(this))}focusout(a){!this._focusEventsAllowed||!this.isAttachedToDOM||a.relatedTarget?.closest(`#${this.id}`)||(a.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(a,t,r,f){const[h,e]=this.parentDimensions;[r,f]=this.screenToPageTranslation(r,f),this.x=(a+r)/h,this.y=(t+f)/e,this.fixAndSetPosition()}#v([a,t],r,f){[r,f]=this.screenToPageTranslation(r,f),this.x+=r/a,this.y+=f/t,this.fixAndSetPosition()}translate(a,t){this.#v(this.parentDimensions,a,t)}translateInPage(a,t){this.#v(this.pageDimensions,a,t),this.div.scrollIntoView({block:"nearest"})}drag(a,t){const[r,f]=this.parentDimensions;if(this.x+=a/r,this.y+=t/f,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:h,y:e}=this;const[m,b]=this.#m();h+=m,e+=b,this.div.style.left=`${(100*h).toFixed(2)}%`,this.div.style.top=`${(100*e).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[a,t]=this.parentDimensions,{_borderLineWidth:r}=M,f=r/a,h=r/t;switch(this.rotation){case 90:return[-f,h];case 180:return[f,h];case 270:return[f,-h];default:return[-f,-h]}}fixAndSetPosition(){const[a,t]=this.pageDimensions;let{x:r,y:f,width:h,height:e}=this;switch(h*=a,e*=t,r*=a,f*=t,this.rotation){case 0:r=Math.max(0,Math.min(a-h,r)),f=Math.max(0,Math.min(t-e,f));break;case 90:r=Math.max(0,Math.min(a-e,r)),f=Math.min(t,Math.max(h,f));break;case 180:r=Math.min(a,Math.max(h,r)),f=Math.min(t,Math.max(e,f));break;case 270:r=Math.min(a,Math.max(e,r)),f=Math.max(0,Math.min(t-h,f));break}this.x=r/=a,this.y=f/=t;const[m,b]=this.#m();r+=m,f+=b;const{style:u}=this.div;u.left=`${(100*r).toFixed(2)}%`,u.top=`${(100*f).toFixed(2)}%`,this.moveInDOM()}static#g(a,t,r){switch(r){case 90:return[t,-a];case 180:return[-a,-t];case 270:return[-t,a];default:return[a,t]}}screenToPageTranslation(a,t){return M.#g(a,t,this.parentRotation)}pageTranslationToScreen(a,t){return M.#g(a,t,360-this.parentRotation)}#u(a){switch(a){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:a,pageDimensions:[t,r]}=this,f=t*a,h=r*a;return _.FeatureTest.isCSSRoundSupported?[Math.round(f),Math.round(h)]:[f,h]}setDims(a,t){const[r,f]=this.parentDimensions;this.div.style.width=`${(100*a/r).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*t/f).toFixed(2)}%`),this.#n?.classList.toggle("small",a<M.SMALL_EDITOR_SIZE||t<M.SMALL_EDITOR_SIZE)}fixDims(){const{style:a}=this.div,{height:t,width:r}=a,f=r.endsWith("%"),h=!this.#a&&t.endsWith("%");if(f&&h)return;const[e,m]=this.parentDimensions;f||(a.width=`${(100*parseFloat(r)/e).toFixed(2)}%`),!this.#a&&!h&&(a.height=`${(100*parseFloat(t)/m).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const a=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||a.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of a){const r=document.createElement("div");this.#s.append(r),r.classList.add("resizer",t),r.addEventListener("pointerdown",this.#E.bind(this,t)),r.addEventListener("contextmenu",i.noContextMenu)}this.div.prepend(this.#s)}#E(a,t){t.preventDefault();const{isMac:r}=_.FeatureTest.platform;if(t.button!==0||t.ctrlKey&&r)return;const f=this.#S.bind(this,a),h=this._isDraggable;this._isDraggable=!1;const e={passive:!0,capture:!0};window.addEventListener("pointermove",f,e);const m=this.x,b=this.y,u=this.width,x=this.height,I=this.parent.div.style.cursor,R=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const v=()=>{this._isDraggable=h,window.removeEventListener("pointerup",v),window.removeEventListener("blur",v),window.removeEventListener("pointermove",f,e),this.parent.div.style.cursor=I,this.div.style.cursor=R;const C=this.x,q=this.y,K=this.width,H=this.height;C===m&&q===b&&K===u&&H===x||this.addCommands({cmd:()=>{this.width=K,this.height=H,this.x=C,this.y=q;const[nt,rt]=this.parentDimensions;this.setDims(nt*K,rt*H),this.fixAndSetPosition()},undo:()=>{this.width=u,this.height=x,this.x=m,this.y=b;const[nt,rt]=this.parentDimensions;this.setDims(nt*u,rt*x),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",v),window.addEventListener("blur",v)}#S(a,t){const[r,f]=this.parentDimensions,h=this.x,e=this.y,m=this.width,b=this.height,u=M.MIN_SIZE/r,x=M.MIN_SIZE/f,I=k=>Math.round(k*1e4)/1e4,R=this.#u(this.rotation),v=(k,l)=>[R[0]*k+R[2]*l,R[1]*k+R[3]*l],C=this.#u(360-this.rotation),q=(k,l)=>[C[0]*k+C[2]*l,C[1]*k+C[3]*l];let K,H,nt=!1,rt=!1;switch(a){case"topLeft":nt=!0,K=(k,l)=>[0,0],H=(k,l)=>[k,l];break;case"topMiddle":K=(k,l)=>[k/2,0],H=(k,l)=>[k/2,l];break;case"topRight":nt=!0,K=(k,l)=>[k,0],H=(k,l)=>[0,l];break;case"middleRight":rt=!0,K=(k,l)=>[k,l/2],H=(k,l)=>[0,l/2];break;case"bottomRight":nt=!0,K=(k,l)=>[k,l],H=(k,l)=>[0,0];break;case"bottomMiddle":K=(k,l)=>[k/2,l],H=(k,l)=>[k/2,0];break;case"bottomLeft":nt=!0,K=(k,l)=>[0,l],H=(k,l)=>[k,0];break;case"middleLeft":rt=!0,K=(k,l)=>[0,l/2],H=(k,l)=>[k,l/2];break}const At=K(m,b),pt=H(m,b);let vt=v(...pt);const wt=I(h+vt[0]),lt=I(e+vt[1]);let N=1,S=1,[p,g]=this.screenToPageTranslation(t.movementX,t.movementY);if([p,g]=q(p/r,g/f),nt){const k=Math.hypot(m,b);N=S=Math.max(Math.min(Math.hypot(pt[0]-At[0]-p,pt[1]-At[1]-g)/k,1/m,1/b),u/m,x/b)}else rt?N=Math.max(u,Math.min(1,Math.abs(pt[0]-At[0]-p)))/m:S=Math.max(x,Math.min(1,Math.abs(pt[1]-At[1]-g)))/b;const E=I(m*N),D=I(b*S);vt=v(...H(E,D));const L=wt-vt[0],U=lt-vt[1];this.width=E,this.height=D,this.x=L,this.y=U,this.setDims(r*E,f*D),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const a=this.#n=document.createElement("button");a.className="altText";const t=await M._l10nPromise.get("editor_alt_text_button_label");a.textContent=t,a.setAttribute("aria-label",t),a.tabIndex="0",a.addEventListener("contextmenu",i.noContextMenu),a.addEventListener("pointerdown",r=>r.stopPropagation()),a.addEventListener("click",r=>{r.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),a.addEventListener("keydown",r=>{r.target===a&&r.key==="Enter"&&(r.preventDefault(),this._uiManager.editAltText(this))}),this.#C(),this.div.append(a),M.SMALL_EDITOR_SIZE||(M.SMALL_EDITOR_SIZE=Math.min(128,Math.round(a.getBoundingClientRect().width*1.4)))}async#C(){const a=this.#n;if(!a)return;if(!this.#t&&!this.#e){a.classList.remove("done"),this.#i?.remove();return}M._l10nPromise.get("editor_alt_text_edit_button_label").then(r=>{a.setAttribute("aria-label",r)});let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip");const r=t.id=`alt-text-tooltip-${this.id}`;a.setAttribute("aria-describedby",r);const f=100;a.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#i.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},f)}),a.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#i?.classList.remove("show")})}a.classList.add("done"),t.innerText=this.#e?await M._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,t.parentNode||a.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:a,decorative:t}){this.#t===a&&this.#e===t||(this.#t=a,this.#e=t,this.#C())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[a,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/a).toFixed(2)}%`,this.div.style.maxHeight=`${(100*a/t).toFixed(2)}%`);const[r,f]=this.getInitialTranslation();return this.translate(r,f),(0,d.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(a){const{isMac:t}=_.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&t){a.preventDefault();return}this.#r=!0,this.#T(a)}#T(a){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let r,f;t&&(r={passive:!0,capture:!0},f=e=>{const[m,b]=this.screenToPageTranslation(e.movementX,e.movementY);this._uiManager.dragSelectedEditors(m,b)},window.addEventListener("pointermove",f,r));const h=()=>{if(window.removeEventListener("pointerup",h),window.removeEventListener("blur",h),t&&window.removeEventListener("pointermove",f,r),this.#r=!1,!this._uiManager.endDragSession()){const{isMac:e}=_.FeatureTest.platform;a.ctrlKey&&!e||a.shiftKey||a.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",h),window.addEventListener("blur",h)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(a,t,r){a.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(a,t){const r=this.parentScale,[f,h]=this.pageDimensions,[e,m]=this.pageTranslation,b=a/r,u=t/r,x=this.x*f,I=this.y*h,R=this.width*f,v=this.height*h;switch(this.rotation){case 0:return[x+b+e,h-I-u-v+m,x+b+R+e,h-I-u+m];case 90:return[x+u+e,h-I+b+m,x+u+v+e,h-I+b+R+m];case 180:return[x-b-R+e,h-I+u+m,x-b+e,h-I+u+v+m];case 270:return[x-u-v+e,h-I-b-R+m,x-u+e,h-I-b+m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,t){const[r,f,h,e]=a,m=h-r,b=e-f;switch(this.rotation){case 0:return[r,t-e,m,b];case 90:return[r,t-f,b,m];case 180:return[h,t-f,m,b];case 270:return[h,t-e,b,m];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(a=!1,t=null){(0,_.unreachable)("An editor must be serializable")}static deserialize(a,t,r){const f=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});f.rotation=a.rotation;const[h,e]=f.pageDimensions,[m,b,u,x]=f.getRectInCurrentCoords(a.rect,e);return f.x=m/h,f.y=b/e,f.width=u/h,f.height=x/e,f}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(a,t){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(a){this.#f=a,this.parent&&(a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(a,t){this.#a=!0;const r=a/t,{style:f}=this.div;f.aspectRatio=r,f.height="auto"}static get MIN_SIZE(){return 16}}o.AnnotationEditor=M;class z extends M{constructor(a){super(a),this.annotationElementId=a.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.KeyboardManager=o.CommandManager=o.ColorManager=o.AnnotationEditorUIManager=void 0,o.bindEvents=i,o.opacityToHex=M;var d=P(1),_=P(6);function i(h,e,m){for(const b of m)e.addEventListener(b,h[b].bind(h))}function M(h){return Math.round(Math.min(255,Math.max(1,255*h))).toString(16).padStart(2,"0")}class z{#t=0;getId(){return`${d.AnnotationEditorPrefix}${this.#t++}`}}class V{#t=(0,d.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',b=new OffscreenCanvas(1,3).getContext("2d"),u=new Image;u.src=e;const x=u.decode().then(()=>(b.drawImage(u,0,0,1,1,0,0,1,3),new Uint32Array(b.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,d.shadow)(this,"_isSVGFittingCanvas",x)}async#i(e,m){this.#n||=new Map;let b=this.#n.get(e);if(b===null)return null;if(b?.bitmap)return b.refCounter+=1,b;try{b||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let u;if(typeof m=="string"){b.url=m;const x=await fetch(m);if(!x.ok)throw new Error(x.statusText);u=await x.blob()}else u=b.file=m;if(u.type==="image/svg+xml"){const x=V._isSVGFittingCanvas,I=new FileReader,R=new Image,v=new Promise((C,q)=>{R.onload=()=>{b.bitmap=R,b.isSvg=!0,C()},I.onload=async()=>{const K=b.svgUrl=I.result;R.src=await x?`${K}#svgView(preserveAspectRatio(none))`:K},R.onerror=I.onerror=q});I.readAsDataURL(u),await v}else b.bitmap=await createImageBitmap(u);b.refCounter=1}catch(u){console.error(u),b=null}return this.#n.set(e,b),b&&this.#n.set(b.id,b),b}async getFromFile(e){const{lastModified:m,name:b,size:u,type:x}=e;return this.#i(`${m}_${b}_${u}_${x}`,e)}async getFromUrl(e){return this.#i(e,e)}async getFromId(e){this.#n||=new Map;const m=this.#n.get(e);return m?m.bitmap?(m.refCounter+=1,m):m.file?this.getFromFile(m.file):this.getFromUrl(m.url):null}getSvgUrl(e){const m=this.#n.get(e);return m?.isSvg?m.svgUrl:null}deleteId(e){this.#n||=new Map;const m=this.#n.get(e);m&&(m.refCounter-=1,m.refCounter===0&&(m.bitmap=null))}isValidId(e){return e.startsWith(`image_${this.#t}_`)}}class a{#t=[];#e=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:m,mustExec:b,type:u=NaN,overwriteIfSameType:x=!1,keepUndo:I=!1}){if(b&&e(),this.#e)return;const R={cmd:e,undo:m,type:u};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(R);return}if(x&&this.#t[this.#i].type===u){I&&(R.undo=this.#t[this.#i].undo),this.#t[this.#i]=R;return}const v=this.#i+1;v===this.#n?this.#t.splice(0,1):(this.#i=v,v<this.#t.length&&this.#t.splice(v)),this.#t.push(R)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}o.CommandManager=a;class t{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:m}=d.FeatureTest.platform;for(const[b,u,x={}]of e)for(const I of b){const R=I.startsWith("mac+");m&&R?(this.callbacks.set(I.slice(4),{callback:u,options:x}),this.allKeys.add(I.split("+").at(-1))):!m&&!R&&(this.callbacks.set(I,{callback:u,options:x}),this.allKeys.add(I.split("+").at(-1)))}}#t(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const m=this.buffer.join("+");return this.buffer.length=0,m}exec(e,m){if(!this.allKeys.has(m.key))return;const b=this.callbacks.get(this.#t(m));if(!b)return;const{callback:u,options:{bubbles:x=!1,args:I=[],checker:R=null}}=b;R&&!R(e,m)||(u.bind(e,...I)(),x||(m.stopPropagation(),m.preventDefault()))}}o.KeyboardManager=t;class r{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,_.getColorValues)(e),(0,d.shadow)(this,"_colors",e)}convert(e){const m=(0,_.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return m;for(const[b,u]of this._colors)if(u.every((x,I)=>x===m[I]))return r._colorsMapping.get(b);return m}getHexCode(e){const m=this._colors.get(e);return m?d.Util.makeHexColor(...m):e}}o.ColorManager=r;class f{#t=null;#e=new Map;#n=new Map;#i=null;#o=null;#a=new a;#s=0;#l=new Set;#c=null;#r=null;#f=new Set;#d=null;#h=new z;#p=!1;#v=!1;#m=null;#g=d.AnnotationEditorType.NONE;#u=new Set;#b=null;#E=this.blur.bind(this);#S=this.focus.bind(this);#C=this.copy.bind(this);#T=this.cut.bind(this);#D=this.paste.bind(this);#I=this.keydown.bind(this);#O=this.onEditingAction.bind(this);#_=this.onPageChanging.bind(this);#L=this.onScaleChanging.bind(this);#k=this.onRotationChanging.bind(this);#R={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#y=[0,0];#P=null;#w=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=f.prototype,m=x=>{const{activeElement:I}=document;return I&&x.#w.contains(I)&&x.hasSomethingToControl()},b=this.TRANSLATE_SMALL,u=this.TRANSLATE_BIG;return(0,d.shadow)(this,"_keyboardManager",new t([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-b,0],checker:m}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-u,0],checker:m}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[b,0],checker:m}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[u,0],checker:m}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-b],checker:m}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-u],checker:m}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,b],checker:m}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,u],checker:m}]]))}constructor(e,m,b,u,x,I){this.#w=e,this.#N=m,this.#i=b,this._eventBus=u,this._eventBus._on("editingaction",this.#O),this._eventBus._on("pagechanging",this.#_),this._eventBus._on("scalechanging",this.#L),this._eventBus._on("rotationchanging",this.#k),this.#o=x.annotationStorage,this.#d=x.filterFactory,this.#b=I,this.viewParameters={realScale:_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#M(),this.#B(),this._eventBus._off("editingaction",this.#O),this._eventBus._off("pagechanging",this.#_),this._eventBus._off("scalechanging",this.#L),this._eventBus._off("rotationchanging",this.#k);for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#u.clear(),this.#a.destroy(),this.#i.destroy()}get hcmFilter(){return(0,d.shadow)(this,"hcmFilter",this.#b?this.#d.addHCMFilter(this.#b.foreground,this.#b.background):"none")}get direction(){return(0,d.shadow)(this,"direction",getComputedStyle(this.#w).direction)}editAltText(e){this.#i?.editAltText(this,e)}onPageChanging({pageNumber:e}){this.#s=e-1}focusMainContainer(){this.#w.focus()}findParent(e,m){for(const b of this.#n.values()){const{x:u,y:x,width:I,height:R}=b.div.getBoundingClientRect();if(e>=u&&e<=u+I&&m>=x&&m<=x+R)return b}return null}disableUserSelect(e=!1){this.#N.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#f.add(e)}removeShouldRescale(e){this.#f.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*_.PixelsPerInch.PDF_TO_CSS_UNITS;for(const m of this.#f)m.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&this.#o&&!this.#o.has(e.id)&&this.#o.setValue(e.id,e)}#j(){window.addEventListener("focus",this.#S),window.addEventListener("blur",this.#E)}#B(){window.removeEventListener("focus",this.#S),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const m of this.#u)if(m.div.contains(e)){this.#m=[m,e],m._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[e,m]=this.#m;this.#m=null,m.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),m.focus()}#H(){window.addEventListener("keydown",this.#I,{capture:!0})}#M(){window.removeEventListener("keydown",this.#I,{capture:!0})}#F(){document.addEventListener("copy",this.#C),document.addEventListener("cut",this.#T),document.addEventListener("paste",this.#D)}#x(){document.removeEventListener("copy",this.#C),document.removeEventListener("cut",this.#T),document.removeEventListener("paste",this.#D)}addEditListeners(){this.#H(),this.#F()}removeEditListeners(){this.#M(),this.#x()}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const m=[];for(const b of this.#u){const u=b.serialize(!0);u&&m.push(u)}m.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(m))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:m}=e;for(const x of m.items)for(const I of this.#r)if(I.isHandlingMimeForPasting(x.type)){I.paste(x,this.currentLayer);return}let b=m.getData("application/pdfjs");if(!b)return;try{b=JSON.parse(b)}catch(x){(0,d.warn)(`paste: "${x.message}".`);return}if(!Array.isArray(b))return;this.unselectAll();const u=this.currentLayer;try{const x=[];for(const v of b){const C=u.deserialize(v);if(!C)return;x.push(C)}const I=()=>{for(const v of x)this.#z(v);this.#V(x)},R=()=>{for(const v of x)v.remove()};this.addCommands({cmd:I,undo:R,mustExec:!0})}catch(x){(0,d.warn)(`paste: "${x.message}".`)}}keydown(e){this.getActive()?.shouldGetKeyboardEvents()||f._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}#A(e){Object.entries(e).some(([b,u])=>this.#R[b]!==u)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#R,e)})}#U(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#j(),this.#H(),this.#F(),this.#A({isEditing:this.#g!==d.AnnotationEditorType.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#B(),this.#M(),this.#x(),this.#A({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#r){this.#r=e;for(const m of this.#r)this.#U(m.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#s}addLayer(e){this.#n.set(e.pageIndex,e),this.#p?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}updateMode(e,m=null){if(this.#g!==e){if(this.#g=e,e===d.AnnotationEditorType.NONE){this.setEditingState(!1),this.#G();return}this.setEditingState(!0),this.#q(),this.unselectAll();for(const b of this.#n.values())b.updateMode(e);if(m){for(const b of this.#e.values())if(b.annotationElementId===m){this.setSelected(b),b.enterInEditMode();break}}}}updateToolbar(e){e!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,m){if(this.#r){if(e===d.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(const b of this.#u)b.updateParams(e,m);for(const b of this.#r)b.updateDefaultParams(e,m)}}enableWaiting(e=!1){if(this.#v!==e){this.#v=e;for(const m of this.#n.values())e?m.disableClick():m.enableClick(),m.div.classList.toggle("waiting",e)}}#q(){if(!this.#p){this.#p=!0;for(const e of this.#n.values())e.enable()}}#G(){if(this.unselectAll(),this.#p){this.#p=!1;for(const e of this.#n.values())e.disable()}}getEditors(e){const m=[];for(const b of this.#e.values())b.pageIndex===e&&m.push(b);return m}getEditor(e){return this.#e.get(e)}addEditor(e){this.#e.set(e.id,e)}removeEditor(e){this.#e.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#l.has(e.annotationElementId))&&this.#o?.remove(e.id)}addDeletedAnnotationElement(e){this.#l.add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return this.#l.has(e)}removeDeletedAnnotationElement(e){this.#l.delete(e.annotationElementId),e.deleted=!1}#z(e){const m=this.#n.get(e.pageIndex);m?m.addOrRebuild(e):this.addEditor(e)}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#U(e.propertiesToUpdate))}toggleSelected(e){if(this.#u.has(e)){this.#u.delete(e),e.unselect(),this.#A({hasSelectedEditor:this.hasSelection});return}this.#u.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}setSelected(e){for(const m of this.#u)m!==e&&m.unselect();this.#u.clear(),this.#u.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}isSelected(e){return this.#u.has(e)}unselect(e){e.unselect(),this.#u.delete(e),this.#A({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#a.undo(),this.#A({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()})}redo(){this.#a.redo(),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#a.add(e),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}#W(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const e of this.#e.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#u],m=()=>{for(const u of e)u.remove()},b=()=>{for(const u of e)this.#z(u)};this.addCommands({cmd:m,undo:b,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#V(e){this.#u.clear();for(const m of e)m.isEmpty()||(this.#u.add(m),m.select());this.#A({hasSelectedEditor:!0})}selectAll(){for(const e of this.#u)e.commit();this.#V(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const e of this.#u)e.unselect();this.#u.clear(),this.#A({hasSelectedEditor:!1})}}translateSelectedEditors(e,m,b=!1){if(b||this.commitOrRemove(),!this.hasSelection)return;this.#y[0]+=e,this.#y[1]+=m;const[u,x]=this.#y,I=[...this.#u],R=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#y[0]=this.#y[1]=0,this.addCommands({cmd:()=>{for(const v of I)this.#e.has(v.id)&&v.translateInPage(u,x)},undo:()=>{for(const v of I)this.#e.has(v.id)&&v.translateInPage(-u,-x)},mustExec:!1})},R);for(const v of I)v.translateInPage(e,m)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const e of this.#u)this.#c.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const e=this.#c;this.#c=null;let m=!1;for(const[{x:u,y:x,pageIndex:I},R]of e)R.newX=u,R.newY=x,R.newPageIndex=I,m||=u!==R.savedX||x!==R.savedY||I!==R.savedPageIndex;if(!m)return!1;const b=(u,x,I,R)=>{if(this.#e.has(u.id)){const v=this.#n.get(R);v?u._setParentAndPosition(v,x,I):(u.pageIndex=R,u.x=x,u.y=I)}};return this.addCommands({cmd:()=>{for(const[u,{newX:x,newY:I,newPageIndex:R}]of e)b(u,x,I,R)},undo:()=>{for(const[u,{savedX:x,savedY:I,savedPageIndex:R}]of e)b(u,x,I,R)},mustExec:!0}),!0}dragSelectedEditors(e,m){if(this.#c)for(const b of this.#c.keys())b.drag(e,m)}rebuild(e){if(e.parent===null){const m=this.getLayer(e.pageIndex);m?(m.changeParent(e),m.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#g}get imageManager(){return(0,d.shadow)(this,"imageManager",new V)}}o.AnnotationEditorUIManager=f}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMFilterFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=void 0,o.deprecated=q,o.getColorValues=At,o.getCurrentTransform=pt,o.getCurrentTransformInverse=vt,o.getFilenameFromUrl=u,o.getPdfFilenameFromUrl=x,o.getRGB=rt,o.getXfaPageViewport=nt,o.isDataScheme=m,o.isPdfFile=b,o.isValidFetchUrl=R,o.loadScript=C,o.noContextMenu=v,o.setLayerDimensions=wt;var d=P(7),_=P(1);const i="http://www.w3.org/2000/svg";class M{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}o.PixelsPerInch=M;class z extends d.BaseFilterFactory{#t;#e;#n;#i;#o;#a;#s;#l;#c;#r;#f=0;constructor({docId:N,ownerDocument:S=globalThis.document}={}){super(),this.#n=N,this.#i=S}get#d(){return this.#t||=new Map}get#h(){if(!this.#e){const N=this.#i.createElement("div"),{style:S}=N;S.visibility="hidden",S.contain="strict",S.width=S.height=0,S.position="absolute",S.top=S.left=0,S.zIndex=-1;const p=this.#i.createElementNS(i,"svg");p.setAttribute("width",0),p.setAttribute("height",0),this.#e=this.#i.createElementNS(i,"defs"),N.append(p),p.append(this.#e),this.#i.body.append(N)}return this.#e}addFilter(N){if(!N)return"none";let S=this.#d.get(N);if(S)return S;let p,g,E,D;if(N.length===1){const l=N[0],y=new Array(256);for(let w=0;w<256;w++)y[w]=l[w]/255;D=p=g=E=y.join(",")}else{const[l,y,w]=N,T=new Array(256),F=new Array(256),W=new Array(256);for(let Y=0;Y<256;Y++)T[Y]=l[Y]/255,F[Y]=y[Y]/255,W[Y]=w[Y]/255;p=T.join(","),g=F.join(","),E=W.join(","),D=`${p}${g}${E}`}if(S=this.#d.get(D),S)return this.#d.set(N,S),S;const L=`g_${this.#n}_transfer_map_${this.#f++}`,U=`url(#${L})`;this.#d.set(N,U),this.#d.set(D,U);const k=this.#v(L);return this.#g(p,g,E,k),U}addHCMFilter(N,S){const p=`${N}-${S}`;if(this.#a===p)return this.#s;if(this.#a=p,this.#s="none",this.#o?.remove(),!N||!S)return this.#s;const g=this.#u(N);N=_.Util.makeHexColor(...g);const E=this.#u(S);if(S=_.Util.makeHexColor(...E),this.#h.style.color="",N==="#000000"&&S==="#ffffff"||N===S)return this.#s;const D=new Array(256);for(let y=0;y<=255;y++){const w=y/255;D[y]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const L=D.join(","),U=`g_${this.#n}_hcm_filter`,k=this.#l=this.#v(U);this.#g(L,L,L,k),this.#p(k);const l=(y,w)=>{const T=g[y]/255,F=E[y]/255,W=new Array(w+1);for(let Y=0;Y<=w;Y++)W[Y]=T+Y/w*(F-T);return W.join(",")};return this.#g(l(0,5),l(1,5),l(2,5),k),this.#s=`url(#${U})`,this.#s}addHighlightHCMFilter(N,S,p,g){const E=`${N}-${S}-${p}-${g}`;if(this.#c===E)return this.#r;if(this.#c=E,this.#r="none",this.#l?.remove(),!N||!S)return this.#r;const[D,L]=[N,S].map(this.#u.bind(this));let U=Math.round(.2126*D[0]+.7152*D[1]+.0722*D[2]),k=Math.round(.2126*L[0]+.7152*L[1]+.0722*L[2]),[l,y]=[p,g].map(this.#u.bind(this));k<U&&([U,k,l,y]=[k,U,y,l]),this.#h.style.color="";const w=(W,Y,st)=>{const Et=new Array(256),at=(k-U)/st,ot=W/255,ct=(Y-W)/(255*st);let ut=0;for(let gt=0;gt<=st;gt++){const Ct=Math.round(U+gt*at),Mt=ot+gt*ct;for(let Ot=ut;Ot<=Ct;Ot++)Et[Ot]=Mt;ut=Ct+1}for(let gt=ut;gt<256;gt++)Et[gt]=Et[ut-1];return Et.join(",")},T=`g_${this.#n}_hcm_highlight_filter`,F=this.#l=this.#v(T);return this.#p(F),this.#g(w(l[0],y[0],5),w(l[1],y[1],5),w(l[2],y[2],5),F),this.#r=`url(#${T})`,this.#r}destroy(N=!1){N&&(this.#s||this.#r)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(N){const S=this.#i.createElementNS(i,"feColorMatrix");S.setAttribute("type","matrix"),S.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),N.append(S)}#v(N){const S=this.#i.createElementNS(i,"filter");return S.setAttribute("color-interpolation-filters","sRGB"),S.setAttribute("id",N),this.#h.append(S),S}#m(N,S,p){const g=this.#i.createElementNS(i,S);g.setAttribute("type","discrete"),g.setAttribute("tableValues",p),N.append(g)}#g(N,S,p,g){const E=this.#i.createElementNS(i,"feComponentTransfer");g.append(E),this.#m(E,"feFuncR",N),this.#m(E,"feFuncG",S),this.#m(E,"feFuncB",p)}#u(N){return this.#h.style.color=N,rt(getComputedStyle(this.#h).getPropertyValue("color"))}}o.DOMFilterFactory=z;class V extends d.BaseCanvasFactory{constructor({ownerDocument:N=globalThis.document}={}){super(),this._document=N}_createCanvas(N,S){const p=this._document.createElement("canvas");return p.width=N,p.height=S,p}}o.DOMCanvasFactory=V;async function a(lt,N=!1){if(R(lt,document.baseURI)){const S=await fetch(lt);if(!S.ok)throw new Error(S.statusText);return N?new Uint8Array(await S.arrayBuffer()):(0,_.stringToBytes)(await S.text())}return new Promise((S,p)=>{const g=new XMLHttpRequest;g.open("GET",lt,!0),N&&(g.responseType="arraybuffer"),g.onreadystatechange=()=>{if(g.readyState===XMLHttpRequest.DONE){if(g.status===200||g.status===0){let E;if(N&&g.response?E=new Uint8Array(g.response):!N&&g.responseText&&(E=(0,_.stringToBytes)(g.responseText)),E){S(E);return}}p(new Error(g.statusText))}},g.send(null)})}class t extends d.BaseCMapReaderFactory{_fetchData(N,S){return a(N,this.isCompressed).then(p=>({cMapData:p,compressionType:S}))}}o.DOMCMapReaderFactory=t;class r extends d.BaseStandardFontDataFactory{_fetchData(N){return a(N,!0)}}o.DOMStandardFontDataFactory=r;class f extends d.BaseSVGFactory{_createSVG(N){return document.createElementNS(i,N)}}o.DOMSVGFactory=f;class h{constructor({viewBox:N,scale:S,rotation:p,offsetX:g=0,offsetY:E=0,dontFlip:D=!1}){this.viewBox=N,this.scale=S,this.rotation=p,this.offsetX=g,this.offsetY=E;const L=(N[2]+N[0])/2,U=(N[3]+N[1])/2;let k,l,y,w;switch(p%=360,p<0&&(p+=360),p){case 180:k=-1,l=0,y=0,w=1;break;case 90:k=0,l=1,y=1,w=0;break;case 270:k=0,l=-1,y=-1,w=0;break;case 0:k=1,l=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}D&&(y=-y,w=-w);let T,F,W,Y;k===0?(T=Math.abs(U-N[1])*S+g,F=Math.abs(L-N[0])*S+E,W=(N[3]-N[1])*S,Y=(N[2]-N[0])*S):(T=Math.abs(L-N[0])*S+g,F=Math.abs(U-N[1])*S+E,W=(N[2]-N[0])*S,Y=(N[3]-N[1])*S),this.transform=[k*S,l*S,y*S,w*S,T-k*S*L-y*S*U,F-l*S*L-w*S*U],this.width=W,this.height=Y}get rawDims(){const{viewBox:N}=this;return(0,_.shadow)(this,"rawDims",{pageWidth:N[2]-N[0],pageHeight:N[3]-N[1],pageX:N[0],pageY:N[1]})}clone({scale:N=this.scale,rotation:S=this.rotation,offsetX:p=this.offsetX,offsetY:g=this.offsetY,dontFlip:E=!1}={}){return new h({viewBox:this.viewBox.slice(),scale:N,rotation:S,offsetX:p,offsetY:g,dontFlip:E})}convertToViewportPoint(N,S){return _.Util.applyTransform([N,S],this.transform)}convertToViewportRectangle(N){const S=_.Util.applyTransform([N[0],N[1]],this.transform),p=_.Util.applyTransform([N[2],N[3]],this.transform);return[S[0],S[1],p[0],p[1]]}convertToPdfPoint(N,S){return _.Util.applyInverseTransform([N,S],this.transform)}}o.PageViewport=h;class e extends _.BaseException{constructor(N,S=0){super(N,"RenderingCancelledException"),this.extraDelay=S}}o.RenderingCancelledException=e;function m(lt){const N=lt.length;let S=0;for(;S<N&&lt[S].trim()==="";)S++;return lt.substring(S,S+5).toLowerCase()==="data:"}function b(lt){return typeof lt=="string"&&/\.pdf$/i.test(lt)}function u(lt,N=!1){return N||([lt]=lt.split(/[#?]/,1)),lt.substring(lt.lastIndexOf("/")+1)}function x(lt,N="document.pdf"){if(typeof lt!="string")return N;if(m(lt))return(0,_.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),N;const S=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,p=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,g=S.exec(lt);let E=p.exec(g[1])||p.exec(g[2])||p.exec(g[3]);if(E&&(E=E[0],E.includes("%")))try{E=p.exec(decodeURIComponent(E))[0]}catch{}return E||N}class I{started=Object.create(null);times=[];time(N){N in this.started&&(0,_.warn)(`Timer is already running for ${N}`),this.started[N]=Date.now()}timeEnd(N){N in this.started||(0,_.warn)(`Timer has not been started for ${N}`),this.times.push({name:N,start:this.started[N],end:Date.now()}),delete this.started[N]}toString(){const N=[];let S=0;for(const{name:p}of this.times)S=Math.max(p.length,S);for(const{name:p,start:g,end:E}of this.times)N.push(`${p.padEnd(S)} ${E-g}ms
`);return N.join("")}}o.StatTimer=I;function R(lt,N){try{const{protocol:S}=N?new URL(lt,N):new URL(lt);return S==="http:"||S==="https:"}catch{return!1}}function v(lt){lt.preventDefault()}function C(lt,N=!1){return new Promise((S,p)=>{const g=document.createElement("script");g.src=lt,g.onload=function(E){N&&g.remove(),S(E)},g.onerror=function(){p(new Error(`Cannot load script at: ${g.src}`))},(document.head||document.documentElement).append(g)})}function q(lt){console.log("Deprecated API usage: "+lt)}let K;class H{static toDateObject(N){if(!N||typeof N!="string")return null;K||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const S=K.exec(N);if(!S)return null;const p=parseInt(S[1],10);let g=parseInt(S[2],10);g=g>=1&&g<=12?g-1:0;let E=parseInt(S[3],10);E=E>=1&&E<=31?E:1;let D=parseInt(S[4],10);D=D>=0&&D<=23?D:0;let L=parseInt(S[5],10);L=L>=0&&L<=59?L:0;let U=parseInt(S[6],10);U=U>=0&&U<=59?U:0;const k=S[7]||"Z";let l=parseInt(S[8],10);l=l>=0&&l<=23?l:0;let y=parseInt(S[9],10)||0;return y=y>=0&&y<=59?y:0,k==="-"?(D+=l,L+=y):k==="+"&&(D-=l,L-=y),new Date(Date.UTC(p,g,E,D,L,U))}}o.PDFDateString=H;function nt(lt,{scale:N=1,rotation:S=0}){const{width:p,height:g}=lt.attributes.style,E=[0,0,parseInt(p),parseInt(g)];return new h({viewBox:E,scale:N,rotation:S})}function rt(lt){if(lt.startsWith("#")){const N=parseInt(lt.slice(1),16);return[(N&16711680)>>16,(N&65280)>>8,N&255]}return lt.startsWith("rgb(")?lt.slice(4,-1).split(",").map(N=>parseInt(N)):lt.startsWith("rgba(")?lt.slice(5,-1).split(",").map(N=>parseInt(N)).slice(0,3):((0,_.warn)(`Not a valid color format: "${lt}"`),[0,0,0])}function At(lt){const N=document.createElement("span");N.style.visibility="hidden",document.body.append(N);for(const S of lt.keys()){N.style.color=S;const p=window.getComputedStyle(N).color;lt.set(S,rt(p))}N.remove()}function pt(lt){const{a:N,b:S,c:p,d:g,e:E,f:D}=lt.getTransform();return[N,S,p,g,E,D]}function vt(lt){const{a:N,b:S,c:p,d:g,e:E,f:D}=lt.getTransform().invertSelf();return[N,S,p,g,E,D]}function wt(lt,N,S=!1,p=!0){if(N instanceof h){const{pageWidth:g,pageHeight:E}=N.rawDims,{style:D}=lt,L=_.FeatureTest.isCSSRoundSupported,U=`var(--scale-factor) * ${g}px`,k=`var(--scale-factor) * ${E}px`,l=L?`round(${U}, 1px)`:`calc(${U})`,y=L?`round(${k}, 1px)`:`calc(${k})`;!S||N.rotation%180===0?(D.width=l,D.height=y):(D.width=y,D.height=l)}p&&lt.setAttribute("data-main-rotation",N.rotation)}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseFilterFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var d=P(1);class _{constructor(){this.constructor===_&&(0,d.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,r){return"none"}addHighlightHCMFilter(t,r,f,h){return"none"}destroy(t=!1){}}o.BaseFilterFactory=_;class i{constructor(){this.constructor===i&&(0,d.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");const f=this._createCanvas(t,r);return{canvas:f,context:f.getContext("2d")}}reset(t,r,f){if(!t.canvas)throw new Error("Canvas is not specified");if(r<=0||f<=0)throw new Error("Invalid canvas size");t.canvas.width=r,t.canvas.height=f}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,r){(0,d.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=i;class M{constructor({baseUrl:t=null,isCompressed:r=!0}){this.constructor===M&&(0,d.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=r}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const r=this.baseUrl+t+(this.isCompressed?".bcmap":""),f=this.isCompressed?d.CMapCompressionType.BINARY:d.CMapCompressionType.NONE;return this._fetchData(r,f).catch(h=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})}_fetchData(t,r){(0,d.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=M;class z{constructor({baseUrl:t=null}){this.constructor===z&&(0,d.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const r=`${this.baseUrl}${t}`;return this._fetchData(r).catch(f=>{throw new Error(`Unable to load font data at: ${r}`)})}_fetchData(t){(0,d.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=z;class V{constructor(){this.constructor===V&&(0,d.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,r,f=!1){if(t<=0||r<=0)throw new Error("Invalid SVG dimensions");const h=this._createSVG("svg:svg");return h.setAttribute("version","1.1"),f||(h.setAttribute("width",`${t}px`),h.setAttribute("height",`${r}px`)),h.setAttribute("preserveAspectRatio","none"),h.setAttribute("viewBox",`0 0 ${t} ${r}`),h}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,d.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=V}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var d=P(1);const _=3285377520,i=4294901760,M=65535;class z{constructor(a){this.h1=a?a&4294967295:_,this.h2=a?a&4294967295:_}update(a){let t,r;if(typeof a=="string"){t=new Uint8Array(a.length*2),r=0;for(let q=0,K=a.length;q<K;q++){const H=a.charCodeAt(q);H<=255?t[r++]=H:(t[r++]=H>>>8,t[r++]=H&255)}}else if((0,d.isArrayBuffer)(a))t=a.slice(),r=t.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const f=r>>2,h=r-f*4,e=new Uint32Array(t.buffer,0,f);let m=0,b=0,u=this.h1,x=this.h2;const I=3432918353,R=461845907,v=I&M,C=R&M;for(let q=0;q<f;q++)q&1?(m=e[q],m=m*I&i|m*v&M,m=m<<15|m>>>17,m=m*R&i|m*C&M,u^=m,u=u<<13|u>>>19,u=u*5+3864292196):(b=e[q],b=b*I&i|b*v&M,b=b<<15|b>>>17,b=b*R&i|b*C&M,x^=b,x=x<<13|x>>>19,x=x*5+3864292196);switch(m=0,h){case 3:m^=t[f*4+2]<<16;case 2:m^=t[f*4+1]<<8;case 1:m^=t[f*4],m=m*I&i|m*v&M,m=m<<15|m>>>17,m=m*R&i|m*C&M,f&1?u^=m:x^=m}this.h1=u,this.h2=x}hexdigest(){let a=this.h1,t=this.h2;return a^=t>>>1,a=a*3981806797&i|a*36045&M,t=t*4283543511&i|((t<<16|a>>>16)*2950163797&i)>>>16,a^=t>>>1,a=a*444984403&i|a*60499&M,t=t*3301882366&i|((t<<16|a>>>16)*3120437893&i)>>>16,a^=t>>>1,(a>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}o.MurmurHash3_64=z}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var d=P(1);class _{#t=new Set;constructor({ownerDocument:z=globalThis.document,styleElement:V=null}){this._document=z,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(z){this.nativeFontFaces.add(z),this._document.fonts.add(z)}removeNativeFontFace(z){this.nativeFontFaces.delete(z),this._document.fonts.delete(z)}insertRule(z){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const V=this.styleElement.sheet;V.insertRule(z,V.cssRules.length)}clear(){for(const z of this.nativeFontFaces)this._document.fonts.delete(z);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(z){if(!(!z||this.#t.has(z.loadedName))){if((0,d.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:V,src:a,style:t}=z,r=new FontFace(V,a,t);this.addNativeFontFace(r);try{await r.load(),this.#t.add(V)}catch{(0,d.warn)(`Cannot load system font: ${z.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}(0,d.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(z){if(z.attached||z.missingFile&&!z.systemFontInfo)return;if(z.attached=!0,z.systemFontInfo){await this.loadSystemFont(z.systemFontInfo);return}if(this.isFontLoadingAPISupported){const a=z.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(t){throw(0,d.warn)(`Failed to load font '${a.family}': '${t}'.`),z.disableFontFace=!0,t}}return}const V=z.createFontFaceRule();if(V){if(this.insertRule(V),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const t=this._queueLoadingCallback(a);this._prepareFontLoadEvent(z,t)})}}get isFontLoadingAPISupported(){const z=!!this._document?.fonts;return(0,d.shadow)(this,"isFontLoadingAPISupported",z)}get isSyncFontLoadingSupported(){let z=!1;return(d.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(z=!0),(0,d.shadow)(this,"isSyncFontLoadingSupported",z)}_queueLoadingCallback(z){function V(){for((0,d.assert)(!t.done,"completeRequest() cannot be called twice."),t.done=!0;a.length>0&&a[0].done;){const r=a.shift();setTimeout(r.callback,0)}}const{loadingRequests:a}=this,t={done:!1,complete:V,callback:z};return a.push(t),t}get _loadTestFont(){const z=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,d.shadow)(this,"_loadTestFont",z)}_prepareFontLoadEvent(z,V){function a(nt,rt){return nt.charCodeAt(rt)<<24|nt.charCodeAt(rt+1)<<16|nt.charCodeAt(rt+2)<<8|nt.charCodeAt(rt+3)&255}function t(nt,rt,At,pt){const vt=nt.substring(0,rt),wt=nt.substring(rt+At);return vt+pt+wt}let r,f;const h=this._document.createElement("canvas");h.width=1,h.height=1;const e=h.getContext("2d");let m=0;function b(nt,rt){if(++m>30){(0,d.warn)("Load test font never loaded."),rt();return}if(e.font="30px "+nt,e.fillText(".",0,20),e.getImageData(0,0,1,1).data[3]>0){rt();return}setTimeout(b.bind(null,nt,rt))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=t(x,976,u.length,u);const R=16,v=1482184792;let C=a(x,R);for(r=0,f=u.length-3;r<f;r+=4)C=C-v+a(u,r)|0;r<u.length&&(C=C-v+a(u+"XXX",r)|0),x=t(x,R,4,(0,d.string32)(C));const q=`url(data:font/opentype;base64,${btoa(x)});`,K=`@font-face {font-family:"${u}";src:${q}}`;this.insertRule(K);const H=this._document.createElement("div");H.style.visibility="hidden",H.style.width=H.style.height="10px",H.style.position="absolute",H.style.top=H.style.left="0px";for(const nt of[z.loadedName,u]){const rt=this._document.createElement("span");rt.textContent="Hi",rt.style.fontFamily=nt,H.append(rt)}this._document.body.append(H),b(u,()=>{H.remove(),V.complete()})}}o.FontLoader=_;class i{constructor(z,{isEvalSupported:V=!0,disableFontFace:a=!1,ignoreErrors:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const f in z)this[f]=z[f];this.isEvalSupported=V!==!1,this.disableFontFace=a===!0,this.ignoreErrors=t===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let z;if(!this.cssFontInfo)z=new FontFace(this.loadedName,this.data,{});else{const V={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(V.style=`oblique ${this.cssFontInfo.italicAngle}deg`),z=new FontFace(this.cssFontInfo.fontFamily,this.data,V)}return this._inspectFont?.(this),z}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const z=(0,d.bytesToString)(this.data),V=`url(data:${this.mimetype};base64,${btoa(z)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${V}}`;else{let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${V}}`}return this._inspectFont?.(this,V),a}getPathGenerator(z,V){if(this.compiledGlyphs[V]!==void 0)return this.compiledGlyphs[V];let a;try{a=z.get(this.loadedName+"_path_"+V)}catch(t){if(!this.ignoreErrors)throw t;return(0,d.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[V]=function(r,f){}}if(this.isEvalSupported&&d.FeatureTest.isEvalSupported){const t=[];for(const r of a){const f=r.args!==void 0?r.args.join(","):"";t.push("c.",r.cmd,"(",f,`);
`)}return this.compiledGlyphs[V]=new Function("c","size",t.join(""))}return this.compiledGlyphs[V]=function(t,r){for(const f of a)f.cmd==="scale"&&(f.args=[r,-r]),t[f.cmd].apply(t,f.args)}}}o.FontFaceObject=i}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeFilterFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var d=P(7);P(1);const _=function(a){return new Promise((t,r)=>{require$$5.readFile(a,(h,e)=>{if(h||!e){r(new Error(h));return}t(new Uint8Array(e))})})};class i extends d.BaseFilterFactory{}o.NodeFilterFactory=i;class M extends d.BaseCanvasFactory{_createCanvas(t,r){return require$$5.createCanvas(t,r)}}o.NodeCanvasFactory=M;class z extends d.BaseCMapReaderFactory{_fetchData(t,r){return _(t).then(f=>({cMapData:f,compressionType:r}))}}o.NodeCMapReaderFactory=z;class V extends d.BaseStandardFontDataFactory{_fetchData(t){return _(t)}}o.NodeStandardFontDataFactory=V}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var d=P(1),_=P(6),i=P(12),M=P(13);const z=16,V=100,a=4096,t=15,r=10,f=1e3,h=16;function e(S,p){if(S._removeMirroring)throw new Error("Context is already forwarding operations.");S.__originalSave=S.save,S.__originalRestore=S.restore,S.__originalRotate=S.rotate,S.__originalScale=S.scale,S.__originalTranslate=S.translate,S.__originalTransform=S.transform,S.__originalSetTransform=S.setTransform,S.__originalResetTransform=S.resetTransform,S.__originalClip=S.clip,S.__originalMoveTo=S.moveTo,S.__originalLineTo=S.lineTo,S.__originalBezierCurveTo=S.bezierCurveTo,S.__originalRect=S.rect,S.__originalClosePath=S.closePath,S.__originalBeginPath=S.beginPath,S._removeMirroring=()=>{S.save=S.__originalSave,S.restore=S.__originalRestore,S.rotate=S.__originalRotate,S.scale=S.__originalScale,S.translate=S.__originalTranslate,S.transform=S.__originalTransform,S.setTransform=S.__originalSetTransform,S.resetTransform=S.__originalResetTransform,S.clip=S.__originalClip,S.moveTo=S.__originalMoveTo,S.lineTo=S.__originalLineTo,S.bezierCurveTo=S.__originalBezierCurveTo,S.rect=S.__originalRect,S.closePath=S.__originalClosePath,S.beginPath=S.__originalBeginPath,delete S._removeMirroring},S.save=function(){p.save(),this.__originalSave()},S.restore=function(){p.restore(),this.__originalRestore()},S.translate=function(E,D){p.translate(E,D),this.__originalTranslate(E,D)},S.scale=function(E,D){p.scale(E,D),this.__originalScale(E,D)},S.transform=function(E,D,L,U,k,l){p.transform(E,D,L,U,k,l),this.__originalTransform(E,D,L,U,k,l)},S.setTransform=function(E,D,L,U,k,l){p.setTransform(E,D,L,U,k,l),this.__originalSetTransform(E,D,L,U,k,l)},S.resetTransform=function(){p.resetTransform(),this.__originalResetTransform()},S.rotate=function(E){p.rotate(E),this.__originalRotate(E)},S.clip=function(E){p.clip(E),this.__originalClip(E)},S.moveTo=function(g,E){p.moveTo(g,E),this.__originalMoveTo(g,E)},S.lineTo=function(g,E){p.lineTo(g,E),this.__originalLineTo(g,E)},S.bezierCurveTo=function(g,E,D,L,U,k){p.bezierCurveTo(g,E,D,L,U,k),this.__originalBezierCurveTo(g,E,D,L,U,k)},S.rect=function(g,E,D,L){p.rect(g,E,D,L),this.__originalRect(g,E,D,L)},S.closePath=function(){p.closePath(),this.__originalClosePath()},S.beginPath=function(){p.beginPath(),this.__originalBeginPath()}}class m{constructor(p){this.canvasFactory=p,this.cache=Object.create(null)}getCanvas(p,g,E){let D;return this.cache[p]!==void 0?(D=this.cache[p],this.canvasFactory.reset(D,g,E)):(D=this.canvasFactory.create(g,E),this.cache[p]=D),D}delete(p){delete this.cache[p]}clear(){for(const p in this.cache){const g=this.cache[p];this.canvasFactory.destroy(g),delete this.cache[p]}}}function b(S,p,g,E,D,L,U,k,l,y){const[w,T,F,W,Y,st]=(0,_.getCurrentTransform)(S);if(T===0&&F===0){const ot=U*w+Y,ct=Math.round(ot),ut=k*W+st,gt=Math.round(ut),Ct=(U+l)*w+Y,Mt=Math.abs(Math.round(Ct)-ct)||1,Ot=(k+y)*W+st,Vt=Math.abs(Math.round(Ot)-gt)||1;return S.setTransform(Math.sign(w),0,0,Math.sign(W),ct,gt),S.drawImage(p,g,E,D,L,0,0,Mt,Vt),S.setTransform(w,T,F,W,Y,st),[Mt,Vt]}if(w===0&&W===0){const ot=k*F+Y,ct=Math.round(ot),ut=U*T+st,gt=Math.round(ut),Ct=(k+y)*F+Y,Mt=Math.abs(Math.round(Ct)-ct)||1,Ot=(U+l)*T+st,Vt=Math.abs(Math.round(Ot)-gt)||1;return S.setTransform(0,Math.sign(T),Math.sign(F),0,ct,gt),S.drawImage(p,g,E,D,L,0,0,Vt,Mt),S.setTransform(w,T,F,W,Y,st),[Vt,Mt]}S.drawImage(p,g,E,D,L,U,k,l,y);const Et=Math.hypot(w,T),at=Math.hypot(F,W);return[Et*l,at*y]}function u(S){const{width:p,height:g}=S;if(p>f||g>f)return null;const E=1e3,D=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=p+1;let U=new Uint8Array(L*(g+1)),k,l,y;const w=p+7&-8;let T=new Uint8Array(w*g),F=0;for(const at of S.data){let ot=128;for(;ot>0;)T[F++]=at&ot?0:255,ot>>=1}let W=0;for(F=0,T[F]!==0&&(U[0]=1,++W),l=1;l<p;l++)T[F]!==T[F+1]&&(U[l]=T[F]?2:1,++W),F++;for(T[F]!==0&&(U[l]=2,++W),k=1;k<g;k++){F=k*w,y=k*L,T[F-w]!==T[F]&&(U[y]=T[F]?1:8,++W);let at=(T[F]?4:0)+(T[F-w]?8:0);for(l=1;l<p;l++)at=(at>>2)+(T[F+1]?4:0)+(T[F-w+1]?8:0),D[at]&&(U[y+l]=D[at],++W),F++;if(T[F-w]!==T[F]&&(U[y+l]=T[F]?2:4,++W),W>E)return null}for(F=w*(g-1),y=k*L,T[F]!==0&&(U[y]=8,++W),l=1;l<p;l++)T[F]!==T[F+1]&&(U[y+l]=T[F]?4:8,++W),F++;if(T[F]!==0&&(U[y+l]=4,++W),W>E)return null;const Y=new Int32Array([0,L,-1,0,-L,0,0,0,1]),st=new Path2D;for(k=0;W&&k<=g;k++){let at=k*L;const ot=at+p;for(;at<ot&&!U[at];)at++;if(at===ot)continue;st.moveTo(at%L,k);const ct=at;let ut=U[at];do{const gt=Y[ut];do at+=gt;while(!U[at]);const Ct=U[at];Ct!==5&&Ct!==10?(ut=Ct,U[at]=0):(ut=Ct&51*ut>>4,U[at]&=ut>>2|ut<<2),st.lineTo(at%L,at/L|0),U[at]||--W}while(ct!==at);--k}return T=null,U=null,function(at){at.save(),at.scale(1/p,-1/g),at.translate(0,-g),at.fill(st),at.beginPath(),at.restore()}}class x{constructor(p,g){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=d.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=d.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=d.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,p,g])}clone(){const p=Object.create(this);return p.clipBox=this.clipBox.slice(),p}setCurrentPoint(p,g){this.x=p,this.y=g}updatePathMinMax(p,g,E){[g,E]=d.Util.applyTransform([g,E],p),this.minX=Math.min(this.minX,g),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,g),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(p,g){const E=d.Util.applyTransform(g,p),D=d.Util.applyTransform(g.slice(2),p);this.minX=Math.min(this.minX,E[0],D[0]),this.minY=Math.min(this.minY,E[1],D[1]),this.maxX=Math.max(this.maxX,E[0],D[0]),this.maxY=Math.max(this.maxY,E[1],D[1])}updateScalingPathMinMax(p,g){d.Util.scaleMinMax(p,g),this.minX=Math.min(this.minX,g[0]),this.maxX=Math.max(this.maxX,g[1]),this.minY=Math.min(this.minY,g[2]),this.maxY=Math.max(this.maxY,g[3])}updateCurvePathMinMax(p,g,E,D,L,U,k,l,y,w){const T=d.Util.bezierBoundingBox(g,E,D,L,U,k,l,y);if(w){w[0]=Math.min(w[0],T[0],T[2]),w[1]=Math.max(w[1],T[0],T[2]),w[2]=Math.min(w[2],T[1],T[3]),w[3]=Math.max(w[3],T[1],T[3]);return}this.updateRectMinMax(p,T)}getPathBoundingBox(p=i.PathType.FILL,g=null){const E=[this.minX,this.minY,this.maxX,this.maxY];if(p===i.PathType.STROKE){g||(0,d.unreachable)("Stroke bounding box must include transform.");const D=d.Util.singularValueDecompose2dScale(g),L=D[0]*this.lineWidth/2,U=D[1]*this.lineWidth/2;E[0]-=L,E[1]-=U,E[2]+=L,E[3]+=U}return E}updateClipFromPath(){const p=d.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(p||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(p){this.clipBox=p,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(p=i.PathType.FILL,g=null){return d.Util.intersect(this.clipBox,this.getPathBoundingBox(p,g))}}function I(S,p){if(typeof ImageData<"u"&&p instanceof ImageData){S.putImageData(p,0,0);return}const g=p.height,E=p.width,D=g%h,L=(g-D)/h,U=D===0?L:L+1,k=S.createImageData(E,h);let l=0,y;const w=p.data,T=k.data;let F,W,Y,st;if(p.kind===d.ImageKind.GRAYSCALE_1BPP){const Et=w.byteLength,at=new Uint32Array(T.buffer,0,T.byteLength>>2),ot=at.length,ct=E+7>>3,ut=4294967295,gt=d.FeatureTest.isLittleEndian?4278190080:255;for(F=0;F<U;F++){for(Y=F<L?h:D,y=0,W=0;W<Y;W++){const Ct=Et-l;let Mt=0;const Ot=Ct>ct?E:Ct*8-7,Vt=Ot&-8;let Ut=0,Zt=0;for(;Mt<Vt;Mt+=8)Zt=w[l++],at[y++]=Zt&128?ut:gt,at[y++]=Zt&64?ut:gt,at[y++]=Zt&32?ut:gt,at[y++]=Zt&16?ut:gt,at[y++]=Zt&8?ut:gt,at[y++]=Zt&4?ut:gt,at[y++]=Zt&2?ut:gt,at[y++]=Zt&1?ut:gt;for(;Mt<Ot;Mt++)Ut===0&&(Zt=w[l++],Ut=128),at[y++]=Zt&Ut?ut:gt,Ut>>=1}for(;y<ot;)at[y++]=0;S.putImageData(k,0,F*h)}}else if(p.kind===d.ImageKind.RGBA_32BPP){for(W=0,st=E*h*4,F=0;F<L;F++)T.set(w.subarray(l,l+st)),l+=st,S.putImageData(k,0,W),W+=h;F<U&&(st=E*D*4,T.set(w.subarray(l,l+st)),S.putImageData(k,0,W))}else if(p.kind===d.ImageKind.RGB_24BPP)for(Y=h,st=E*Y,F=0;F<U;F++){for(F>=L&&(Y=D,st=E*Y),y=0,W=st;W--;)T[y++]=w[l++],T[y++]=w[l++],T[y++]=w[l++],T[y++]=255;S.putImageData(k,0,F*h)}else throw new Error(`bad image kind: ${p.kind}`)}function R(S,p){if(p.bitmap){S.drawImage(p.bitmap,0,0);return}const g=p.height,E=p.width,D=g%h,L=(g-D)/h,U=D===0?L:L+1,k=S.createImageData(E,h);let l=0;const y=p.data,w=k.data;for(let T=0;T<U;T++){const F=T<L?h:D;({srcPos:l}=(0,M.convertBlackAndWhiteToRGBA)({src:y,srcPos:l,dest:w,width:E,height:F,nonBlackColor:0})),S.putImageData(k,0,T*h)}}function v(S,p){const g=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const E of g)S[E]!==void 0&&(p[E]=S[E]);S.setLineDash!==void 0&&(p.setLineDash(S.getLineDash()),p.lineDashOffset=S.lineDashOffset)}function C(S){if(S.strokeStyle=S.fillStyle="#000000",S.fillRule="nonzero",S.globalAlpha=1,S.lineWidth=1,S.lineCap="butt",S.lineJoin="miter",S.miterLimit=10,S.globalCompositeOperation="source-over",S.font="10px sans-serif",S.setLineDash!==void 0&&(S.setLineDash([]),S.lineDashOffset=0),!d.isNodeJS){const{filter:p}=S;p!=="none"&&p!==""&&(S.filter="none")}}function q(S,p,g,E){const D=S.length;for(let L=3;L<D;L+=4){const U=S[L];if(U===0)S[L-3]=p,S[L-2]=g,S[L-1]=E;else if(U<255){const k=255-U;S[L-3]=S[L-3]*U+p*k>>8,S[L-2]=S[L-2]*U+g*k>>8,S[L-1]=S[L-1]*U+E*k>>8}}}function K(S,p,g){const E=S.length,D=1/255;for(let L=3;L<E;L+=4){const U=g?g[S[L]]:S[L];p[L]=p[L]*U*D|0}}function H(S,p,g){const E=S.length;for(let D=3;D<E;D+=4){const L=S[D-3]*77+S[D-2]*152+S[D-1]*28;p[D]=g?p[D]*g[L>>8]>>8:p[D]*L>>16}}function nt(S,p,g,E,D,L,U,k,l,y,w){const T=!!L,F=T?L[0]:0,W=T?L[1]:0,Y=T?L[2]:0,st=D==="Luminosity"?H:K,at=Math.min(E,Math.ceil(1048576/g));for(let ot=0;ot<E;ot+=at){const ct=Math.min(at,E-ot),ut=S.getImageData(k-y,ot+(l-w),g,ct),gt=p.getImageData(k,ot+l,g,ct);T&&q(ut.data,F,W,Y),st(ut.data,gt.data,U),p.putImageData(gt,k,ot+l)}}function rt(S,p,g,E){const D=E[0],L=E[1],U=E[2]-D,k=E[3]-L;U===0||k===0||(nt(p.context,g,U,k,p.subtype,p.backdrop,p.transferMap,D,L,p.offsetX,p.offsetY),S.save(),S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),S.drawImage(g.canvas,0,0),S.restore())}function At(S,p){const g=d.Util.singularValueDecompose2dScale(S);g[0]=Math.fround(g[0]),g[1]=Math.fround(g[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*_.PixelsPerInch.PDF_TO_CSS_UNITS);return p!==void 0?p:g[0]<=E||g[1]<=E}const pt=["butt","round","square"],vt=["miter","round","bevel"],wt={},lt={};class N{constructor(p,g,E,D,L,{optionalContentConfig:U,markedContentStack:k=null},l,y){this.ctx=p,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=g,this.objs=E,this.canvasFactory=D,this.filterFactory=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=k||[],this.optionalContentConfig=U,this.cachedCanvases=new m(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=y,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(p,g=null){return typeof p=="string"?p.startsWith("g_")?this.commonObjs.get(p):this.objs.get(p):g}beginDrawing({transform:p,viewport:g,transparency:E=!1,background:D=null}){const L=this.ctx.canvas.width,U=this.ctx.canvas.height,k=this.ctx.fillStyle;if(this.ctx.fillStyle=D||"#ffffff",this.ctx.fillRect(0,0,L,U),this.ctx.fillStyle=k,E){const l=this.cachedCanvases.getCanvas("transparent",L,U);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...(0,_.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),C(this.ctx),p&&(this.ctx.transform(...p),this.outputScaleX=p[0],this.outputScaleY=p[0]),this.ctx.transform(...g.transform),this.viewportScale=g.scale,this.baseTransform=(0,_.getCurrentTransform)(this.ctx)}executeOperatorList(p,g,E,D){const L=p.argsArray,U=p.fnArray;let k=g||0;const l=L.length;if(l===k)return k;const y=l-k>r&&typeof E=="function",w=y?Date.now()+t:0;let T=0;const F=this.commonObjs,W=this.objs;let Y;for(;;){if(D!==void 0&&k===D.nextBreakPoint)return D.breakIt(k,E),k;if(Y=U[k],Y!==d.OPS.dependency)this[Y].apply(this,L[k]);else for(const st of L[k]){const Et=st.startsWith("g_")?F:W;if(!Et.has(st))return Et.get(st,E),k}if(k++,k===l)return k;if(y&&++T>r){if(Date.now()>w)return E(),k;T=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const p of this._cachedBitmapsMap.values()){for(const g of p.values())typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement&&(g.width=g.height=0);p.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const p=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(p!=="none"){const g=this.ctx.filter;this.ctx.filter=p,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=g}}}_scaleImage(p,g){const E=p.width,D=p.height;let L=Math.max(Math.hypot(g[0],g[1]),1),U=Math.max(Math.hypot(g[2],g[3]),1),k=E,l=D,y="prescale1",w,T;for(;L>2&&k>1||U>2&&l>1;){let F=k,W=l;L>2&&k>1&&(F=k>=16384?Math.floor(k/2)-1||1:Math.ceil(k/2),L/=k/F),U>2&&l>1&&(W=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,U/=l/W),w=this.cachedCanvases.getCanvas(y,F,W),T=w.context,T.clearRect(0,0,F,W),T.drawImage(p,0,0,k,l,0,0,F,W),p=w.canvas,k=F,l=W,y=y==="prescale1"?"prescale2":"prescale1"}return{img:p,paintWidth:k,paintHeight:l}}_createMaskCanvas(p){const g=this.ctx,{width:E,height:D}=p,L=this.current.fillColor,U=this.current.patternFill,k=(0,_.getCurrentTransform)(g);let l,y,w,T;if((p.bitmap||p.data)&&p.count>1){const Mt=p.bitmap||p.data.buffer;y=JSON.stringify(U?k:[k.slice(0,4),L]),l=this._cachedBitmapsMap.get(Mt),l||(l=new Map,this._cachedBitmapsMap.set(Mt,l));const Ot=l.get(y);if(Ot&&!U){const Vt=Math.round(Math.min(k[0],k[2])+k[4]),Ut=Math.round(Math.min(k[1],k[3])+k[5]);return{canvas:Ot,offsetX:Vt,offsetY:Ut}}w=Ot}w||(T=this.cachedCanvases.getCanvas("maskCanvas",E,D),R(T.context,p));let F=d.Util.transform(k,[1/E,0,0,-1/D,0,0]);F=d.Util.transform(F,[1,0,0,1,0,-D]);const W=d.Util.applyTransform([0,0],F),Y=d.Util.applyTransform([E,D],F),st=d.Util.normalizeRect([W[0],W[1],Y[0],Y[1]]),Et=Math.round(st[2]-st[0])||1,at=Math.round(st[3]-st[1])||1,ot=this.cachedCanvases.getCanvas("fillCanvas",Et,at),ct=ot.context,ut=Math.min(W[0],Y[0]),gt=Math.min(W[1],Y[1]);ct.translate(-ut,-gt),ct.transform(...F),w||(w=this._scaleImage(T.canvas,(0,_.getCurrentTransformInverse)(ct)),w=w.img,l&&U&&l.set(y,w)),ct.imageSmoothingEnabled=At((0,_.getCurrentTransform)(ct),p.interpolate),b(ct,w,0,0,w.width,w.height,0,0,E,D),ct.globalCompositeOperation="source-in";const Ct=d.Util.transform((0,_.getCurrentTransformInverse)(ct),[1,0,0,1,-ut,-gt]);return ct.fillStyle=U?L.getPattern(g,this,Ct,i.PathType.FILL):L,ct.fillRect(0,0,E,D),l&&!U&&(this.cachedCanvases.delete("fillCanvas"),l.set(y,ot.canvas)),{canvas:ot.canvas,offsetX:Math.round(ut),offsetY:Math.round(gt)}}setLineWidth(p){p!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=p,this.ctx.lineWidth=p}setLineCap(p){this.ctx.lineCap=pt[p]}setLineJoin(p){this.ctx.lineJoin=vt[p]}setMiterLimit(p){this.ctx.miterLimit=p}setDash(p,g){const E=this.ctx;E.setLineDash!==void 0&&(E.setLineDash(p),E.lineDashOffset=g)}setRenderingIntent(p){}setFlatness(p){}setGState(p){for(const[g,E]of p)switch(g){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=E;break;case"ca":this.current.fillAlpha=E,this.ctx.globalAlpha=E;break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(E);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const p=this.inSMaskMode;this.current.activeSMask&&!p?this.beginSMaskMode():!this.current.activeSMask&&p&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const p=this.ctx.canvas.width,g=this.ctx.canvas.height,E="smaskGroupAt"+this.groupLevel,D=this.cachedCanvases.getCanvas(E,p,g);this.suspendedCtx=this.ctx,this.ctx=D.context;const L=this.ctx;L.setTransform(...(0,_.getCurrentTransform)(this.suspendedCtx)),v(this.suspendedCtx,L),e(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),v(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(p){if(!this.current.activeSMask)return;p?(p[0]=Math.floor(p[0]),p[1]=Math.floor(p[1]),p[2]=Math.ceil(p[2]),p[3]=Math.ceil(p[3])):p=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const g=this.current.activeSMask,E=this.suspendedCtx;rt(E,g,this.ctx,p),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(v(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const p=this.current;this.stateStack.push(p),this.current=p.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),v(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(p,g,E,D,L,U){this.ctx.transform(p,g,E,D,L,U),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(p,g,E){const D=this.ctx,L=this.current;let U=L.x,k=L.y,l,y;const w=(0,_.getCurrentTransform)(D),T=w[0]===0&&w[3]===0||w[1]===0&&w[2]===0,F=T?E.slice(0):null;for(let W=0,Y=0,st=p.length;W<st;W++)switch(p[W]|0){case d.OPS.rectangle:U=g[Y++],k=g[Y++];const Et=g[Y++],at=g[Y++],ot=U+Et,ct=k+at;D.moveTo(U,k),Et===0||at===0?D.lineTo(ot,ct):(D.lineTo(ot,k),D.lineTo(ot,ct),D.lineTo(U,ct)),T||L.updateRectMinMax(w,[U,k,ot,ct]),D.closePath();break;case d.OPS.moveTo:U=g[Y++],k=g[Y++],D.moveTo(U,k),T||L.updatePathMinMax(w,U,k);break;case d.OPS.lineTo:U=g[Y++],k=g[Y++],D.lineTo(U,k),T||L.updatePathMinMax(w,U,k);break;case d.OPS.curveTo:l=U,y=k,U=g[Y+4],k=g[Y+5],D.bezierCurveTo(g[Y],g[Y+1],g[Y+2],g[Y+3],U,k),L.updateCurvePathMinMax(w,l,y,g[Y],g[Y+1],g[Y+2],g[Y+3],U,k,F),Y+=6;break;case d.OPS.curveTo2:l=U,y=k,D.bezierCurveTo(U,k,g[Y],g[Y+1],g[Y+2],g[Y+3]),L.updateCurvePathMinMax(w,l,y,U,k,g[Y],g[Y+1],g[Y+2],g[Y+3],F),U=g[Y+2],k=g[Y+3],Y+=4;break;case d.OPS.curveTo3:l=U,y=k,U=g[Y+2],k=g[Y+3],D.bezierCurveTo(g[Y],g[Y+1],U,k,U,k),L.updateCurvePathMinMax(w,l,y,g[Y],g[Y+1],U,k,U,k,F),Y+=4;break;case d.OPS.closePath:D.closePath();break}T&&L.updateScalingPathMinMax(w,F),L.setCurrentPoint(U,k)}closePath(){this.ctx.closePath()}stroke(p=!0){const g=this.ctx,E=this.current.strokeColor;g.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof E=="object"&&E?.getPattern?(g.save(),g.strokeStyle=E.getPattern(g,this,(0,_.getCurrentTransformInverse)(g),i.PathType.STROKE),this.rescaleAndStroke(!1),g.restore()):this.rescaleAndStroke(!0)),p&&this.consumePath(this.current.getClippedPathBoundingBox()),g.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(p=!0){const g=this.ctx,E=this.current.fillColor,D=this.current.patternFill;let L=!1;D&&(g.save(),g.fillStyle=E.getPattern(g,this,(0,_.getCurrentTransformInverse)(g),i.PathType.FILL),L=!0);const U=this.current.getClippedPathBoundingBox();this.contentVisible&&U!==null&&(this.pendingEOFill?(g.fill("evenodd"),this.pendingEOFill=!1):g.fill()),L&&g.restore(),p&&this.consumePath(U)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=wt}eoClip(){this.pendingClip=lt}beginText(){this.current.textMatrix=d.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const p=this.pendingTextPaths,g=this.ctx;if(p===void 0){g.beginPath();return}g.save(),g.beginPath();for(const E of p)g.setTransform(...E.transform),g.translate(E.x,E.y),E.addToPath(g,E.fontSize);g.restore(),g.clip(),g.beginPath(),delete this.pendingTextPaths}setCharSpacing(p){this.current.charSpacing=p}setWordSpacing(p){this.current.wordSpacing=p}setHScale(p){this.current.textHScale=p/100}setLeading(p){this.current.leading=-p}setFont(p,g){const E=this.commonObjs.get(p),D=this.current;if(!E)throw new Error(`Can't find font for ${p}`);if(D.fontMatrix=E.fontMatrix||d.FONT_IDENTITY_MATRIX,(D.fontMatrix[0]===0||D.fontMatrix[3]===0)&&(0,d.warn)("Invalid font matrix for font "+p),g<0?(g=-g,D.fontDirection=-1):D.fontDirection=1,this.current.font=E,this.current.fontSize=g,E.isType3Font)return;const L=E.loadedName||"sans-serif",U=E.systemFontInfo?.css||`"${L}", ${E.fallbackName}`;let k="normal";E.black?k="900":E.bold&&(k="bold");const l=E.italic?"italic":"normal";let y=g;g<z?y=z:g>V&&(y=V),this.current.fontSizeScale=g/y,this.ctx.font=`${l} ${k} ${y}px ${U}`}setTextRenderingMode(p){this.current.textRenderingMode=p}setTextRise(p){this.current.textRise=p}moveText(p,g){this.current.x=this.current.lineX+=p,this.current.y=this.current.lineY+=g}setLeadingMoveText(p,g){this.setLeading(-g),this.moveText(p,g)}setTextMatrix(p,g,E,D,L,U){this.current.textMatrix=[p,g,E,D,L,U],this.current.textMatrixScale=Math.hypot(p,g),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(p,g,E,D){const L=this.ctx,U=this.current,k=U.font,l=U.textRenderingMode,y=U.fontSize/U.fontSizeScale,w=l&d.TextRenderingMode.FILL_STROKE_MASK,T=!!(l&d.TextRenderingMode.ADD_TO_PATH_FLAG),F=U.patternFill&&!k.missingFile;let W;(k.disableFontFace||T||F)&&(W=k.getPathGenerator(this.commonObjs,p)),k.disableFontFace||F?(L.save(),L.translate(g,E),L.beginPath(),W(L,y),D&&L.setTransform(...D),(w===d.TextRenderingMode.FILL||w===d.TextRenderingMode.FILL_STROKE)&&L.fill(),(w===d.TextRenderingMode.STROKE||w===d.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((w===d.TextRenderingMode.FILL||w===d.TextRenderingMode.FILL_STROKE)&&L.fillText(p,g,E),(w===d.TextRenderingMode.STROKE||w===d.TextRenderingMode.FILL_STROKE)&&L.strokeText(p,g,E)),T&&(this.pendingTextPaths||=[]).push({transform:(0,_.getCurrentTransform)(L),x:g,y:E,fontSize:y,addToPath:W})}get isFontSubpixelAAEnabled(){const{context:p}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);p.scale(1.5,1),p.fillText("I",0,10);const g=p.getImageData(0,0,10,10).data;let E=!1;for(let D=3;D<g.length;D+=4)if(g[D]>0&&g[D]<255){E=!0;break}return(0,d.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(p){const g=this.current,E=g.font;if(E.isType3Font)return this.showType3Text(p);const D=g.fontSize;if(D===0)return;const L=this.ctx,U=g.fontSizeScale,k=g.charSpacing,l=g.wordSpacing,y=g.fontDirection,w=g.textHScale*y,T=p.length,F=E.vertical,W=F?1:-1,Y=E.defaultVMetrics,st=D*g.fontMatrix[0],Et=g.textRenderingMode===d.TextRenderingMode.FILL&&!E.disableFontFace&&!g.patternFill;L.save(),L.transform(...g.textMatrix),L.translate(g.x,g.y+g.textRise),y>0?L.scale(w,-1):L.scale(w,1);let at;if(g.patternFill){L.save();const Ct=g.fillColor.getPattern(L,this,(0,_.getCurrentTransformInverse)(L),i.PathType.FILL);at=(0,_.getCurrentTransform)(L),L.restore(),L.fillStyle=Ct}let ot=g.lineWidth;const ct=g.textMatrixScale;if(ct===0||ot===0){const Ct=g.textRenderingMode&d.TextRenderingMode.FILL_STROKE_MASK;(Ct===d.TextRenderingMode.STROKE||Ct===d.TextRenderingMode.FILL_STROKE)&&(ot=this.getSinglePixelWidth())}else ot/=ct;if(U!==1&&(L.scale(U,U),ot/=U),L.lineWidth=ot,E.isInvalidPDFjsFont){const Ct=[];let Mt=0;for(const Ot of p)Ct.push(Ot.unicode),Mt+=Ot.width;L.fillText(Ct.join(""),0,0),g.x+=Mt*st*w,L.restore(),this.compose();return}let ut=0,gt;for(gt=0;gt<T;++gt){const Ct=p[gt];if(typeof Ct=="number"){ut+=W*Ct*D/1e3;continue}let Mt=!1;const Ot=(Ct.isSpace?l:0)+k,Vt=Ct.fontChar,Ut=Ct.accent;let Zt,Se,_e=Ct.width;if(F){const me=Ct.vmetric||Y,Le=-(Ct.vmetric?me[1]:_e*.5)*st,Ue=me[2]*st;_e=me?-me[0]:_e,Zt=Le/U,Se=(ut+Ue)/U}else Zt=ut/U,Se=0;if(E.remeasure&&_e>0){const me=L.measureText(Vt).width*1e3/D*U;if(_e<me&&this.isFontSubpixelAAEnabled){const Le=_e/me;Mt=!0,L.save(),L.scale(Le,1),Zt/=Le}else _e!==me&&(Zt+=(_e-me)/2e3*D/U)}if(this.contentVisible&&(Ct.isInFont||E.missingFile)){if(Et&&!Ut)L.fillText(Vt,Zt,Se);else if(this.paintChar(Vt,Zt,Se,at),Ut){const me=Zt+D*Ut.offset.x/U,Le=Se-D*Ut.offset.y/U;this.paintChar(Ut.fontChar,me,Le,at)}}const se=F?_e*st-Ot*y:_e*st+Ot*y;ut+=se,Mt&&L.restore()}F?g.y-=ut:g.x+=ut*w,L.restore(),this.compose()}showType3Text(p){const g=this.ctx,E=this.current,D=E.font,L=E.fontSize,U=E.fontDirection,k=D.vertical?1:-1,l=E.charSpacing,y=E.wordSpacing,w=E.textHScale*U,T=E.fontMatrix||d.FONT_IDENTITY_MATRIX,F=p.length,W=E.textRenderingMode===d.TextRenderingMode.INVISIBLE;let Y,st,Et,at;if(!(W||L===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,g.save(),g.transform(...E.textMatrix),g.translate(E.x,E.y),g.scale(w,U),Y=0;Y<F;++Y){if(st=p[Y],typeof st=="number"){at=k*st*L/1e3,this.ctx.translate(at,0),E.x+=at*w;continue}const ot=(st.isSpace?y:0)+l,ct=D.charProcOperatorList[st.operatorListId];if(!ct){(0,d.warn)(`Type3 character "${st.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=st,this.save(),g.scale(L,L),g.transform(...T),this.executeOperatorList(ct),this.restore()),Et=d.Util.applyTransform([st.width,0],T)[0]*L+ot,g.translate(Et,0),E.x+=Et*w}g.restore(),this.processingType3=null}}setCharWidth(p,g){}setCharWidthAndBounds(p,g,E,D,L,U){this.ctx.rect(E,D,L-E,U-D),this.ctx.clip(),this.endPath()}getColorN_Pattern(p){let g;if(p[0]==="TilingPattern"){const E=p[1],D=this.baseTransform||(0,_.getCurrentTransform)(this.ctx),L={createCanvasGraphics:U=>new N(U,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};g=new i.TilingPattern(p,E,this.ctx,L,D)}else g=this._getPattern(p[1],p[2]);return g}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(p,g,E){const D=d.Util.makeHexColor(p,g,E);this.ctx.strokeStyle=D,this.current.strokeColor=D}setFillRGBColor(p,g,E){const D=d.Util.makeHexColor(p,g,E);this.ctx.fillStyle=D,this.current.fillColor=D,this.current.patternFill=!1}_getPattern(p,g=null){let E;return this.cachedPatterns.has(p)?E=this.cachedPatterns.get(p):(E=(0,i.getShadingPattern)(this.getObject(p)),this.cachedPatterns.set(p,E)),g&&(E.matrix=g),E}shadingFill(p){if(!this.contentVisible)return;const g=this.ctx;this.save();const E=this._getPattern(p);g.fillStyle=E.getPattern(g,this,(0,_.getCurrentTransformInverse)(g),i.PathType.SHADING);const D=(0,_.getCurrentTransformInverse)(g);if(D){const{width:L,height:U}=g.canvas,[k,l,y,w]=d.Util.getAxialAlignedBoundingBox([0,0,L,U],D);this.ctx.fillRect(k,l,y-k,w-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,d.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,d.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(p,g){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(p)&&p.length===6&&this.transform(...p),this.baseTransform=(0,_.getCurrentTransform)(this.ctx),g)){const E=g[2]-g[0],D=g[3]-g[1];this.ctx.rect(g[0],g[1],E,D),this.current.updateRectMinMax((0,_.getCurrentTransform)(this.ctx),g),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(p){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const g=this.ctx;p.isolated||(0,d.info)("TODO: Support non-isolated groups."),p.knockout&&(0,d.warn)("Knockout groups not supported.");const E=(0,_.getCurrentTransform)(g);if(p.matrix&&g.transform(...p.matrix),!p.bbox)throw new Error("Bounding box is required.");let D=d.Util.getAxialAlignedBoundingBox(p.bbox,(0,_.getCurrentTransform)(g));const L=[0,0,g.canvas.width,g.canvas.height];D=d.Util.intersect(D,L)||[0,0,0,0];const U=Math.floor(D[0]),k=Math.floor(D[1]);let l=Math.max(Math.ceil(D[2])-U,1),y=Math.max(Math.ceil(D[3])-k,1),w=1,T=1;l>a&&(w=l/a,l=a),y>a&&(T=y/a,y=a),this.current.startNewPathAndClipBox([0,0,l,y]);let F="groupAt"+this.groupLevel;p.smask&&(F+="_smask_"+this.smaskCounter++%2);const W=this.cachedCanvases.getCanvas(F,l,y),Y=W.context;Y.scale(1/w,1/T),Y.translate(-U,-k),Y.transform(...E),p.smask?this.smaskStack.push({canvas:W.canvas,context:Y,offsetX:U,offsetY:k,scaleX:w,scaleY:T,subtype:p.smask.subtype,backdrop:p.smask.backdrop,transferMap:p.smask.transferMap||null,startTransformInverse:null}):(g.setTransform(1,0,0,1,0,0),g.translate(U,k),g.scale(w,T),g.save()),v(g,Y),this.ctx=Y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(g),this.groupLevel++}endGroup(p){if(!this.contentVisible)return;this.groupLevel--;const g=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,p.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const D=(0,_.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...D);const L=d.Util.getAxialAlignedBoundingBox([0,0,g.canvas.width,g.canvas.height],D);this.ctx.drawImage(g.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(p,g,E,D,L){if(this.#t(),C(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(g)&&g.length===4){const U=g[2]-g[0],k=g[3]-g[1];if(L&&this.annotationCanvasMap){E=E.slice(),E[4]-=g[0],E[5]-=g[1],g=g.slice(),g[0]=g[1]=0,g[2]=U,g[3]=k;const[l,y]=d.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(this.ctx)),{viewportScale:w}=this,T=Math.ceil(U*this.outputScaleX*w),F=Math.ceil(k*this.outputScaleY*w);this.annotationCanvas=this.canvasFactory.create(T,F);const{canvas:W,context:Y}=this.annotationCanvas;this.annotationCanvasMap.set(p,W),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Y,this.ctx.save(),this.ctx.setTransform(l,0,0,-y,0,k*y),C(this.ctx)}else C(this.ctx),this.ctx.rect(g[0],g[1],U,k),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...D)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(p){if(!this.contentVisible)return;const g=p.count;p=this.getObject(p.data,p),p.count=g;const E=this.ctx,D=this.processingType3;if(D&&(D.compiled===void 0&&(D.compiled=u(p)),D.compiled)){D.compiled(E);return}const L=this._createMaskCanvas(p),U=L.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(U,L.offsetX,L.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(p,g,E=0,D=0,L,U){if(!this.contentVisible)return;p=this.getObject(p.data,p);const k=this.ctx;k.save();const l=(0,_.getCurrentTransform)(k);k.transform(g,E,D,L,0,0);const y=this._createMaskCanvas(p);k.setTransform(1,0,0,1,y.offsetX-l[4],y.offsetY-l[5]);for(let w=0,T=U.length;w<T;w+=2){const F=d.Util.transform(l,[g,E,D,L,U[w],U[w+1]]),[W,Y]=d.Util.applyTransform([0,0],F);k.drawImage(y.canvas,W,Y)}k.restore(),this.compose()}paintImageMaskXObjectGroup(p){if(!this.contentVisible)return;const g=this.ctx,E=this.current.fillColor,D=this.current.patternFill;for(const L of p){const{data:U,width:k,height:l,transform:y}=L,w=this.cachedCanvases.getCanvas("maskCanvas",k,l),T=w.context;T.save();const F=this.getObject(U,L);R(T,F),T.globalCompositeOperation="source-in",T.fillStyle=D?E.getPattern(T,this,(0,_.getCurrentTransformInverse)(g),i.PathType.FILL):E,T.fillRect(0,0,k,l),T.restore(),g.save(),g.transform(...y),g.scale(1,-1),b(g,w.canvas,0,0,k,l,0,-1,1,1),g.restore()}this.compose()}paintImageXObject(p){if(!this.contentVisible)return;const g=this.getObject(p);if(!g){(0,d.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g)}paintImageXObjectRepeat(p,g,E,D){if(!this.contentVisible)return;const L=this.getObject(p);if(!L){(0,d.warn)("Dependent image isn't ready yet");return}const U=L.width,k=L.height,l=[];for(let y=0,w=D.length;y<w;y+=2)l.push({transform:[g,0,0,E,D[y],D[y+1]],x:0,y:0,w:U,h:k});this.paintInlineImageXObjectGroup(L,l)}applyTransferMapsToCanvas(p){return this.current.transferMaps!=="none"&&(p.filter=this.current.transferMaps,p.drawImage(p.canvas,0,0),p.filter="none"),p.canvas}applyTransferMapsToBitmap(p){if(this.current.transferMaps==="none")return p.bitmap;const{bitmap:g,width:E,height:D}=p,L=this.cachedCanvases.getCanvas("inlineImage",E,D),U=L.context;return U.filter=this.current.transferMaps,U.drawImage(g,0,0),U.filter="none",L.canvas}paintInlineImageXObject(p){if(!this.contentVisible)return;const g=p.width,E=p.height,D=this.ctx;if(this.save(),!d.isNodeJS){const{filter:k}=D;k!=="none"&&k!==""&&(D.filter="none")}D.scale(1/g,-1/E);let L;if(p.bitmap)L=this.applyTransferMapsToBitmap(p);else if(typeof HTMLElement=="function"&&p instanceof HTMLElement||!p.data)L=p;else{const l=this.cachedCanvases.getCanvas("inlineImage",g,E).context;I(l,p),L=this.applyTransferMapsToCanvas(l)}const U=this._scaleImage(L,(0,_.getCurrentTransformInverse)(D));D.imageSmoothingEnabled=At((0,_.getCurrentTransform)(D),p.interpolate),b(D,U.img,0,0,U.paintWidth,U.paintHeight,0,-E,g,E),this.compose(),this.restore()}paintInlineImageXObjectGroup(p,g){if(!this.contentVisible)return;const E=this.ctx;let D;if(p.bitmap)D=p.bitmap;else{const L=p.width,U=p.height,l=this.cachedCanvases.getCanvas("inlineImage",L,U).context;I(l,p),D=this.applyTransferMapsToCanvas(l)}for(const L of g)E.save(),E.transform(...L.transform),E.scale(1,-1),b(E,D,L.x,L.y,L.w,L.h,0,-1,1,1),E.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(p){}markPointProps(p,g){}beginMarkedContent(p){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(p,g){p==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(g)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(p){const g=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(p);const E=this.ctx;this.pendingClip&&(g||(this.pendingClip===lt?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const p=(0,_.getCurrentTransform)(this.ctx);if(p[1]===0&&p[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(p[0]),Math.abs(p[3]));else{const g=Math.abs(p[0]*p[3]-p[2]*p[1]),E=Math.hypot(p[0],p[2]),D=Math.hypot(p[1],p[3]);this._cachedGetSinglePixelWidth=Math.max(E,D)/g}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:p}=this.current,{a:g,b:E,c:D,d:L}=this.ctx.getTransform();let U,k;if(E===0&&D===0){const l=Math.abs(g),y=Math.abs(L);if(l===y)if(p===0)U=k=1/l;else{const w=l*p;U=k=w<1?1/w:1}else if(p===0)U=1/l,k=1/y;else{const w=l*p,T=y*p;U=w<1?1/w:1,k=T<1?1/T:1}}else{const l=Math.abs(g*L-E*D),y=Math.hypot(g,E),w=Math.hypot(D,L);if(p===0)U=w/l,k=y/l;else{const T=p*l;U=w>T?w/T:1,k=y>T?y/T:1}}this._cachedScaleForStroking[0]=U,this._cachedScaleForStroking[1]=k}return this._cachedScaleForStroking}rescaleAndStroke(p){const{ctx:g}=this,{lineWidth:E}=this.current,[D,L]=this.getScaleForStroking();if(g.lineWidth=E||1,D===1&&L===1){g.stroke();return}const U=g.getLineDash();if(p&&g.save(),g.scale(D,L),U.length>0){const k=Math.max(D,L);g.setLineDash(U.map(l=>l/k)),g.lineDashOffset/=k}g.stroke(),p&&g.restore()}isContentVisible(){for(let p=this.markedContentStack.length-1;p>=0;p--)if(!this.markedContentStack[p].visible)return!1;return!0}}o.CanvasGraphics=N;for(const S in d.OPS)N.prototype[S]!==void 0&&(N.prototype[d.OPS[S]]=N.prototype[S])}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=h;var d=P(1),_=P(6);const i={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};o.PathType=i;function M(b,u){if(!u)return;const x=u[2]-u[0],I=u[3]-u[1],R=new Path2D;R.rect(u[0],u[1],x,I),b.clip(R)}class z{constructor(){this.constructor===z&&(0,d.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,d.unreachable)("Abstract method `getPattern` called.")}}class V extends z{constructor(u){super(),this._type=u[1],this._bbox=u[2],this._colorStops=u[3],this._p0=u[4],this._p1=u[5],this._r0=u[6],this._r1=u[7],this.matrix=null}_createGradient(u){let x;this._type==="axial"?x=u.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(x=u.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const I of this._colorStops)x.addColorStop(I[0],I[1]);return x}getPattern(u,x,I,R){let v;if(R===i.STROKE||R===i.FILL){const C=x.current.getClippedPathBoundingBox(R,(0,_.getCurrentTransform)(u))||[0,0,0,0],q=Math.ceil(C[2]-C[0])||1,K=Math.ceil(C[3]-C[1])||1,H=x.cachedCanvases.getCanvas("pattern",q,K,!0),nt=H.context;nt.clearRect(0,0,nt.canvas.width,nt.canvas.height),nt.beginPath(),nt.rect(0,0,nt.canvas.width,nt.canvas.height),nt.translate(-C[0],-C[1]),I=d.Util.transform(I,[1,0,0,1,C[0],C[1]]),nt.transform(...x.baseTransform),this.matrix&&nt.transform(...this.matrix),M(nt,this._bbox),nt.fillStyle=this._createGradient(nt),nt.fill(),v=u.createPattern(H.canvas,"no-repeat");const rt=new DOMMatrix(I);v.setTransform(rt)}else M(u,this._bbox),v=this._createGradient(u);return v}}function a(b,u,x,I,R,v,C,q){const K=u.coords,H=u.colors,nt=b.data,rt=b.width*4;let At;K[x+1]>K[I+1]&&(At=x,x=I,I=At,At=v,v=C,C=At),K[I+1]>K[R+1]&&(At=I,I=R,R=At,At=C,C=q,q=At),K[x+1]>K[I+1]&&(At=x,x=I,I=At,At=v,v=C,C=At);const pt=(K[x]+u.offsetX)*u.scaleX,vt=(K[x+1]+u.offsetY)*u.scaleY,wt=(K[I]+u.offsetX)*u.scaleX,lt=(K[I+1]+u.offsetY)*u.scaleY,N=(K[R]+u.offsetX)*u.scaleX,S=(K[R+1]+u.offsetY)*u.scaleY;if(vt>=S)return;const p=H[v],g=H[v+1],E=H[v+2],D=H[C],L=H[C+1],U=H[C+2],k=H[q],l=H[q+1],y=H[q+2],w=Math.round(vt),T=Math.round(S);let F,W,Y,st,Et,at,ot,ct;for(let ut=w;ut<=T;ut++){if(ut<lt){const Vt=ut<vt?0:(vt-ut)/(vt-lt);F=pt-(pt-wt)*Vt,W=p-(p-D)*Vt,Y=g-(g-L)*Vt,st=E-(E-U)*Vt}else{let Vt;ut>S?Vt=1:lt===S?Vt=0:Vt=(lt-ut)/(lt-S),F=wt-(wt-N)*Vt,W=D-(D-k)*Vt,Y=L-(L-l)*Vt,st=U-(U-y)*Vt}let gt;ut<vt?gt=0:ut>S?gt=1:gt=(vt-ut)/(vt-S),Et=pt-(pt-N)*gt,at=p-(p-k)*gt,ot=g-(g-l)*gt,ct=E-(E-y)*gt;const Ct=Math.round(Math.min(F,Et)),Mt=Math.round(Math.max(F,Et));let Ot=rt*ut+Ct*4;for(let Vt=Ct;Vt<=Mt;Vt++)gt=(F-Vt)/(F-Et),gt<0?gt=0:gt>1&&(gt=1),nt[Ot++]=W-(W-at)*gt|0,nt[Ot++]=Y-(Y-ot)*gt|0,nt[Ot++]=st-(st-ct)*gt|0,nt[Ot++]=255}}function t(b,u,x){const I=u.coords,R=u.colors;let v,C;switch(u.type){case"lattice":const q=u.verticesPerRow,K=Math.floor(I.length/q)-1,H=q-1;for(v=0;v<K;v++){let nt=v*q;for(let rt=0;rt<H;rt++,nt++)a(b,x,I[nt],I[nt+1],I[nt+q],R[nt],R[nt+1],R[nt+q]),a(b,x,I[nt+q+1],I[nt+1],I[nt+q],R[nt+q+1],R[nt+1],R[nt+q])}break;case"triangles":for(v=0,C=I.length;v<C;v+=3)a(b,x,I[v],I[v+1],I[v+2],R[v],R[v+1],R[v+2]);break;default:throw new Error("illegal figure")}}class r extends z{constructor(u){super(),this._coords=u[2],this._colors=u[3],this._figures=u[4],this._bounds=u[5],this._bbox=u[7],this._background=u[8],this.matrix=null}_createMeshCanvas(u,x,I){const q=Math.floor(this._bounds[0]),K=Math.floor(this._bounds[1]),H=Math.ceil(this._bounds[2])-q,nt=Math.ceil(this._bounds[3])-K,rt=Math.min(Math.ceil(Math.abs(H*u[0]*1.1)),3e3),At=Math.min(Math.ceil(Math.abs(nt*u[1]*1.1)),3e3),pt=H/rt,vt=nt/At,wt={coords:this._coords,colors:this._colors,offsetX:-q,offsetY:-K,scaleX:1/pt,scaleY:1/vt},lt=rt+4,N=At+4,S=I.getCanvas("mesh",lt,N,!1),p=S.context,g=p.createImageData(rt,At);if(x){const D=g.data;for(let L=0,U=D.length;L<U;L+=4)D[L]=x[0],D[L+1]=x[1],D[L+2]=x[2],D[L+3]=255}for(const D of this._figures)t(g,D,wt);return p.putImageData(g,2,2),{canvas:S.canvas,offsetX:q-2*pt,offsetY:K-2*vt,scaleX:pt,scaleY:vt}}getPattern(u,x,I,R){M(u,this._bbox);let v;if(R===i.SHADING)v=d.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(u));else if(v=d.Util.singularValueDecompose2dScale(x.baseTransform),this.matrix){const q=d.Util.singularValueDecompose2dScale(this.matrix);v=[v[0]*q[0],v[1]*q[1]]}const C=this._createMeshCanvas(v,R===i.SHADING?null:this._background,x.cachedCanvases);return R!==i.SHADING&&(u.setTransform(...x.baseTransform),this.matrix&&u.transform(...this.matrix)),u.translate(C.offsetX,C.offsetY),u.scale(C.scaleX,C.scaleY),u.createPattern(C.canvas,"no-repeat")}}class f extends z{getPattern(){return"hotpink"}}function h(b){switch(b[0]){case"RadialAxial":return new V(b);case"Mesh":return new r(b);case"Dummy":return new f}throw new Error(`Unknown IR type: ${b[0]}`)}const e={COLORED:1,UNCOLORED:2};class m{static MAX_PATTERN_SIZE=3e3;constructor(u,x,I,R,v){this.operatorList=u[2],this.matrix=u[3]||[1,0,0,1,0,0],this.bbox=u[4],this.xstep=u[5],this.ystep=u[6],this.paintType=u[7],this.tilingType=u[8],this.color=x,this.ctx=I,this.canvasGraphicsFactory=R,this.baseTransform=v}createPatternCanvas(u){const x=this.operatorList,I=this.bbox,R=this.xstep,v=this.ystep,C=this.paintType,q=this.tilingType,K=this.color,H=this.canvasGraphicsFactory;(0,d.info)("TilingType: "+q);const nt=I[0],rt=I[1],At=I[2],pt=I[3],vt=d.Util.singularValueDecompose2dScale(this.matrix),wt=d.Util.singularValueDecompose2dScale(this.baseTransform),lt=[vt[0]*wt[0],vt[1]*wt[1]],N=this.getSizeAndScale(R,this.ctx.canvas.width,lt[0]),S=this.getSizeAndScale(v,this.ctx.canvas.height,lt[1]),p=u.cachedCanvases.getCanvas("pattern",N.size,S.size,!0),g=p.context,E=H.createCanvasGraphics(g);E.groupLevel=u.groupLevel,this.setFillAndStrokeStyleToContext(E,C,K);let D=nt,L=rt,U=At,k=pt;return nt<0&&(D=0,U+=Math.abs(nt)),rt<0&&(L=0,k+=Math.abs(rt)),g.translate(-(N.scale*D),-(S.scale*L)),E.transform(N.scale,0,0,S.scale,0,0),g.save(),this.clipBbox(E,D,L,U,k),E.baseTransform=(0,_.getCurrentTransform)(E.ctx),E.executeOperatorList(x),E.endDrawing(),{canvas:p.canvas,scaleX:N.scale,scaleY:S.scale,offsetX:D,offsetY:L}}getSizeAndScale(u,x,I){u=Math.abs(u);const R=Math.max(m.MAX_PATTERN_SIZE,x);let v=Math.ceil(u*I);return v>=R?v=R:I=v/u,{scale:I,size:v}}clipBbox(u,x,I,R,v){const C=R-x,q=v-I;u.ctx.rect(x,I,C,q),u.current.updateRectMinMax((0,_.getCurrentTransform)(u.ctx),[x,I,R,v]),u.clip(),u.endPath()}setFillAndStrokeStyleToContext(u,x,I){const R=u.ctx,v=u.current;switch(x){case e.COLORED:const C=this.ctx;R.fillStyle=C.fillStyle,R.strokeStyle=C.strokeStyle,v.fillColor=C.fillStyle,v.strokeColor=C.strokeStyle;break;case e.UNCOLORED:const q=d.Util.makeHexColor(I[0],I[1],I[2]);R.fillStyle=q,R.strokeStyle=q,v.fillColor=q,v.strokeColor=q;break;default:throw new d.FormatError(`Unsupported paint type: ${x}`)}}getPattern(u,x,I,R){let v=I;R!==i.SHADING&&(v=d.Util.transform(v,x.baseTransform),this.matrix&&(v=d.Util.transform(v,this.matrix)));const C=this.createPatternCanvas(x);let q=new DOMMatrix(v);q=q.translate(C.offsetX,C.offsetY),q=q.scale(1/C.scaleX,1/C.scaleY);const K=u.createPattern(C.canvas,"repeat");return K.setTransform(q),K}}o.TilingPattern=m}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.convertBlackAndWhiteToRGBA=i,o.convertToRGBA=_,o.grayToRGBA=z;var d=P(1);function _(V){switch(V.kind){case d.ImageKind.GRAYSCALE_1BPP:return i(V);case d.ImageKind.RGB_24BPP:return M(V)}return null}function i({src:V,srcPos:a=0,dest:t,width:r,height:f,nonBlackColor:h=4294967295,inverseDecode:e=!1}){const m=d.FeatureTest.isLittleEndian?4278190080:255,[b,u]=e?[h,m]:[m,h],x=r>>3,I=r&7,R=V.length;t=new Uint32Array(t.buffer);let v=0;for(let C=0;C<f;C++){for(const K=a+x;a<K;a++){const H=a<R?V[a]:255;t[v++]=H&128?u:b,t[v++]=H&64?u:b,t[v++]=H&32?u:b,t[v++]=H&16?u:b,t[v++]=H&8?u:b,t[v++]=H&4?u:b,t[v++]=H&2?u:b,t[v++]=H&1?u:b}if(I===0)continue;const q=a<R?V[a++]:255;for(let K=0;K<I;K++)t[v++]=q&1<<7-K?u:b}return{srcPos:a,destPos:v}}function M({src:V,srcPos:a=0,dest:t,destPos:r=0,width:f,height:h}){let e=0;const m=V.length>>2,b=new Uint32Array(V.buffer,a,m);if(d.FeatureTest.isLittleEndian){for(;e<m-2;e+=3,r+=4){const u=b[e],x=b[e+1],I=b[e+2];t[r]=u|4278190080,t[r+1]=u>>>24|x<<8|4278190080,t[r+2]=x>>>16|I<<16|4278190080,t[r+3]=I>>>8|4278190080}for(let u=e*4,x=V.length;u<x;u+=3)t[r++]=V[u]|V[u+1]<<8|V[u+2]<<16|4278190080}else{for(;e<m-2;e+=3,r+=4){const u=b[e],x=b[e+1],I=b[e+2];t[r]=u|255,t[r+1]=u<<24|x>>>8|255,t[r+2]=x<<16|I>>>16|255,t[r+3]=I<<8|255}for(let u=e*4,x=V.length;u<x;u+=3)t[r++]=V[u]<<24|V[u+1]<<16|V[u+2]<<8|255}return{srcPos:a,destPos:r}}function z(V,a){if(d.FeatureTest.isLittleEndian)for(let t=0,r=V.length;t<r;t++)a[t]=V[t]*65793|4278190080;else for(let t=0,r=V.length;t<r;t++)a[t]=V[t]*16843008|255}}),((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const P=Object.create(null);o.GlobalWorkerOptions=P,P.workerPort=null,P.workerSrc=""}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var d=P(1);const _={DATA:1,ERROR:2},i={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function M(V){switch(V instanceof Error||typeof V=="object"&&V!==null||(0,d.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),V.name){case"AbortException":return new d.AbortException(V.message);case"MissingPDFException":return new d.MissingPDFException(V.message);case"PasswordException":return new d.PasswordException(V.message,V.code);case"UnexpectedResponseException":return new d.UnexpectedResponseException(V.message,V.status);case"UnknownErrorException":return new d.UnknownErrorException(V.message,V.details);default:return new d.UnknownErrorException(V.message,V.toString())}}class z{constructor(a,t,r){this.sourceName=a,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=f=>{const h=f.data;if(h.targetName!==this.sourceName)return;if(h.stream){this.#e(h);return}if(h.callback){const m=h.callbackId,b=this.callbackCapabilities[m];if(!b)throw new Error(`Cannot resolve callback ${m}`);if(delete this.callbackCapabilities[m],h.callback===_.DATA)b.resolve(h.data);else if(h.callback===_.ERROR)b.reject(M(h.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[h.action];if(!e)throw new Error(`Unknown action from worker: ${h.action}`);if(h.callbackId){const m=this.sourceName,b=h.sourceName;new Promise(function(u){u(e(h.data))}).then(function(u){r.postMessage({sourceName:m,targetName:b,callback:_.DATA,callbackId:h.callbackId,data:u})},function(u){r.postMessage({sourceName:m,targetName:b,callback:_.ERROR,callbackId:h.callbackId,reason:M(u)})});return}if(h.streamId){this.#t(h);return}e(h.data)},r.addEventListener("message",this._onComObjOnMessage)}on(a,t){const r=this.actionHandler;if(r[a])throw new Error(`There is already an actionName called "${a}"`);r[a]=t}send(a,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,data:t},r)}sendWithPromise(a,t,r){const f=this.callbackId++,h=new d.PromiseCapability;this.callbackCapabilities[f]=h;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,callbackId:f,data:t},r)}catch(e){h.reject(e)}return h.promise}sendWithStream(a,t,r,f){const h=this.streamId++,e=this.sourceName,m=this.targetName,b=this.comObj;return new ReadableStream({start:u=>{const x=new d.PromiseCapability;return this.streamControllers[h]={controller:u,startCall:x,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:e,targetName:m,action:a,streamId:h,data:t,desiredSize:u.desiredSize},f),x.promise},pull:u=>{const x=new d.PromiseCapability;return this.streamControllers[h].pullCall=x,b.postMessage({sourceName:e,targetName:m,stream:i.PULL,streamId:h,desiredSize:u.desiredSize}),x.promise},cancel:u=>{(0,d.assert)(u instanceof Error,"cancel must have a valid reason");const x=new d.PromiseCapability;return this.streamControllers[h].cancelCall=x,this.streamControllers[h].isClosed=!0,b.postMessage({sourceName:e,targetName:m,stream:i.CANCEL,streamId:h,reason:M(u)}),x.promise}},r)}#t(a){const t=a.streamId,r=this.sourceName,f=a.sourceName,h=this.comObj,e=this,m=this.actionHandler[a.action],b={enqueue(u,x=1,I){if(this.isCancelled)return;const R=this.desiredSize;this.desiredSize-=x,R>0&&this.desiredSize<=0&&(this.sinkCapability=new d.PromiseCapability,this.ready=this.sinkCapability.promise),h.postMessage({sourceName:r,targetName:f,stream:i.ENQUEUE,streamId:t,chunk:u},I)},close(){this.isCancelled||(this.isCancelled=!0,h.postMessage({sourceName:r,targetName:f,stream:i.CLOSE,streamId:t}),delete e.streamSinks[t])},error(u){(0,d.assert)(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,h.postMessage({sourceName:r,targetName:f,stream:i.ERROR,streamId:t,reason:M(u)}))},sinkCapability:new d.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:a.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[t]=b,new Promise(function(u){u(m(a.data,b))}).then(function(){h.postMessage({sourceName:r,targetName:f,stream:i.START_COMPLETE,streamId:t,success:!0})},function(u){h.postMessage({sourceName:r,targetName:f,stream:i.START_COMPLETE,streamId:t,reason:M(u)})})}#e(a){const t=a.streamId,r=this.sourceName,f=a.sourceName,h=this.comObj,e=this.streamControllers[t],m=this.streamSinks[t];switch(a.stream){case i.START_COMPLETE:a.success?e.startCall.resolve():e.startCall.reject(M(a.reason));break;case i.PULL_COMPLETE:a.success?e.pullCall.resolve():e.pullCall.reject(M(a.reason));break;case i.PULL:if(!m){h.postMessage({sourceName:r,targetName:f,stream:i.PULL_COMPLETE,streamId:t,success:!0});break}m.desiredSize<=0&&a.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=a.desiredSize,new Promise(function(b){b(m.onPull?.())}).then(function(){h.postMessage({sourceName:r,targetName:f,stream:i.PULL_COMPLETE,streamId:t,success:!0})},function(b){h.postMessage({sourceName:r,targetName:f,stream:i.PULL_COMPLETE,streamId:t,reason:M(b)})});break;case i.ENQUEUE:if((0,d.assert)(e,"enqueue should have stream controller"),e.isClosed)break;e.controller.enqueue(a.chunk);break;case i.CLOSE:if((0,d.assert)(e,"close should have stream controller"),e.isClosed)break;e.isClosed=!0,e.controller.close(),this.#n(e,t);break;case i.ERROR:(0,d.assert)(e,"error should have stream controller"),e.controller.error(M(a.reason)),this.#n(e,t);break;case i.CANCEL_COMPLETE:a.success?e.cancelCall.resolve():e.cancelCall.reject(M(a.reason)),this.#n(e,t);break;case i.CANCEL:if(!m)break;new Promise(function(b){b(m.onCancel?.(M(a.reason)))}).then(function(){h.postMessage({sourceName:r,targetName:f,stream:i.CANCEL_COMPLETE,streamId:t,success:!0})},function(b){h.postMessage({sourceName:r,targetName:f,stream:i.CANCEL_COMPLETE,streamId:t,reason:M(b)})}),m.sinkCapability.reject(M(a.reason)),m.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#n(a,t){await Promise.allSettled([a.startCall?.promise,a.pullCall?.promise,a.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}o.MessageHandler=z}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var d=P(1);class _{#t;#e;constructor({parsedData:M,rawData:z}){this.#t=M,this.#e=z}getRaw(){return this.#e}get(M){return this.#t.get(M)??null}getAll(){return(0,d.objectFromMap)(this.#t)}has(M){return this.#t.has(M)}}o.Metadata=_}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var d=P(1),_=P(8);const i=Symbol("INTERNAL");class M{#t=!0;constructor(a,t){this.name=a,this.intent=t}get visible(){return this.#t}_setVisible(a,t){a!==i&&(0,d.unreachable)("Internal method `_setVisible` called."),this.#t=t}}class z{#t=null;#e=new Map;#n=null;#i=null;constructor(a){if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,this.#i=a.order;for(const t of a.groups)this.#e.set(t.id,new M(t.name,t.intent));if(a.baseState==="OFF")for(const t of this.#e.values())t._setVisible(i,!1);for(const t of a.on)this.#e.get(t)._setVisible(i,!0);for(const t of a.off)this.#e.get(t)._setVisible(i,!1);this.#n=this.getHash()}}#o(a){const t=a.length;if(t<2)return!0;const r=a[0];for(let f=1;f<t;f++){const h=a[f];let e;if(Array.isArray(h))e=this.#o(h);else if(this.#e.has(h))e=this.#e.get(h).visible;else return(0,d.warn)(`Optional content group not found: ${h}`),!0;switch(r){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return r==="And"}isVisible(a){if(this.#e.size===0)return!0;if(!a)return(0,d.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return this.#e.has(a.id)?this.#e.get(a.id).visible:((0,d.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return this.#o(a.expression);if(!a.policy||a.policy==="AnyOn"){for(const t of a.ids){if(!this.#e.has(t))return(0,d.warn)(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const t of a.ids){if(!this.#e.has(t))return(0,d.warn)(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const t of a.ids){if(!this.#e.has(t))return(0,d.warn)(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const t of a.ids){if(!this.#e.has(t))return(0,d.warn)(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!1}return!0}return(0,d.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,d.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,t=!0){if(!this.#e.has(a)){(0,d.warn)(`Optional content group not found: ${a}`);return}this.#e.get(a)._setVisible(i,!!t),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,d.objectFromMap)(this.#e):null}getGroup(a){return this.#e.get(a)||null}getHash(){if(this.#t!==null)return this.#t;const a=new _.MurmurHash3_64;for(const[t,r]of this.#e)a.update(`${t}:${r.visible}`);return this.#t=a.hexdigest()}}o.OptionalContentConfig=z}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var d=P(1),_=P(6);class i{constructor({length:a,initialData:t,progressiveDone:r=!1,contentDispositionFilename:f=null,disableRange:h=!1,disableStream:e=!1},m){if((0,d.assert)(m,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=f,t?.length>0){const b=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=m,this._isStreamingSupported=!e,this._isRangeSupported=!h,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,u)=>{this._onReceiveData({begin:b,chunk:u})}),this._pdfDataRangeTransport.addProgressListener((b,u)=>{this._onProgress({loaded:b,total:u})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:a,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(a===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const f=this._rangeReaders.some(function(h){return h._begin!==a?!1:(h._enqueue(r),!0)});(0,d.assert)(f,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(a){a.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:a.loaded}):this._fullRequestReader?.onProgress?.({loaded:a.loaded,total:a.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(a){const t=this._rangeReaders.indexOf(a);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,d.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const a=this._queuedChunks;return this._queuedChunks=null,new M(this,a,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(a,t){if(t<=this._progressiveDataLength)return null;const r=new z(this,a,t);return this._pdfDataRangeTransport.requestDataRange(a,t),this._rangeReaders.push(r),r}cancelAllRequests(a){this._fullRequestReader?.cancel(a);for(const t of this._rangeReaders.slice(0))t.cancel(a);this._pdfDataRangeTransport.abort()}}o.PDFDataTransportStream=i;class M{constructor(a,t,r=!1,f=null){this._stream=a,this._done=r||!1,this._filename=(0,_.isPdfFile)(f)?f:null,this._queuedChunks=t||[],this._loaded=0;for(const h of this._queuedChunks)this._loaded+=h.byteLength;this._requests=[],this._headersReady=Promise.resolve(),a._fullRequestReader=this,this.onProgress=null}_enqueue(a){this._done||(this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunks.push(a),this._loaded+=a.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const a=new d.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class z{constructor(a,t,r){this._stream=a,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(a){if(!this._done){if(this._requests.length===0)this._queuedChunk=a;else{this._requests.shift().resolve({value:a,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const a=new d.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var d=P(1),_=P(20);function i(r,f,h){return{method:"GET",headers:r,signal:h.signal,mode:"cors",credentials:f?"include":"same-origin",redirect:"follow"}}function M(r){const f=new Headers;for(const h in r){const e=r[h];e!==void 0&&f.append(h,e)}return f}function z(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:((0,d.warn)(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class V{constructor(f){this.source=f,this.isHttp=/^https?:/i.test(f.url),this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a(this),this._fullRequestReader}getRangeReader(f,h){if(h<=this._progressiveDataLength)return null;const e=new t(this,f,h);return this._rangeRequestReaders.push(e),e}cancelAllRequests(f){this._fullRequestReader?.cancel(f);for(const h of this._rangeRequestReaders.slice(0))h.cancel(f)}}o.PDFFetchStream=V;class a{constructor(f){this._stream=f,this._reader=null,this._loaded=0,this._filename=null;const h=f.source;this._withCredentials=h.withCredentials||!1,this._contentLength=h.length,this._headersCapability=new d.PromiseCapability,this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._headers=M(this._stream.httpHeaders);const e=h.url;fetch(e,i(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,_.validateResponseStatus)(m.status))throw(0,_.createResponseStatusError)(m.status,e);this._reader=m.body.getReader(),this._headersCapability.resolve();const b=I=>m.headers.get(I),{allowRangeRequests:u,suggestedLength:x}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=x||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new d.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:f,done:h}=await this._reader.read();return h?{value:f,done:h}:(this._loaded+=f.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:z(f),done:!1})}cancel(f){this._reader?.cancel(f),this._abortController.abort()}}class t{constructor(f,h,e){this._stream=f,this._reader=null,this._loaded=0;const m=f.source;this._withCredentials=m.withCredentials||!1,this._readCapability=new d.PromiseCapability,this._isStreamingSupported=!m.disableStream,this._abortController=new AbortController,this._headers=M(this._stream.httpHeaders),this._headers.append("Range",`bytes=${h}-${e-1}`);const b=m.url;fetch(b,i(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,_.validateResponseStatus)(u.status))throw(0,_.createResponseStatusError)(u.status,b);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:f,done:h}=await this._reader.read();return h?{value:f,done:h}:(this._loaded+=f.byteLength,this.onProgress?.({loaded:this._loaded}),{value:z(f),done:!1})}cancel(f){this._reader?.cancel(f),this._abortController.abort()}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=V,o.extractFilenameFromHeader=z,o.validateRangeRequestCapabilities=M,o.validateResponseStatus=a;var d=P(1),_=P(21),i=P(6);function M({getResponseHeader:t,isHttp:r,rangeChunkSize:f,disableRange:h}){const e={allowRangeRequests:!1,suggestedLength:void 0},m=parseInt(t("Content-Length"),10);return!Number.isInteger(m)||(e.suggestedLength=m,m<=2*f)||h||!r||t("Accept-Ranges")!=="bytes"||(t("Content-Encoding")||"identity")!=="identity"||(e.allowRangeRequests=!0),e}function z(t){const r=t("Content-Disposition");if(r){let f=(0,_.getFilenameFromContentDispositionHeader)(r);if(f.includes("%"))try{f=decodeURIComponent(f)}catch{}if((0,i.isPdfFile)(f))return f}return null}function V(t,r){return t===404||t===0&&r.startsWith("file:")?new d.MissingPDFException('Missing PDF "'+r+'".'):new d.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${r}".`,t)}function a(t){return t===200||t===206}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=_;var d=P(1);function _(i){let M=!0,z=V("filename\\*","i").exec(i);if(z){z=z[1];let m=f(z);return m=unescape(m),m=h(m),m=e(m),t(m)}if(z=r(i),z){const m=e(z);return t(m)}if(z=V("filename","i").exec(i),z){z=z[1];let m=f(z);return m=e(m),t(m)}function V(m,b){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function a(m,b){if(m){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const u=new TextDecoder(m,{fatal:!0}),x=(0,d.stringToBytes)(b);b=u.decode(x),M=!1}catch{}}return b}function t(m){return M&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),M&&(m=a("iso-8859-1",m))),m}function r(m){const b=[];let u;const x=V("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=x.exec(m))!==null;){let[,R,v,C]=u;if(R=parseInt(R,10),R in b){if(R===0)break;continue}b[R]=[v,C]}const I=[];for(let R=0;R<b.length&&R in b;++R){let[v,C]=b[R];C=f(C),v&&(C=unescape(C),R===0&&(C=h(C))),I.push(C)}return I.join("")}function f(m){if(m.startsWith('"')){const b=m.slice(1).split('\\"');for(let u=0;u<b.length;++u){const x=b[u].indexOf('"');x!==-1&&(b[u]=b[u].slice(0,x),b.length=u+1),b[u]=b[u].replaceAll(/\\(.)/g,"$1")}m=b.join('"')}return m}function h(m){const b=m.indexOf("'");if(b===-1)return m;const u=m.slice(0,b),I=m.slice(b+1).replace(/^[^']*'/,"");return a(u,I)}function e(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,u,x,I){if(x==="q"||x==="Q")return I=I.replaceAll("_"," "),I=I.replaceAll(/=([0-9a-fA-F]{2})/g,function(R,v){return String.fromCharCode(parseInt(v,16))}),a(u,I);try{I=atob(I)}catch{}return a(u,I)})}return""}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var d=P(1),_=P(20);const i=200,M=206;function z(f){const h=f.response;return typeof h!="string"?h:(0,d.stringToBytes)(h).buffer}class V{constructor(h,e={}){this.url=h,this.isHttp=/^https?:/i.test(h),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(h,e,m){const b={begin:h,end:e};for(const u in m)b[u]=m[u];return this.request(b)}requestFull(h){return this.request(h)}request(h){const e=new XMLHttpRequest,m=this.currXhrId++,b=this.pendingRequests[m]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const u in this.httpHeaders){const x=this.httpHeaders[u];x!==void 0&&e.setRequestHeader(u,x)}return this.isHttp&&"begin"in h&&"end"in h?(e.setRequestHeader("Range",`bytes=${h.begin}-${h.end-1}`),b.expectedStatus=M):b.expectedStatus=i,e.responseType="arraybuffer",h.onError&&(e.onerror=function(u){h.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,m),e.onprogress=this.onProgress.bind(this,m),b.onHeadersReceived=h.onHeadersReceived,b.onDone=h.onDone,b.onError=h.onError,b.onProgress=h.onProgress,e.send(null),m}onProgress(h,e){const m=this.pendingRequests[h];m&&m.onProgress?.(e)}onStateChange(h,e){const m=this.pendingRequests[h];if(!m)return;const b=m.xhr;if(b.readyState>=2&&m.onHeadersReceived&&(m.onHeadersReceived(),delete m.onHeadersReceived),b.readyState!==4||!(h in this.pendingRequests))return;if(delete this.pendingRequests[h],b.status===0&&this.isHttp){m.onError?.(b.status);return}const u=b.status||i;if(!(u===i&&m.expectedStatus===M)&&u!==m.expectedStatus){m.onError?.(b.status);return}const I=z(b);if(u===M){const R=b.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(R);m.onDone({begin:parseInt(v[1],10),chunk:I})}else I?m.onDone({begin:0,chunk:I}):m.onError?.(b.status)}getRequestXhr(h){return this.pendingRequests[h].xhr}isPendingRequest(h){return h in this.pendingRequests}abortRequest(h){const e=this.pendingRequests[h].xhr;delete this.pendingRequests[h],e.abort()}}class a{constructor(h){this._source=h,this._manager=new V(h.url,{httpHeaders:h.httpHeaders,withCredentials:h.withCredentials}),this._rangeChunkSize=h.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(h){const e=this._rangeRequestReaders.indexOf(h);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new t(this._manager,this._source),this._fullRequestReader}getRangeReader(h,e){const m=new r(this._manager,h,e);return m.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(m),m}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(const e of this._rangeRequestReaders.slice(0))e.cancel(h)}}o.PDFNetworkStream=a;class t{constructor(h,e){this._manager=h;const m={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=h.requestFull(m),this._headersReceivedCapability=new d.PromiseCapability,this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const h=this._fullRequestId,e=this._manager.getRequestXhr(h),m=x=>e.getResponseHeader(x),{allowRangeRequests:b,suggestedLength:u}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(m),this._isRangeSupported&&this._manager.abortRequest(h),this._headersReceivedCapability.resolve()}_onDone(h){if(h&&(this._requests.length>0?this._requests.shift().resolve({value:h.chunk,done:!1}):this._cachedChunks.push(h.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(h){this._storedError=(0,_.createResponseStatusError)(h,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(h){this.onProgress?.({loaded:h.loaded,total:h.lengthComputable?h.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=new d.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0,this._headersReceivedCapability.reject(h);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class r{constructor(h,e,m){this._manager=h;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._requestId=h.requestRange(e,m,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(h){const e=h.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(h){this._storedError=(0,_.createResponseStatusError)(h,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(h){this.isStreamingSupported||this.onProgress?.({loaded:h.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const h=new d.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var d=P(1),_=P(20);const i=/^file:\/\/\/[a-zA-Z]:\//;function M(m){const b=require$$5,u=b.parse(m);return u.protocol==="file:"||u.host?u:/^[a-z]:[/\\]/i.test(m)?b.parse(`file:///${m}`):(u.host||(u.protocol="file:"),u)}class z{constructor(b){this.source=b,this.url=M(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new h(this):new r(this),this._fullRequestReader}getRangeReader(b,u){if(u<=this._progressiveDataLength)return null;const x=this.isFsUrl?new e(this,b,u):new f(this,b,u);return this._rangeRequestReaders.push(x),x}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(const u of this._rangeRequestReaders.slice(0))u.cancel(b)}}o.PDFNodeStream=z;class V{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const u=b.source;this._contentLength=u.length,this._loaded=0,this._filename=null,this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._readableStream=null,this._readCapability=new d.PromiseCapability,this._headersCapability=new d.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=b.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",u=>{this._error(u)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new d.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class a{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new d.PromiseCapability;const u=b.source;this._isStreamingSupported=!u.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=b.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",u=>{this._error(u)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function t(m,b){return{protocol:m.protocol,auth:m.auth,host:m.hostname,port:m.port,path:m.path,method:"GET",headers:b}}class r extends V{constructor(b){super(b);const u=x=>{if(x.statusCode===404){const C=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C,this._headersCapability.reject(C);return}this._headersCapability.resolve(),this._setReadableStream(x);const I=C=>this._readableStream.headers[C.toLowerCase()],{allowRangeRequests:R,suggestedLength:v}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:I,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=R,this._contentLength=v||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(I)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(t(this._url,b.httpHeaders),u)}else{const x=require$$5;this._request=x.request(t(this._url,b.httpHeaders),u)}this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class f extends a{constructor(b,u,x){super(b),this._httpHeaders={};for(const R in b.httpHeaders){const v=b.httpHeaders[R];v!==void 0&&(this._httpHeaders[R]=v)}this._httpHeaders.Range=`bytes=${u}-${x-1}`;const I=R=>{if(R.statusCode===404){const v=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=v;return}this._setReadableStream(R)};if(this._request=null,this._url.protocol==="http:"){const R=require$$5;this._request=R.request(t(this._url,this._httpHeaders),I)}else{const R=require$$5;this._request=R.request(t(this._url,this._httpHeaders),I)}this._request.on("error",R=>{this._storedError=R}),this._request.end()}}class h extends V{constructor(b){super(b);let u=decodeURIComponent(this._url.path);i.test(this._url.href)&&(u=u.replace(/^\//,""));const x=require$$5;x.lstat(u,(I,R)=>{if(I){I.code==="ENOENT"&&(I=new d.MissingPDFException(`Missing PDF "${u}".`)),this._storedError=I,this._headersCapability.reject(I);return}this._contentLength=R.size,this._setReadableStream(x.createReadStream(u)),this._headersCapability.resolve()})}}class e extends a{constructor(b,u,x){super(b);let I=decodeURIComponent(this._url.path);i.test(this._url.href)&&(I=I.replace(/^\//,""));const R=require$$5;this._setReadableStream(R.createReadStream(I,{start:u,end:x-1}))}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var d=P(6),_=P(1);const i={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},M="http://www.w3.org/XML/1998/namespace",z="http://www.w3.org/1999/xlink",V=["butt","round","square"],a=["miter","round","bevel"],t=function(R,v="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([R],{type:v}));const q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let K=`data:${v};base64,`;for(let H=0,nt=R.length;H<nt;H+=3){const rt=R[H]&255,At=R[H+1]&255,pt=R[H+2]&255,vt=rt>>2,wt=(rt&3)<<4|At>>4,lt=H+1<nt?(At&15)<<2|pt>>6:64,N=H+2<nt?pt&63:64;K+=q[vt]+q[wt]+q[lt]+q[N]}return K},r=(function(){const R=new Uint8Array([137,80,78,71,13,10,26,10]),v=12,C=new Int32Array(256);for(let pt=0;pt<256;pt++){let vt=pt;for(let wt=0;wt<8;wt++)vt=vt&1?3988292384^vt>>1&2147483647:vt>>1&2147483647;C[pt]=vt}function q(pt,vt,wt){let lt=-1;for(let N=vt;N<wt;N++){const S=(lt^pt[N])&255,p=C[S];lt=lt>>>8^p}return lt^-1}function K(pt,vt,wt,lt){let N=lt;const S=vt.length;wt[N]=S>>24&255,wt[N+1]=S>>16&255,wt[N+2]=S>>8&255,wt[N+3]=S&255,N+=4,wt[N]=pt.charCodeAt(0)&255,wt[N+1]=pt.charCodeAt(1)&255,wt[N+2]=pt.charCodeAt(2)&255,wt[N+3]=pt.charCodeAt(3)&255,N+=4,wt.set(vt,N),N+=vt.length;const p=q(wt,lt+4,N);wt[N]=p>>24&255,wt[N+1]=p>>16&255,wt[N+2]=p>>8&255,wt[N+3]=p&255}function H(pt,vt,wt){let lt=1,N=0;for(let S=vt;S<wt;++S)lt=(lt+(pt[S]&255))%65521,N=(N+lt)%65521;return N<<16|lt}function nt(pt){if(!_.isNodeJS)return rt(pt);try{const vt=parseInt(process.versions.node)>=8?pt:Buffer.from(pt),wt=require$$5.deflateSync(vt,{level:9});return wt instanceof Uint8Array?wt:new Uint8Array(wt)}catch(vt){(0,_.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+vt)}return rt(pt)}function rt(pt){let vt=pt.length;const wt=65535,lt=Math.ceil(vt/wt),N=new Uint8Array(2+vt+lt*5+4);let S=0;N[S++]=120,N[S++]=156;let p=0;for(;vt>wt;)N[S++]=0,N[S++]=255,N[S++]=255,N[S++]=0,N[S++]=0,N.set(pt.subarray(p,p+wt),S),S+=wt,p+=wt,vt-=wt;N[S++]=1,N[S++]=vt&255,N[S++]=vt>>8&255,N[S++]=~vt&65535&255,N[S++]=(~vt&65535)>>8&255,N.set(pt.subarray(p),S),S+=pt.length-p;const g=H(pt,0,pt.length);return N[S++]=g>>24&255,N[S++]=g>>16&255,N[S++]=g>>8&255,N[S++]=g&255,N}function At(pt,vt,wt,lt){const N=pt.width,S=pt.height;let p,g,E;const D=pt.data;switch(vt){case _.ImageKind.GRAYSCALE_1BPP:g=0,p=1,E=N+7>>3;break;case _.ImageKind.RGB_24BPP:g=2,p=8,E=N*3;break;case _.ImageKind.RGBA_32BPP:g=6,p=8,E=N*4;break;default:throw new Error("invalid format")}const L=new Uint8Array((1+E)*S);let U=0,k=0;for(let W=0;W<S;++W)L[U++]=0,L.set(D.subarray(k,k+E),U),k+=E,U+=E;if(vt===_.ImageKind.GRAYSCALE_1BPP&&lt){U=0;for(let W=0;W<S;W++){U++;for(let Y=0;Y<E;Y++)L[U++]^=255}}const l=new Uint8Array([N>>24&255,N>>16&255,N>>8&255,N&255,S>>24&255,S>>16&255,S>>8&255,S&255,p,g,0,0,0]),y=nt(L),w=R.length+v*3+l.length+y.length,T=new Uint8Array(w);let F=0;return T.set(R,F),F+=R.length,K("IHDR",l,T,F),F+=v+l.length,K("IDATA",y,T,F),F+=v+y.length,K("IEND",new Uint8Array(0),T,F),t(T,"image/png",wt)}return function(vt,wt,lt){const N=vt.kind===void 0?_.ImageKind.GRAYSCALE_1BPP:vt.kind;return At(vt,N,wt,lt)}})();class f{constructor(){this.fontSizeScale=1,this.fontWeight=i.fontWeight,this.fontSize=0,this.textMatrix=_.IDENTITY_MATRIX,this.fontMatrix=_.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=i.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(v,C){this.x=v,this.y=C}}function h(R){let v=[];const C=[];for(const q of R){if(q.fn==="save"){v.push({fnId:92,fn:"group",items:[]}),C.push(v),v=v.at(-1).items;continue}q.fn==="restore"?v=C.pop():v.push(q)}return v}function e(R){if(Number.isInteger(R))return R.toString();const v=R.toFixed(10);let C=v.length-1;if(v[C]!=="0")return v;do C--;while(v[C]==="0");return v.substring(0,v[C]==="."?C:C+1)}function m(R){if(R[4]===0&&R[5]===0){if(R[1]===0&&R[2]===0)return R[0]===1&&R[3]===1?"":`scale(${e(R[0])} ${e(R[3])})`;if(R[0]===R[3]&&R[1]===-R[2]){const v=Math.acos(R[0])*180/Math.PI;return`rotate(${e(v)})`}}else if(R[0]===1&&R[1]===0&&R[2]===0&&R[3]===1)return`translate(${e(R[4])} ${e(R[5])})`;return`matrix(${e(R[0])} ${e(R[1])} ${e(R[2])} ${e(R[3])} ${e(R[4])} ${e(R[5])})`}let b=0,u=0,x=0;class I{constructor(v,C,q=!1){(0,d.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new d.DOMSVGFactory,this.current=new f,this.transformMatrix=_.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=v,this.objs=C,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!q,this._operatorIdMapping=[];for(const K in _.OPS)this._operatorIdMapping[_.OPS[K]]=K}getObject(v,C=null){return typeof v=="string"?v.startsWith("g_")?this.commonObjs.get(v):this.objs.get(v):C}save(){this.transformStack.push(this.transformMatrix);const v=this.current;this.extraStack.push(v),this.current=v.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(v){this.save(),this.executeOpTree(v),this.restore()}loadDependencies(v){const C=v.fnArray,q=v.argsArray;for(let K=0,H=C.length;K<H;K++)if(C[K]===_.OPS.dependency)for(const nt of q[K]){const rt=nt.startsWith("g_")?this.commonObjs:this.objs,At=new Promise(pt=>{rt.get(nt,pt)});this.current.dependencies.push(At)}return Promise.all(this.current.dependencies)}transform(v,C,q,K,H,nt){const rt=[v,C,q,K,H,nt];this.transformMatrix=_.Util.transform(this.transformMatrix,rt),this.tgrp=null}getSVG(v,C){this.viewport=C;const q=this._initialize(C);return this.loadDependencies(v).then(()=>(this.transformMatrix=_.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(v)),q))}convertOpList(v){const C=this._operatorIdMapping,q=v.argsArray,K=v.fnArray,H=[];for(let nt=0,rt=K.length;nt<rt;nt++){const At=K[nt];H.push({fnId:At,fn:C[At],args:q[nt]})}return h(H)}executeOpTree(v){for(const C of v){const q=C.fn,K=C.fnId,H=C.args;switch(K|0){case _.OPS.beginText:this.beginText();break;case _.OPS.dependency:break;case _.OPS.setLeading:this.setLeading(H);break;case _.OPS.setLeadingMoveText:this.setLeadingMoveText(H[0],H[1]);break;case _.OPS.setFont:this.setFont(H);break;case _.OPS.showText:this.showText(H[0]);break;case _.OPS.showSpacedText:this.showText(H[0]);break;case _.OPS.endText:this.endText();break;case _.OPS.moveText:this.moveText(H[0],H[1]);break;case _.OPS.setCharSpacing:this.setCharSpacing(H[0]);break;case _.OPS.setWordSpacing:this.setWordSpacing(H[0]);break;case _.OPS.setHScale:this.setHScale(H[0]);break;case _.OPS.setTextMatrix:this.setTextMatrix(H[0],H[1],H[2],H[3],H[4],H[5]);break;case _.OPS.setTextRise:this.setTextRise(H[0]);break;case _.OPS.setTextRenderingMode:this.setTextRenderingMode(H[0]);break;case _.OPS.setLineWidth:this.setLineWidth(H[0]);break;case _.OPS.setLineJoin:this.setLineJoin(H[0]);break;case _.OPS.setLineCap:this.setLineCap(H[0]);break;case _.OPS.setMiterLimit:this.setMiterLimit(H[0]);break;case _.OPS.setFillRGBColor:this.setFillRGBColor(H[0],H[1],H[2]);break;case _.OPS.setStrokeRGBColor:this.setStrokeRGBColor(H[0],H[1],H[2]);break;case _.OPS.setStrokeColorN:this.setStrokeColorN(H);break;case _.OPS.setFillColorN:this.setFillColorN(H);break;case _.OPS.shadingFill:this.shadingFill(H[0]);break;case _.OPS.setDash:this.setDash(H[0],H[1]);break;case _.OPS.setRenderingIntent:this.setRenderingIntent(H[0]);break;case _.OPS.setFlatness:this.setFlatness(H[0]);break;case _.OPS.setGState:this.setGState(H[0]);break;case _.OPS.fill:this.fill();break;case _.OPS.eoFill:this.eoFill();break;case _.OPS.stroke:this.stroke();break;case _.OPS.fillStroke:this.fillStroke();break;case _.OPS.eoFillStroke:this.eoFillStroke();break;case _.OPS.clip:this.clip("nonzero");break;case _.OPS.eoClip:this.clip("evenodd");break;case _.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _.OPS.paintImageXObject:this.paintImageXObject(H[0]);break;case _.OPS.paintInlineImageXObject:this.paintInlineImageXObject(H[0]);break;case _.OPS.paintImageMaskXObject:this.paintImageMaskXObject(H[0]);break;case _.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(H[0],H[1]);break;case _.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _.OPS.closePath:this.closePath();break;case _.OPS.closeStroke:this.closeStroke();break;case _.OPS.closeFillStroke:this.closeFillStroke();break;case _.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _.OPS.nextLine:this.nextLine();break;case _.OPS.transform:this.transform(H[0],H[1],H[2],H[3],H[4],H[5]);break;case _.OPS.constructPath:this.constructPath(H[0],H[1]);break;case _.OPS.endPath:this.endPath();break;case 92:this.group(C.items);break;default:(0,_.warn)(`Unimplemented operator ${q}`);break}}}setWordSpacing(v){this.current.wordSpacing=v}setCharSpacing(v){this.current.charSpacing=v}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(v,C,q,K,H,nt){const rt=this.current;rt.textMatrix=rt.lineMatrix=[v,C,q,K,H,nt],rt.textMatrixScale=Math.hypot(v,C),rt.x=rt.lineX=0,rt.y=rt.lineY=0,rt.xcoords=[],rt.ycoords=[],rt.tspan=this.svgFactory.createElement("svg:tspan"),rt.tspan.setAttributeNS(null,"font-family",rt.fontFamily),rt.tspan.setAttributeNS(null,"font-size",`${e(rt.fontSize)}px`),rt.tspan.setAttributeNS(null,"y",e(-rt.y)),rt.txtElement=this.svgFactory.createElement("svg:text"),rt.txtElement.append(rt.tspan)}beginText(){const v=this.current;v.x=v.lineX=0,v.y=v.lineY=0,v.textMatrix=_.IDENTITY_MATRIX,v.lineMatrix=_.IDENTITY_MATRIX,v.textMatrixScale=1,v.tspan=this.svgFactory.createElement("svg:tspan"),v.txtElement=this.svgFactory.createElement("svg:text"),v.txtgrp=this.svgFactory.createElement("svg:g"),v.xcoords=[],v.ycoords=[]}moveText(v,C){const q=this.current;q.x=q.lineX+=v,q.y=q.lineY+=C,q.xcoords=[],q.ycoords=[],q.tspan=this.svgFactory.createElement("svg:tspan"),q.tspan.setAttributeNS(null,"font-family",q.fontFamily),q.tspan.setAttributeNS(null,"font-size",`${e(q.fontSize)}px`),q.tspan.setAttributeNS(null,"y",e(-q.y))}showText(v){const C=this.current,q=C.font,K=C.fontSize;if(K===0)return;const H=C.fontSizeScale,nt=C.charSpacing,rt=C.wordSpacing,At=C.fontDirection,pt=C.textHScale*At,vt=q.vertical,wt=vt?1:-1,lt=q.defaultVMetrics,N=K*C.fontMatrix[0];let S=0;for(const E of v){if(E===null){S+=At*rt;continue}else if(typeof E=="number"){S+=wt*E*K/1e3;continue}const D=(E.isSpace?rt:0)+nt,L=E.fontChar;let U,k,l=E.width;if(vt){let w;const T=E.vmetric||lt;w=E.vmetric?T[1]:l*.5,w=-w*N;const F=T[2]*N;l=T?-T[0]:l,U=w/H,k=(S+F)/H}else U=S/H,k=0;(E.isInFont||q.missingFile)&&(C.xcoords.push(C.x+U),vt&&C.ycoords.push(-C.y+k),C.tspan.textContent+=L);const y=vt?l*N-D*At:l*N+D*At;S+=y}C.tspan.setAttributeNS(null,"x",C.xcoords.map(e).join(" ")),vt?C.tspan.setAttributeNS(null,"y",C.ycoords.map(e).join(" ")):C.tspan.setAttributeNS(null,"y",e(-C.y)),vt?C.y-=S:C.x+=S*pt,C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${e(C.fontSize)}px`),C.fontStyle!==i.fontStyle&&C.tspan.setAttributeNS(null,"font-style",C.fontStyle),C.fontWeight!==i.fontWeight&&C.tspan.setAttributeNS(null,"font-weight",C.fontWeight);const p=C.textRenderingMode&_.TextRenderingMode.FILL_STROKE_MASK;if(p===_.TextRenderingMode.FILL||p===_.TextRenderingMode.FILL_STROKE?(C.fillColor!==i.fillColor&&C.tspan.setAttributeNS(null,"fill",C.fillColor),C.fillAlpha<1&&C.tspan.setAttributeNS(null,"fill-opacity",C.fillAlpha)):C.textRenderingMode===_.TextRenderingMode.ADD_TO_PATH?C.tspan.setAttributeNS(null,"fill","transparent"):C.tspan.setAttributeNS(null,"fill","none"),p===_.TextRenderingMode.STROKE||p===_.TextRenderingMode.FILL_STROKE){const E=1/(C.textMatrixScale||1);this._setStrokeAttributes(C.tspan,E)}let g=C.textMatrix;C.textRise!==0&&(g=g.slice(),g[5]+=C.textRise),C.txtElement.setAttributeNS(null,"transform",`${m(g)} scale(${e(pt)}, -1)`),C.txtElement.setAttributeNS(M,"xml:space","preserve"),C.txtElement.append(C.tspan),C.txtgrp.append(C.txtElement),this._ensureTransformGroup().append(C.txtElement)}setLeadingMoveText(v,C){this.setLeading(-C),this.moveText(v,C)}addFontStyle(v){if(!v.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const C=t(v.data,v.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${v.loadedName}"; src: url(${C}); }
`}setFont(v){const C=this.current,q=this.commonObjs.get(v[0]);let K=v[1];C.font=q,this.embedFonts&&!q.missingFile&&!this.embeddedFonts[q.loadedName]&&(this.addFontStyle(q),this.embeddedFonts[q.loadedName]=q),C.fontMatrix=q.fontMatrix||_.FONT_IDENTITY_MATRIX;let H="normal";q.black?H="900":q.bold&&(H="bold");const nt=q.italic?"italic":"normal";K<0?(K=-K,C.fontDirection=-1):C.fontDirection=1,C.fontSize=K,C.fontFamily=q.loadedName,C.fontWeight=H,C.fontStyle=nt,C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"y",e(-C.y)),C.xcoords=[],C.ycoords=[]}endText(){const v=this.current;v.textRenderingMode&_.TextRenderingMode.ADD_TO_PATH_FLAG&&v.txtElement?.hasChildNodes()&&(v.element=v.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(v){v>0&&(this.current.lineWidth=v)}setLineCap(v){this.current.lineCap=V[v]}setLineJoin(v){this.current.lineJoin=a[v]}setMiterLimit(v){this.current.miterLimit=v}setStrokeAlpha(v){this.current.strokeAlpha=v}setStrokeRGBColor(v,C,q){this.current.strokeColor=_.Util.makeHexColor(v,C,q)}setFillAlpha(v){this.current.fillAlpha=v}setFillRGBColor(v,C,q){this.current.fillColor=_.Util.makeHexColor(v,C,q),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(v){this.current.strokeColor=this._makeColorN_Pattern(v)}setFillColorN(v){this.current.fillColor=this._makeColorN_Pattern(v)}shadingFill(v){const{width:C,height:q}=this.viewport,K=_.Util.inverseTransform(this.transformMatrix),[H,nt,rt,At]=_.Util.getAxialAlignedBoundingBox([0,0,C,q],K),pt=this.svgFactory.createElement("svg:rect");pt.setAttributeNS(null,"x",H),pt.setAttributeNS(null,"y",nt),pt.setAttributeNS(null,"width",rt-H),pt.setAttributeNS(null,"height",At-nt),pt.setAttributeNS(null,"fill",this._makeShadingPattern(v)),this.current.fillAlpha<1&&pt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(pt)}_makeColorN_Pattern(v){return v[0]==="TilingPattern"?this._makeTilingPattern(v):this._makeShadingPattern(v)}_makeTilingPattern(v){const C=v[1],q=v[2],K=v[3]||_.IDENTITY_MATRIX,[H,nt,rt,At]=v[4],pt=v[5],vt=v[6],wt=v[7],lt=`shading${x++}`,[N,S,p,g]=_.Util.normalizeRect([..._.Util.applyTransform([H,nt],K),..._.Util.applyTransform([rt,At],K)]),[E,D]=_.Util.singularValueDecompose2dScale(K),L=pt*E,U=vt*D,k=this.svgFactory.createElement("svg:pattern");k.setAttributeNS(null,"id",lt),k.setAttributeNS(null,"patternUnits","userSpaceOnUse"),k.setAttributeNS(null,"width",L),k.setAttributeNS(null,"height",U),k.setAttributeNS(null,"x",`${N}`),k.setAttributeNS(null,"y",`${S}`);const l=this.svg,y=this.transformMatrix,w=this.current.fillColor,T=this.current.strokeColor,F=this.svgFactory.create(p-N,g-S);if(this.svg=F,this.transformMatrix=K,wt===2){const W=_.Util.makeHexColor(...C);this.current.fillColor=W,this.current.strokeColor=W}return this.executeOpTree(this.convertOpList(q)),this.svg=l,this.transformMatrix=y,this.current.fillColor=w,this.current.strokeColor=T,k.append(F.childNodes[0]),this.defs.append(k),`url(#${lt})`}_makeShadingPattern(v){switch(typeof v=="string"&&(v=this.objs.get(v)),v[0]){case"RadialAxial":const C=`shading${x++}`,q=v[3];let K;switch(v[1]){case"axial":const H=v[4],nt=v[5];K=this.svgFactory.createElement("svg:linearGradient"),K.setAttributeNS(null,"id",C),K.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),K.setAttributeNS(null,"x1",H[0]),K.setAttributeNS(null,"y1",H[1]),K.setAttributeNS(null,"x2",nt[0]),K.setAttributeNS(null,"y2",nt[1]);break;case"radial":const rt=v[4],At=v[5],pt=v[6],vt=v[7];K=this.svgFactory.createElement("svg:radialGradient"),K.setAttributeNS(null,"id",C),K.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),K.setAttributeNS(null,"cx",At[0]),K.setAttributeNS(null,"cy",At[1]),K.setAttributeNS(null,"r",vt),K.setAttributeNS(null,"fx",rt[0]),K.setAttributeNS(null,"fy",rt[1]),K.setAttributeNS(null,"fr",pt);break;default:throw new Error(`Unknown RadialAxial type: ${v[1]}`)}for(const H of q){const nt=this.svgFactory.createElement("svg:stop");nt.setAttributeNS(null,"offset",H[0]),nt.setAttributeNS(null,"stop-color",H[1]),K.append(nt)}return this.defs.append(K),`url(#${C})`;case"Mesh":return(0,_.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${v[0]}`)}}setDash(v,C){this.current.dashArray=v,this.current.dashPhase=C}constructPath(v,C){const q=this.current;let K=q.x,H=q.y,nt=[],rt=0;for(const At of v)switch(At|0){case _.OPS.rectangle:K=C[rt++],H=C[rt++];const pt=C[rt++],vt=C[rt++],wt=K+pt,lt=H+vt;nt.push("M",e(K),e(H),"L",e(wt),e(H),"L",e(wt),e(lt),"L",e(K),e(lt),"Z");break;case _.OPS.moveTo:K=C[rt++],H=C[rt++],nt.push("M",e(K),e(H));break;case _.OPS.lineTo:K=C[rt++],H=C[rt++],nt.push("L",e(K),e(H));break;case _.OPS.curveTo:K=C[rt+4],H=C[rt+5],nt.push("C",e(C[rt]),e(C[rt+1]),e(C[rt+2]),e(C[rt+3]),e(K),e(H)),rt+=6;break;case _.OPS.curveTo2:nt.push("C",e(K),e(H),e(C[rt]),e(C[rt+1]),e(C[rt+2]),e(C[rt+3])),K=C[rt+2],H=C[rt+3],rt+=4;break;case _.OPS.curveTo3:K=C[rt+2],H=C[rt+3],nt.push("C",e(C[rt]),e(C[rt+1]),e(K),e(H),e(K),e(H)),rt+=4;break;case _.OPS.closePath:nt.push("Z");break}nt=nt.join(" "),q.path&&v.length>0&&v[0]!==_.OPS.rectangle&&v[0]!==_.OPS.moveTo?nt=q.path.getAttributeNS(null,"d")+nt:(q.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(q.path)),q.path.setAttributeNS(null,"d",nt),q.path.setAttributeNS(null,"fill","none"),q.element=q.path,q.setCurrentPoint(K,H)}endPath(){const v=this.current;if(v.path=null,!this.pendingClip)return;if(!v.element){this.pendingClip=null;return}const C=`clippath${b++}`,q=this.svgFactory.createElement("svg:clipPath");q.setAttributeNS(null,"id",C),q.setAttributeNS(null,"transform",m(this.transformMatrix));const K=v.element.cloneNode(!0);if(this.pendingClip==="evenodd"?K.setAttributeNS(null,"clip-rule","evenodd"):K.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,q.append(K),this.defs.append(q),v.activeClipUrl){v.clipGroup=null;for(const H of this.extraStack)H.clipGroup=null;q.setAttributeNS(null,"clip-path",v.activeClipUrl)}v.activeClipUrl=`url(#${C})`,this.tgrp=null}clip(v){this.pendingClip=v}closePath(){const v=this.current;if(v.path){const C=`${v.path.getAttributeNS(null,"d")}Z`;v.path.setAttributeNS(null,"d",C)}}setLeading(v){this.current.leading=-v}setTextRise(v){this.current.textRise=v}setTextRenderingMode(v){this.current.textRenderingMode=v}setHScale(v){this.current.textHScale=v/100}setRenderingIntent(v){}setFlatness(v){}setGState(v){for(const[C,q]of v)switch(C){case"LW":this.setLineWidth(q);break;case"LC":this.setLineCap(q);break;case"LJ":this.setLineJoin(q);break;case"ML":this.setMiterLimit(q);break;case"D":this.setDash(q[0],q[1]);break;case"RI":this.setRenderingIntent(q);break;case"FL":this.setFlatness(q);break;case"Font":this.setFont(q);break;case"CA":this.setStrokeAlpha(q);break;case"ca":this.setFillAlpha(q);break;default:(0,_.warn)(`Unimplemented graphic state operator ${C}`);break}}fill(){const v=this.current;v.element&&(v.element.setAttributeNS(null,"fill",v.fillColor),v.element.setAttributeNS(null,"fill-opacity",v.fillAlpha),this.endPath())}stroke(){const v=this.current;v.element&&(this._setStrokeAttributes(v.element),v.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(v,C=1){const q=this.current;let K=q.dashArray;C!==1&&K.length>0&&(K=K.map(function(H){return C*H})),v.setAttributeNS(null,"stroke",q.strokeColor),v.setAttributeNS(null,"stroke-opacity",q.strokeAlpha),v.setAttributeNS(null,"stroke-miterlimit",e(q.miterLimit)),v.setAttributeNS(null,"stroke-linecap",q.lineCap),v.setAttributeNS(null,"stroke-linejoin",q.lineJoin),v.setAttributeNS(null,"stroke-width",e(C*q.lineWidth)+"px"),v.setAttributeNS(null,"stroke-dasharray",K.map(e).join(" ")),v.setAttributeNS(null,"stroke-dashoffset",e(C*q.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const v=this.svgFactory.createElement("svg:rect");v.setAttributeNS(null,"x","0"),v.setAttributeNS(null,"y","0"),v.setAttributeNS(null,"width","1px"),v.setAttributeNS(null,"height","1px"),v.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(v)}paintImageXObject(v){const C=this.getObject(v);if(!C){(0,_.warn)(`Dependent image with object ID ${v} is not ready yet`);return}this.paintInlineImageXObject(C)}paintInlineImageXObject(v,C){const q=v.width,K=v.height,H=r(v,this.forceDataSchema,!!C),nt=this.svgFactory.createElement("svg:rect");nt.setAttributeNS(null,"x","0"),nt.setAttributeNS(null,"y","0"),nt.setAttributeNS(null,"width",e(q)),nt.setAttributeNS(null,"height",e(K)),this.current.element=nt,this.clip("nonzero");const rt=this.svgFactory.createElement("svg:image");rt.setAttributeNS(z,"xlink:href",H),rt.setAttributeNS(null,"x","0"),rt.setAttributeNS(null,"y",e(-K)),rt.setAttributeNS(null,"width",e(q)+"px"),rt.setAttributeNS(null,"height",e(K)+"px"),rt.setAttributeNS(null,"transform",`scale(${e(1/q)} ${e(-1/K)})`),C?C.append(rt):this._ensureTransformGroup().append(rt)}paintImageMaskXObject(v){const C=this.getObject(v.data,v);if(C.bitmap){(0,_.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const q=this.current,K=C.width,H=C.height,nt=q.fillColor;q.maskId=`mask${u++}`;const rt=this.svgFactory.createElement("svg:mask");rt.setAttributeNS(null,"id",q.maskId);const At=this.svgFactory.createElement("svg:rect");At.setAttributeNS(null,"x","0"),At.setAttributeNS(null,"y","0"),At.setAttributeNS(null,"width",e(K)),At.setAttributeNS(null,"height",e(H)),At.setAttributeNS(null,"fill",nt),At.setAttributeNS(null,"mask",`url(#${q.maskId})`),this.defs.append(rt),this._ensureTransformGroup().append(At),this.paintInlineImageXObject(C,rt)}paintFormXObjectBegin(v,C){if(Array.isArray(v)&&v.length===6&&this.transform(v[0],v[1],v[2],v[3],v[4],v[5]),C){const q=C[2]-C[0],K=C[3]-C[1],H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x",C[0]),H.setAttributeNS(null,"y",C[1]),H.setAttributeNS(null,"width",e(q)),H.setAttributeNS(null,"height",e(K)),this.current.element=H,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(v){const C=this.svgFactory.create(v.width,v.height),q=this.svgFactory.createElement("svg:defs");C.append(q),this.defs=q;const K=this.svgFactory.createElement("svg:g");return K.setAttributeNS(null,"transform",m(v.transform)),C.append(K),this.svg=K,C}_ensureClipGroup(){if(!this.current.clipGroup){const v=this.svgFactory.createElement("svg:g");v.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(v),this.current.clipGroup=v}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",m(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}o.SVGGraphics=I}),((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class P{static textContent(_){const i=[],M={items:i,styles:Object.create(null)};function z(V){if(!V)return;let a=null;const t=V.name;if(t==="#text")a=V.value;else if(P.shouldBuildText(t))V?.attributes?.textContent?a=V.attributes.textContent:V.value&&(a=V.value);else return;if(a!==null&&i.push({str:a}),!!V.children)for(const r of V.children)z(r)}return z(_),M}static shouldBuildText(_){return!(_==="textarea"||_==="input"||_==="option"||_==="select")}}o.XfaText=P}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextLayerRenderTask=void 0,o.renderTextLayer=m,o.updateTextLayer=b;var d=P(1),_=P(6);const i=1e5,M=30,z=.8,V=new Map;function a(u,x){let I;if(x&&d.FeatureTest.isOffscreenCanvasSupported)I=new OffscreenCanvas(u,u).getContext("2d",{alpha:!1});else{const R=document.createElement("canvas");R.width=R.height=u,I=R.getContext("2d",{alpha:!1})}return I}function t(u,x){const I=V.get(u);if(I)return I;const R=a(M,x);R.font=`${M}px ${u}`;const v=R.measureText("");let C=v.fontBoundingBoxAscent,q=Math.abs(v.fontBoundingBoxDescent);if(C){const H=C/(C+q);return V.set(u,H),R.canvas.width=R.canvas.height=0,H}R.strokeStyle="red",R.clearRect(0,0,M,M),R.strokeText("g",0,0);let K=R.getImageData(0,0,M,M).data;q=0;for(let H=K.length-1-3;H>=0;H-=4)if(K[H]>0){q=Math.ceil(H/4/M);break}R.clearRect(0,0,M,M),R.strokeText("A",0,M),K=R.getImageData(0,0,M,M).data,C=0;for(let H=0,nt=K.length;H<nt;H+=4)if(K[H]>0){C=M-Math.floor(H/4/M);break}if(R.canvas.width=R.canvas.height=0,C){const H=C/(C+q);return V.set(u,H),H}return V.set(u,z),z}function r(u,x,I){const R=document.createElement("span"),v={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};u._textDivs.push(R);const C=d.Util.transform(u._transform,x.transform);let q=Math.atan2(C[1],C[0]);const K=I[x.fontName];K.vertical&&(q+=Math.PI/2);const H=Math.hypot(C[2],C[3]),nt=H*t(K.fontFamily,u._isOffscreenCanvasSupported);let rt,At;q===0?(rt=C[4],At=C[5]-nt):(rt=C[4]+nt*Math.sin(q),At=C[5]-nt*Math.cos(q));const pt="calc(var(--scale-factor)*",vt=R.style;u._container===u._rootContainer?(vt.left=`${(100*rt/u._pageWidth).toFixed(2)}%`,vt.top=`${(100*At/u._pageHeight).toFixed(2)}%`):(vt.left=`${pt}${rt.toFixed(2)}px)`,vt.top=`${pt}${At.toFixed(2)}px)`),vt.fontSize=`${pt}${H.toFixed(2)}px)`,vt.fontFamily=K.fontFamily,v.fontSize=H,R.setAttribute("role","presentation"),R.textContent=x.str,R.dir=x.dir,u._fontInspectorEnabled&&(R.dataset.fontName=x.fontName),q!==0&&(v.angle=q*(180/Math.PI));let wt=!1;if(x.str.length>1)wt=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const lt=Math.abs(x.transform[0]),N=Math.abs(x.transform[3]);lt!==N&&Math.max(lt,N)/Math.min(lt,N)>1.5&&(wt=!0)}wt&&(v.canvasWidth=K.vertical?x.height:x.width),u._textDivProperties.set(R,v),u._isReadableStream&&u._layoutText(R)}function f(u){const{div:x,scale:I,properties:R,ctx:v,prevFontSize:C,prevFontFamily:q}=u,{style:K}=x;let H="";if(R.canvasWidth!==0&&R.hasText){const{fontFamily:nt}=K,{canvasWidth:rt,fontSize:At}=R;(C!==At||q!==nt)&&(v.font=`${At*I}px ${nt}`,u.prevFontSize=At,u.prevFontFamily=nt);const{width:pt}=v.measureText(x.textContent);pt>0&&(H=`scaleX(${rt*I/pt})`)}R.angle!==0&&(H=`rotate(${R.angle}deg) ${H}`),H.length>0&&(K.transform=H)}function h(u){if(u._canceled)return;const x=u._textDivs,I=u._capability;if(x.length>i){I.resolve();return}if(!u._isReadableStream)for(const v of x)u._layoutText(v);I.resolve()}class e{constructor({textContentSource:x,container:I,viewport:R,textDivs:v,textDivProperties:C,textContentItemsStr:q,isOffscreenCanvasSupported:K}){this._textContentSource=x,this._isReadableStream=x instanceof ReadableStream,this._container=this._rootContainer=I,this._textDivs=v||[],this._textContentItemsStr=q||[],this._isOffscreenCanvasSupported=K,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new d.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:R.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:a(0,K)};const{pageWidth:H,pageHeight:nt,pageX:rt,pageY:At}=R.rawDims;this._transform=[1,0,0,-1,-rt,At+nt],this._pageWidth=H,this._pageHeight=nt,(0,_.setLayerDimensions)(I,R),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new d.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new d.AbortException("TextLayer task cancelled."))}_processItems(x,I){for(const R of x){if(R.str===void 0){if(R.type==="beginMarkedContentProps"||R.type==="beginMarkedContent"){const v=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),R.id!==null&&this._container.setAttribute("id",`${R.id}`),v.append(this._container)}else R.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(R.str),r(this,R,I)}}_layoutText(x){const I=this._layoutTextParams.properties=this._textDivProperties.get(x);if(this._layoutTextParams.div=x,f(this._layoutTextParams),I.hasText&&this._container.append(x),I.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),this._container.append(R)}}_render(){const x=new d.PromiseCapability;let I=Object.create(null);if(this._isReadableStream){const R=()=>{this._reader.read().then(({value:v,done:C})=>{if(C){x.resolve();return}Object.assign(I,v.styles),this._processItems(v.items,I),R()},x.reject)};this._reader=this._textContentSource.getReader(),R()}else if(this._textContentSource){const{items:R,styles:v}=this._textContentSource;this._processItems(R,v),x.resolve()}else throw new Error('No "textContentSource" parameter specified.');x.promise.then(()=>{I=null,h(this)},this._capability.reject)}}o.TextLayerRenderTask=e;function m(u){!u.textContentSource&&(u.textContent||u.textContentStream)&&((0,_.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),u.textContentSource=u.textContent||u.textContentStream);const{container:x,viewport:I}=u,R=getComputedStyle(x),v=R.getPropertyValue("visibility"),C=parseFloat(R.getPropertyValue("--scale-factor"));v==="visible"&&(!C||Math.abs(C-I.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const q=new e(u);return q._render(),q}function b({container:u,viewport:x,textDivs:I,textDivProperties:R,isOffscreenCanvasSupported:v,mustRotate:C=!0,mustRescale:q=!0}){if(C&&(0,_.setLayerDimensions)(u,{rotation:x.rotation}),q){const K=a(0,v),nt={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:K};for(const rt of I)nt.properties=R.get(rt),nt.div=rt,f(nt)}}}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditorLayer=void 0;var d=P(1),_=P(4),i=P(28),M=P(33),z=P(6),V=P(34);class a{#t;#e=!1;#n=null;#i=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#a=new Map;#s=!1;#l=!1;#c=!1;#r;static _initialized=!1;constructor({uiManager:r,pageIndex:f,div:h,accessibilityManager:e,annotationLayer:m,viewport:b,l10n:u}){const x=[i.FreeTextEditor,M.InkEditor,V.StampEditor];if(!a._initialized){a._initialized=!0;for(const I of x)I.initialize(u)}r.registerEditorTypes(x),this.#r=r,this.pageIndex=f,this.div=h,this.#t=e,this.#n=m,this.viewport=b,this.#r.addLayer(this)}get isEmpty(){return this.#a.size===0}updateToolbar(r){this.#r.updateToolbar(r)}updateMode(r=this.#r.getMode()){this.#p(),r===d.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),r!==d.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",r===d.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",r===d.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",r===d.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(r){if(!r&&this.#r.getMode()!==d.AnnotationEditorType.INK)return;if(!r){for(const h of this.#a.values())if(h.isEmpty()){h.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(r){this.#r.setEditingState(r)}addCommands(r){this.#r.addCommands(r)}enable(){this.div.style.pointerEvents="auto";const r=new Set;for(const h of this.#a.values())h.enableEditing(),h.annotationElementId&&r.add(h.annotationElementId);if(!this.#n)return;const f=this.#n.getEditableAnnotations();for(const h of f){if(h.hide(),this.#r.isDeletedAnnotationElement(h.data.id)||r.has(h.data.id))continue;const e=this.deserialize(h);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const r=new Set;for(const f of this.#a.values()){if(f.disableEditing(),!f.annotationElementId||f.serialize()!==null){r.add(f.annotationElementId);continue}this.getEditableAnnotation(f.annotationElementId)?.show(),f.remove()}if(this.#n){const f=this.#n.getEditableAnnotations();for(const h of f){const{id:e}=h.data;r.has(e)||this.#r.isDeletedAnnotationElement(e)||h.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(r){return this.#n?.getEditableAnnotation(r)||null}setActiveEditor(r){this.#r.getActive()!==r&&this.#r.setActiveEditor(r)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(r){this.#a.set(r.id,r);const{annotationElementId:f}=r;f&&this.#r.isDeletedAnnotationElement(f)&&this.#r.removeDeletedAnnotationElement(r)}detach(r){this.#a.delete(r.id),this.#t?.removePointerInTextLayer(r.contentDiv),!this.#c&&r.annotationElementId&&this.#r.addDeletedAnnotationElement(r)}remove(r){this.detach(r),this.#r.removeEditor(r),r.div.contains(document.activeElement)&&setTimeout(()=>{this.#r.focusMainContainer()},0),r.div.remove(),r.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(r){r.parent!==this&&(r.annotationElementId&&(this.#r.addDeletedAnnotationElement(r.annotationElementId),_.AnnotationEditor.deleteAnnotationElement(r),r.annotationElementId=null),this.attach(r),r.parent?.detach(r),r.setParent(this),r.div&&r.isAttachedToDOM&&(r.div.remove(),this.div.append(r.div)))}add(r){if(this.changeParent(r),this.#r.addEditor(r),this.attach(r),!r.isAttachedToDOM){const f=r.render();this.div.append(f),r.isAttachedToDOM=!0}r.fixAndSetPosition(),r.onceAdded(),this.#r.addToAnnotationStorage(r)}moveEditorInDOM(r){if(!r.isAttachedToDOM)return;const{activeElement:f}=document;r.div.contains(f)&&(r._focusEventsAllowed=!1,setTimeout(()=>{r.div.contains(document.activeElement)?r._focusEventsAllowed=!0:(r.div.addEventListener("focusin",()=>{r._focusEventsAllowed=!0},{once:!0}),f.focus())},0)),r._structTreeParentId=this.#t?.moveElementInDOM(this.div,r.div,r.contentDiv,!0)}addOrRebuild(r){r.needsToBeRebuilt()?r.rebuild():this.add(r)}addUndoableEditor(r){const f=()=>r._uiManager.rebuild(r),h=()=>{r.remove()};this.addCommands({cmd:f,undo:h,mustExec:!1})}getNextId(){return this.#r.getId()}#f(r){switch(this.#r.getMode()){case d.AnnotationEditorType.FREETEXT:return new i.FreeTextEditor(r);case d.AnnotationEditorType.INK:return new M.InkEditor(r);case d.AnnotationEditorType.STAMP:return new V.StampEditor(r)}return null}pasteEditor(r,f){this.#r.updateToolbar(r),this.#r.updateMode(r);const{offsetX:h,offsetY:e}=this.#h(),m=this.getNextId(),b=this.#f({parent:this,id:m,x:h,y:e,uiManager:this.#r,isCentered:!0,...f});b&&this.add(b)}deserialize(r){switch(r.annotationType??r.annotationEditorType){case d.AnnotationEditorType.FREETEXT:return i.FreeTextEditor.deserialize(r,this,this.#r);case d.AnnotationEditorType.INK:return M.InkEditor.deserialize(r,this,this.#r);case d.AnnotationEditorType.STAMP:return V.StampEditor.deserialize(r,this,this.#r)}return null}#d(r,f){const h=this.getNextId(),e=this.#f({parent:this,id:h,x:r.offsetX,y:r.offsetY,uiManager:this.#r,isCentered:f});return e&&this.add(e),e}#h(){const{x:r,y:f,width:h,height:e}=this.div.getBoundingClientRect(),m=Math.max(0,r),b=Math.max(0,f),u=Math.min(window.innerWidth,r+h),x=Math.min(window.innerHeight,f+e),I=(m+u)/2-r,R=(b+x)/2-f,[v,C]=this.viewport.rotation%180===0?[I,R]:[R,I];return{offsetX:v,offsetY:C}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(r){this.#r.setSelected(r)}toggleSelected(r){this.#r.toggleSelected(r)}isSelected(r){return this.#r.isSelected(r)}unselect(r){this.#r.unselect(r)}pointerup(r){const{isMac:f}=d.FeatureTest.platform;if(!(r.button!==0||r.ctrlKey&&f)&&r.target===this.div&&this.#s){if(this.#s=!1,!this.#e){this.#e=!0;return}if(this.#r.getMode()===d.AnnotationEditorType.STAMP){this.#r.unselectAll();return}this.#d(r,!1)}}pointerdown(r){if(this.#s){this.#s=!1;return}const{isMac:f}=d.FeatureTest.platform;if(r.button!==0||r.ctrlKey&&f||r.target!==this.div)return;this.#s=!0;const h=this.#r.getActive();this.#e=!h||h.isEmpty()}findNewParent(r,f,h){const e=this.#r.findParent(f,h);return e===null||e===this?!1:(e.changeParent(r),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null));for(const r of this.#a.values())this.#t?.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,this.#a.clear(),this.#r.removeLayer(this)}#p(){this.#l=!0;for(const r of this.#a.values())r.isEmpty()&&r.remove();this.#l=!1}render({viewport:r}){this.viewport=r,(0,z.setLayerDimensions)(this.div,r);for(const f of this.#r.getEditors(this.pageIndex))this.add(f);this.updateMode()}update({viewport:r}){this.#r.commitOrRemove(),this.viewport=r,(0,z.setLayerDimensions)(this.div,{rotation:r.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:r,pageHeight:f}=this.viewport.rawDims;return[r,f]}}o.AnnotationEditorLayer=a}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FreeTextEditor=void 0;var d=P(1),_=P(5),i=P(4),M=P(29);class z extends i.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#o;#a="";#s=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const a=z.prototype,t=h=>h.isEmpty(),r=_.AnnotationEditorUIManager.TRANSLATE_SMALL,f=_.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,d.shadow)(this,"_keyboardManager",new _.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],a.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],a._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],a._translateEmpty,{args:[-f,0],checker:t}],[["ArrowRight","mac+ArrowRight"],a._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],a._translateEmpty,{args:[f,0],checker:t}],[["ArrowUp","mac+ArrowUp"],a._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],a._translateEmpty,{args:[0,-f],checker:t}],[["ArrowDown","mac+ArrowDown"],a._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],a._translateEmpty,{args:[0,f],checker:t}]]))}static _type="freetext";constructor(a){super({...a,name:"freeTextEditor"}),this.#o=a.color||z._defaultColor||i.AnnotationEditor._defaultLineColor,this.#l=a.fontSize||z._defaultFontSize}static initialize(a){i.AnnotationEditor.initialize(a,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,t){switch(a){case d.AnnotationEditorParamsType.FREETEXT_SIZE:z._defaultFontSize=t;break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:z._defaultColor=t;break}}updateParams(a,t){switch(a){case d.AnnotationEditorParamsType.FREETEXT_SIZE:this.#r(t);break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(t);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,z._defaultFontSize],[d.AnnotationEditorParamsType.FREETEXT_COLOR,z._defaultColor||i.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[d.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#r(a){const t=f=>{this.editorDiv.style.fontSize=`calc(${f}px * var(--scale-factor))`,this.translate(0,-(f-this.#l)*this.parentScale),this.#l=f,this.#h()},r=this.#l;this.addCommands({cmd:()=>{t(a)},undo:()=>{t(r)},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(a){const t=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=a},undo:()=>{this.#o=this.editorDiv.style.color=t},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(a,t){this._uiManager.translateSelectedEditors(a,t,!0)}getInitialTranslation(){const a=this.parentScale;return[-z._internalPadding*a,-(z._internalPadding+this.#l)*a]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(d.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(a){this._focusEventsAllowed&&(super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const a=this.editorDiv.getElementsByTagName("div");if(a.length===0)return this.editorDiv.innerText;const t=[];for(const r of a)t.push(r.innerText.replace(/\r\n?|\n/,""));return t.join(`
`)}#h(){const[a,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:f,div:h}=this,e=h.style.display;h.style.display="hidden",f.div.append(this.div),r=h.getBoundingClientRect(),h.remove(),h.style.display=e}this.rotation%180===this.parentRotation%180?(this.width=r.width/a,this.height=r.height/t):(this.width=r.height/a,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const a=this.#a,t=this.#a=this.#d().trimEnd();if(a===t)return;const r=f=>{if(this.#a=f,!f){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(a)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(a){this.enterInEditMode()}keydown(a){a.target===this.div&&a.key==="Enter"&&(this.enterInEditMode(),a.preventDefault())}editorDivKeydown(a){z._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let a,t;this.width&&(a=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),i.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(f=>this.editorDiv?.setAttribute("aria-label",f)),i.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(f=>this.editorDiv?.setAttribute("default-content",f)),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#l}px * var(--scale-factor))`,r.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[f,h]=this.parentDimensions;if(this.annotationElementId){const{position:e}=this.#c;let[m,b]=this.getInitialTranslation();[m,b]=this.pageTranslationToScreen(m,b);const[u,x]=this.pageDimensions,[I,R]=this.pageTranslation;let v,C;switch(this.rotation){case 0:v=a+(e[0]-I)/u,C=t+this.height-(e[1]-R)/x;break;case 90:v=a+(e[0]-I)/u,C=t-(e[1]-R)/x,[m,b]=[b,-m];break;case 180:v=a-this.width+(e[0]-I)/u,C=t-(e[1]-R)/x,[m,b]=[-m,-b];break;case 270:v=a+(e[0]-I-this.height*x)/u,C=t+(e[1]-R-this.width*u)/x,[m,b]=[-b,m];break}this.setAt(v*f,C*h,m,b)}else this.setAt(a*f,t*h,this.width*f,this.height*h);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#a)for(const a of this.#a.split(`
`)){const t=document.createElement("div");t.append(a?document.createTextNode(a):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(a,t,r){let f=null;if(a instanceof M.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:e,fontColor:m},rect:b,rotation:u,id:x},textContent:I,textPosition:R,parent:{page:{pageNumber:v}}}=a;if(!I||I.length===0)return null;f=a={annotationType:d.AnnotationEditorType.FREETEXT,color:Array.from(m),fontSize:e,value:I.join(`
`),position:R,pageIndex:v-1,rect:b,rotation:u,id:x,deleted:!1}}const h=super.deserialize(a,t,r);return h.#l=a.fontSize,h.#o=d.Util.makeHexColor(...a.color),h.#a=a.value,h.annotationElementId=a.id||null,h.#c=f,h}serialize(a=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=z._internalPadding*this.parentScale,r=this.getRect(t,t),f=i.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),h={annotationType:d.AnnotationEditorType.FREETEXT,color:f,fontSize:this.#l,value:this.#a,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return a?h:this.annotationElementId&&!this.#v(h)?null:(h.id=this.annotationElementId,h)}#v(a){const{value:t,fontSize:r,color:f,rect:h,pageIndex:e}=this.#c;return a.value!==t||a.fontSize!==r||a.rect.some((m,b)=>Math.abs(m-h[b])>=1)||a.color.some((m,b)=>m!==f[b])||a.pageIndex!==e}#m(a=!1){if(!this.annotationElementId)return;if(this.#h(),!a&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const t=z._internalPadding*this.parentScale;this.#c.rect=this.getRect(t,t)}}o.FreeTextEditor=z}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StampAnnotationElement=o.InkAnnotationElement=o.FreeTextAnnotationElement=o.AnnotationLayer=void 0;var d=P(1),_=P(6),i=P(3),M=P(30),z=P(31),V=P(32);const a=1e3,t=9,r=new WeakSet;function f(k){return{width:k[2]-k[0],height:k[3]-k[1]}}class h{static create(l){switch(l.data.annotationType){case d.AnnotationType.LINK:return new m(l);case d.AnnotationType.TEXT:return new b(l);case d.AnnotationType.WIDGET:switch(l.data.fieldType){case"Tx":return new x(l);case"Btn":return l.data.radioButton?new v(l):l.data.checkBox?new R(l):new C(l);case"Ch":return new q(l);case"Sig":return new I(l)}return new u(l);case d.AnnotationType.POPUP:return new K(l);case d.AnnotationType.FREETEXT:return new nt(l);case d.AnnotationType.LINE:return new rt(l);case d.AnnotationType.SQUARE:return new At(l);case d.AnnotationType.CIRCLE:return new pt(l);case d.AnnotationType.POLYLINE:return new vt(l);case d.AnnotationType.CARET:return new lt(l);case d.AnnotationType.INK:return new N(l);case d.AnnotationType.POLYGON:return new wt(l);case d.AnnotationType.HIGHLIGHT:return new S(l);case d.AnnotationType.UNDERLINE:return new p(l);case d.AnnotationType.SQUIGGLY:return new g(l);case d.AnnotationType.STRIKEOUT:return new E(l);case d.AnnotationType.STAMP:return new D(l);case d.AnnotationType.FILEATTACHMENT:return new L(l);default:return new e(l)}}}class e{#t=!1;constructor(l,{isRenderable:y=!1,ignoreBorder:w=!1,createQuadrilaterals:T=!1}={}){this.isRenderable=y,this.data=l.data,this.layer=l.layer,this.linkService=l.linkService,this.downloadManager=l.downloadManager,this.imageResourcesPath=l.imageResourcesPath,this.renderForms=l.renderForms,this.svgFactory=l.svgFactory,this.annotationStorage=l.annotationStorage,this.enableScripting=l.enableScripting,this.hasJSActions=l.hasJSActions,this._fieldObjects=l.fieldObjects,this.parent=l.parent,y&&(this.container=this._createContainer(w)),T&&this._createQuadrilaterals()}static _hasPopupData({titleObj:l,contentsObj:y,richText:w}){return!!(l?.str||y?.str||w?.str)}get hasPopupData(){return e._hasPopupData(this.data)}_createContainer(l){const{data:y,parent:{page:w,viewport:T}}=this,F=document.createElement("section");F.setAttribute("data-annotation-id",y.id),this instanceof u||(F.tabIndex=a),F.style.zIndex=this.parent.zIndex++,this.data.popupRef&&F.setAttribute("aria-haspopup","dialog"),y.noRotate&&F.classList.add("norotate");const{pageWidth:W,pageHeight:Y,pageX:st,pageY:Et}=T.rawDims;if(!y.rect||this instanceof K){const{rotation:gt}=y;return!y.hasOwnCanvas&&gt!==0&&this.setRotation(gt,F),F}const{width:at,height:ot}=f(y.rect),ct=d.Util.normalizeRect([y.rect[0],w.view[3]-y.rect[1]+w.view[1],y.rect[2],w.view[3]-y.rect[3]+w.view[1]]);if(!l&&y.borderStyle.width>0){F.style.borderWidth=`${y.borderStyle.width}px`;const gt=y.borderStyle.horizontalCornerRadius,Ct=y.borderStyle.verticalCornerRadius;if(gt>0||Ct>0){const Ot=`calc(${gt}px * var(--scale-factor)) / calc(${Ct}px * var(--scale-factor))`;F.style.borderRadius=Ot}else if(this instanceof v){const Ot=`calc(${at}px * var(--scale-factor)) / calc(${ot}px * var(--scale-factor))`;F.style.borderRadius=Ot}switch(y.borderStyle.style){case d.AnnotationBorderStyleType.SOLID:F.style.borderStyle="solid";break;case d.AnnotationBorderStyleType.DASHED:F.style.borderStyle="dashed";break;case d.AnnotationBorderStyleType.BEVELED:(0,d.warn)("Unimplemented border style: beveled");break;case d.AnnotationBorderStyleType.INSET:(0,d.warn)("Unimplemented border style: inset");break;case d.AnnotationBorderStyleType.UNDERLINE:F.style.borderBottomStyle="solid";break}const Mt=y.borderColor||null;Mt?(this.#t=!0,F.style.borderColor=d.Util.makeHexColor(Mt[0]|0,Mt[1]|0,Mt[2]|0)):F.style.borderWidth=0}F.style.left=`${100*(ct[0]-st)/W}%`,F.style.top=`${100*(ct[1]-Et)/Y}%`;const{rotation:ut}=y;return y.hasOwnCanvas||ut===0?(F.style.width=`${100*at/W}%`,F.style.height=`${100*ot/Y}%`):this.setRotation(ut,F),F}setRotation(l,y=this.container){if(!this.data.rect)return;const{pageWidth:w,pageHeight:T}=this.parent.viewport.rawDims,{width:F,height:W}=f(this.data.rect);let Y,st;l%180===0?(Y=100*F/w,st=100*W/T):(Y=100*W/w,st=100*F/T),y.style.width=`${Y}%`,y.style.height=`${st}%`,y.setAttribute("data-main-rotation",(360-l)%360)}get _commonActions(){const l=(y,w,T)=>{const F=T.detail[y],W=F[0],Y=F.slice(1);T.target.style[w]=M.ColorConverters[`${W}_HTML`](Y),this.annotationStorage.setValue(this.data.id,{[w]:M.ColorConverters[`${W}_rgb`](Y)})};return(0,d.shadow)(this,"_commonActions",{display:y=>{const{display:w}=y.detail,T=w%2===1;this.container.style.visibility=T?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:T,noPrint:w===1||w===2})},print:y=>{this.annotationStorage.setValue(this.data.id,{noPrint:!y.detail.print})},hidden:y=>{const{hidden:w}=y.detail;this.container.style.visibility=w?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:w,noView:w})},focus:y=>{setTimeout(()=>y.target.focus({preventScroll:!1}),0)},userName:y=>{y.target.title=y.detail.userName},readonly:y=>{y.target.disabled=y.detail.readonly},required:y=>{this._setRequired(y.target,y.detail.required)},bgColor:y=>{l("bgColor","backgroundColor",y)},fillColor:y=>{l("fillColor","backgroundColor",y)},fgColor:y=>{l("fgColor","color",y)},textColor:y=>{l("textColor","color",y)},borderColor:y=>{l("borderColor","borderColor",y)},strokeColor:y=>{l("strokeColor","borderColor",y)},rotation:y=>{const w=y.detail.rotation;this.setRotation(w),this.annotationStorage.setValue(this.data.id,{rotation:w})}})}_dispatchEventFromSandbox(l,y){const w=this._commonActions;for(const T of Object.keys(y.detail))(l[T]||w[T])?.(y)}_setDefaultPropertiesFromJS(l){if(!this.enableScripting)return;const y=this.annotationStorage.getRawValue(this.data.id);if(!y)return;const w=this._commonActions;for(const[T,F]of Object.entries(y)){const W=w[T];if(W){const Y={detail:{[T]:F},target:l};W(Y),delete y[T]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:l}=this.data;if(!l)return;const[y,w,T,F]=this.data.rect;if(l.length===1){const[,{x:Ct,y:Mt},{x:Ot,y:Vt}]=l[0];if(T===Ct&&F===Mt&&y===Ot&&w===Vt)return}const{style:W}=this.container;let Y;if(this.#t){const{borderColor:Ct,borderWidth:Mt}=W;W.borderWidth=0,Y=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ct}" stroke-width="${Mt}">`],this.container.classList.add("hasBorder")}const st=T-y,Et=F-w,{svgFactory:at}=this,ot=at.createElement("svg");ot.classList.add("quadrilateralsContainer"),ot.setAttribute("width",0),ot.setAttribute("height",0);const ct=at.createElement("defs");ot.append(ct);const ut=at.createElement("clipPath"),gt=`clippath_${this.data.id}`;ut.setAttribute("id",gt),ut.setAttribute("clipPathUnits","objectBoundingBox"),ct.append(ut);for(const[,{x:Ct,y:Mt},{x:Ot,y:Vt}]of l){const Ut=at.createElement("rect"),Zt=(Ot-y)/st,Se=(F-Mt)/Et,_e=(Ct-Ot)/st,se=(Mt-Vt)/Et;Ut.setAttribute("x",Zt),Ut.setAttribute("y",Se),Ut.setAttribute("width",_e),Ut.setAttribute("height",se),ut.append(Ut),Y?.push(`<rect vector-effect="non-scaling-stroke" x="${Zt}" y="${Se}" width="${_e}" height="${se}"/>`)}this.#t&&(Y.push("</g></svg>')"),W.backgroundImage=Y.join("")),this.container.append(ot),this.container.style.clipPath=`url(#${gt})`}_createPopup(){const{container:l,data:y}=this;l.setAttribute("aria-haspopup","dialog");const w=new K({data:{color:y.color,titleObj:y.titleObj,modificationDate:y.modificationDate,contentsObj:y.contentsObj,richText:y.richText,parentRect:y.rect,borderStyle:0,id:`popup_${y.id}`,rotation:y.rotation},parent:this.parent,elements:[this]});this.parent.div.append(w.render())}render(){(0,d.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(l,y=null){const w=[];if(this._fieldObjects){const T=this._fieldObjects[l];if(T)for(const{page:F,id:W,exportValues:Y}of T){if(F===-1||W===y)continue;const st=typeof Y=="string"?Y:null,Et=document.querySelector(`[data-element-id="${W}"]`);if(Et&&!r.has(Et)){(0,d.warn)(`_getElementsByName - element not allowed: ${W}`);continue}w.push({id:W,exportValue:st,domElement:Et})}return w}for(const T of document.getElementsByName(l)){const{exportValue:F}=T,W=T.getAttribute("data-element-id");W!==y&&r.has(T)&&w.push({id:W,exportValue:F,domElement:T})}return w}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const l=this.getElementsToTriggerPopup();if(Array.isArray(l))for(const y of l)y.classList.add("highlightArea");else l.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:l,data:{id:y}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:l,editId:y})})}}class m extends e{constructor(l,y=null){super(l,{isRenderable:!0,ignoreBorder:!!y?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:y}=this,w=document.createElement("a");w.setAttribute("data-element-id",l.id);let T=!1;return l.url?(y.addLinkAttributes(w,l.url,l.newWindow),T=!0):l.action?(this._bindNamedAction(w,l.action),T=!0):l.attachment?(this._bindAttachment(w,l.attachment),T=!0):l.setOCGState?(this.#e(w,l.setOCGState),T=!0):l.dest?(this._bindLink(w,l.dest),T=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(w,l),T=!0),l.resetForm?(this._bindResetFormAction(w,l.resetForm),T=!0):this.isTooltipOnly&&!T&&(this._bindLink(w,""),T=!0)),this.container.classList.add("linkAnnotation"),T&&this.container.append(w),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(l,y){l.href=this.linkService.getDestinationHash(y),l.onclick=()=>(y&&this.linkService.goToDestination(y),!1),(y||y==="")&&this.#t()}_bindNamedAction(l,y){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(y),!1),this.#t()}_bindAttachment(l,y){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,y.content,y.filename),!1),this.#t()}#e(l,y){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeSetOCGState(y),!1),this.#t()}_bindJSAction(l,y){l.href=this.linkService.getAnchorUrl("");const w=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const T of Object.keys(y.actions)){const F=w.get(T);F&&(l[F]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y.id,name:T}}),!1))}l.onclick||(l.onclick=()=>!1),this.#t()}_bindResetFormAction(l,y){const w=l.onclick;if(w||(l.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,d.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),w||(l.onclick=()=>!1);return}l.onclick=()=>{w?.();const{fields:T,refs:F,include:W}=y,Y=[];if(T.length!==0||F.length!==0){const at=new Set(F);for(const ot of T){const ct=this._fieldObjects[ot]||[];for(const{id:ut}of ct)at.add(ut)}for(const ot of Object.values(this._fieldObjects))for(const ct of ot)at.has(ct.id)===W&&Y.push(ct)}else for(const at of Object.values(this._fieldObjects))Y.push(...at);const st=this.annotationStorage,Et=[];for(const at of Y){const{id:ot}=at;switch(Et.push(ot),at.type){case"text":{const ut=at.defaultValue||"";st.setValue(ot,{value:ut});break}case"checkbox":case"radiobutton":{const ut=at.defaultValue===at.exportValues;st.setValue(ot,{value:ut});break}case"combobox":case"listbox":{const ut=at.defaultValue||"";st.setValue(ot,{value:ut});break}default:continue}const ct=document.querySelector(`[data-element-id="${ot}"]`);if(ct){if(!r.has(ct)){(0,d.warn)(`_bindResetFormAction - element not allowed: ${ot}`);continue}}else continue;ct.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Et,name:"ResetForm"}}),!1}}}class b extends e{constructor(l){super(l,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const l=document.createElement("img");return l.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",l.alt="[{{type}} Annotation]",l.dataset.l10nId="text_annotation_type",l.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(l),this.container}}class u extends e{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(l){this.data.hasOwnCanvas&&(l.previousSibling?.nodeName==="CANVAS"&&(l.previousSibling.hidden=!0),l.hidden=!1)}_getKeyModifier(l){const{isWin:y,isMac:w}=d.FeatureTest.platform;return y&&l.ctrlKey||w&&l.metaKey}_setEventListener(l,y,w,T,F){w.includes("mouse")?l.addEventListener(w,W=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:T,value:F(W),shift:W.shiftKey,modifier:this._getKeyModifier(W)}})}):l.addEventListener(w,W=>{if(w==="blur"){if(!y.focused||!W.relatedTarget)return;y.focused=!1}else if(w==="focus"){if(y.focused)return;y.focused=!0}F&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:T,value:F(W)}})})}_setEventListeners(l,y,w,T){for(const[F,W]of w)(W==="Action"||this.data.actions?.[W])&&((W==="Focus"||W==="Blur")&&(y||={focused:!1}),this._setEventListener(l,y,F,W,T),W==="Focus"&&!this.data.actions?.Blur?this._setEventListener(l,y,"blur","Blur",null):W==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(l,y,"focus","Focus",null))}_setBackgroundColor(l){const y=this.data.backgroundColor||null;l.style.backgroundColor=y===null?"transparent":d.Util.makeHexColor(y[0],y[1],y[2])}_setTextStyle(l){const y=["left","center","right"],{fontColor:w}=this.data.defaultAppearanceData,T=this.data.defaultAppearanceData.fontSize||t,F=l.style;let W;const Y=2,st=Et=>Math.round(10*Et)/10;if(this.data.multiLine){const Et=Math.abs(this.data.rect[3]-this.data.rect[1]-Y),at=Math.round(Et/(d.LINE_FACTOR*T))||1,ot=Et/at;W=Math.min(T,st(ot/d.LINE_FACTOR))}else{const Et=Math.abs(this.data.rect[3]-this.data.rect[1]-Y);W=Math.min(T,st(Et/d.LINE_FACTOR))}F.fontSize=`calc(${W}px * var(--scale-factor))`,F.color=d.Util.makeHexColor(w[0],w[1],w[2]),this.data.textAlignment!==null&&(F.textAlign=y[this.data.textAlignment])}_setRequired(l,y){y?l.setAttribute("required",!0):l.removeAttribute("required"),l.setAttribute("aria-required",y)}}class x extends u{constructor(l){const y=l.renderForms||!l.data.hasAppearance&&!!l.data.fieldValue;super(l,{isRenderable:y})}setPropertyOnSiblings(l,y,w,T){const F=this.annotationStorage;for(const W of this._getElementsByName(l.name,l.id))W.domElement&&(W.domElement[y]=w),F.setValue(W.id,{[T]:w})}render(){const l=this.annotationStorage,y=this.data.id;this.container.classList.add("textWidgetAnnotation");let w=null;if(this.renderForms){const T=l.getValue(y,{value:this.data.fieldValue});let F=T.value||"";const W=l.getValue(y,{charLimit:this.data.maxLen}).charLimit;W&&F.length>W&&(F=F.slice(0,W));let Y=T.formattedValue||this.data.textContent?.join(`
`)||null;Y&&this.data.comb&&(Y=Y.replaceAll(/\s+/g,""));const st={userValue:F,formattedValue:Y,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(w=document.createElement("textarea"),w.textContent=Y??F,this.data.doNotScroll&&(w.style.overflowY="hidden")):(w=document.createElement("input"),w.type="text",w.setAttribute("value",Y??F),this.data.doNotScroll&&(w.style.overflowX="hidden")),this.data.hasOwnCanvas&&(w.hidden=!0),r.add(w),w.setAttribute("data-element-id",y),w.disabled=this.data.readOnly,w.name=this.data.fieldName,w.tabIndex=a,this._setRequired(w,this.data.required),W&&(w.maxLength=W),w.addEventListener("input",at=>{l.setValue(y,{value:at.target.value}),this.setPropertyOnSiblings(w,"value",at.target.value,"value"),st.formattedValue=null}),w.addEventListener("resetform",at=>{const ot=this.data.defaultFieldValue??"";w.value=st.userValue=ot,st.formattedValue=null});let Et=at=>{const{formattedValue:ot}=st;ot!=null&&(at.target.value=ot),at.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){w.addEventListener("focus",ot=>{if(st.focused)return;const{target:ct}=ot;st.userValue&&(ct.value=st.userValue),st.lastCommittedValue=ct.value,st.commitKey=1,st.focused=!0}),w.addEventListener("updatefromsandbox",ot=>{this.showElementAndHideCanvas(ot.target);const ct={value(ut){st.userValue=ut.detail.value??"",l.setValue(y,{value:st.userValue.toString()}),ut.target.value=st.userValue},formattedValue(ut){const{formattedValue:gt}=ut.detail;st.formattedValue=gt,gt!=null&&ut.target!==document.activeElement&&(ut.target.value=gt),l.setValue(y,{formattedValue:gt})},selRange(ut){ut.target.setSelectionRange(...ut.detail.selRange)},charLimit:ut=>{const{charLimit:gt}=ut.detail,{target:Ct}=ut;if(gt===0){Ct.removeAttribute("maxLength");return}Ct.setAttribute("maxLength",gt);let Mt=st.userValue;!Mt||Mt.length<=gt||(Mt=Mt.slice(0,gt),Ct.value=st.userValue=Mt,l.setValue(y,{value:Mt}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:Mt,willCommit:!0,commitKey:1,selStart:Ct.selectionStart,selEnd:Ct.selectionEnd}}))}};this._dispatchEventFromSandbox(ct,ot)}),w.addEventListener("keydown",ot=>{st.commitKey=1;let ct=-1;if(ot.key==="Escape"?ct=0:ot.key==="Enter"&&!this.data.multiLine?ct=2:ot.key==="Tab"&&(st.commitKey=3),ct===-1)return;const{value:ut}=ot.target;st.lastCommittedValue!==ut&&(st.lastCommittedValue=ut,st.userValue=ut,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:ut,willCommit:!0,commitKey:ct,selStart:ot.target.selectionStart,selEnd:ot.target.selectionEnd}}))});const at=Et;Et=null,w.addEventListener("blur",ot=>{if(!st.focused||!ot.relatedTarget)return;st.focused=!1;const{value:ct}=ot.target;st.userValue=ct,st.lastCommittedValue!==ct&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:ct,willCommit:!0,commitKey:st.commitKey,selStart:ot.target.selectionStart,selEnd:ot.target.selectionEnd}}),at(ot)}),this.data.actions?.Keystroke&&w.addEventListener("beforeinput",ot=>{st.lastCommittedValue=null;const{data:ct,target:ut}=ot,{value:gt,selectionStart:Ct,selectionEnd:Mt}=ut;let Ot=Ct,Vt=Mt;switch(ot.inputType){case"deleteWordBackward":{const Ut=gt.substring(0,Ct).match(/\w*[^\w]*$/);Ut&&(Ot-=Ut[0].length);break}case"deleteWordForward":{const Ut=gt.substring(Ct).match(/^[^\w]*\w*/);Ut&&(Vt+=Ut[0].length);break}case"deleteContentBackward":Ct===Mt&&(Ot-=1);break;case"deleteContentForward":Ct===Mt&&(Vt+=1);break}ot.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:gt,change:ct||"",willCommit:!1,selStart:Ot,selEnd:Vt}})}),this._setEventListeners(w,st,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ot=>ot.target.value)}if(Et&&w.addEventListener("blur",Et),this.data.comb){const ot=(this.data.rect[2]-this.data.rect[0])/W;w.classList.add("comb"),w.style.letterSpacing=`calc(${ot}px * var(--scale-factor) - 1ch)`}}else w=document.createElement("div"),w.textContent=this.data.fieldValue,w.style.verticalAlign="middle",w.style.display="table-cell";return this._setTextStyle(w),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class I extends u{constructor(l){super(l,{isRenderable:!!l.data.hasOwnCanvas})}}class R extends u{constructor(l){super(l,{isRenderable:l.renderForms})}render(){const l=this.annotationStorage,y=this.data,w=y.id;let T=l.getValue(w,{value:y.exportValue===y.fieldValue}).value;typeof T=="string"&&(T=T!=="Off",l.setValue(w,{value:T})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const F=document.createElement("input");return r.add(F),F.setAttribute("data-element-id",w),F.disabled=y.readOnly,this._setRequired(F,this.data.required),F.type="checkbox",F.name=y.fieldName,T&&F.setAttribute("checked",!0),F.setAttribute("exportValue",y.exportValue),F.tabIndex=a,F.addEventListener("change",W=>{const{name:Y,checked:st}=W.target;for(const Et of this._getElementsByName(Y,w)){const at=st&&Et.exportValue===y.exportValue;Et.domElement&&(Et.domElement.checked=at),l.setValue(Et.id,{value:at})}l.setValue(w,{value:st})}),F.addEventListener("resetform",W=>{const Y=y.defaultFieldValue||"Off";W.target.checked=Y===y.exportValue}),this.enableScripting&&this.hasJSActions&&(F.addEventListener("updatefromsandbox",W=>{const Y={value(st){st.target.checked=st.detail.value!=="Off",l.setValue(w,{value:st.target.checked})}};this._dispatchEventFromSandbox(Y,W)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class v extends u{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const l=this.annotationStorage,y=this.data,w=y.id;let T=l.getValue(w,{value:y.fieldValue===y.buttonValue}).value;typeof T=="string"&&(T=T!==y.buttonValue,l.setValue(w,{value:T}));const F=document.createElement("input");if(r.add(F),F.setAttribute("data-element-id",w),F.disabled=y.readOnly,this._setRequired(F,this.data.required),F.type="radio",F.name=y.fieldName,T&&F.setAttribute("checked",!0),F.tabIndex=a,F.addEventListener("change",W=>{const{name:Y,checked:st}=W.target;for(const Et of this._getElementsByName(Y,w))l.setValue(Et.id,{value:!1});l.setValue(w,{value:st})}),F.addEventListener("resetform",W=>{const Y=y.defaultFieldValue;W.target.checked=Y!=null&&Y===y.buttonValue}),this.enableScripting&&this.hasJSActions){const W=y.buttonValue;F.addEventListener("updatefromsandbox",Y=>{const st={value:Et=>{const at=W===Et.detail.value;for(const ot of this._getElementsByName(Et.target.name)){const ct=at&&ot.id===w;ot.domElement&&(ot.domElement.checked=ct),l.setValue(ot.id,{value:ct})}}};this._dispatchEventFromSandbox(st,Y)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.checked)}return this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class C extends m{constructor(l){super(l,{ignoreBorder:l.data.hasAppearance})}render(){const l=super.render();l.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(l.title=this.data.alternativeText);const y=l.lastChild;return this.enableScripting&&this.hasJSActions&&y&&(this._setDefaultPropertiesFromJS(y),y.addEventListener("updatefromsandbox",w=>{this._dispatchEventFromSandbox({},w)})),l}}class q extends u{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const l=this.annotationStorage,y=this.data.id,w=l.getValue(y,{value:this.data.fieldValue}),T=document.createElement("select");r.add(T),T.setAttribute("data-element-id",y),T.disabled=this.data.readOnly,this._setRequired(T,this.data.required),T.name=this.data.fieldName,T.tabIndex=a;let F=this.data.combo&&this.data.options.length>0;this.data.combo||(T.size=this.data.options.length,this.data.multiSelect&&(T.multiple=!0)),T.addEventListener("resetform",at=>{const ot=this.data.defaultFieldValue;for(const ct of T.options)ct.selected=ct.value===ot});for(const at of this.data.options){const ot=document.createElement("option");ot.textContent=at.displayValue,ot.value=at.exportValue,w.value.includes(at.exportValue)&&(ot.setAttribute("selected",!0),F=!1),T.append(ot)}let W=null;if(F){const at=document.createElement("option");at.value=" ",at.setAttribute("hidden",!0),at.setAttribute("selected",!0),T.prepend(at),W=()=>{at.remove(),T.removeEventListener("input",W),W=null},T.addEventListener("input",W)}const Y=at=>{const ot=at?"value":"textContent",{options:ct,multiple:ut}=T;return ut?Array.prototype.filter.call(ct,gt=>gt.selected).map(gt=>gt[ot]):ct.selectedIndex===-1?null:ct[ct.selectedIndex][ot]};let st=Y(!1);const Et=at=>{const ot=at.target.options;return Array.prototype.map.call(ot,ct=>({displayValue:ct.textContent,exportValue:ct.value}))};return this.enableScripting&&this.hasJSActions?(T.addEventListener("updatefromsandbox",at=>{const ot={value(ct){W?.();const ut=ct.detail.value,gt=new Set(Array.isArray(ut)?ut:[ut]);for(const Ct of T.options)Ct.selected=gt.has(Ct.value);l.setValue(y,{value:Y(!0)}),st=Y(!1)},multipleSelection(ct){T.multiple=!0},remove(ct){const ut=T.options,gt=ct.detail.remove;ut[gt].selected=!1,T.remove(gt),ut.length>0&&Array.prototype.findIndex.call(ut,Mt=>Mt.selected)===-1&&(ut[0].selected=!0),l.setValue(y,{value:Y(!0),items:Et(ct)}),st=Y(!1)},clear(ct){for(;T.length!==0;)T.remove(0);l.setValue(y,{value:null,items:[]}),st=Y(!1)},insert(ct){const{index:ut,displayValue:gt,exportValue:Ct}=ct.detail.insert,Mt=T.children[ut],Ot=document.createElement("option");Ot.textContent=gt,Ot.value=Ct,Mt?Mt.before(Ot):T.append(Ot),l.setValue(y,{value:Y(!0),items:Et(ct)}),st=Y(!1)},items(ct){const{items:ut}=ct.detail;for(;T.length!==0;)T.remove(0);for(const gt of ut){const{displayValue:Ct,exportValue:Mt}=gt,Ot=document.createElement("option");Ot.textContent=Ct,Ot.value=Mt,T.append(Ot)}T.options.length>0&&(T.options[0].selected=!0),l.setValue(y,{value:Y(!0),items:Et(ct)}),st=Y(!1)},indices(ct){const ut=new Set(ct.detail.indices);for(const gt of ct.target.options)gt.selected=ut.has(gt.index);l.setValue(y,{value:Y(!0)}),st=Y(!1)},editable(ct){ct.target.disabled=!ct.detail.editable}};this._dispatchEventFromSandbox(ot,at)}),T.addEventListener("input",at=>{const ot=Y(!0);l.setValue(y,{value:ot}),at.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y,name:"Keystroke",value:st,changeEx:ot,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(T,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],at=>at.target.value)):T.addEventListener("input",function(at){l.setValue(y,{value:Y(!0)})}),this.data.combo&&this._setTextStyle(T),this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class K extends e{constructor(l){const{data:y,elements:w}=l;super(l,{isRenderable:e._hasPopupData(y)}),this.elements=w}render(){this.container.classList.add("popupAnnotation");const l=new H({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),y=[];for(const w of this.elements)w.popup=l,y.push(w.data.id),w.addHighlightArea();return this.container.setAttribute("aria-controls",y.map(w=>`${d.AnnotationPrefix}${w}`).join(",")),this.container}}class H{#t=null;#e=this.#u.bind(this);#n=this.#S.bind(this);#i=this.#E.bind(this);#o=this.#b.bind(this);#a=null;#s=null;#l=null;#c=null;#r=null;#f=null;#d=!1;#h=null;#p=null;#v=null;#m=null;#g=!1;constructor({container:l,color:y,elements:w,titleObj:T,modificationDate:F,contentsObj:W,richText:Y,parent:st,rect:Et,parentRect:at,open:ot}){this.#s=l,this.#m=T,this.#l=W,this.#v=Y,this.#r=st,this.#a=y,this.#p=Et,this.#f=at,this.#c=w;const ct=_.PDFDateString.toDateObject(F);ct&&(this.#t=st.l10n.get("annotation_date_string",{date:ct.toLocaleDateString(),time:ct.toLocaleTimeString()})),this.trigger=w.flatMap(ut=>ut.getElementsToTriggerPopup());for(const ut of this.trigger)ut.addEventListener("click",this.#o),ut.addEventListener("mouseenter",this.#i),ut.addEventListener("mouseleave",this.#n),ut.classList.add("popupTriggerArea");for(const ut of w)ut.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,ot&&this.#b()}render(){if(this.#h)return;const{page:{view:l},viewport:{rawDims:{pageWidth:y,pageHeight:w,pageX:T,pageY:F}}}=this.#r,W=this.#h=document.createElement("div");if(W.className="popup",this.#a){const Ut=W.style.outlineColor=d.Util.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?W.style.backgroundColor=`color-mix(in srgb, ${Ut} 30%, white)`:W.style.backgroundColor=d.Util.makeHexColor(...this.#a.map(Se=>Math.floor(.7*(255-Se)+Se)))}const Y=document.createElement("span");Y.className="header";const st=document.createElement("h1");if(Y.append(st),{dir:st.dir,str:st.textContent}=this.#m,W.append(Y),this.#t){const Ut=document.createElement("span");Ut.classList.add("popupDate"),this.#t.then(Zt=>{Ut.textContent=Zt}),Y.append(Ut)}const Et=this.#l,at=this.#v;if(at?.str&&(!Et?.str||Et.str===at.str))V.XfaLayer.render({xfaHtml:at.html,intent:"richText",div:W}),W.lastChild.classList.add("richText","popupContent");else{const Ut=this._formatContents(Et);W.append(Ut)}let ot=!!this.#f,ct=ot?this.#f:this.#p;for(const Ut of this.#c)if(!ct||d.Util.intersect(Ut.data.rect,ct)!==null){ct=Ut.data.rect,ot=!0;break}const ut=d.Util.normalizeRect([ct[0],l[3]-ct[1]+l[1],ct[2],l[3]-ct[3]+l[1]]),Ct=ot?ct[2]-ct[0]+5:0,Mt=ut[0]+Ct,Ot=ut[1],{style:Vt}=this.#s;Vt.left=`${100*(Mt-T)/y}%`,Vt.top=`${100*(Ot-F)/w}%`,this.#s.append(W)}_formatContents({str:l,dir:y}){const w=document.createElement("p");w.classList.add("popupContent"),w.dir=y;const T=l.split(/(?:\r\n?|\n)/);for(let F=0,W=T.length;F<W;++F){const Y=T[F];w.append(document.createTextNode(Y)),F<W-1&&w.append(document.createElement("br"))}return w}#u(l){l.altKey||l.shiftKey||l.ctrlKey||l.metaKey||(l.key==="Enter"||l.key==="Escape"&&this.#d)&&this.#b()}#b(){this.#d=!this.#d,this.#d?(this.#E(),this.#s.addEventListener("click",this.#o),this.#s.addEventListener("keydown",this.#e)):(this.#S(),this.#s.removeEventListener("click",this.#o),this.#s.removeEventListener("keydown",this.#e))}#E(){this.#h||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#S(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class nt extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0}),this.textContent=l.data.textContent,this.textPosition=l.data.textPosition,this.annotationEditorType=d.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const l=document.createElement("div");l.classList.add("annotationTextContent"),l.setAttribute("role","comment");for(const y of this.textContent){const w=document.createElement("span");w.textContent=y,l.append(w)}this.container.append(l)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}o.FreeTextAnnotationElement=nt;class rt extends e{#t=null;constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0),F=this.#t=this.svgFactory.createElement("svg:line");return F.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),F.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),F.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),F.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),F.setAttribute("stroke-width",l.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),T.append(F),this.container.append(T),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class At extends e{#t=null;constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0),F=l.borderStyle.width,W=this.#t=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",F/2),W.setAttribute("y",F/2),W.setAttribute("width",y-F),W.setAttribute("height",w-F),W.setAttribute("stroke-width",F||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),T.append(W),this.container.append(T),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class pt extends e{#t=null;constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0),F=l.borderStyle.width,W=this.#t=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",y/2),W.setAttribute("cy",w/2),W.setAttribute("rx",y/2-F/2),W.setAttribute("ry",w/2-F/2),W.setAttribute("stroke-width",F||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),T.append(W),this.container.append(T),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class vt extends e{#t=null;constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0);let F=[];for(const Y of l.vertices){const st=Y.x-l.rect[0],Et=l.rect[3]-Y.y;F.push(st+","+Et)}F=F.join(" ");const W=this.#t=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",F),W.setAttribute("stroke-width",l.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),T.append(W),this.container.append(T),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class wt extends vt{constructor(l){super(l),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class lt extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class N extends e{#t=[];constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=d.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:y,height:w}=f(l.rect),T=this.svgFactory.create(y,w,!0);for(const F of l.inkLists){let W=[];for(const st of F){const Et=st.x-l.rect[0],at=l.rect[3]-st.y;W.push(`${Et},${at}`)}W=W.join(" ");const Y=this.svgFactory.createElement(this.svgElementName);this.#t.push(Y),Y.setAttribute("points",W),Y.setAttribute("stroke-width",l.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),!l.popupRef&&this.hasPopupData&&this._createPopup(),T.append(Y)}return this.container.append(T),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}o.InkAnnotationElement=N;class S extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class p extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class g extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class E extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class D extends e{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}o.StampAnnotationElement=D;class L extends e{#t=null;constructor(l){super(l,{isRenderable:!0});const{filename:y,content:w}=this.data.file;this.filename=(0,_.getFilenameFromUrl)(y,!0),this.content=w,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:y,content:w})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:l,data:y}=this;let w;y.hasAppearance||y.fillAlpha===0?w=document.createElement("div"):(w=document.createElement("img"),w.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(y.name)?"paperclip":"pushpin"}.svg`,y.fillAlpha&&y.fillAlpha<1&&(w.style=`filter: opacity(${Math.round(y.fillAlpha*100)}%);`)),w.addEventListener("dblclick",this.#e.bind(this)),this.#t=w;const{isMac:T}=d.FeatureTest.platform;return l.addEventListener("keydown",F=>{F.key==="Enter"&&(T?F.metaKey:F.ctrlKey)&&this.#e()}),!y.popupRef&&this.hasPopupData?this._createPopup():w.classList.add("popupTriggerArea"),l.append(w),l}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class U{#t=null;#e=null;#n=new Map;constructor({div:l,accessibilityManager:y,annotationCanvasMap:w,l10n:T,page:F,viewport:W}){this.div=l,this.#t=y,this.#e=w,this.l10n=T,this.page=F,this.viewport=W,this.zIndex=0,this.l10n||=z.NullL10n}#i(l,y){const w=l.firstChild||l;w.id=`${d.AnnotationPrefix}${y}`,this.div.append(l),this.#t?.moveElementInDOM(this.div,l,w,!1)}async render(l){const{annotations:y}=l,w=this.div;(0,_.setLayerDimensions)(w,this.viewport);const T=new Map,F={data:null,layer:w,linkService:l.linkService,downloadManager:l.downloadManager,imageResourcesPath:l.imageResourcesPath||"",renderForms:l.renderForms!==!1,svgFactory:new _.DOMSVGFactory,annotationStorage:l.annotationStorage||new i.AnnotationStorage,enableScripting:l.enableScripting===!0,hasJSActions:l.hasJSActions,fieldObjects:l.fieldObjects,parent:this,elements:null};for(const W of y){if(W.noHTML)continue;const Y=W.annotationType===d.AnnotationType.POPUP;if(Y){const at=T.get(W.id);if(!at)continue;F.elements=at}else{const{width:at,height:ot}=f(W.rect);if(at<=0||ot<=0)continue}F.data=W;const st=h.create(F);if(!st.isRenderable)continue;if(!Y&&W.popupRef){const at=T.get(W.popupRef);at?at.push(st):T.set(W.popupRef,[st])}st.annotationEditorType>0&&this.#n.set(st.data.id,st);const Et=st.render();W.hidden&&(Et.style.visibility="hidden"),this.#i(Et,W.id)}this.#o(),await this.l10n.translate(w)}update({viewport:l}){const y=this.div;this.viewport=l,(0,_.setLayerDimensions)(y,{rotation:l.rotation}),this.#o(),y.hidden=!1}#o(){if(!this.#e)return;const l=this.div;for(const[y,w]of this.#e){const T=l.querySelector(`[data-annotation-id="${y}"]`);if(!T)continue;const{firstChild:F}=T;F?F.nodeName==="CANVAS"?F.replaceWith(w):F.before(w):T.append(w)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(l){return this.#n.get(l)}}o.AnnotationLayer=U}),((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0;function P(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function d(i){return Math.max(0,Math.min(255,255*i))}class _{static CMYK_G([M,z,V,a]){return["G",1-Math.min(1,.3*M+.59*V+.11*z+a)]}static G_CMYK([M]){return["CMYK",0,0,0,1-M]}static G_RGB([M]){return["RGB",M,M,M]}static G_rgb([M]){return M=d(M),[M,M,M]}static G_HTML([M]){const z=P(M);return`#${z}${z}${z}`}static RGB_G([M,z,V]){return["G",.3*M+.59*z+.11*V]}static RGB_rgb(M){return M.map(d)}static RGB_HTML(M){return`#${M.map(P).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([M,z,V,a]){return["RGB",1-Math.min(1,M+a),1-Math.min(1,V+a),1-Math.min(1,z+a)]}static CMYK_rgb([M,z,V,a]){return[d(1-Math.min(1,M+a)),d(1-Math.min(1,V+a)),d(1-Math.min(1,z+a))]}static CMYK_HTML(M){const z=this.CMYK_RGB(M).slice(1);return this.RGB_HTML(z)}static RGB_CMYK([M,z,V]){const a=1-M,t=1-z,r=1-V,f=Math.min(a,t,r);return["CMYK",a,t,r,f]}}o.ColorConverters=_}),((n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NullL10n=void 0,o.getL10nFallback=d;const P={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};P.print_progress_percent="{{progress}}%";function d(M,z){switch(M){case"find_match_count":M=`find_match_count[${z.total===1?"one":"other"}]`;break;case"find_match_count_limit":M=`find_match_count_limit[${z.limit===1?"one":"other"}]`;break}return P[M]||""}function _(M,z){return z?M.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(V,a)=>a in z?z[a]:"{{"+a+"}}"):M}const i={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(M,z=null,V=d(M,z)){return _(V,z)},async translate(M){}};o.NullL10n=i}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var d=P(25);class _{static setupStorage(M,z,V,a,t){const r=a.getValue(z,{value:null});switch(V.name){case"textarea":if(r.value!==null&&(M.textContent=r.value),t==="print")break;M.addEventListener("input",f=>{a.setValue(z,{value:f.target.value})});break;case"input":if(V.attributes.type==="radio"||V.attributes.type==="checkbox"){if(r.value===V.attributes.xfaOn?M.setAttribute("checked",!0):r.value===V.attributes.xfaOff&&M.removeAttribute("checked"),t==="print")break;M.addEventListener("change",f=>{a.setValue(z,{value:f.target.checked?f.target.getAttribute("xfaOn"):f.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&M.setAttribute("value",r.value),t==="print")break;M.addEventListener("input",f=>{a.setValue(z,{value:f.target.value})})}break;case"select":if(r.value!==null){M.setAttribute("value",r.value);for(const f of V.children)f.attributes.value===r.value?f.attributes.selected=!0:f.attributes.hasOwnProperty("selected")&&delete f.attributes.selected}M.addEventListener("input",f=>{const h=f.target.options,e=h.selectedIndex===-1?"":h[h.selectedIndex].value;a.setValue(z,{value:e})});break}}static setAttributes({html:M,element:z,storage:V=null,intent:a,linkService:t}){const{attributes:r}=z,f=M instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${a}`);for(const[h,e]of Object.entries(r))if(e!=null)switch(h){case"class":e.length&&M.setAttribute(h,e.join(" "));break;case"dataId":break;case"id":M.setAttribute("data-element-id",e);break;case"style":Object.assign(M.style,e);break;case"textContent":M.textContent=e;break;default:(!f||h!=="href"&&h!=="newWindow")&&M.setAttribute(h,e)}f&&t.addLinkAttributes(M,r.href,r.newWindow),V&&r.dataId&&this.setupStorage(M,r.dataId,z,V)}static render(M){const z=M.annotationStorage,V=M.linkService,a=M.xfaHtml,t=M.intent||"display",r=document.createElement(a.name);a.attributes&&this.setAttributes({html:r,element:a,intent:t,linkService:V});const f=[[a,-1,r]],h=M.div;if(h.append(r),M.viewport){const m=`matrix(${M.viewport.transform.join(",")})`;h.style.transform=m}t!=="richText"&&h.setAttribute("class","xfaLayer xfaFont");const e=[];for(;f.length>0;){const[m,b,u]=f.at(-1);if(b+1===m.children.length){f.pop();continue}const x=m.children[++f.at(-1)[1]];if(x===null)continue;const{name:I}=x;if(I==="#text"){const v=document.createTextNode(x.value);e.push(v),u.append(v);continue}const R=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,I):document.createElement(I);if(u.append(R),x.attributes&&this.setAttributes({html:R,element:x,storage:z,intent:t,linkService:V}),x.children&&x.children.length>0)f.push([x,-1,R]);else if(x.value){const v=document.createTextNode(x.value);d.XfaText.shouldBuildText(I)&&e.push(v),R.append(v)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:e}}static update(M){const z=`matrix(${M.viewport.transform.join(",")})`;M.div.style.transform=z,M.div.hidden=!1}}o.XfaLayer=_}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InkEditor=void 0;var d=P(1),_=P(4),i=P(29),M=P(6),z=P(5);class V extends _.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#s=new Path2D;#l=!1;#c=!1;#r=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){_.AnnotationEditor.initialize(t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(t,r){switch(t){case d.AnnotationEditorParamsType.INK_THICKNESS:V._defaultThickness=r;break;case d.AnnotationEditorParamsType.INK_COLOR:V._defaultColor=r;break;case d.AnnotationEditorParamsType.INK_OPACITY:V._defaultOpacity=r/100;break}}updateParams(t,r){switch(t){case d.AnnotationEditorParamsType.INK_THICKNESS:this.#v(r);break;case d.AnnotationEditorParamsType.INK_COLOR:this.#m(r);break;case d.AnnotationEditorParamsType.INK_OPACITY:this.#g(r);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.INK_THICKNESS,V._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,V._defaultColor||_.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(V._defaultOpacity*100)]]}get propertiesToUpdate(){return[[d.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||V._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,this.color||V._defaultColor||_.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??V._defaultOpacity))]]}#v(t){const r=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#x()},undo:()=>{this.thickness=r,this.#x()},mustExec:!0,type:d.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(t){const r=this.color;this.addCommands({cmd:()=>{this.color=t,this.#_()},undo:()=>{this.color=r,this.#_()},mustExec:!0,type:d.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(t){t/=100;const r=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#_()},undo:()=>{this.opacity=r,this.#_()},mustExec:!0,type:d.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#k(),this.#R()),this.isAttachedToDOM||(this.parent.add(this),this.#y()),this.#x()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,r]=this.parentDimensions,f=this.width*t,h=this.height*r;this.setDimensions(f,h)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#a))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#a))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:t,parentDimensions:[r,f]}=this;switch(t){case 90:return[0,f,f,r];case 180:return[r,f,r,f];case 270:return[r,0,f,r];default:return[0,0,r,f]}}#b(){const{ctx:t,color:r,opacity:f,thickness:h,parentScale:e,scaleFactor:m}=this;t.lineWidth=h*e/m,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${r}${(0,z.opacityToHex)(f)}`}#E(t,r){this.canvas.addEventListener("contextmenu",M.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#a),this.isEditing=!0,this.#r||(this.#r=!0,this.#y(),this.thickness||=V._defaultThickness,this.color||=V._defaultColor||_.AnnotationEditor._defaultLineColor,this.opacity??=V._defaultOpacity),this.currentPath.push([t,r]),this.#c=!1,this.#b(),this.#p=()=>{this.#D(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#S(t,r){const[f,h]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===f&&r===h)return;const e=this.currentPath;let m=this.#s;if(e.push([t,r]),this.#c=!0,e.length<=2){m.moveTo(...e[0]),m.lineTo(t,r);return}e.length===3&&(this.#s=m=new Path2D,m.moveTo(...e[0])),this.#I(m,...e.at(-3),...e.at(-2),t,r)}#C(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#s.lineTo(...t)}#T(t,r){this.#p=null,t=Math.min(Math.max(t,0),this.canvas.width),r=Math.min(Math.max(r,0),this.canvas.height),this.#S(t,r),this.#C();let f;if(this.currentPath.length!==1)f=this.#O();else{const u=[t,r];f=[[u,u.slice(),u.slice(),u]]}const h=this.#s,e=this.currentPath;this.currentPath=[],this.#s=new Path2D;const m=()=>{this.allRawPaths.push(e),this.paths.push(f),this.bezierPath2D.push(h),this.rebuild()},b=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#k(),this.#R()),this.#x())};this.addCommands({cmd:m,undo:b,mustExec:!0})}#D(){if(!this.#c)return;this.#c=!1;const t=Math.ceil(this.thickness*this.parentScale),r=this.currentPath.slice(-3),f=r.map(m=>m[0]),h=r.map(m=>m[1]);Math.min(...f)-t,Math.max(...f)+t,Math.min(...h)-t,Math.max(...h)+t;const{ctx:e}=this;e.save(),e.clearRect(0,0,this.canvas.width,this.canvas.height);for(const m of this.bezierPath2D)e.stroke(m);e.stroke(this.#s),e.restore()}#I(t,r,f,h,e,m,b){const u=(r+h)/2,x=(f+e)/2,I=(h+m)/2,R=(e+b)/2;t.bezierCurveTo(u+2*(h-u)/3,x+2*(e-x)/3,I+2*(h-I)/3,R+2*(e-R)/3,I,R)}#O(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const r=[];let f,[h,e]=t[0];for(f=1;f<t.length-2;f++){const[v,C]=t[f],[q,K]=t[f+1],H=(v+q)/2,nt=(C+K)/2,rt=[h+2*(v-h)/3,e+2*(C-e)/3],At=[H+2*(v-H)/3,nt+2*(C-nt)/3];r.push([[h,e],rt,At,[H,nt]]),[h,e]=[H,nt]}const[m,b]=t[f],[u,x]=t[f+1],I=[h+2*(m-h)/3,e+2*(b-e)/3],R=[u+2*(m-u)/3,x+2*(b-x)/3];return r.push([[h,e],I,R,[u,x]]),r}#_(){if(this.isEmpty()){this.#w();return}this.#b();const{canvas:t,ctx:r}=this;r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),this.#w();for(const f of this.bezierPath2D)r.stroke(f)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#x(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),t.preventDefault(),t.type!=="mouse"&&this.div.focus(),this.#E(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#S(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#L(t)}canvasPointerleave(t){this.#L(t)}#L(t){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#a),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",M.noContextMenu)},10),this.#T(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#k(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",_.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>this.canvas?.setAttribute("aria-label",t)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#R(){this.#f=new ResizeObserver(t=>{const r=t[0].contentRect;r.width&&r.height&&this.setDimensions(r.width,r.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let t,r;this.width&&(t=this.x,r=this.y),super.render(),_.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(b=>this.div?.setAttribute("aria-label",b));const[f,h,e,m]=this.#u();if(this.setAt(f,h,0,0),this.setDims(e,m),this.#k(),this.width){const[b,u]=this.parentDimensions;this.setAspectRatio(this.width*b,this.height*u),this.setAt(t*b,r*u,this.width*b,this.height*u),this.#r=!0,this.#y(),this.setDims(this.width*b,this.height*u),this.#_(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#R(),this.div}#y(){if(!this.#r)return;const[t,r]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*r),this.#w()}setDimensions(t,r){const f=Math.round(t),h=Math.round(r);if(this.#d===f&&this.#h===h)return;this.#d=f,this.#h=h,this.canvas.style.visibility="hidden";const[e,m]=this.parentDimensions;this.width=t/e,this.height=r/m,this.fixAndSetPosition(),this.#l&&this.#P(t,r),this.#y(),this.#_(),this.canvas.style.visibility="visible",this.fixDims()}#P(t,r){const f=this.#F(),h=(t-f)/this.#e,e=(r-f)/this.#t;this.scaleFactor=Math.min(h,e)}#w(){const t=this.#F()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#N(t){const r=new Path2D;for(let f=0,h=t.length;f<h;f++){const[e,m,b,u]=t[f];f===0&&r.moveTo(...e),r.bezierCurveTo(m[0],m[1],b[0],b[1],u[0],u[1])}return r}static#j(t,r,f){const[h,e,m,b]=r;switch(f){case 0:for(let u=0,x=t.length;u<x;u+=2)t[u]+=h,t[u+1]=b-t[u+1];break;case 90:for(let u=0,x=t.length;u<x;u+=2){const I=t[u];t[u]=t[u+1]+h,t[u+1]=I+e}break;case 180:for(let u=0,x=t.length;u<x;u+=2)t[u]=m-t[u],t[u+1]+=e;break;case 270:for(let u=0,x=t.length;u<x;u+=2){const I=t[u];t[u]=m-t[u+1],t[u+1]=b-I}break;default:throw new Error("Invalid rotation")}return t}static#B(t,r,f){const[h,e,m,b]=r;switch(f){case 0:for(let u=0,x=t.length;u<x;u+=2)t[u]-=h,t[u+1]=b-t[u+1];break;case 90:for(let u=0,x=t.length;u<x;u+=2){const I=t[u];t[u]=t[u+1]-e,t[u+1]=I-h}break;case 180:for(let u=0,x=t.length;u<x;u+=2)t[u]=m-t[u],t[u+1]-=e;break;case 270:for(let u=0,x=t.length;u<x;u+=2){const I=t[u];t[u]=b-t[u+1],t[u+1]=m-I}break;default:throw new Error("Invalid rotation")}return t}#H(t,r,f,h){const e=[],m=this.thickness/2,b=t*r+m,u=t*f+m;for(const x of this.paths){const I=[],R=[];for(let v=0,C=x.length;v<C;v++){const[q,K,H,nt]=x[v],rt=t*q[0]+b,At=t*q[1]+u,pt=t*K[0]+b,vt=t*K[1]+u,wt=t*H[0]+b,lt=t*H[1]+u,N=t*nt[0]+b,S=t*nt[1]+u;v===0&&(I.push(rt,At),R.push(rt,At)),I.push(pt,vt,wt,lt,N,S),R.push(pt,vt),v===C-1&&R.push(N,S)}e.push({bezier:V.#j(I,h,this.rotation),points:V.#j(R,h,this.rotation)})}return e}#M(){let t=1/0,r=-1/0,f=1/0,h=-1/0;for(const e of this.paths)for(const[m,b,u,x]of e){const I=d.Util.bezierBoundingBox(...m,...b,...u,...x);t=Math.min(t,I[0]),f=Math.min(f,I[1]),r=Math.max(r,I[2]),h=Math.max(h,I[3])}return[t,f,r,h]}#F(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#x(t=!1){if(this.isEmpty())return;if(!this.#l){this.#_();return}const r=this.#M(),f=this.#F();this.#e=Math.max(_.AnnotationEditor.MIN_SIZE,r[2]-r[0]),this.#t=Math.max(_.AnnotationEditor.MIN_SIZE,r[3]-r[1]);const h=Math.ceil(f+this.#e*this.scaleFactor),e=Math.ceil(f+this.#t*this.scaleFactor),[m,b]=this.parentDimensions;this.width=h/m,this.height=e/b,this.setAspectRatio(h,e);const u=this.translationX,x=this.translationY;this.translationX=-r[0],this.translationY=-r[1],this.#y(),this.#_(),this.#d=h,this.#h=e,this.setDims(h,e);const I=t?f/this.scaleFactor/2:0;this.translate(u-this.translationX-I,x-this.translationY-I)}static deserialize(t,r,f){if(t instanceof i.InkAnnotationElement)return null;const h=super.deserialize(t,r,f);h.thickness=t.thickness,h.color=d.Util.makeHexColor(...t.color),h.opacity=t.opacity;const[e,m]=h.pageDimensions,b=h.width*e,u=h.height*m,x=h.parentScale,I=t.thickness/2;h.#l=!0,h.#d=Math.round(b),h.#h=Math.round(u);const{paths:R,rect:v,rotation:C}=t;for(let{bezier:K}of R){K=V.#B(K,v,C);const H=[];h.paths.push(H);let nt=x*(K[0]-I),rt=x*(K[1]-I);for(let pt=2,vt=K.length;pt<vt;pt+=6){const wt=x*(K[pt]-I),lt=x*(K[pt+1]-I),N=x*(K[pt+2]-I),S=x*(K[pt+3]-I),p=x*(K[pt+4]-I),g=x*(K[pt+5]-I);H.push([[nt,rt],[wt,lt],[N,S],[p,g]]),nt=p,rt=g}const At=this.#N(H);h.bezierPath2D.push(At)}const q=h.#M();return h.#e=Math.max(_.AnnotationEditor.MIN_SIZE,q[2]-q[0]),h.#t=Math.max(_.AnnotationEditor.MIN_SIZE,q[3]-q[1]),h.#P(b,u),h}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),r=_.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:d.AnnotationEditorType.INK,color:r,thickness:this.thickness,opacity:this.opacity,paths:this.#H(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}o.InkEditor=V}),((n,o,P)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StampEditor=void 0;var d=P(1),_=P(4),i=P(6),M=P(29);class z extends _.AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#o=null;#a=null;#s=null;#l=null;#c=!1;#r=!1;static _type="stamp";constructor(a){super({...a,name:"stampEditor"}),this.#i=a.bitmapUrl,this.#o=a.bitmapFile}static initialize(a){_.AnnotationEditor.initialize(a)}static get supportedTypes(){const a=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,d.shadow)(this,"supportedTypes",a.map(t=>`image/${t}`))}static get supportedTypesStr(){return(0,d.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(a){return this.supportedTypes.includes(a)}static paste(a,t){t.pasteEditor(d.AnnotationEditorType.STAMP,{bitmapFile:a.getAsFile()})}#f(a,t=!1){if(!a){this.remove();return}this.#t=a.bitmap,t||(this.#e=a.id,this.#c=a.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#h(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(t=>this.#f(t,!0)).finally(()=>this.#d());return}if(this.#i){const t=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(t).then(r=>this.#f(r)).finally(()=>this.#d());return}if(this.#o){const t=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(t).then(r=>this.#f(r)).finally(()=>this.#d());return}const a=document.createElement("input");a.type="file",a.accept=z.supportedTypesStr,this.#n=new Promise(t=>{a.addEventListener("change",async()=>{if(!a.files||a.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(a.files[0]);this.#f(r)}t()}),a.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>this.#d()),a.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#h();return}super.rebuild(),this.div!==null&&(this.#e&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let a,t;if(this.width&&(a=this.x,t=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#h(),this.width){const[r,f]=this.parentDimensions;this.setAt(a*r,t*f,this.width*r,this.height*f)}return this.div}#p(){const{div:a}=this;let{width:t,height:r}=this.#t;const[f,h]=this.pageDimensions,e=.75;if(this.width)t=this.width*f,r=this.height*h;else if(t>e*f||r>e*h){const x=Math.min(e*f/t,e*h/r);t*=x,r*=x}const[m,b]=this.parentDimensions;this.setDims(t*m/f,r*b/h),this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");a.append(u),a.hidden=!1,this.#g(t,r),this.#b(),this.#r||(this.parent.addUndoableEditor(this),this.#r=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(a,t){const[r,f]=this.parentDimensions;this.width=a/r,this.height=t/f,this.setDims(a,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const h=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(a,t)},h)}#m(a,t){const{width:r,height:f}=this.#t;let h=r,e=f,m=this.#t;for(;h>2*a||e>2*t;){const b=h,u=e;h>2*a&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2)),e>2*t&&(e=e>=16384?Math.floor(e/2)-1:Math.ceil(e/2));const x=new OffscreenCanvas(h,e);x.getContext("2d").drawImage(m,0,0,b,u,0,0,h,e),m=x.transferToImageBitmap()}return m}#g(a,t){a=Math.ceil(a),t=Math.ceil(t);const r=this.#a;if(!r||r.width===a&&r.height===t)return;r.width=a,r.height=t;const f=this.#c?this.#t:this.#m(a,t),h=r.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(f,0,0,f.width,f.height,0,0,a,t)}#u(a){if(a){if(this.#c){const f=this._uiManager.imageManager.getSvgUrl(this.#e);if(f)return f}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#t,t.getContext("2d").drawImage(this.#t,0,0),t.toDataURL()}if(this.#c){const[t,r]=this.pageDimensions,f=Math.round(this.width*t*i.PixelsPerInch.PDF_TO_CSS_UNITS),h=Math.round(this.height*r*i.PixelsPerInch.PDF_TO_CSS_UNITS),e=new OffscreenCanvas(f,h);return e.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,f,h),e.transferToImageBitmap()}return structuredClone(this.#t)}#b(){this.#s=new ResizeObserver(a=>{const t=a[0].contentRect;t.width&&t.height&&this.#v(t.width,t.height)}),this.#s.observe(this.div)}static deserialize(a,t,r){if(a instanceof M.StampAnnotationElement)return null;const f=super.deserialize(a,t,r),{rect:h,bitmapUrl:e,bitmapId:m,isSvg:b,accessibilityData:u}=a;m&&r.imageManager.isValidId(m)?f.#e=m:f.#i=e,f.#c=b;const[x,I]=f.pageDimensions;return f.width=(h[2]-h[0])/x,f.height=(h[3]-h[1])/I,u&&(f.altTextData=u),f}serialize(a=!1,t=null){if(this.isEmpty())return null;const r={annotationType:d.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(a)return r.bitmapUrl=this.#u(!0),r.accessibilityData=this.altTextData,r;const{decorative:f,altText:h}=this.altTextData;if(!f&&h&&(r.accessibilityData={type:"Figure",alt:h}),t===null)return r;t.stamps||=new Map;const e=this.#c?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#e))t.stamps.set(this.#e,{area:e,serialized:r}),r.bitmap=this.#u(!1);else if(this.#c){const m=t.stamps.get(this.#e);e>m.area&&(m.area=e,m.serialized.bitmap.close(),m.serialized.bitmap=this.#u(!1))}return r}}o.StampEditor=z})],__webpack_module_cache__={};function __w_pdfjs_require__(n){var o=__webpack_module_cache__[n];if(o!==void 0)return o.exports;var P=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n](P,P.exports,__w_pdfjs_require__),P.exports}var __webpack_exports__={};return(()=>{var n=__webpack_exports__;Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AbortException",{enumerable:!0,get:function(){return o.AbortException}}),Object.defineProperty(n,"AnnotationEditorLayer",{enumerable:!0,get:function(){return i.AnnotationEditorLayer}}),Object.defineProperty(n,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return o.AnnotationEditorParamsType}}),Object.defineProperty(n,"AnnotationEditorType",{enumerable:!0,get:function(){return o.AnnotationEditorType}}),Object.defineProperty(n,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return M.AnnotationEditorUIManager}}),Object.defineProperty(n,"AnnotationLayer",{enumerable:!0,get:function(){return z.AnnotationLayer}}),Object.defineProperty(n,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(n,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(n,"DOMSVGFactory",{enumerable:!0,get:function(){return d.DOMSVGFactory}}),Object.defineProperty(n,"FeatureTest",{enumerable:!0,get:function(){return o.FeatureTest}}),Object.defineProperty(n,"GlobalWorkerOptions",{enumerable:!0,get:function(){return V.GlobalWorkerOptions}}),Object.defineProperty(n,"ImageKind",{enumerable:!0,get:function(){return o.ImageKind}}),Object.defineProperty(n,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(n,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(n,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(n,"PDFDataRangeTransport",{enumerable:!0,get:function(){return P.PDFDataRangeTransport}}),Object.defineProperty(n,"PDFDateString",{enumerable:!0,get:function(){return d.PDFDateString}}),Object.defineProperty(n,"PDFWorker",{enumerable:!0,get:function(){return P.PDFWorker}}),Object.defineProperty(n,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(n,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(n,"PixelsPerInch",{enumerable:!0,get:function(){return d.PixelsPerInch}}),Object.defineProperty(n,"PromiseCapability",{enumerable:!0,get:function(){return o.PromiseCapability}}),Object.defineProperty(n,"RenderingCancelledException",{enumerable:!0,get:function(){return d.RenderingCancelledException}}),Object.defineProperty(n,"SVGGraphics",{enumerable:!0,get:function(){return P.SVGGraphics}}),Object.defineProperty(n,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(n,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(n,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(n,"XfaLayer",{enumerable:!0,get:function(){return a.XfaLayer}}),Object.defineProperty(n,"build",{enumerable:!0,get:function(){return P.build}}),Object.defineProperty(n,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(n,"getDocument",{enumerable:!0,get:function(){return P.getDocument}}),Object.defineProperty(n,"getFilenameFromUrl",{enumerable:!0,get:function(){return d.getFilenameFromUrl}}),Object.defineProperty(n,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return d.getPdfFilenameFromUrl}}),Object.defineProperty(n,"getXfaPageViewport",{enumerable:!0,get:function(){return d.getXfaPageViewport}}),Object.defineProperty(n,"isDataScheme",{enumerable:!0,get:function(){return d.isDataScheme}}),Object.defineProperty(n,"isPdfFile",{enumerable:!0,get:function(){return d.isPdfFile}}),Object.defineProperty(n,"loadScript",{enumerable:!0,get:function(){return d.loadScript}}),Object.defineProperty(n,"noContextMenu",{enumerable:!0,get:function(){return d.noContextMenu}}),Object.defineProperty(n,"normalizeUnicode",{enumerable:!0,get:function(){return o.normalizeUnicode}}),Object.defineProperty(n,"renderTextLayer",{enumerable:!0,get:function(){return _.renderTextLayer}}),Object.defineProperty(n,"setLayerDimensions",{enumerable:!0,get:function(){return d.setLayerDimensions}}),Object.defineProperty(n,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(n,"updateTextLayer",{enumerable:!0,get:function(){return _.updateTextLayer}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return P.version}});var o=__w_pdfjs_require__(1),P=__w_pdfjs_require__(2),d=__w_pdfjs_require__(6),_=__w_pdfjs_require__(26),i=__w_pdfjs_require__(27),M=__w_pdfjs_require__(5),z=__w_pdfjs_require__(29),V=__w_pdfjs_require__(14),a=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var hasRequiredCore_min;function requireCore_min(){return hasRequiredCore_min||(hasRequiredCore_min=1,(function(n){var o=requireReact(),P=requirePdf();function d(c){var A=Object.create(null);return c&&Object.keys(c).forEach((function(O){if(O!=="default"){var j=Object.getOwnPropertyDescriptor(c,O);Object.defineProperty(A,O,j.get?j:{enumerable:!0,get:function(){return c[O]}})}})),A.default=c,Object.freeze(A)}var _,i=d(o),M=d(P);n.AnnotationType=void 0,(_=n.AnnotationType||(n.AnnotationType={}))[_.Text=1]="Text",_[_.Link=2]="Link",_[_.FreeText=3]="FreeText",_[_.Line=4]="Line",_[_.Square=5]="Square",_[_.Circle=6]="Circle",_[_.Polygon=7]="Polygon",_[_.Polyline=8]="Polyline",_[_.Highlight=9]="Highlight",_[_.Underline=10]="Underline",_[_.Squiggly=11]="Squiggly",_[_.StrikeOut=12]="StrikeOut",_[_.Stamp=13]="Stamp",_[_.Caret=14]="Caret",_[_.Ink=15]="Ink",_[_.Popup=16]="Popup",_[_.FileAttachment=17]="FileAttachment";var z=function(c,A){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,j){O.__proto__=j}||function(O,j){for(var G in j)Object.prototype.hasOwnProperty.call(j,G)&&(O[G]=j[G])},z(c,A)};function V(c,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function O(){this.constructor=c}z(c,A),c.prototype=A===null?Object.create(A):(O.prototype=A.prototype,new O)}var a,t=function(){return t=Object.assign||function(c){for(var A,O=1,j=arguments.length;O<j;O++)for(var G in A=arguments[O])Object.prototype.hasOwnProperty.call(A,G)&&(c[G]=A[G]);return c},t.apply(this,arguments)};n.TextDirection=void 0,(a=n.TextDirection||(n.TextDirection={})).RightToLeft="RTL",a.LeftToRight="LTR";var r,f=i.createContext({currentTheme:"light",direction:n.TextDirection.LeftToRight,setCurrentTheme:function(){}}),h=function(c){var A=[];return Object.keys(c).forEach((function(O){O&&c[O]&&A.push(O)})),A.join(" ")},e=typeof window<"u"?i.useLayoutEffect:i.useEffect,m=function(c){var A=i.useRef(null),O=c.once,j=c.threshold,G=c.onVisibilityChanged;return e((function(){var $=A.current;if($){var tt=new IntersectionObserver((function(J){J.forEach((function(B){var Q=B.isIntersecting,Z=B.intersectionRatio;G({isVisible:Q,ratio:Z}),Q&&O&&(tt.unobserve($),tt.disconnect())}))}),{threshold:j||0});return tt.observe($),function(){tt.unobserve($),tt.disconnect()}}}),[]),A},b=function(c){var A=c.children,O=c.ignoreDirection,j=O!==void 0&&O,G=c.size,$=G===void 0?24:G,tt=i.useContext(f).direction,J=!j&&tt===n.TextDirection.RightToLeft,B="".concat($||24,"px");return i.createElement("svg",{"aria-hidden":"true",className:h({"rpv-core__icon":!0,"rpv-core__icon--rtl":J}),focusable:"false",height:B,viewBox:"0 0 24 24",width:B},A)},u=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},x=function(c){var A=c.children,O=c.testId,j=c.onClick,G=i.useContext(f).direction===n.TextDirection.RightToLeft,$=O?{"data-testid":O}:{};return i.createElement("button",t({className:h({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":G}),type:"button",onClick:j},$),A)},I=function(c){var A=c.size,O=A===void 0?"4rem":A,j=c.testId,G=i.useState(!1),$=G[0],tt=G[1],J=j?{"data-testid":j}:{},B=m({onVisibilityChanged:function(Q){tt(Q.isVisible)}});return i.createElement("div",t({},J,{className:h({"rpv-core__spinner":!0,"rpv-core__spinner--animating":$}),ref:B,style:{height:O,width:O}}))},R=function(c){var A=c.ariaLabel,O=A===void 0?"":A,j=c.autoFocus,G=j!==void 0&&j,$=c.placeholder,tt=$===void 0?"":$,J=c.testId,B=c.type,Q=B===void 0?"text":B,Z=c.value,ft=Z===void 0?"":Z,ht=c.onChange,dt=c.onKeyDown,St=dt===void 0?function(){}:dt,yt=i.useContext(f).direction,bt=i.useRef(),Kt=yt===n.TextDirection.RightToLeft,Dt={ref:bt,"data-testid":"","aria-label":O,className:h({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Kt}),placeholder:tt,value:ft,onChange:function(It){return ht(It.target.value)},onKeyDown:St};return J&&(Dt["data-testid"]=J),e((function(){if(G){var It=bt.current;if(It){var Ht=window.scrollX,Tt=window.scrollY;It.focus(),window.scrollTo(Ht,Tt)}}}),[]),Q==="text"?i.createElement("input",t({type:"text"},Dt)):i.createElement("input",t({type:"password"},Dt))};(function(c){c[c.ExitFullScreen=0]="ExitFullScreen",c[c.FullScreenChange=1]="FullScreenChange",c[c.FullScreenElement=2]="FullScreenElement",c[c.FullScreenEnabled=3]="FullScreenEnabled",c[c.RequestFullScreen=4]="RequestFullScreen"})(r||(r={}));var v,C={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},q={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},K={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},H=typeof window<"u",nt=H&&(r.FullScreenEnabled in document&&C||q.FullScreenEnabled in document&&q||K.FullScreenEnabled in document&&K)||C,rt=function(){return H&&nt.FullScreenEnabled in document&&document[nt.FullScreenEnabled]===!0},At=function(c){return H?c[nt.ExitFullScreen]():Promise.resolve({})},pt=function(){return H?document[nt.FullScreenElement]:null},vt=function(c,A){var O=i.useRef(),j=function(){O.current&&clearTimeout(O.current)};return i.useEffect((function(){return function(){return j()}}),[]),i.useCallback((function(){for(var G=[],$=0;$<arguments.length;$++)G[$]=arguments[$];j(),O.current=setTimeout((function(){c.apply(void 0,G)}),A)}),[c,A])},wt=function(){var c=i.useRef(!1);return i.useEffect((function(){return c.current=!0,function(){c.current=!1}}),[]),c},lt=function(c){var A=i.useRef(c);return i.useEffect((function(){A.current=c}),[c]),A.current};(function(c){c.NotRenderedYet="NotRenderedYet",c.Rendering="Rendering",c.Rendered="Rendered"})(v||(v={}));var N,S=-9999,p=function(c){var A=c.doc,O=A.numPages,j=A.loadingTask.docId,G=i.useMemo((function(){return Array(O).fill(null).map((function(J,B){return{pageIndex:B,renderStatus:v.NotRenderedYet,visibility:S}}))}),[j]),$=i.useRef({currentRenderingPage:-1,startRange:0,endRange:O-1,visibilities:G}),tt=function(J,B){$.current.visibilities[J].visibility=B};return{getHighestPriorityPage:function(){var J=$.current.visibilities.slice($.current.startRange,$.current.endRange+1).filter((function(ht){return ht.visibility>S}));if(!J.length)return-1;for(var B=J[0].pageIndex,Q=J[J.length-1].pageIndex,Z=J.length,ft=0;ft<Z;ft++){if(J[ft].renderStatus===v.Rendering)return-1;if(J[ft].renderStatus===v.NotRenderedYet)return J[ft].pageIndex}return Q+1<O&&$.current.visibilities[Q+1].renderStatus!==v.Rendered?Q+1:B-1>=0&&$.current.visibilities[B-1].renderStatus!==v.Rendered?B-1:-1},isInRange:function(J){return J>=$.current.startRange&&J<=$.current.endRange},markNotRendered:function(){for(var J=0;J<O;J++)$.current.visibilities[J].renderStatus=v.NotRenderedYet},markRendered:function(J){$.current.visibilities[J].renderStatus=v.Rendered},markRendering:function(J){$.current.currentRenderingPage!==-1&&$.current.currentRenderingPage!==J&&$.current.visibilities[$.current.currentRenderingPage].renderStatus===v.Rendering&&($.current.visibilities[$.current.currentRenderingPage].renderStatus=v.NotRenderedYet),$.current.visibilities[J].renderStatus=v.Rendering,$.current.currentRenderingPage=J},setOutOfRange:function(J){tt(J,S)},setRange:function(J,B){$.current.startRange=J,$.current.endRange=B;for(var Q=0;Q<O;Q++)(Q<J||Q>B)&&($.current.visibilities[Q].visibility=S,$.current.visibilities[Q].renderStatus=v.NotRenderedYet)},setVisibility:tt}},g={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},E=i.createContext({l10n:g,setL10n:function(){}}),D=0,L=function(){return D++},U=function(c,A,O){var j=function(G){var $=A.current;if($){var tt=G.target;if(tt instanceof Element&&tt.shadowRoot){var J=G.composedPath();J.length>0&&!$.contains(J[0])&&O()}else $.contains(tt)||O()}};i.useEffect((function(){if(c){var G={capture:!0};return document.addEventListener("click",j,G),function(){document.removeEventListener("click",j,G)}}}),[])},k=function(c){var A=function(O){O.key==="Escape"&&c()};i.useEffect((function(){return document.addEventListener("keyup",A),function(){document.removeEventListener("keyup",A)}}),[])},l=function(c){var A=c.ariaControlsSuffix,O=c.children,j=c.closeOnClickOutside,G=c.closeOnEscape,$=c.onToggle,tt=i.useRef(),J=i.useContext(f).direction===n.TextDirection.RightToLeft;return i.useEffect((function(){var B=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=B}}),[]),k((function(){tt.current&&G&&$()})),U(j,tt,$),e((function(){var B=tt.current;if(B){var Q=.75*document.body.clientHeight;B.getBoundingClientRect().height>=Q&&(B.style.overflow="auto",B.style.maxHeight="".concat(Q,"px"))}}),[]),i.createElement("div",{"aria-modal":"true",className:h({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":J}),id:"rpv-core__modal-body-".concat(A),ref:tt,role:"dialog",tabIndex:-1},O)},y=function(c){var A=c.children;return i.createElement("div",{className:"rpv-core__modal-overlay"},A)};n.ToggleStatus=void 0,(N=n.ToggleStatus||(n.ToggleStatus={})).Close="Close",N.Open="Open",N.Toggle="Toggle";var w,T=function(c){var A=i.useState(c),O=A[0],j=A[1];return{opened:O,toggle:function(G){switch(G){case n.ToggleStatus.Close:j(!1);break;case n.ToggleStatus.Open:j(!0);break;case n.ToggleStatus.Toggle:default:j((function($){return!$}))}}}},F=function(c){var A=c.content,O=c.isOpened,j=O!==void 0&&O,G=c.target,$=T(j),tt=$.opened,J=$.toggle;return i.createElement(i.Fragment,null,G&&G(J,tt),tt&&A(J))};n.Position=void 0,(w=n.Position||(n.Position={})).TopLeft="TOP_LEFT",w.TopCenter="TOP_CENTER",w.TopRight="TOP_RIGHT",w.RightTop="RIGHT_TOP",w.RightCenter="RIGHT_CENTER",w.RightBottom="RIGHT_BOTTOM",w.BottomLeft="BOTTOM_LEFT",w.BottomCenter="BOTTOM_CENTER",w.BottomRight="BOTTOM_RIGHT",w.LeftTop="LEFT_TOP",w.LeftCenter="LEFT_CENTER",w.LeftBottom="LEFT_BOTTOM";var W,Y,st,Et,at,ot,ct,ut,gt=function(c,A,O,j,G){e((function(){var $=A.current,tt=c.current,J=O.current;if(tt&&$&&J){var B=J.getBoundingClientRect(),Q=(function(ht,dt,St,yt){var bt=dt.getBoundingClientRect(),Kt=ht.getBoundingClientRect(),Dt=Kt.height,It=Kt.width,Ht=0,Tt=0;switch(St){case n.Position.TopLeft:Ht=bt.top-Dt,Tt=bt.left;break;case n.Position.TopCenter:Ht=bt.top-Dt,Tt=bt.left+bt.width/2-It/2;break;case n.Position.TopRight:Ht=bt.top-Dt,Tt=bt.left+bt.width-It;break;case n.Position.RightTop:Ht=bt.top,Tt=bt.left+bt.width;break;case n.Position.RightCenter:Ht=bt.top+bt.height/2-Dt/2,Tt=bt.left+bt.width;break;case n.Position.RightBottom:Ht=bt.top+bt.height-Dt,Tt=bt.left+bt.width;break;case n.Position.BottomLeft:Ht=bt.top+bt.height,Tt=bt.left;break;case n.Position.BottomCenter:Ht=bt.top+bt.height,Tt=bt.left+bt.width/2-It/2;break;case n.Position.BottomRight:Ht=bt.top+bt.height,Tt=bt.left+bt.width-It;break;case n.Position.LeftTop:Ht=bt.top,Tt=bt.left-It;break;case n.Position.LeftCenter:Ht=bt.top+bt.height/2-Dt/2,Tt=bt.left-It;break;case n.Position.LeftBottom:Ht=bt.top+bt.height-Dt,Tt=bt.left-It}return{left:Tt+(yt.left||0),top:Ht+(yt.top||0)}})(tt,$,j,G),Z=Q.top,ft=Q.left;tt.style.top="".concat(Z-B.top,"px"),tt.style.left="".concat(ft-B.left,"px")}}),[])},Ct=function(c){var A,O=c.customClassName,j=c.position;return i.createElement("div",{className:h((A={"rpv-core__arrow":!0,"rpv-core__arrow--tl":j===n.Position.TopLeft,"rpv-core__arrow--tc":j===n.Position.TopCenter,"rpv-core__arrow--tr":j===n.Position.TopRight,"rpv-core__arrow--rt":j===n.Position.RightTop,"rpv-core__arrow--rc":j===n.Position.RightCenter,"rpv-core__arrow--rb":j===n.Position.RightBottom,"rpv-core__arrow--bl":j===n.Position.BottomLeft,"rpv-core__arrow--bc":j===n.Position.BottomCenter,"rpv-core__arrow--br":j===n.Position.BottomRight,"rpv-core__arrow--lt":j===n.Position.LeftTop,"rpv-core__arrow--lc":j===n.Position.LeftCenter,"rpv-core__arrow--lb":j===n.Position.LeftBottom},A["".concat(O)]=O!=="",A))})},Mt=function(c){var A=c.ariaControlsSuffix,O=c.children,j=c.closeOnClickOutside,G=c.offset,$=c.position,tt=c.targetRef,J=c.onClose,B=i.useRef(),Q=i.useRef(),Z=i.useRef(),ft=i.useContext(f).direction===n.TextDirection.RightToLeft;U(j,B,J),gt(B,tt,Z,$,G),e((function(){var dt=Q.current;if(dt){var St=.75*document.body.clientHeight;dt.getBoundingClientRect().height>=St&&(dt.style.overflow="auto",dt.style.maxHeight="".concat(St,"px"))}}),[]);var ht="rpv-core__popover-body-inner-".concat(A);return i.createElement(i.Fragment,null,i.createElement("div",{ref:Z,style:{left:0,position:"absolute",top:0}}),i.createElement("div",{"aria-describedby":ht,className:h({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":ft}),id:"rpv-core__popover-body-".concat(A),ref:B,role:"dialog",tabIndex:-1},i.createElement(Ct,{customClassName:"rpv-core__popover-body-arrow",position:$}),i.createElement("div",{id:ht,ref:Q},O)))},Ot=function(c){var A=c.closeOnEscape,O=c.onClose,j=i.useRef();return k((function(){j.current&&A&&O()})),i.createElement("div",{className:"rpv-core__popover-overlay",ref:j})},Vt=function(c){var A=c.ariaControlsSuffix,O=c.children,j=c.contentRef,G=c.offset,$=c.position,tt=c.targetRef,J=i.useRef(),B=i.useContext(f).direction===n.TextDirection.RightToLeft;return gt(j,tt,J,$,G),i.createElement(i.Fragment,null,i.createElement("div",{ref:J,style:{left:0,position:"absolute",top:0}}),i.createElement("div",{className:h({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":B}),id:"rpv-core__tooltip-body-".concat(A),ref:j,role:"tooltip"},i.createElement(Ct,{customClassName:"rpv-core__tooltip-body-arrow",position:$}),i.createElement("div",{className:"rpv-core__tooltip-body-content"},O)))};n.FullScreenMode=void 0,(W=n.FullScreenMode||(n.FullScreenMode={})).Normal="Normal",W.Entering="Entering",W.Entered="Entered",W.EnteredCompletely="EnteredCompletely",W.Exitting="Exitting",W.Exited="Exited",n.LayerRenderStatus=void 0,(Y=n.LayerRenderStatus||(n.LayerRenderStatus={}))[Y.PreRender=0]="PreRender",Y[Y.DidRender=1]="DidRender",n.PageMode=void 0,(st=n.PageMode||(n.PageMode={})).Attachments="UseAttachments",st.Bookmarks="UseOutlines",st.ContentGroup="UseOC",st.Default="UserNone",st.FullScreen="FullScreen",st.Thumbnails="UseThumbs",n.PasswordStatus=void 0,(Et=n.PasswordStatus||(n.PasswordStatus={})).RequiredPassword="RequiredPassword",Et.WrongPassword="WrongPassword",n.RotateDirection=void 0,(at=n.RotateDirection||(n.RotateDirection={})).Backward="Backward",at.Forward="Forward",n.ScrollMode=void 0,(ot=n.ScrollMode||(n.ScrollMode={})).Page="Page",ot.Horizontal="Horizontal",ot.Vertical="Vertical",ot.Wrapped="Wrapped",n.SpecialZoomLevel=void 0,(ct=n.SpecialZoomLevel||(n.SpecialZoomLevel={})).ActualSize="ActualSize",ct.PageFit="PageFit",ct.PageWidth="PageWidth",n.ViewMode=void 0,(ut=n.ViewMode||(n.ViewMode={})).DualPage="DualPage",ut.DualPageWithCover="DualPageWithCover",ut.SinglePage="SinglePage";var Ut,Zt=function(c,A){return c.reduce((function(O,j,G){return G%A?O[O.length-1].push(j):O.push([j]),O}),[])},Se=function(c,A){switch(A[1].name){case"XYZ":return{bottomOffset:function(O,j){return A[3]===null?j:A[3]},leftOffset:function(O,j){return A[2]===null?0:A[2]},pageIndex:c,scaleTo:A[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:c,scaleTo:n.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:A[2],leftOffset:0,pageIndex:c,scaleTo:n.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:c,scaleTo:1}}},_e=new Map,se=new Map,me=function(c,A){return"".concat(c.loadingTask.docId,"___").concat(A.num,"R").concat(A.gen===0?"":A.gen)},Le=function(c,A,O){_e.set(me(c,A),O)},Ue=function(c,A){if(!c)return Promise.reject("The document is not loaded yet");var O="".concat(c.loadingTask.docId,"___").concat(A),j=se.get(O);return j?Promise.resolve(j):new Promise((function(G,$){c.getPage(A+1).then((function(tt){se.set(O,tt),tt.ref&&Le(c,tt.ref,A),G(tt)}))}))},Ve=function(c,A){return new Promise((function(O){new Promise((function(j){typeof A=="string"?c.getDestination(A).then((function(G){j(G)})):j(A)})).then((function(j){if(typeof j[0]=="object"&&j[0]!==null){var G=j[0],$=(function(J,B){var Q=me(J,B);return _e.has(Q)?_e.get(Q):null})(c,G);$===null?c.getPageIndex(G).then((function(J){Le(c,G,J),Ve(c,A).then((function(B){return O(B)}))})):O(Se($,j))}else{var tt=Se(j[0],j);O(tt)}}))}))};(function(c){c[c.Solid=1]="Solid",c[c.Dashed=2]="Dashed",c[c.Beveled=3]="Beveled",c[c.Inset=4]="Inset",c[c.Underline=5]="Underline"})(Ut||(Ut={}));var Ie,_t=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),it=function(c,A,O,j){var G=parseInt(c,10);return G>=A&&G<=O?G:j},et=function(c){return c.contentsObj?c.contentsObj.str:c.contents||""},xt=function(c){return c.titleObj?c.titleObj.str:c.title||""},ue=function(c){var A=c.annotation,O=i.useContext(f).direction,j=xt(A),G=et(A),$=O===n.TextDirection.RightToLeft,tt=i.useRef(),J="";if(A.modificationDate){var B=(function(Q){var Z=_t.exec(Q);if(!Z)return null;var ft=parseInt(Z[1],10),ht=it(Z[2],1,12,1)-1,dt=it(Z[3],1,31,1),St=it(Z[4],0,23,0),yt=it(Z[5],0,59,0),bt=it(Z[6],0,59,0),Kt=Z[7]||"Z",Dt=it(Z[8],0,23,0),It=it(Z[9],0,59,0);switch(Kt){case"-":St+=Dt,yt+=It;break;case"+":St-=Dt,yt-=It}return new Date(Date.UTC(ft,ht,dt,St,yt,bt))})(A.modificationDate);J=B?"".concat(B.toLocaleDateString(),", ").concat(B.toLocaleTimeString()):""}return i.useLayoutEffect((function(){if(tt.current){var Q=document.querySelector('[data-annotation-id="'.concat(A.id,'"]'));if(Q){var Z=Q;return Z.style.zIndex+=1,function(){Z.style.zIndex="".concat(parseInt(Z.style.zIndex,10)-1)}}}}),[]),i.createElement("div",{ref:tt,className:h({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":$}),style:{top:A.annotationType===n.AnnotationType.Popup?"":"100%"}},j&&i.createElement(i.Fragment,null,i.createElement("div",{className:h({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!$,"rpv-core__annotation-popup-title--rtl":$})},j),i.createElement("div",{className:"rpv-core__annotation-popup-date"},J)),G&&i.createElement("div",{className:"rpv-core__annotation-popup-content"},G.split(`
`).map((function(Q,Z){return i.createElement(i.Fragment,{key:Z},Q,i.createElement("br",null))}))))};(function(c){c.Click="Click",c.Hover="Hover"})(Ie||(Ie={}));var Gt,ne=function(c){var A,O=c.annotation,j=c.children,G=c.ignoreBorder,$=c.hasPopup,tt=c.isRenderable,J=c.page,B=c.viewport,Q=O.rect,Z=(function(){var jt=T(!1),ie=jt.opened,ee=jt.toggle,re=i.useState(Ie.Hover),ae=re[0],le=re[1];return{opened:ie,closeOnHover:function(){ae===Ie.Hover&&ee(n.ToggleStatus.Close)},openOnHover:function(){ae===Ie.Hover&&ee(n.ToggleStatus.Open)},toggleOnClick:function(){switch(ae){case Ie.Click:ie&&le(Ie.Hover),ee(n.ToggleStatus.Toggle);break;case Ie.Hover:le(Ie.Click),ee(n.ToggleStatus.Open)}}}})(),ft=Z.closeOnHover,ht=Z.opened,dt=Z.openOnHover,St=Z.toggleOnClick,yt=(A=[Q[0],J.view[3]+J.view[1]-Q[1],Q[2],J.view[3]+J.view[1]-Q[3]],[Math.min(A[0],A[2]),Math.min(A[1],A[3]),Math.max(A[0],A[2]),Math.max(A[1],A[3])]),bt=Q[2]-Q[0],Kt=Q[3]-Q[1],Dt={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!G&&O.borderStyle.width>0){switch(O.borderStyle.style){case Ut.Dashed:Dt.borderStyle="dashed";break;case Ut.Solid:Dt.borderStyle="solid";break;case Ut.Underline:Dt=Object.assign({borderBottomStyle:"solid"},Dt);case Ut.Beveled:case Ut.Inset:}var It=O.borderStyle.width;Dt.borderWidth="".concat(It,"px"),O.borderStyle.style!==Ut.Underline&&(bt-=2*It,Kt-=2*It);var Ht=O.borderStyle,Tt=Ht.horizontalCornerRadius,Wt=Ht.verticalCornerRadius;(Tt>0||Wt>0)&&(Dt.borderRadius="".concat(Tt,"px / ").concat(Wt,"px")),O.color?Dt.borderColor="rgb(".concat(0|O.color[0],", ").concat(0|O.color[1],", ").concat(0|O.color[2],")"):Dt.borderWidth="0"}return i.createElement(i.Fragment,null,tt&&j({popup:{opened:ht,closeOnHover:ft,openOnHover:dt,toggleOnClick:St},slot:{attrs:{style:Object.assign({height:"".concat(Kt,"px"),left:"".concat(yt[0],"px"),top:"".concat(yt[1],"px"),transform:"matrix(".concat(B.transform.join(","),")"),transformOrigin:"-".concat(yt[0],"px -").concat(yt[1],"px"),width:"".concat(bt,"px")},Dt)},children:i.createElement(i.Fragment,null,$&&ht&&i.createElement(ue,{annotation:O}))}}))},Ye=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(B){return i.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":A.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},Ke=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),B=A.rect,Q=B[2]-B[0],Z=B[3]-B[1],ft=A.borderStyle.width;return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(ht){return i.createElement("div",t({},ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":A.id,onClick:ht.popup.toggleOnClick,onMouseEnter:ht.popup.openOnHover,onMouseLeave:ht.popup.closeOnHover}),i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("circle",{cy:Z/2,fill:"none",rx:Q/2-ft/2,ry:Z/2-ft/2,stroke:"transparent",strokeWidth:ft||1})),ht.slot.children)}))},Xe=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=xt(A),$=et(A),tt=!(A.hasPopup!==!1||!G&&!$),J=function(){var B,Q,Z,ft,ht=A.file;ht&&(B=ht.filename,Q=ht.content,Z=typeof Q=="string"?"":URL.createObjectURL(new Blob([Q],{type:""})),(ft=document.createElement("a")).style.display="none",ft.href=Z||B,ft.setAttribute("download",(function(dt){var St=dt.split("/").pop();return St?St.split("#")[0].split("?")[0]:dt})(B)),document.body.appendChild(ft),ft.click(),document.body.removeChild(ft),Z&&URL.revokeObjectURL(Z))};return i.createElement(ne,{annotation:A,hasPopup:tt,ignoreBorder:!0,isRenderable:!0,page:O,viewport:j},(function(B){return i.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":A.id,onClick:B.popup.toggleOnClick,onDoubleClick:J,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},Oe=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(B){return i.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":A.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},qe=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=xt(A),$=et(A),tt=!(!G&&!$),J=!A.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(A.parentType)!==-1;return e((function(){if(A.parentId){var B=document.querySelector('[data-annotation-id="'.concat(A.parentId,'"]')),Q=document.querySelector('[data-annotation-id="'.concat(A.id,'"]'));if(B&&Q){var Z=parseFloat(B.style.left),ft=parseFloat(B.style.top)+parseFloat(B.style.height);Q.style.left="".concat(Z,"px"),Q.style.top="".concat(ft,"px"),Q.style.transformOrigin="-".concat(Z,"px -").concat(ft,"px")}}}),[]),i.createElement(ne,{annotation:A,hasPopup:J,ignoreBorder:!1,isRenderable:tt,page:O,viewport:j},(function(B){return i.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":A.id}),i.createElement(ue,{annotation:A}))}))},We=function(c){var A=c.annotation,O=c.childAnnotation,j=c.page,G=c.viewport,$=A.hasPopup===!1,tt=xt(A),J=et(A),B=!!(A.hasPopup||tt||J);if(A.quadPoints&&A.quadPoints.length>0){var Q=A.quadPoints.map((function(Z){return Object.assign({},A,{rect:[Z[2].x,Z[2].y,Z[1].x,Z[1].y],quadPoints:[]})}));return i.createElement(i.Fragment,null,Q.map((function(Z,ft){return i.createElement(We,{key:ft,annotation:Z,childAnnotation:O,page:j,viewport:G})})))}return i.createElement(ne,{annotation:A,hasPopup:$,ignoreBorder:!0,isRenderable:B,page:j,viewport:G},(function(Z){return i.createElement(i.Fragment,null,i.createElement("div",t({},Z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":A.id,onClick:Z.popup.toggleOnClick,onMouseEnter:Z.popup.openOnHover,onMouseLeave:Z.popup.closeOnHover}),Z.slot.children),O&&O.annotationType===n.AnnotationType.Popup&&Z.popup.opened&&i.createElement(qe,{annotation:O,page:j,viewport:G}))}))},on=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),B=A.rect,Q=B[2]-B[0],Z=B[3]-B[1],ft=A.borderStyle.width;return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(ht){return i.createElement("div",t({},ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":A.id,onClick:ht.popup.toggleOnClick,onMouseEnter:ht.popup.openOnHover,onMouseLeave:ht.popup.closeOnHover}),A.inkLists&&A.inkLists.length&&i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},A.inkLists.map((function(dt,St){return i.createElement("polyline",{key:St,fill:"none",stroke:"transparent",strokeWidth:ft||1,points:dt.map((function(yt){return"".concat(yt.x-B[0],",").concat(B[3]-yt.y)})).join(" ")})}))),ht.slot.children)}))},Pe=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),B=A.rect,Q=B[2]-B[0],Z=B[3]-B[1],ft=A.borderStyle.width;return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(ht){return i.createElement("div",t({},ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":A.id,onClick:ht.popup.toggleOnClick,onMouseEnter:ht.popup.openOnHover,onMouseLeave:ht.popup.closeOnHover}),i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("line",{stroke:"transparent",strokeWidth:ft||1,x1:B[2]-A.lineCoordinates[0],x2:B[2]-A.lineCoordinates[2],y1:B[3]-A.lineCoordinates[1],y2:B[3]-A.lineCoordinates[3]})),ht.slot.children)}))},ln=/^([^\w]*)(javascript|data|vbscript)/im,cn=/&#(\w+)(^\w|;)?/g,fn=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,pn=/^([^:]+):/gm,nn=function(c,A){var O,j=(O=c||"",O.replace(cn,(function(J,B){return String.fromCharCode(B)}))).replace(fn,"").trim();if(!j)return A;var G=j[0];if(G==="."||G==="/")return j;var $=j.match(pn);if(!$)return j;var tt=$[0];return ln.test(tt)?A:j},Ne=function(c){var A,O=c.annotation,j=c.annotationContainerRef,G=c.doc,$=c.outlines,tt=c.page,J=c.pageIndex,B=c.scale,Q=c.viewport,Z=c.onExecuteNamedAction,ft=c.onJumpFromLinkAnnotation,ht=c.onJumpToDest,dt=i.useRef(),St=$&&$.length&&O.dest&&typeof O.dest=="string"?(A=$.find((function(Dt){return Dt.dest===O.dest})))===null||A===void 0?void 0:A.title:"",yt=!!(O.url||O.dest||O.action||O.unsafeUrl),bt={};if(O.url||O.unsafeUrl){var Kt=nn(O.url||O.unsafeUrl,"");Kt?bt={"data-target":"external",href:Kt,rel:"noopener noreferrer nofollow",target:O.newWindow?"_blank":"",title:Kt}:yt=!1}else bt={href:"","data-annotation-link":O.id,onClick:function(Dt){Dt.preventDefault(),O.action?Z(O.action):Ve(G,O.dest).then((function(It){var Ht=dt.current,Tt=j.current;if(Ht&&Tt){var Wt=Ht.getBoundingClientRect();Tt.style.setProperty("height","100%"),Tt.style.setProperty("width","100%");var jt=Tt.getBoundingClientRect();Tt.style.removeProperty("height"),Tt.style.removeProperty("width");var ie=(Wt.left-jt.left)/B,ee=(jt.bottom-Wt.bottom+Wt.height)/B;ft({bottomOffset:ee,label:St,leftOffset:ie,pageIndex:J})}ht(It)}))}};return St&&(bt=Object.assign({},bt,{title:St,"aria-label":St})),i.createElement(ne,{annotation:O,hasPopup:!1,ignoreBorder:!1,isRenderable:yt,page:tt,viewport:Q},(function(Dt){return i.createElement("div",t({},Dt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":O.id,"data-testid":"core__annotation--link-".concat(O.id)}),i.createElement("a",t({ref:dt},bt)))}))},rn=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),B=A.rect,Q=B[2]-B[0],Z=B[3]-B[1],ft=A.borderStyle.width;return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(ht){return i.createElement("div",t({},ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":A.id,onClick:ht.popup.toggleOnClick,onMouseEnter:ht.popup.openOnHover,onMouseLeave:ht.popup.closeOnHover}),A.vertices&&A.vertices.length&&i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:ft||1,points:A.vertices.map((function(dt){return"".concat(dt.x-B[0],",").concat(B[3]-dt.y)})).join(" ")})),ht.slot.children)}))},gn=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),B=A.rect,Q=B[2]-B[0],Z=B[3]-B[1],ft=A.borderStyle.width;return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(ht){return i.createElement("div",t({},ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":A.id,onClick:ht.popup.toggleOnClick,onMouseEnter:ht.popup.openOnHover,onMouseLeave:ht.popup.closeOnHover}),A.vertices&&A.vertices.length&&i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:ft||1,points:A.vertices.map((function(dt){return"".concat(dt.x-B[0],",").concat(B[3]-dt.y)})).join(" ")})),ht.slot.children)}))},ei=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt),B=A.rect,Q=B[2]-B[0],Z=B[3]-B[1],ft=A.borderStyle.width;return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(ht){return i.createElement("div",t({},ht.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":A.id,onClick:ht.popup.toggleOnClick,onMouseEnter:ht.popup.openOnHover,onMouseLeave:ht.popup.closeOnHover}),i.createElement("svg",{height:"".concat(Z,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Q," ").concat(Z),width:"".concat(Q,"px")},i.createElement("rect",{height:Z-ft,fill:"none",stroke:"transparent",strokeWidth:ft||1,x:ft/2,y:ft/2,width:Q-ft})),ht.slot.children)}))},ni=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(B){return i.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":A.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},ii=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(B){return i.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":A.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},ri=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(B){return i.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":A.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},si=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),i.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),i.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),i.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ai=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),i.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),i.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),i.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),i.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),i.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),i.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),i.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),i.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),i.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},oi=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),i.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},li=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),i.createElement("path",{d:"M6 4.5L6 0.5"}),i.createElement("path",{d:"M18 4.5L18 0.5"}),i.createElement("path",{d:"M10 4.5L10 0.5"}),i.createElement("path",{d:"M14 4.5L14 0.5"}))},ci=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),i.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),i.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},ui=function(){return i.createElement(b,{size:16},i.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},di=function(c){var A=c.annotation,O=c.childAnnotation,j=c.page,G=c.viewport,$=A.hasPopup===!1,tt=xt(A),J=et(A),B=!!(A.hasPopup||tt||J),Q=A.name?A.name.toLowerCase():"";return i.createElement(ne,{annotation:A,hasPopup:$,ignoreBorder:!1,isRenderable:B,page:j,viewport:G},(function(Z){return i.createElement(i.Fragment,null,i.createElement("div",t({},Z.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":A.id,onClick:Z.popup.toggleOnClick,onMouseEnter:Z.popup.openOnHover,onMouseLeave:Z.popup.closeOnHover}),Q&&i.createElement("div",{className:"rpv-core__annotation-text-icon"},Q==="check"&&i.createElement(u,null),Q==="comment"&&i.createElement(si,null),Q==="help"&&i.createElement(ai,null),Q==="insert"&&i.createElement(ui,null),Q==="key"&&i.createElement(oi,null),Q==="note"&&i.createElement(li,null),(Q==="newparagraph"||Q==="paragraph")&&i.createElement(ci,null)),Z.slot.children),O&&O.annotationType===n.AnnotationType.Popup&&Z.popup.opened&&i.createElement(qe,{annotation:O,page:j,viewport:G}))}))},hi=function(c){var A=c.annotation,O=c.page,j=c.viewport,G=A.hasPopup===!1,$=xt(A),tt=et(A),J=!!(A.hasPopup||$||tt);return i.createElement(ne,{annotation:A,hasPopup:G,ignoreBorder:!0,isRenderable:J,page:O,viewport:j},(function(B){return i.createElement("div",t({},B.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":A.id,onClick:B.popup.toggleOnClick,onMouseEnter:B.popup.openOnHover,onMouseLeave:B.popup.closeOnHover}),B.slot.children)}))},fi=function(c){var A=c.annotations,O=c.doc,j=c.outlines,G=c.page,$=c.pageIndex,tt=c.plugins,J=c.rotation,B=c.scale,Q=c.onExecuteNamedAction,Z=c.onJumpFromLinkAnnotation,ft=c.onJumpToDest,ht=i.useRef(),dt=G.getViewport({rotation:J,scale:B}).clone({dontFlip:!0}),St=A.filter((function(yt){return!yt.parentId}));return e((function(){var yt=ht.current;yt&&tt.forEach((function(bt){bt.onAnnotationLayerRender&&bt.onAnnotationLayerRender({annotations:St,container:yt,pageIndex:$,rotation:J,scale:B})}))}),[]),i.createElement("div",{ref:ht,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat($)},St.map((function(yt){var bt=A.find((function(Kt){return Kt.parentId===yt.id}));switch(yt.annotationType){case n.AnnotationType.Caret:return i.createElement(Ye,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Circle:return i.createElement(Ke,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.FileAttachment:return i.createElement(Xe,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.FreeText:return i.createElement(Oe,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Highlight:return i.createElement(We,{key:yt.id,annotation:yt,childAnnotation:bt,page:G,viewport:dt});case n.AnnotationType.Ink:return i.createElement(on,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Line:return i.createElement(Pe,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Link:return i.createElement(Ne,{key:yt.id,annotation:yt,annotationContainerRef:ht,doc:O,outlines:j,page:G,pageIndex:$,scale:B,viewport:dt,onExecuteNamedAction:Q,onJumpFromLinkAnnotation:Z,onJumpToDest:ft});case n.AnnotationType.Polygon:return i.createElement(rn,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Polyline:return i.createElement(gn,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Popup:return i.createElement(qe,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Square:return i.createElement(ei,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Squiggly:return i.createElement(ni,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Stamp:return i.createElement(ii,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.StrikeOut:return i.createElement(ri,{key:yt.id,annotation:yt,page:G,viewport:dt});case n.AnnotationType.Text:return i.createElement(di,{key:yt.id,annotation:yt,childAnnotation:bt,page:G,viewport:dt});case n.AnnotationType.Underline:return i.createElement(hi,{key:yt.id,annotation:yt,page:G,viewport:dt});default:return i.createElement(i.Fragment,{key:yt.id})}})))},pi=function(c){var A=c.page,O=c.renderAnnotations,j=wt(),G=i.useState({loading:!0,annotations:[]}),$=G[0],tt=G[1];return i.useEffect((function(){A.getAnnotations({intent:"display"}).then((function(J){j.current&&tt({loading:!1,annotations:J})}))}),[]),$.loading?i.createElement(i.Fragment,null):O($.annotations)},gi=function(c){var A=c.doc,O=c.outlines,j=c.page,G=c.pageIndex,$=c.plugins,tt=c.rotation,J=c.scale,B=c.onExecuteNamedAction,Q=c.onJumpFromLinkAnnotation,Z=c.onJumpToDest;return i.createElement(pi,{page:j,renderAnnotations:function(ft){return i.createElement(fi,{annotations:ft,doc:A,outlines:O,page:j,pageIndex:G,plugins:$,rotation:tt,scale:J,onExecuteNamedAction:B,onJumpFromLinkAnnotation:Q,onJumpToDest:Z})}})},bn=function(c,A){var O=c%A;return O===0?c:Math.floor(c-O)},mi=function(c){var A=c.canvasLayerRef,O=c.height,j=c.page,G=c.pageIndex,$=c.plugins,tt=c.rotation,J=c.scale,B=c.width,Q=c.onRenderCanvasCompleted,Z=i.useRef();return e((function(){var ft=Z.current;ft&&ft.cancel();var ht=A.current;ht.removeAttribute("data-testid"),$.forEach((function(jt){jt.onCanvasLayerRender&&jt.onCanvasLayerRender({ele:ht,pageIndex:G,rotation:tt,scale:J,status:n.LayerRenderStatus.PreRender})}));var dt=j.getViewport({rotation:tt,scale:J}),St=window.devicePixelRatio||1,yt=Math.sqrt(16777216/(dt.width*dt.height)),bt=St>yt;bt?ht.style.transform="scale(1, 1)":ht.style.removeProperty("transform");var Kt=Math.min(yt,St),Dt=(function(jt,ie){var ee,re;if(Math.floor(jt)===jt)return[jt,1];var ae=1/jt;if(ae>ie)return[1,ie];if(Math.floor(ae)===ae)return[1,ae];for(var le=jt>1?ae:jt,xe=0,ve=1,Ce=1,ye=1;;){var Ee=xe+Ce,we=ve+ye;if(we>ie)break;le<=Ee/we?(Ce=(ee=[Ee,we])[0],ye=ee[1]):(xe=(re=[Ee,we])[0],ve=re[1])}return le<(xe/ve+Ce/ye)/2?le===jt?[xe,ve]:[ve,xe]:le===jt?[Ce,ye]:[ye,Ce]})(Kt,8),It=Dt[0],Ht=Dt[1];ht.width=bn(dt.width*Kt,It),ht.height=bn(dt.height*Kt,It),ht.style.width="".concat(bn(dt.width,Ht),"px"),ht.style.height="".concat(bn(dt.height,Ht),"px"),ht.hidden=!0;var Tt=ht.getContext("2d",{alpha:!1}),Wt=bt||St!==1?[Kt,0,0,Kt,0,0]:null;return Z.current=j.render({canvasContext:Tt,transform:Wt,viewport:dt}),Z.current.promise.then((function(){ht.hidden=!1,ht.setAttribute("data-testid","core__canvas-layer-".concat(G)),$.forEach((function(jt){jt.onCanvasLayerRender&&jt.onCanvasLayerRender({ele:ht,pageIndex:G,rotation:tt,scale:J,status:n.LayerRenderStatus.DidRender})})),Q()}),(function(){Q()})),function(){ht&&(ht.width=0,ht.height=0)}}),[]),i.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(O,"px"),width:"".concat(B,"px")}},i.createElement("canvas",{ref:A}))},vi=function(c){var A=c.height,O=c.page,j=c.rotation,G=c.scale,$=c.width,tt=i.useRef();return e((function(){var J=tt.current,B=O.getViewport({rotation:j,scale:G});O.getOperatorList().then((function(Q){(function(){var Z=tt.current;Z&&(Z.innerHTML="")})(),new M.SVGGraphics(O.commonObjs,O.objs).getSVG(Q,B).then((function(Z){Z.style.height="".concat(A,"px"),Z.style.width="".concat($,"px"),J.appendChild(Z)}))}))}),[]),i.createElement("div",{className:"rpv-core__svg-layer",ref:tt})},bi=function(c){var A=c.containerRef,O=c.page,j=c.pageIndex,G=c.plugins,$=c.rotation,tt=c.scale,J=c.onRenderTextCompleted,B=i.useRef(),Q=function(){var Z=A.current;Z&&([].slice.call(Z.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(ft){return Z.removeChild(ft)})),[].slice.call(Z.querySelectorAll('br[role="presentation"]')).forEach((function(ft){return Z.removeChild(ft)})))};return e((function(){var Z=B.current;Z&&Z.cancel();var ft=A.current;if(ft){ft.removeAttribute("data-testid");var ht=O.getViewport({rotation:$,scale:tt});return G.forEach((function(dt){dt.onTextLayerRender&&dt.onTextLayerRender({ele:ft,pageIndex:j,scale:tt,status:n.LayerRenderStatus.PreRender})})),O.getTextContent().then((function(dt){Q(),B.current=M.renderTextLayer({container:ft,textContent:dt,textContentSource:dt,viewport:ht}),B.current.promise.then((function(){ft.setAttribute("data-testid","core__text-layer-".concat(j)),[].slice.call(ft.children).forEach((function(St){St.classList.contains("rpv-core__text-layer-text--not")||St.classList.add("rpv-core__text-layer-text")})),G.forEach((function(St){St.onTextLayerRender&&St.onTextLayerRender({ele:ft,pageIndex:j,scale:tt,status:n.LayerRenderStatus.DidRender})})),J()}),(function(){ft.removeAttribute("data-testid"),J()}))})),function(){var dt;Q(),(dt=B.current)===null||dt===void 0||dt.cancel()}}}),[]),i.createElement("div",{className:"rpv-core__text-layer",ref:A})},_i=function(c){var A=c.doc,O=c.measureRef,j=c.outlines,G=c.pageIndex,$=c.pageRotation,tt=c.pageSize,J=c.plugins,B=c.renderPage,Q=c.renderQueueKey,Z=c.rotation,ft=c.scale,ht=c.shouldRender,dt=c.viewMode,St=c.onExecuteNamedAction,yt=c.onJumpFromLinkAnnotation,bt=c.onJumpToDest,Kt=c.onRenderCompleted,Dt=c.onRotatePage,It=wt(),Ht=i.useState(null),Tt=Ht[0],Wt=Ht[1],jt=i.useState(!1),ie=jt[0],ee=jt[1],re=i.useState(!1),ae=re[0],le=re[1],xe=i.useRef(),ve=i.useRef(),Ce=Math.abs(Z+$)%180==0,ye=tt.pageWidth*ft,Ee=tt.pageHeight*ft,we=Ce?ye:Ee,Ae=Ce?Ee:ye,De=(tt.rotation+Z+$)%360,Ge=i.useRef(0),ze=B||function(Re){return i.createElement(i.Fragment,null,Re.canvasLayer.children,Re.textLayer.children,Re.annotationLayer.children)};return i.useEffect((function(){Wt(null),ee(!1),le(!1)}),[$,Z,ft]),i.useEffect((function(){ht&&It.current&&!Tt&&Ue(A,G).then((function(Re){It.current&&(Ge.current=Q,Wt(Re))}))}),[ht,Tt]),i.useEffect((function(){ie&&ae&&(Q!==Ge.current?(Wt(null),ee(!1),le(!1)):Kt(G))}),[ie,ae]),i.createElement("div",{className:h({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":dt===n.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":dt===n.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":dt===n.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(G),ref:O,style:{height:"".concat(Ae,"px"),width:"".concat(we,"px")}},Tt?i.createElement(i.Fragment,null,ze({annotationLayer:{attrs:{},children:i.createElement(gi,{doc:A,outlines:j,page:Tt,pageIndex:G,plugins:J,rotation:De,scale:ft,onExecuteNamedAction:St,onJumpFromLinkAnnotation:yt,onJumpToDest:bt})},canvasLayer:{attrs:{},children:i.createElement(mi,{canvasLayerRef:xe,height:Ae,page:Tt,pageIndex:G,plugins:J,rotation:De,scale:ft,width:we,onRenderCanvasCompleted:function(){It.current&&ee(!0)}})},canvasLayerRendered:ie,doc:A,height:Ae,pageIndex:G,rotation:De,scale:ft,svgLayer:{attrs:{},children:i.createElement(vi,{height:Ae,page:Tt,rotation:De,scale:ft,width:we})},textLayer:{attrs:{},children:i.createElement(bi,{containerRef:ve,page:Tt,pageIndex:G,plugins:J,rotation:De,scale:ft,onRenderTextCompleted:function(){It.current&&le(!0)}})},textLayerRendered:ae,width:we,markRendered:Kt,onRotatePage:function(Re){return Dt(G,Re)}}),J.map((function(Re,je){return Re.renderPageLayer?i.createElement(i.Fragment,{key:je},Re.renderPageLayer({canvasLayerRef:xe,canvasLayerRendered:ie,doc:A,height:Ae,pageIndex:G,rotation:De,scale:ft,textLayerRef:ve,textLayerRendered:ae,width:we})):i.createElement(i.Fragment,{key:je})}))):i.createElement(I,{testId:"core__page-layer-loading-".concat(G)}))},yi=function(c,A){var O=A.rect;return c.height!==O.height||c.width!==O.width?O:c};(function(c){c.Horizontal="Horizontal",c.Vertical="Vertical",c.Both="Both"})(Gt||(Gt={}));var Ai=function(c){return 1-Math.pow(1-c,4)},_n=1e-4,Nn={left:0,top:0},jn={capture:!1,passive:!0},Si=function(c){var A=c.elementRef,O=c.enableSmoothScroll,j=c.isRtl,G=c.scrollDirection,$=c.onSmoothScroll,tt=i.useState(Nn),J=tt[0],B=tt[1],Q=i.useState(A.current),Z=Q[0],ft=Q[1],ht=j?-1:1,dt=i.useRef(G);dt.current=G;var St=i.useRef(Nn),yt=i.useRef(!0),bt=i.useCallback((function(){yt.current=!0,O&&B(St.current),$(!1)}),[]),Kt=i.useCallback((function(){if(Z){switch(dt.current){case Gt.Horizontal:St.current={left:ht*Z.scrollLeft,top:0};break;case Gt.Both:St.current={left:ht*Z.scrollLeft,top:Z.scrollTop};break;case Gt.Vertical:default:St.current={left:0,top:Z.scrollTop}}O&&!yt.current||B(St.current)}}),[Z]);e((function(){ft(A.current)})),e((function(){if(Z)return Z.addEventListener("scroll",Kt,jn),function(){Z.removeEventListener("scroll",Kt,jn)}}),[Z]);var Dt=i.useCallback((function(It,Ht){var Tt=A.current;if(!Tt)return Promise.resolve();var Wt={left:0,top:0};switch(dt.current){case Gt.Horizontal:Wt.left=ht*It.left;break;case Gt.Both:Wt.left=ht*It.left,Wt.top=It.top;break;case Gt.Vertical:default:Wt.top=It.top}return Ht?(yt.current=!1,$(!0),new Promise((function(jt,ie){(function(ee,re,ae,le,xe,ve){xe===void 0&&(xe=function(je){return je}),ve===void 0&&(ve=function(){});var Ce=0,ye=0,Ee=!1;switch(re){case Gt.Horizontal:ye=ee.scrollLeft,Ce=0;case Gt.Both:ye=ee.scrollLeft,Ce=ee.scrollTop;break;case Gt.Vertical:default:ye=0,Ce=ee.scrollTop}var we=function(){Ee||(Ee=!0,ee.scrollLeft=ae.left,ee.scrollTop=ae.top,ve())};if(Math.abs(Ce-ae.top)<=_n&&re===Gt.Vertical)we();else if(Math.abs(ye-ae.left)<=_n&&re===Gt.Horizontal)we();else{var Ae,De=-1,Ge=ye-ae.left,ze=Ce-ae.top,Re=function(je){De===-1&&(De=je);var $e=je-De,Bt=Math.min($e/le,1),Nt=xe(Bt),kt={left:ye-Ge*Nt,top:Ce-ze*Nt};switch(re){case Gt.Horizontal:ee.scrollLeft=kt.left;break;case Gt.Both:ee.scrollLeft=kt.left,ee.scrollTop=kt.top;break;case Gt.Vertical:default:ee.scrollTop=kt.top}Math.abs(kt.top-ae.top)<=_n&&Math.abs(kt.left-ae.left)<=_n&&!Ee&&(window.cancelAnimationFrame(Ae),we()),$e<le?Ae=window.requestAnimationFrame(Re):window.cancelAnimationFrame(Ae)};Ae=window.requestAnimationFrame(Re)}})(Tt,dt.current,Wt,400,Ai,(function(){bt(),jt()}))}))):new Promise((function(jt,ie){switch(dt.current){case Gt.Horizontal:Tt.scrollLeft=Wt.left;break;case Gt.Both:Tt.scrollLeft=Wt.left,Tt.scrollTop=Wt.top;break;case Gt.Vertical:default:Tt.scrollTop=Wt.top}jt()}))}),[A]);return{scrollOffset:J,scrollTo:Dt}},mn=function(c,A,O){return Math.max(c,Math.min(O,A))},Ei=function(c,A){if(A!==n.ViewMode.DualPageWithCover)return 0;if(!(function(G){var $=G.length;if($===1)return!1;for(var tt=1;tt<$;tt++)if(G[tt].height!==G[0].height||G[tt].width!==G[0].width)return!0;return!1})(c))return 2*c[0].width;var O=Zt(c.slice(1),2).map((function(G){return G.length===2?G[0].width+G[1].width:G[0].width})),j=[c[0].width].concat(O);return Math.max.apply(Math,j)},wi={left:0,top:0},xi={left:0,top:0},xn={left:0,top:0},Ci={left:0,top:0},Pi={height:0,width:0},Bn={left:0,top:0},Hn="data-virtual-index",Ti=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],ki=function(c){var A=c.enableSmoothScroll,O=c.isRtl,j=c.numberOfItems,G=c.parentRef,$=c.setRenderRange,tt=c.sizes,J=c.scrollMode,B=c.viewMode,Q=i.useState(!1),Z=Q[0],ft=Q[1],ht=i.useCallback((function(Bt){return ft(Bt)}),[]),dt=i.useRef(J);dt.current=J;var St=i.useRef(B);St.current=B;var yt=J===n.ScrollMode.Wrapped||B===n.ViewMode.DualPageWithCover||B===n.ViewMode.DualPage?Gt.Both:J===n.ScrollMode.Horizontal?Gt.Horizontal:Gt.Vertical,bt=Si({elementRef:G,enableSmoothScroll:A,isRtl:O,scrollDirection:yt,onSmoothScroll:ht}),Kt=bt.scrollOffset,Dt=bt.scrollTo,It=(function(Bt){var Nt=Bt.elementRef,kt=i.useState(Nt.current),Ft=kt[0],Rt=kt[1],zt=i.useRef(!1),qt=i.useReducer(yi,{height:0,width:0}),Lt=qt[0],Pt=qt[1];return e((function(){Nt.current!==Ft&&Rt(Nt.current)})),e((function(){if(Ft&&!zt.current){zt.current=!0;var $t=Ft.getBoundingClientRect(),Jt=$t.height,pe=$t.width;Pt({rect:{height:Jt,width:pe}})}}),[Ft]),i.useEffect((function(){if(Ft){var $t=new ResizeObserver((function(Jt,pe){Jt.forEach((function(he){if(he.target===Ft){var Me=he.contentRect,Be=Me.height,Yt=Me.width;Pt({rect:{height:Be,width:Yt}})}}))}));return $t.observe(Ft),function(){$t.unobserve(Ft)}}}),[Ft]),Lt})({elementRef:G}),Ht=i.useRef({scrollOffset:Bn,measurements:[]});Ht.current.scrollOffset=Kt;var Tt=i.useMemo((function(){return Array(j).fill(-1)}),[]),Wt=i.useState(Tt),jt=Wt[0],ie=Wt[1],ee=i.useMemo((function(){var Bt=new IntersectionObserver((function(Nt){Nt.forEach((function(kt){var Ft=kt.isIntersecting?kt.intersectionRatio:-1,Rt=kt.target.getAttribute(Hn);if(Rt){var zt=parseInt(Rt,10);0<=zt&&zt<j&&ie((function(qt){return qt[zt]=Ft,(function(Lt,Pt,$t){for(var Jt,pe=0,he=Pt.length;pe<he;pe++)!Jt&&pe in Pt||(Jt||(Jt=Array.prototype.slice.call(Pt,0,pe)),Jt[pe]=Pt[pe]);return Lt.concat(Jt||Array.prototype.slice.call(Pt))})([],qt)}))}}))}),{threshold:Ti});return Bt}),[]),re=i.useMemo((function(){return J===n.ScrollMode.Page&&B===n.ViewMode.SinglePage?(function(Bt,Nt,kt){for(var Ft=[],Rt=0;Rt<Bt;Rt++){var zt={height:Math.max(Nt.height,kt[Rt].height),width:Math.max(Nt.width,kt[Rt].width)},qt=Rt===0?Ci:Ft[Rt-1].end,Lt={left:qt.left+zt.width,top:qt.top+zt.height};Ft[Rt]={index:Rt,start:qt,size:zt,end:Lt,visibility:-1}}return Ft})(j,It,tt):B===n.ViewMode.DualPageWithCover?(function(Bt,Nt,kt,Ft){for(var Rt=[],zt=0,qt=0,Lt=xn,Pt=0;Pt<Bt;Pt++){var $t=Pt===0?{height:Ft===n.ScrollMode.Page?Math.max(Nt.height,kt[Pt].height):kt[Pt].height,width:Ft===n.ScrollMode.Page?Math.max(Nt.width,kt[Pt].width):kt[Pt].width}:{height:Ft===n.ScrollMode.Page?Math.max(Nt.height,kt[Pt].height):kt[Pt].height,width:Math.max(Nt.width/2,kt[Pt].width)};Ft===n.ScrollMode.Page?Lt=Pt===0?xn:{left:Pt%2==0?$t.width:0,top:Math.floor((Pt-1)/2)*$t.height+Rt[0].end.top}:Pt===0?(Lt=xn,zt=kt[0].height,qt=0):Pt%2==1?(Lt={left:0,top:zt+=qt},qt=Pt===Bt-1?kt[Pt].height:Math.max(kt[Pt].height,kt[Pt+1].height)):Lt={left:Rt[Pt-1].end.left,top:zt};var Jt={left:Lt.left+$t.width,top:Lt.top+$t.height};Rt[Pt]={index:Pt,start:Lt,size:$t,end:Jt,visibility:-1}}return Rt})(j,It,tt,J):B===n.ViewMode.DualPage?(function(Bt,Nt,kt,Ft){for(var Rt=[],zt=0,qt=0,Lt=xi,Pt=0;Pt<Bt;Pt++){var $t={height:Ft===n.ScrollMode.Page?Math.max(Nt.height,kt[Pt].height):kt[Pt].height,width:Math.max(Nt.width/2,kt[Pt].width)};Ft===n.ScrollMode.Page?Lt={left:Pt%2==0?0:$t.width,top:Math.floor(Pt/2)*$t.height}:Pt%2==0?(Lt={left:0,top:zt+=qt},qt=Pt===Bt-1?kt[Pt].height:Math.max(kt[Pt].height,kt[Pt+1].height)):Lt={left:Rt[Pt-1].end.left,top:zt};var Jt={left:Lt.left+$t.width,top:Lt.top+$t.height};Rt[Pt]={index:Pt,start:Lt,size:$t,end:Jt,visibility:-1}}return Rt})(j,It,tt,J):(function(Bt,Nt,kt,Ft){for(var Rt=[],zt=0,qt={left:0,top:0},Lt=0,Pt=wi,$t=0;$t<Bt;$t++){var Jt=kt[$t];if($t===0)zt=Jt.width,qt={left:0,top:0},Lt=Jt.height;else switch(Ft){case n.ScrollMode.Wrapped:(zt+=Jt.width)<Nt.width?(Pt={left:Rt[$t-1].end.left,top:qt.top},Lt=Math.max(Lt,Jt.height)):(zt=Jt.width,qt={left:(Pt={left:qt.left,top:qt.top+Lt}).left,top:Pt.top},Lt=Jt.height);break;case n.ScrollMode.Horizontal:case n.ScrollMode.Vertical:default:Pt=Rt[$t-1].end}var pe={left:Pt.left+Jt.width,top:Pt.top+Jt.height};Rt[$t]={index:$t,start:Pt,size:Jt,end:pe,visibility:-1}}return Rt})(j,It,tt,J)}),[J,tt,B,It]),ae=re[j-1]?{height:re[j-1].end.top,width:re[j-1].end.left}:Pi;Ht.current.measurements=re;var le=i.useMemo((function(){var Bt=(function($t,Jt,pe,he){var Me=0;switch($t){case Gt.Horizontal:Me=he.left;break;case Gt.Vertical:default:Me=he.top}var Be=Jt.length-1,Yt=(function(de,Je,dn,An){for(;de<=Je;){var sn=(de+Je)/2|0,vn=An(sn);if(vn<dn)de=sn+1;else{if(!(vn>dn))return sn;Je=sn-1}}return de>0?de-1:0})(0,Be,Me,(function(de){switch($t){case Gt.Horizontal:return Jt[de].start.left;case Gt.Both:case Gt.Vertical:default:return Jt[de].start.top}}));if($t===Gt.Both)for(var Fe=Jt[Yt].start.top;Yt-1>=0&&Jt[Yt-1].start.top===Fe&&Jt[Yt-1].start.left>=he.left;)Yt--;for(var ge=Yt;ge<=Be;){var be={top:Jt[ge].start.top-he.top,left:Jt[ge].start.left-he.left},Te={height:pe.height-be.top,width:pe.width-be.left};if($t===Gt.Horizontal&&Te.width<0||$t===Gt.Vertical&&Te.height<0||$t===Gt.Both&&(Te.width<0||Te.height<0))break;ge++}return{start:Yt,end:ge}})(yt,re,It,Kt),Nt=Bt.start,kt=Bt.end,Ft=jt.slice(mn(0,j,Nt),mn(0,j,kt)),Rt=Nt+Ft.reduce((function($t,Jt,pe,he){return Jt>he[$t]?pe:$t}),0),zt=Rt=mn(0,j-1,Rt),qt=$({endPage:kt,numPages:j,startPage:Nt}),Lt=qt.startPage,Pt=qt.endPage;switch(Lt=Math.max(Lt,0),Pt=Math.min(Pt,j-1),B){case n.ViewMode.DualPageWithCover:Rt>0&&(zt=Rt%2==1?Rt:Rt-1),Lt=Lt===0?0:Lt%2==1?Lt:Lt-1,j-(Pt=Pt%2==1?Pt-1:Pt)<=2&&(Pt=j-1);break;case n.ViewMode.DualPage:zt=Rt%2==0?Rt:Rt-1,Lt=Lt%2==0?Lt:Lt-1,Pt=Pt%2==1?Pt:Pt-1;break;case n.ViewMode.SinglePage:default:zt=Rt}return{startPage:Lt,endPage:Pt,maxVisbilityIndex:zt}}),[re,It,Kt,B,jt]),xe=le.startPage,ve=le.endPage,Ce=le.maxVisbilityIndex,ye=i.useMemo((function(){for(var Bt=[],Nt=function(Ft){var Rt=re[Ft],zt=t(t({},Rt),{visibility:jt[Ft]!==void 0?jt[Ft]:-1,measureRef:function(qt){qt&&(qt.setAttribute(Hn,"".concat(Ft)),ee.observe(qt))}});Bt.push(zt)},kt=xe;kt<=ve;kt++)Nt(kt);return Bt}),[xe,ve,jt,re]),Ee=i.useCallback((function(Bt,Nt){var kt=Ht.current.measurements[mn(0,j-1,Bt)],Ft=dt.current===n.ScrollMode.Page?Bn:Nt;return kt?Dt({left:Ft.left+kt.start.left,top:Ft.top+kt.start.top},A):Promise.resolve()}),[Dt,A]),we=i.useCallback((function(Bt,Nt){var kt=Ht.current.measurements,Ft=kt[Bt].start,Rt=kt.find((function(qt){return qt.start.top-Ft.top>1e-12}));if(!Rt)return Promise.resolve();var zt=Rt.index;switch(St.current){case n.ViewMode.DualPage:zt=zt%2==0?zt:zt+1;break;case n.ViewMode.DualPageWithCover:zt=zt%2==1?zt:zt+1}return Ee(zt,Nt)}),[]),Ae=i.useCallback((function(Bt,Nt){for(var kt=Ht.current.measurements,Ft=kt[Bt].start,Rt=Bt,zt=!1,qt=j-1;qt>=0;qt--)if(Ft.top-kt[qt].start.top>1e-12){zt=!0,Rt=kt[qt].index;break}if(!zt)return Promise.resolve();switch(St.current){case n.ViewMode.DualPage:Rt=Rt%2==0?Rt:Rt-1;break;case n.ViewMode.DualPageWithCover:Rt=Rt%2==0?Rt-1:Rt}return Rt===Bt&&(Rt=Bt-1),Ee(Rt,Nt)}),[]),De=i.useCallback((function(Bt,Nt){if(St.current===n.ViewMode.DualPageWithCover||St.current===n.ViewMode.DualPage)return we(Bt,Nt);switch(dt.current){case n.ScrollMode.Wrapped:return we(Bt,Nt);case n.ScrollMode.Horizontal:case n.ScrollMode.Vertical:default:return Ee(Bt+1,Nt)}}),[]),Ge=i.useCallback((function(Bt,Nt){if(St.current===n.ViewMode.DualPageWithCover||St.current===n.ViewMode.DualPage)return Ae(Bt,Nt);switch(dt.current){case n.ScrollMode.Wrapped:return Ae(Bt,Nt);case n.ScrollMode.Horizontal:case n.ScrollMode.Vertical:default:return Ee(Bt-1,Nt)}}),[]),ze=i.useCallback((function(){return(function(Bt,Nt){switch(Nt){case n.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Bt.width,"px")};case n.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Bt.height,"px"),width:"100%"}}})(ae,dt.current)}),[ae]),Re=i.useCallback((function(Bt){return(function(Nt,kt,Ft){return Ft!==n.ScrollMode.Page?{}:{height:"".concat(kt.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Nt.start.top,"px)")}})(Bt,It,dt.current)}),[It]),je=i.useCallback((function(Bt){return(function(Nt,kt,Ft,Rt,zt){var qt,Lt,Pt,$t,Jt,pe,he,Me=kt?"right":"left",Be=kt?-1:1,Yt=Ft.length,Fe=Nt.start.left*Be,ge=Nt.size,be=ge.height,Te=ge.width;if(Rt===n.ViewMode.DualPageWithCover){var de=zt===n.ScrollMode.Page?0:Nt.start.top;return Nt.index===0||Yt%2==0&&Nt.index===Yt-1?((qt={height:"".concat(be,"px"),minWidth:"".concat(Ei(Ft,Rt),"px"),width:"100%"})[Me]=0,qt.position="absolute",qt.top=0,qt.transform="translate(".concat(Fe,"px, ").concat(de,"px)"),qt):((Lt={height:"".concat(be,"px"),width:"".concat(Te,"px")})[Me]=0,Lt.position="absolute",Lt.top=0,Lt.transform="translate(".concat(Fe,"px, ").concat(de,"px)"),Lt)}if(Rt===n.ViewMode.DualPage)return(Pt={height:"".concat(be,"px"),width:"".concat(Te,"px")})[Me]=0,Pt.position="absolute",Pt.top=0,Pt.transform="translate(".concat(Fe,"px, ").concat(zt===n.ScrollMode.Page?0:Nt.start.top,"px)"),Pt;switch(zt){case n.ScrollMode.Horizontal:return($t={height:"100%",width:"".concat(Te,"px")})[Me]=0,$t.position="absolute",$t.top=0,$t.transform="translateX(".concat(Fe,"px)"),$t;case n.ScrollMode.Page:return(Jt={height:"".concat(be,"px"),width:"".concat(Te,"px")})[Me]=0,Jt.position="absolute",Jt.top=0,Jt;case n.ScrollMode.Wrapped:return(pe={height:"".concat(be,"px"),width:"".concat(Te,"px")})[Me]=0,pe.position="absolute",pe.top=0,pe.transform="translate(".concat(Fe,"px, ").concat(Nt.start.top,"px)"),pe;case n.ScrollMode.Vertical:default:return(he={height:"".concat(be,"px"),width:"100%"})[Me]=0,he.position="absolute",he.top=0,he.transform="translateY(".concat(Nt.start.top,"px)"),he}})(Bt,O,tt,St.current,dt.current)}),[O,tt]),$e=i.useCallback((function(Bt,Nt){var kt=Ht.current,Ft=kt.measurements,Rt=kt.scrollOffset,zt=Ft[mn(0,j-1,Nt)];if(zt){var qt=dt.current===n.ScrollMode.Page?{left:zt.start.left,top:zt.start.top}:{left:Rt.left*Bt,top:Rt.top*Bt};return Dt(qt,!1)}return Promise.resolve()}),[]);return i.useEffect((function(){return function(){ee.disconnect()}}),[]),{boundingClientRect:It,isSmoothScrolling:Z,startPage:xe,endPage:ve,maxVisbilityIndex:Ce,virtualItems:ye,getContainerStyles:ze,getItemContainerStyles:Re,getItemStyles:je,scrollToItem:Ee,scrollToNextItem:De,scrollToPreviousItem:Ge,zoom:$e}},Cn=function(c,A,O,j,G,$){var tt=O;switch(!0){case(G===n.ViewMode.DualPageWithCover&&$>=3):case(G===n.ViewMode.DualPage&&$>=3):tt=2*O;break;default:tt=O}switch(j){case n.SpecialZoomLevel.ActualSize:return 1;case n.SpecialZoomLevel.PageFit:return Math.min((c.clientWidth-17)/tt,(c.clientHeight-16)/A);case n.SpecialZoomLevel.PageWidth:return(c.clientWidth-17)/tt}},Ri=function(c){var A,O,j=c.getCurrentPage,G=(A=50,O=i.useRef([]),i.useEffect((function(){return function(){O.current=[]}}),[]),{push:function(Q){var Z=O.current;Z.length+1>A&&Z.shift(),Z.push(Q),O.current=Z},map:function(Q){return O.current.map((function(Z){return Q(Z)}))},pop:function(){var Q=O.current;if(Q.length===0)return null;var Z=Q.pop();return O.current=Q,Z}}),$=(function(Q){var Z=i.useRef([]);return i.useEffect((function(){return function(){Z.current=[]}}),[]),{dequeue:function(){var ft=Z.current;if(ft.length===0)return null;var ht=ft.shift();return Z.current=ft,ht||null},enqueue:function(ft){var ht=Z.current;ht.length+1>Q&&ht.pop(),Z.current=[ft].concat(ht)},map:function(ft){return Z.current.map((function(ht){return ft(ht)}))}}})(50),tt=function(){var Q=$.dequeue();return Q&&G.push(Q),Q&&Q.pageIndex===j()?tt():Q},J=function(){var Q=G.pop();return Q&&$.enqueue(Q),Q&&Q.pageIndex===j()?J():Q},B=i.useCallback((function(Q){G.push(Q)}),[]);return{getNextDestination:tt,getPreviousDestination:J,markVisitedDestination:B}},Un=function(c){var A=[];return c.map((function(O){A=A.concat(O).concat((function(j){var G=[];return j.items&&j.items.length>0&&(G=G.concat(Un(j.items))),G})(O))})),A},Wn={capture:!1,passive:!0},Mi={height:0,width:0},Pn={height:0,width:0},Fi=function(c){var A=c.getCurrentPage,O=c.getCurrentScrollMode,j=c.jumpToPage,G=c.targetRef,$=i.useState(n.FullScreenMode.Normal),tt=$[0],J=$[1],B=(function(){var jt=i.useState(Mi),ie=jt[0],ee=jt[1],re=vt((function(){ee({height:window.innerHeight,width:window.innerWidth})}),100);return e((function(){return window.addEventListener("resize",re,Wn),function(){window.removeEventListener("resize",re,Wn)}}),[]),ie})(),Q=i.useState(Pn),Z=Q[0],ft=Q[1],ht=i.useRef(Pn),dt=i.useRef(A()),St=i.useRef(Pn),yt=i.useState(G.current),bt=yt[0],Kt=yt[1],Dt=i.useRef();e((function(){G.current!==bt&&Kt(G.current)}),[]),e((function(){if(bt){var jt=new ResizeObserver((function(ie){ie.forEach((function(ee){var re=ee.target.getBoundingClientRect(),ae=re.height,le=re.width;ft({height:ae,width:le})}))}));return jt.observe(bt),function(){jt.unobserve(bt),jt.disconnect()}}}),[bt]);var It=i.useCallback((function(jt){var ie=pt();return ie&&ie!==jt?(J(n.FullScreenMode.Normal),At(ie)):Promise.resolve()}),[]),Ht=i.useCallback((function(jt){jt&&rt()&&(Kt(jt),It(jt).then((function(){Dt.current=jt,J(n.FullScreenMode.Entering),(function(ie){H&&ie[nt.RequestFullScreen]()})(jt)})))}),[]),Tt=i.useCallback((function(){pt()&&(J(n.FullScreenMode.Exitting),At(document))}),[]),Wt=i.useCallback((function(){bt&&pt()!==bt&&J(n.FullScreenMode.Exitting)}),[bt]);return i.useEffect((function(){switch(tt){case n.FullScreenMode.Entering:Dt.current&&(Dt.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),dt.current=A(),ht.current={height:window.innerHeight,width:window.innerWidth};break;case n.FullScreenMode.Entered:O()===n.ScrollMode.Page?j(dt.current).then((function(){J(n.FullScreenMode.EnteredCompletely)})):J(n.FullScreenMode.EnteredCompletely);break;case n.FullScreenMode.Exitting:Dt.current&&(Dt.current.style.backgroundColor="",Dt.current=null),dt.current=A();break;case n.FullScreenMode.Exited:J(n.FullScreenMode.Normal),O()===n.ScrollMode.Page&&j(dt.current)}}),[tt]),i.useEffect((function(){if(tt!==n.FullScreenMode.Normal)return tt===n.FullScreenMode.Entering&&B.height===Z.height&&B.width===Z.width&&B.height>0&&B.width>0&&(St.current.height===0||B.height==St.current.height)?(St.current={height:window.innerHeight,width:window.innerWidth},void J(n.FullScreenMode.Entered)):void(tt===n.FullScreenMode.Exitting&&ht.current.height===B.height&&ht.current.width===B.width&&B.height>0&&B.width>0&&J(n.FullScreenMode.Exited))}),[tt,B,Z]),i.useEffect((function(){var jt;return jt=Wt,H&&document.addEventListener(nt.FullScreenChange,jt),function(){(function(ie){H&&document.removeEventListener(nt.FullScreenChange,ie)})(Wt)}}),[bt]),{enterFullScreenMode:Ht,exitFullScreenMode:Tt,fullScreenMode:tt}},Li={buildPageStyles:function(){return{}},transformSize:function(c){return c.size}},un={left:0,top:0},Di=function(c){var A=c.currentFile,O=c.defaultScale,j=c.doc,G=c.enableSmoothScroll,$=c.initialPage,tt=c.initialRotation,J=c.initialScale,B=c.pageLayout,Q=c.pageSizes,Z=c.plugins,ft=c.renderPage,ht=c.scrollMode,dt=c.setRenderRange,St=c.viewMode,yt=c.viewerState,bt=c.onDocumentLoad,Kt=c.onOpenFile,Dt=c.onPageChange,It=c.onRotate,Ht=c.onRotatePage,Tt=c.onZoom,Wt=j.numPages,jt=j.loadingTask.docId,ie=i.useContext(E).l10n,ee=i.useContext(f),re=ee.direction===n.TextDirection.RightToLeft,ae=i.useRef(),le=i.useRef(),xe=i.useState($),ve=xe[0],Ce=xe[1],ye=i.useRef(null),Ee=Ri({getCurrentPage:function(){return Yt.current.pageIndex}}),we=i.useState(tt),Ae=we[0],De=we[1],Ge=lt(Ae),ze=i.useState(!1),Re=ze[0],je=ze[1],$e=i.useState(new Map),Bt=$e[0],Nt=$e[1],kt=i.useState(ht),Ft=kt[0],Rt=kt[1],zt=lt(Ft),qt=i.useState(St),Lt=qt[0],Pt=qt[1],$t=lt(Lt),Jt=(function(mt){var Xt=wt(),Qt=i.useState([]),ce=Qt[0],oe=Qt[1];return i.useEffect((function(){mt.getOutline().then((function(te){if(Xt.current&&te!==null){var ke=Un(te);oe(ke)}}))}),[]),ce})(j),pe=i.useState(J),he=pe[0],Me=pe[1],Be=lt(he),Yt=i.useRef(yt),Fe=i.useRef(typeof O=="string"?O:null),ge=i.useRef(-1),be=i.useRef(-1),Te=i.useRef($),de=Fi({getCurrentPage:function(){return Yt.current.pageIndex},getCurrentScrollMode:function(){return Yt.current.scrollMode},jumpToPage:function(mt){return Qe(mt)},targetRef:le}),Je=i.useState(-1),dn=Je[0],An=Je[1],sn=i.useState(0),vn=sn[0],Hi=sn[1],He=p({doc:j});i.useEffect((function(){return function(){_e.clear(),se.clear()}}),[jt]);var Gn=i.useMemo((function(){return Object.assign({},Li,B)}),[]),Ui=i.useMemo((function(){return Array(Wt).fill(0).map((function(mt,Xt){var Qt=[Q[Xt].pageHeight,Q[Xt].pageWidth],ce=Math.abs(Ae)%180==0?{height:Qt[0],width:Qt[1]}:{height:Qt[1],width:Qt[0]},oe={height:ce.height*he,width:ce.width*he};return Gn.transformSize({numPages:Wt,pageIndex:Xt,size:oe})}))}),[Ae,he]),fe=ki({enableSmoothScroll:G,isRtl:re,numberOfItems:Wt,parentRef:le,scrollMode:Ft,setRenderRange:dt,sizes:Ui,viewMode:Lt}),Wi=vt((function(){!Fe.current||Yt.current.fullScreenMode!==n.FullScreenMode.Normal||$>0&&Te.current===$||an(Fe.current)}),200);(function(mt){var Xt=mt.targetRef,Qt=mt.onResize;e((function(){var ce=new ResizeObserver((function(te){te.forEach((function(ke){Qt(ke.target)}))})),oe=Xt.current;if(oe)return ce.observe(oe),function(){ce.unobserve(oe)}}),[])})({targetRef:le,onResize:Wi});var Ze=function(mt){var Xt=mt;Z.forEach((function(Qt){Qt.onViewerStateChange&&(Xt=Qt.onViewerStateChange(Xt))})),Yt.current=Xt},zi=function(){return le.current},Vi=function(){return Yt.current},qi=i.useCallback((function(mt){Ee.markVisitedDestination(mt)}),[]),Rn=i.useCallback((function(mt){var Xt=mt.pageIndex,Qt=mt.bottomOffset,ce=mt.leftOffset,oe=mt.scaleTo,te=le.current,ke=Yt.current;return te&&ke?new Promise((function(tn,On){Ue(j,Xt).then((function(Sn){var en=Sn.getViewport({scale:1}),En=0,ti=(typeof Qt=="function"?Qt(en.width,en.height):Qt)||0,wn=(typeof ce=="function"?ce(en.width,en.height):ce)||0,hn=ke.scale;switch(oe){case n.SpecialZoomLevel.PageFit:En=0,wn=0,an(n.SpecialZoomLevel.PageFit);break;case n.SpecialZoomLevel.PageWidth:hn=Cn(te,Q[Xt].pageHeight,Q[Xt].pageWidth,n.SpecialZoomLevel.PageWidth,St,Wt),En=(en.height-ti)*hn,wn*=hn,an(hn);break;default:En=(en.height-ti)*hn,wn*=hn}switch(ke.scrollMode){case n.ScrollMode.Horizontal:fe.scrollToItem(Xt,{left:wn,top:0}).then((function(){tn()}));break;case n.ScrollMode.Vertical:default:fe.scrollToItem(Xt,{left:0,top:En}).then((function(){tn()}))}}))})):Promise.resolve()}),[]),Xn=i.useCallback((function(mt){return Ee.markVisitedDestination(mt),Rn(mt)}),[]),Gi=i.useCallback((function(){var mt=Ee.getNextDestination();return mt?Rn(mt):Promise.resolve()}),[]),Xi=i.useCallback((function(){var mt=Ee.getPreviousDestination();return mt?Rn(mt):Promise.resolve()}),[]),$i=i.useCallback((function(){return fe.scrollToNextItem(Yt.current.pageIndex,un)}),[]),Qe=i.useCallback((function(mt){return 0<=mt&&mt<Wt?fe.scrollToItem(mt,un):Promise.resolve()}),[]),Yi=i.useCallback((function(){return fe.scrollToPreviousItem(Yt.current.pageIndex,un)}),[]),$n=i.useCallback((function(mt){var Xt,Qt;(Xt=mt.name,Qt=Xt.split(/\./).pop(),Qt?Qt.toLowerCase():"").toLowerCase()==="pdf"&&new Promise((function(ce){var oe=new FileReader;oe.readAsArrayBuffer(mt),oe.onload=function(){var te=new Uint8Array(oe.result);ce(te)}})).then((function(ce){Kt(mt.name,ce)}))}),[Kt]),Yn=i.useCallback((function(mt){var Xt=mt===n.RotateDirection.Backward?-90:90,Qt=Yt.current.rotation,ce=Qt===360||Qt===-360?Xt:Qt+Xt;He.markNotRendered(),De(ce),Ze(t(t({},Yt.current),{rotation:ce})),It({direction:mt,doc:j,rotation:ce})}),[]),Mn=i.useCallback((function(mt,Xt){var Qt=Xt===n.RotateDirection.Backward?-90:90,ce=Yt.current.pagesRotation,oe=(ce.has(mt)?ce.get(mt):tt)+Qt,te=ce.set(mt,oe);Nt(te),je((function(ke){return!ke})),Ze(t(t({},Yt.current),{pagesRotation:te,rotatedPage:mt})),Ht({direction:Xt,doc:j,pageIndex:mt,rotation:oe}),He.markRendering(mt),An(mt)}),[]),Kn=i.useCallback((function(mt){Ze(t(t({},Yt.current),{scrollMode:mt})),Rt(mt)}),[]),Jn=i.useCallback((function(mt){Ze(t(t({},Yt.current),{viewMode:mt})),Pt(mt)}),[]),an=i.useCallback((function(mt){var Xt=le.current,Qt=Yt.current.pageIndex;if(!(Qt<0||Qt>=Wt)){var ce=Q[Qt].pageHeight,oe=Q[Qt].pageWidth,te=Xt?typeof mt=="string"?Cn(Xt,ce,oe,mt,Yt.current.viewMode,Wt):mt:1;Fe.current=typeof mt=="string"?mt:null,te!==Yt.current.scale&&(Hi((function(ke){return ke+1})),He.markNotRendered(),Me(te),Tt({doc:j,scale:te}),Ze(t(t({},Yt.current),{scale:te})))}}),[]),Ki=i.useCallback((function(mt){de.enterFullScreenMode(mt)}),[]),Ji=i.useCallback((function(){de.exitFullScreenMode()}),[]);i.useEffect((function(){Ze(t(t({},Yt.current),{fullScreenMode:de.fullScreenMode}))}),[de.fullScreenMode]),i.useEffect((function(){var mt={enterFullScreenMode:Ki,exitFullScreenMode:Ji,getPagesContainer:zi,getViewerState:Vi,jumpToDestination:Xn,jumpToNextDestination:Gi,jumpToPreviousDestination:Xi,jumpToNextPage:$i,jumpToPreviousPage:Yi,jumpToPage:Qe,openFile:$n,rotate:Yn,rotatePage:Mn,setViewerState:Ze,switchScrollMode:Kn,switchViewMode:Jn,zoom:an};return Z.forEach((function(Xt){Xt.install&&Xt.install(mt)})),function(){Z.forEach((function(Xt){Xt.uninstall&&Xt.uninstall(mt)}))}}),[jt]),i.useEffect((function(){bt({doc:j,file:A}),Z.forEach((function(mt){mt.onDocumentLoad&&mt.onDocumentLoad({doc:j,file:A})}))}),[jt]);var Fn,Ln,Dn,Zn=fe.boundingClientRect;Fn=function(){$&&Qe($)},Ln=Zn.height>0&&Zn.width>0,Dn=i.useRef(!1),e((function(){Ln&&!Dn.current&&(Dn.current=!0,Fn())}),[Fn,Ln]),e((function(){var mt=Yt.current.pageIndex;mt>-1&&zt!==Ft&&fe.scrollToItem(mt,un).then((function(){de.fullScreenMode===n.FullScreenMode.EnteredCompletely&&(G||He.markNotRendered(),ge.current=-1)}))}),[Ft]),e((function(){var mt=Yt.current.pageIndex;mt>-1&&Ge!==Ae&&fe.scrollToItem(mt,un)}),[Ae]),e((function(){Be!=0&&Be!=Yt.current.scale&&fe.zoom(Yt.current.scale/Be,Yt.current.pageIndex).then((function(){de.fullScreenMode===n.FullScreenMode.EnteredCompletely&&(be.current=-1)}))}),[he]),e((function(){if($t!==Yt.current.viewMode){var mt=fe.startPage,Xt=fe.endPage,Qt=fe.virtualItems;He.markNotRendered(),He.setRange(mt,Xt);for(var ce=function(te){var ke=Qt.find((function(tn){return tn.index===te}));ke&&He.setVisibility(te,ke.visibility)},oe=mt;oe<=Xt;oe++)ce(oe);In()}}),[Lt]),e((function(){var mt=Yt.current.pageIndex;mt>-1&&$t!==Lt&&fe.scrollToItem(mt,un)}),[Lt]),e((function(){var mt=Yt.current.pageIndex;mt>0&&mt===$&&Te.current===$&&Fe.current&&(Te.current=-1,an(Fe.current))}),[ve]),i.useEffect((function(){fe.isSmoothScrolling||ye.current!==null&&ye.current===ve||(ye.current=ve,Dt({currentPage:ve,doc:j}))}),[ve,fe.isSmoothScrolling]),i.useEffect((function(){de.fullScreenMode===n.FullScreenMode.Entering&&Yt.current.scrollMode===n.ScrollMode.Page&&(ge.current=Yt.current.pageIndex),de.fullScreenMode===n.FullScreenMode.EnteredCompletely&&Yt.current.scrollMode===n.ScrollMode.Page&&G&&(ge.current=-1),de.fullScreenMode===n.FullScreenMode.EnteredCompletely&&Fe.current&&(be.current=Yt.current.pageIndex,an(Fe.current))}),[de.fullScreenMode]),i.useEffect((function(){if(de.fullScreenMode!==n.FullScreenMode.Entering&&de.fullScreenMode!==n.FullScreenMode.Exitting&&!fe.isSmoothScrolling){var mt=fe.startPage,Xt=fe.endPage,Qt=fe.maxVisbilityIndex,ce=fe.virtualItems,oe=Qt,te=de.fullScreenMode===n.FullScreenMode.Entered||de.fullScreenMode===n.FullScreenMode.EnteredCompletely;if(!(te&&oe!==ge.current&&ge.current>-1||te&&oe!==be.current&&be.current>-1)){Ce(oe),Ze(t(t({},Yt.current),{pageIndex:oe})),He.setRange(mt,Xt);for(var ke=function(On){var Sn=ce.find((function(en){return en.index===On}));Sn&&He.setVisibility(On,Sn.visibility)},tn=mt;tn<=Xt;tn++)ke(tn);In()}}}),[fe.startPage,fe.endPage,fe.isSmoothScrolling,fe.maxVisbilityIndex,de.fullScreenMode,Re,Ae,he]);var Zi=i.useCallback((function(mt){He.markRendered(mt),In()}),[vn]),In=function(){var mt=He.getHighestPriorityPage();mt>-1&&He.isInRange(mt)&&(He.markRendering(mt),An(mt))},Qi=function(mt){var Xt=ve-1,Qt=ve+1;switch(mt){case"FirstPage":Qe(0);break;case"LastPage":Qe(Wt-1);break;case"NextPage":Qt<Wt&&Qe(Qt);break;case"PrevPage":Xt>=0&&Qe(Xt)}},tr=i.useCallback((function(){var mt=fe.virtualItems,Xt=[];switch(Lt){case n.ViewMode.DualPage:Xt=Zt(mt,2);break;case n.ViewMode.DualPageWithCover:mt.length&&(Xt=mt[0].index===0?[[mt[0]]].concat(Zt(mt.slice(1),2)):Zt(mt,2));break;case n.ViewMode.SinglePage:default:Xt=Zt(mt,1)}var Qt=ie&&ie.core?ie.core.pageLabel:"Page {{pageIndex}}",ce={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:ae,style:{height:"100%"}},children:i.createElement(i.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:h({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Ft===n.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":re,"rpv-core__inner-pages--single":Ft===n.ScrollMode.Page,"rpv-core__inner-pages--vertical":Ft===n.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Ft===n.ScrollMode.Wrapped}),ref:le,style:{height:"100%",position:"relative"}},children:i.createElement("div",{"data-testid":"core__inner-current-page-".concat(ve),style:Object.assign({"--scale-factor":he},fe.getContainerStyles())},Xt.map((function(oe){return i.createElement("div",{className:h({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Ft===n.ScrollMode.Page}),style:fe.getItemContainerStyles(oe[0]),key:"".concat(oe[0].index,"-").concat(Lt)},oe.map((function(te){var ke=Lt===n.ViewMode.DualPageWithCover&&(te.index===0||Wt%2==0&&te.index===Wt-1);return i.createElement("div",{"aria-label":Qt.replace("{{pageIndex}}","".concat(te.index+1)),className:h({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Lt===n.ViewMode.DualPage&&te.index%2==0,"rpv-core__inner-page--dual-odd":Lt===n.ViewMode.DualPage&&te.index%2==1,"rpv-core__inner-page--dual-cover":ke,"rpv-core__inner-page--dual-cover-even":Lt===n.ViewMode.DualPageWithCover&&!ke&&te.index%2==0,"rpv-core__inner-page--dual-cover-odd":Lt===n.ViewMode.DualPageWithCover&&!ke&&te.index%2==1,"rpv-core__inner-page--single":Lt===n.ViewMode.SinglePage&&Ft===n.ScrollMode.Page}),role:"region",key:"".concat(te.index,"-").concat(Lt),style:Object.assign({},fe.getItemStyles(te),Gn.buildPageStyles({numPages:Wt,pageIndex:te.index,scrollMode:Ft,viewMode:Lt}))},i.createElement(_i,{doc:j,measureRef:te.measureRef,outlines:Jt,pageIndex:te.index,pageRotation:Bt.has(te.index)?Bt.get(te.index):0,pageSize:Q[te.index],plugins:Z,renderPage:ft,renderQueueKey:vn,rotation:Ae,scale:he,shouldRender:dn===te.index,viewMode:Lt,onExecuteNamedAction:Qi,onJumpFromLinkAnnotation:qi,onJumpToDest:Xn,onRenderCompleted:Zi,onRotatePage:Mn}))})))})))}};return Z.forEach((function(oe){oe.renderViewer&&(ce=oe.renderViewer({containerRef:ae,doc:j,pagesContainerRef:le,pagesRotation:Bt,pageSizes:Q,rotation:Ae,slot:ce,themeContext:ee,jumpToPage:Qe,openFile:$n,rotate:Yn,rotatePage:Mn,switchScrollMode:Kn,switchViewMode:Jn,zoom:an}))})),ce}),[Z,fe]),Qn=i.useCallback((function(mt){return i.createElement("div",t({},mt.attrs,{style:mt.attrs&&mt.attrs.style?mt.attrs.style:{}}),mt.children,mt.subSlot&&Qn(mt.subSlot))}),[]);return Qn(tr())},zn=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Ii=function(c){var A=c.defaultScale,O=c.doc,j=c.render,G=c.scrollMode,$=c.viewMode,tt=i.useRef(),J=i.useState({pageSizes:[],scale:0}),B=J[0],Q=J[1];return i.useLayoutEffect((function(){var Z=Array(O.numPages).fill(0).map((function(ft,ht){return new Promise((function(dt,St){Ue(O,ht).then((function(yt){var bt=yt.getViewport({scale:1});dt({pageHeight:bt.height,pageWidth:bt.width,rotation:bt.rotation})}))}))}));Promise.all(Z).then((function(ft){var ht=tt.current;if(ht&&ft.length!==0){var dt=ft[0].pageWidth,St=ft[0].pageHeight,yt=ht.parentElement,bt=(yt.clientWidth-45)/dt,Kt=(yt.clientHeight-45)/St,Dt=bt;switch(G){case n.ScrollMode.Horizontal:Dt=Math.min(bt,Kt);break;case n.ScrollMode.Vertical:default:Dt=bt}var It,Ht,Tt=A?typeof A=="string"?Cn(yt,St,dt,A,$,O.numPages):A:(It=Dt,(Ht=zn.findIndex((function(Wt){return Wt>=It})))===-1||Ht===0?It:zn[Ht-1]);Q({pageSizes:ft,scale:Tt})}}))}),[O.loadingTask.docId]),B.pageSizes.length===0||B.scale===0?i.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:tt},i.createElement(I,null)):j(B.pageSizes,B.scale)},yn=function(){},Tn=(function(c){function A(O,j){var G=c.call(this)||this;return G.verifyPassword=O,G.passwordStatus=j,G}return V(A,c),A})(yn),Oi=function(c){var A=c.passwordStatus,O=c.renderProtectedView,j=c.verifyPassword,G=c.onDocumentAskPassword,$=i.useContext(E).l10n,tt=i.useState(""),J=tt[0],B=tt[1],Q=i.useContext(f).direction===n.TextDirection.RightToLeft,Z=function(){return j(J)};return i.useEffect((function(){G&&G({verifyPassword:j})}),[]),O?O({passwordStatus:A,verifyPassword:j}):i.createElement("div",{className:"rpv-core__asking-password-wrapper"},i.createElement("div",{className:h({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":Q})},i.createElement("div",{className:"rpv-core__asking-password-message"},A===n.PasswordStatus.RequiredPassword&&$.core.askingPassword.requirePasswordToOpen,A===n.PasswordStatus.WrongPassword&&$.core.wrongPassword.tryAgain),i.createElement("div",{className:"rpv-core__asking-password-body"},i.createElement("div",{className:h({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!Q,"rpv-core__asking-password-input--rtl":Q})},i.createElement(R,{testId:"core__asking-password-input",type:"password",value:J,onChange:B,onKeyDown:function(ft){ft.key==="Enter"&&Z()}})),i.createElement(x,{onClick:Z},$.core.askingPassword.submit))))},Vn=(function(c){function A(O){var j=c.call(this)||this;return j.doc=O,j}return V(A,c),A})(yn),qn=(function(c){function A(O){var j=c.call(this)||this;return j.error=O,j}return V(A,c),A})(yn),kn=(function(c){function A(O){var j=c.call(this)||this;return j.percentages=O,j}return V(A,c),A})(yn),Ni=function(c){var A=c.characterMap,O=c.file,j=c.httpHeaders,G=c.render,$=c.renderError,tt=c.renderLoader,J=c.renderProtectedView,B=c.transformGetDocumentParams,Q=c.withCredentials,Z=c.onDocumentAskPassword,ft=i.useContext(f).direction===n.TextDirection.RightToLeft,ht=i.useState(new kn(0)),dt=ht[0],St=ht[1],yt=i.useRef(""),bt=wt();return i.useEffect((function(){yt.current="",St(new kn(0));var Kt=new M.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Dt=Object.assign({httpHeaders:j,withCredentials:Q,worker:Kt},typeof O=="string"?{url:O}:{data:O},A?{cMapUrl:A.url,cMapPacked:A.isCompressed}:{}),It=B?B(Dt):Dt,Ht=M.getDocument(It);return Ht.onPassword=function(Tt,Wt){switch(Wt){case M.PasswordResponses.NEED_PASSWORD:bt.current&&St(new Tn(Tt,n.PasswordStatus.RequiredPassword));break;case M.PasswordResponses.INCORRECT_PASSWORD:bt.current&&St(new Tn(Tt,n.PasswordStatus.WrongPassword))}},Ht.onProgress=function(Tt){var Wt=Tt.total>0?Math.min(100,100*Tt.loaded/Tt.total):100;bt.current&&yt.current===""&&St(new kn(Wt))},Ht.promise.then((function(Tt){yt.current=Tt.loadingTask.docId,bt.current&&St(new Vn(Tt))}),(function(Tt){return bt.current&&!Kt.destroyed&&St(new qn({message:Tt.message||"Cannot load document",name:Tt.name}))})),function(){Ht.destroy(),Kt.destroy()}}),[O]),dt instanceof Tn?i.createElement(Oi,{passwordStatus:dt.passwordStatus,renderProtectedView:J,verifyPassword:dt.verifyPassword,onDocumentAskPassword:Z}):dt instanceof Vn?G(dt.doc):dt instanceof qn?$?$(dt.error):i.createElement("div",{className:h({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":ft})},i.createElement("div",{className:"rpv-core__doc-error-text"},dt.error.message)):i.createElement("div",{"data-testid":"core__doc-loading",className:h({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":ft})},tt?tt(dt.percentages):i.createElement(I,null))},ji=function(c,A){var O=i.useMemo((function(){return c==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":c}),[]),j=i.useState(O),G=j[0],$=j[1],tt=lt(G);return i.useEffect((function(){if(c==="auto"){var J=window.matchMedia("(prefers-color-scheme: dark)"),B=function(Q){$(Q.matches?"dark":"light")};return J.addEventListener("change",B),function(){return J.removeEventListener("change",B)}}}),[]),i.useEffect((function(){G!==tt&&A&&A(G)}),[G]),i.useEffect((function(){c!==G&&$(c)}),[c]),{currentTheme:G,setCurrentTheme:$}},Bi=function(c){return{startPage:c.startPage-3,endPage:c.endPage+3}};n.Button=function(c){var A=c.children,O=c.testId,j=c.onClick,G=i.useContext(f).direction===n.TextDirection.RightToLeft,$=O?{"data-testid":O}:{};return i.createElement("button",t({className:h({"rpv-core__button":!0,"rpv-core__button--rtl":G}),type:"button",onClick:j},$),A)},n.Icon=b,n.LazyRender=function(c){var A=c.attrs,O=c.children,j=c.testId,G=i.useState(!1),$=G[0],tt=G[1],J=j?t(t({},A),{"data-testid":j}):A,B=m({once:!0,onVisibilityChanged:function(Q){Q.isVisible&&tt(!0)}});return i.createElement("div",t({ref:B},J),$&&O)},n.LocalizationContext=E,n.Menu=function(c){var A=c.children,O=i.useRef(),j=i.useRef([]),G=i.useContext(f).direction===n.TextDirection.RightToLeft,$=function(J){if(O.current)switch(J.key){case"Tab":J.preventDefault();break;case"ArrowDown":J.preventDefault(),tt((function(B,Q){return Q+1}));break;case"ArrowUp":J.preventDefault(),tt((function(B,Q){return Q-1}));break;case"End":J.preventDefault(),tt((function(B,Q){return B.length-1}));break;case"Home":J.preventDefault(),tt((function(B,Q){return 0}))}},tt=function(J){if(O.current){var B=j.current,Q=B.findIndex((function(ft){return ft.getAttribute("tabindex")==="0"})),Z=Math.min(B.length-1,Math.max(0,J(B,Q)));Q>=0&&Q<=B.length-1&&B[Q].setAttribute("tabindex","-1"),B[Z].setAttribute("tabindex","0"),B[Z].focus()}};return e((function(){var J=O.current;if(J){var B=(function(Q){var Z=[];return Q.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach((function(ft){if(ft instanceof HTMLElement){var ht=ft.parentElement;(ht===Q||window.getComputedStyle(ht).display!=="none")&&Z.push(ft)}})),Z})(J);j.current=B}}),[]),e((function(){return document.addEventListener("keydown",$),function(){document.removeEventListener("keydown",$)}}),[]),i.createElement("div",{ref:O,"aria-orientation":"vertical",className:h({"rpv-core__menu":!0,"rpv-core__menu--rtl":G}),role:"menu",tabIndex:0},A)},n.MenuDivider=function(){return i.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},n.MenuItem=function(c){var A=c.checked,O=A!==void 0&&A,j=c.children,G=c.icon,$=G===void 0?null:G,tt=c.isDisabled,J=tt!==void 0&&tt,B=c.testId,Q=c.onClick,Z=i.useContext(f).direction===n.TextDirection.RightToLeft,ft=B?{"data-testid":B}:{};return i.createElement("button",t({className:h({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":J,"rpv-core__menu-item--ltr":!Z,"rpv-core__menu-item--rtl":Z}),role:"menuitem",tabIndex:-1,type:"button",onClick:Q},ft),i.createElement("div",{className:h({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!Z,"rpv-core__menu-item-icon--rtl":Z})},$),i.createElement("div",{className:h({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!Z,"rpv-core__menu-item-label--rtl":Z})},j),i.createElement("div",{className:h({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!Z,"rpv-core__menu-item-check--rtl":Z})},O&&i.createElement(u,null)))},n.MinimalButton=function(c){var A=c.ariaLabel,O=A===void 0?"":A,j=c.ariaKeyShortcuts,G=j===void 0?"":j,$=c.children,tt=c.isDisabled,J=tt!==void 0&&tt,B=c.isSelected,Q=B!==void 0&&B,Z=c.testId,ft=c.onClick,ht=i.useContext(f).direction===n.TextDirection.RightToLeft,dt=Z?{"data-testid":Z}:{};return i.createElement("button",t({"aria-label":O},G&&{"aria-keyshortcuts":G},J&&{"aria-disabled":!0},{className:h({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":J,"rpv-core__minimal-button--rtl":ht,"rpv-core__minimal-button--selected":Q}),type:"button",onClick:ft},dt),$)},n.Modal=function(c){var A=c.ariaControlsSuffix,O=c.closeOnClickOutside,j=c.closeOnEscape,G=c.content,$=c.isOpened,tt=$!==void 0&&$,J=c.target,B=A||"".concat(L());return i.createElement(F,{target:J?function(Q,Z){return i.createElement("div",{"aria-expanded":Z?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(B)},J(Q,Z))}:null,content:function(Q){return i.createElement(y,null,i.createElement(l,{ariaControlsSuffix:B,closeOnClickOutside:O,closeOnEscape:j,onToggle:Q},G(Q)))},isOpened:tt})},n.Popover=function(c){var A=c.ariaHasPopup,O=A===void 0?"dialog":A,j=c.ariaControlsSuffix,G=c.closeOnClickOutside,$=c.closeOnEscape,tt=c.content,J=c.lockScroll,B=J===void 0||J,Q=c.offset,Z=c.position,ft=c.target,ht=T(!1),dt=ht.opened,St=ht.toggle,yt=i.useRef(),bt=i.useMemo((function(){return j||"".concat(L())}),[]);return i.createElement("div",{ref:yt,"aria-expanded":dt?"true":"false","aria-haspopup":O,"aria-controls":"rpv-core__popver-body-".concat(bt)},ft(St,dt),dt&&i.createElement(i.Fragment,null,B&&i.createElement(Ot,{closeOnEscape:$,onClose:St}),i.createElement(Mt,{ariaControlsSuffix:bt,closeOnClickOutside:G,offset:Q,position:Z,targetRef:yt,onClose:St},tt(St))))},n.PrimaryButton=x,n.ProgressBar=function(c){var A=c.progress,O=i.useContext(f).direction===n.TextDirection.RightToLeft;return i.createElement("div",{className:h({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":O})},i.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(A,"%")}},A,"%"))},n.Separator=function(){return i.createElement("div",{className:"rpv-core__separator"})},n.Spinner=I,n.Splitter=function(c){var A=c.constrain,O=i.useContext(f).direction===n.TextDirection.RightToLeft,j=i.useRef(),G=i.useRef(),$=i.useRef(),tt=i.useRef(0),J=i.useRef(0),B=i.useRef(0),Q=i.useRef(0),Z={capture:!0},ft=function(dt){var St=j.current,yt=G.current,bt=$.current;if(St&&yt&&bt){var Kt=Q.current,Dt=dt.clientX-tt.current,It=B.current+(O?-Dt:Dt),Ht=St.parentElement.getBoundingClientRect().width,Tt=100*It/Ht;if(St.classList.add("rpv-core__splitter--resizing"),A){var Wt=Ht-It-Kt;if(!A({firstHalfPercentage:Tt,firstHalfSize:It,secondHalfPercentage:100*Wt/Ht,secondHalfSize:Wt}))return}yt.style.width="".concat(Tt,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),yt.classList.add("rpv-core__splitter-sibling--resizing"),bt.classList.add("rpv-core__splitter-sibling--resizing")}},ht=function(dt){var St=j.current,yt=G.current,bt=$.current;St&&yt&&bt&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),St.classList.remove("rpv-core__splitter--resizing"),yt.classList.remove("rpv-core__splitter-sibling--resizing"),bt.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",ft,Z),document.removeEventListener("mouseup",ht,Z))};return i.useEffect((function(){var dt=j.current;dt&&(Q.current=dt.getBoundingClientRect().width,G.current=dt.previousElementSibling,$.current=dt.nextElementSibling)}),[]),i.createElement("div",{ref:j,className:"rpv-core__splitter",onMouseDown:function(dt){var St=G.current;St&&(tt.current=dt.clientX,J.current=dt.clientY,B.current=St.getBoundingClientRect().width,document.addEventListener("mousemove",ft,Z),document.addEventListener("mouseup",ht,Z))}})},n.TextBox=R,n.ThemeContext=f,n.Tooltip=function(c){var A=c.ariaControlsSuffix,O=c.content,j=c.offset,G=c.position,$=c.target,tt=T(!1),J=tt.opened,B=tt.toggle,Q=i.useRef(),Z=i.useRef(),ft=i.useMemo((function(){return A||"".concat(L())}),[]);k((function(){Q.current&&document.activeElement&&Q.current.contains(document.activeElement)&&dt()}));var ht=function(){B(n.ToggleStatus.Open)},dt=function(){B(n.ToggleStatus.Close)};return i.createElement(i.Fragment,null,i.createElement("div",{ref:Q,"aria-describedby":"rpv-core__tooltip-body-".concat(ft),onBlur:function(St){St.relatedTarget instanceof HTMLElement&&St.currentTarget.parentElement&&St.currentTarget.parentElement.contains(St.relatedTarget)?Z.current&&(Z.current.style.display="none"):dt()},onFocus:ht,onMouseEnter:ht,onMouseLeave:dt},$),J&&i.createElement(Vt,{ariaControlsSuffix:ft,contentRef:Z,offset:j,position:G,targetRef:Q},O()))},n.Viewer=function(c){var A=c.characterMap,O=c.defaultScale,j=c.enableSmoothScroll,G=j===void 0||j,$=c.fileUrl,tt=c.httpHeaders,J=tt===void 0?{}:tt,B=c.initialPage,Q=B===void 0?0:B,Z=c.pageLayout,ft=c.initialRotation,ht=ft===void 0?0:ft,dt=c.localization,St=c.plugins,yt=St===void 0?[]:St,bt=c.renderError,Kt=c.renderLoader,Dt=c.renderPage,It=c.renderProtectedView,Ht=c.scrollMode,Tt=Ht===void 0?n.ScrollMode.Vertical:Ht,Wt=c.setRenderRange,jt=Wt===void 0?Bi:Wt,ie=c.transformGetDocumentParams,ee=c.theme,re=ee===void 0?{direction:n.TextDirection.LeftToRight,theme:"light"}:ee,ae=c.viewMode,le=ae===void 0?n.ViewMode.SinglePage:ae,xe=c.withCredentials,ve=xe!==void 0&&xe,Ce=c.onDocumentAskPassword,ye=c.onDocumentLoad,Ee=ye===void 0?function(){}:ye,we=c.onPageChange,Ae=we===void 0?function(){}:we,De=c.onRotate,Ge=De===void 0?function(){}:De,ze=c.onRotatePage,Re=ze===void 0?function(){}:ze,je=c.onSwitchTheme,$e=je===void 0?function(){}:je,Bt=c.onZoom,Nt=Bt===void 0?function(){}:Bt,kt=i.useState({data:$,name:typeof $=="string"?$:"",shouldLoad:!1}),Ft=kt[0],Rt=kt[1],zt=function(ge,be){Rt({data:be,name:ge,shouldLoad:!0})},qt=i.useState(!1),Lt=qt[0],Pt=qt[1],$t=lt(Ft);i.useEffect((function(){var ge,be,Te,de;ge=$t.data,de=typeof(be=$),(Te=typeof ge)=="string"&&de==="string"&&ge===be||Te==="object"&&de==="object"&&ge.length===be.length&&ge.every((function(Je,dn){return Je===be[dn]}))||Rt({data:$,name:typeof $=="string"?$:"",shouldLoad:Lt})}),[$,Lt]);var Jt=m({onVisibilityChanged:function(ge){Pt(ge.isVisible),ge.isVisible&&Rt((function(be){return Object.assign({},be,{shouldLoad:!0})}))}}),pe=typeof re=="string"?{direction:n.TextDirection.LeftToRight,theme:re}:re,he=i.useState(dt||g),Me=he[0],Be=he[1],Yt={l10n:Me,setL10n:Be},Fe=Object.assign({},{direction:pe.direction},ji(pe.theme||"light",$e));return i.useEffect((function(){dt&&Be(dt)}),[dt]),i.createElement(E.Provider,{value:Yt},i.createElement(f.Provider,{value:Fe},i.createElement("div",{ref:Jt,className:"rpv-core__viewer rpv-core__viewer--".concat(Fe.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Ft.shouldLoad&&i.createElement(Ni,{characterMap:A,file:Ft.data,httpHeaders:J,render:function(ge){return i.createElement(Ii,{defaultScale:O,doc:ge,render:function(be,Te){return i.createElement(Di,{currentFile:{data:Ft.data,name:Ft.name},defaultScale:O,doc:ge,enableSmoothScroll:G,initialPage:Q,initialRotation:ht,initialScale:Te,pageLayout:Z,pageSizes:be,plugins:yt,renderPage:Dt,scrollMode:Tt,setRenderRange:jt,viewMode:le,viewerState:{file:Ft,fullScreenMode:n.FullScreenMode.Normal,pageIndex:-1,pageHeight:be[0].pageHeight,pageWidth:be[0].pageWidth,pagesRotation:new Map,rotation:ht,scale:Te,scrollMode:Tt,viewMode:le},onDocumentLoad:Ee,onOpenFile:zt,onPageChange:Ae,onRotate:Ge,onRotatePage:Re,onZoom:Nt})},scrollMode:Tt,viewMode:le})},renderError:bt,renderLoader:Kt,renderProtectedView:It,transformGetDocumentParams:ie,withCredentials:ve,onDocumentAskPassword:Ce}))))},n.Worker=function(c){var A=c.children,O=c.workerUrl;return M.GlobalWorkerOptions.workerSrc=O,i.createElement(i.Fragment,null,A)},n.chunk=Zt,n.classNames=h,n.createStore=function(c){var A=c||{},O={},j=function($,tt){var J;A=t(t({},A),((J={})[$]=tt,J)),(O[$]||[]).forEach((function(B){return B(A[$])}))},G=function($){return A[$]};return{subscribe:function($,tt){O[$]=(O[$]||[]).concat(tt)},unsubscribe:function($,tt){O[$]=(O[$]||[]).filter((function(J){return J!==tt}))},update:function($,tt){j($,tt)},updateCurrentValue:function($,tt){var J=G($);J!==void 0&&j($,tt(J))},get:function($){return G($)}}},n.getDestination=Ve,n.getPage=Ue,n.isFullScreenEnabled=rt,n.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},n.useDebounceCallback=vt,n.useIntersectionObserver=m,n.useIsMounted=wt,n.useIsomorphicLayoutEffect=e,n.usePrevious=lt,n.useRenderQueue=p})(core_min)),core_min}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib.exports;hasRequiredLib=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib.exports=requireCore_min(),lib.exports}var libExports=requireLib();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("ArrowLeft",__iconNode$4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],CircleUser=createLucideIcon("CircleUser",__iconNode$3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Download=createLucideIcon("Download",__iconNode$2);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Heart=createLucideIcon("Heart",__iconNode$1);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],MessageCircle=createLucideIcon("MessageCircle",__iconNode);var pdfExports=requirePdf();const PdfModal=n=>{const o=compilerRuntimeExports.c(13),{fileUrl:P,title:d,isOpen:_,onClose:i}=n;if(!_)return null;let M;o[0]!==d?(M=jsxRuntimeExports.jsxs("h2",{className:"truncate text-lg font-semibold text-gray-900 dark:text-white",children:["Reading: ",d]}),o[0]=d,o[1]=M):M=o[1];let z;o[2]===Symbol.for("react.memo_cache_sentinel")?(z=jsxRuntimeExports.jsx(X,{size:24}),o[2]=z):z=o[2];let V;o[3]!==i?(V=jsxRuntimeExports.jsx("button",{onClick:i,className:"rounded-full p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-white",children:z}),o[3]=i,o[4]=V):V=o[4];let a;o[5]!==M||o[6]!==V?(a=jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-4 dark:border-gray-800",children:[M,V]}),o[5]=M,o[6]=V,o[7]=a):a=o[7];let t;o[8]!==P?(t=jsxRuntimeExports.jsx("div",{className:"h-[calc(100%-65px)] p-2",children:jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:`https://unpkg.com/pdfjs-dist@${pdfExports.version}/build/pdf.worker.min.js`,children:jsxRuntimeExports.jsx(libExports.Viewer,{fileUrl:P,defaultScale:libExports.SpecialZoomLevel.PageFit})})}),o[8]=P,o[9]=t):t=o[9];let r;return o[10]!==a||o[11]!==t?(r=jsxRuntimeExports.jsx("div",{className:"bg-opacity-90 fixed inset-0 z-50 flex items-center justify-center bg-gray-900 p-4 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"relative h-full w-full max-w-7xl rounded-xl bg-white md:h-[90%] md:w-[90%] dark:bg-gray-950",children:[a,t]})}),o[10]=a,o[11]=t,o[12]=r):r=o[12],r};function PostDetails(){const n=compilerRuntimeExports.c(101),{props:o}=usePage(),{module:P,recentModules:d,auth:_,likeCount:i,isLiked:M}=o,[z,V]=reactExports.useState(!1),[a,t]=reactExports.useState(i??P?.likes_count??0),[r,f]=reactExports.useState(M??!1);let h;n[0]===Symbol.for("react.memo_cache_sentinel")?(h={body:""},n[0]=h):h=n[0];const{data:e,setData:m,post:b,processing:u,reset:x}=useForm(h);if(!P){let se;return n[1]===Symbol.for("react.memo_cache_sentinel")?(se=jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Module not found."}),n[1]=se):se=n[1],se}let I;n[2]!==P.comments?(I=P.comments??[],n[2]=P.comments,n[3]=I):I=n[3];const R=I;let v;n[4]!==_.user||n[5]!==P.id||n[6]!==b||n[7]!==x?(v=function(me){me.preventDefault(),_.user&&b(s("modules.comment",{module:P.id}),{preserveScroll:!0,onSuccess:()=>{x("body")},onError:_temp})},n[4]=_.user,n[5]=P.id,n[6]=b,n[7]=x,n[8]=v):v=n[8];const C=v;let q;n[9]!==_.user||n[10]!==r||n[11]!==a||n[12]!==P.id?(q=function(){if(!_.user){alert("You must be logged in to like a module.");return}const me=!r,Le=me?a+1:a-1;f(me),t(Le),router3.post(s("modules.like.toggle",{module:P.id}),{},{preserveScroll:!0,onError:Ue=>{f(!me),t(me?Le-1:Le+1),alert("An error occurred while liking/unliking.")}})},n[9]=_.user,n[10]=r,n[11]=a,n[12]=P.id,n[13]=q):q=n[13];const K=q;let H;if(n[14]!==P.description){let se;n[16]===Symbol.for("react.memo_cache_sentinel")?(se=/src="(?:\/)?storage\/([^"]+)"/g,n[16]=se):se=n[16],H=P.description.replace(se,_temp2),n[14]=P.description,n[15]=H}else H=n[15];const nt=H,rt=_temp3;let At;n[17]===Symbol.for("react.memo_cache_sentinel")?(At=se=>{if(!se)return"";const me=new Date(se),Ue=Math.round((new Date().getTime()-me.getTime())/1e3);if(Ue<60)return"just now";const Ve=Math.round(Ue/60);if(Ve<60)return`${Ve} minute${Ve>1?"s":""} ago`;const Ie=Math.round(Ve/60);if(Ie<24)return`${Ie} hour${Ie>1?"s":""} ago`;const _t=Math.round(Ie/24);return _t<7?`${_t} day${_t>1?"s":""} ago`:rt(se)},n[17]=At):At=n[17];const pt=At;let vt;n[18]!==P.title?(vt=jsxRuntimeExports.jsx(Head_default,{title:P.title}),n[18]=P.title,n[19]=vt):vt=n[19];let wt;n[20]===Symbol.for("react.memo_cache_sentinel")?(wt=()=>V(!1),n[20]=wt):wt=n[20];let lt;n[21]!==P.file_url||n[22]!==P.title||n[23]!==z?(lt=jsxRuntimeExports.jsx(PdfModal,{fileUrl:P.file_url,title:P.title,isOpen:z,onClose:wt}),n[21]=P.file_url,n[22]=P.title,n[23]=z,n[24]=lt):lt=n[24];let N;n[25]===Symbol.for("react.memo_cache_sentinel")?(N=jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-10 w-full border-b border-gray-100 bg-white/90 backdrop-blur-md dark:border-gray-800 dark:bg-gray-950/90",children:jsxRuntimeExports.jsx("div",{className:"mx-auto flex h-16 max-w-6xl items-center px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("button",{onClick:_temp4,className:"flex items-center gap-2 rounded-full p-2 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-100 hover:text-indigo-600 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-indigo-400",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),"Back to Dashboard"]})})}),n[25]=N):N=n[25];let S;n[26]!==P.thumbnail_url||n[27]!==P.title?(S=jsxRuntimeExports.jsx("div",{className:"relative aspect-video w-full overflow-hidden",children:jsxRuntimeExports.jsx("img",{className:"h-full w-full object-cover",src:P.thumbnail_url,alt:P.title})}),n[26]=P.thumbnail_url,n[27]=P.title,n[28]=S):S=n[28];let p;n[29]===Symbol.for("react.memo_cache_sentinel")?(p=jsxRuntimeExports.jsx(CircleUser,{size:16,className:"text-amber-500"}),n[29]=p):p=n[29];let g;n[30]!==P.author_name?(g=jsxRuntimeExports.jsx("div",{className:"mb-2 flex items-center gap-3 text-sm font-medium text-gray-500 dark:text-gray-400",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[p,jsxRuntimeExports.jsx("span",{children:P.author_name})]})}),n[30]=P.author_name,n[31]=g):g=n[31];let E;n[32]!==P.title?(E=jsxRuntimeExports.jsx("h1",{className:"text-3xl leading-tight font-extrabold tracking-tight text-gray-900 sm:text-4xl lg:text-5xl dark:text-white",children:P.title}),n[32]=P.title,n[33]=E):E=n[33];let D;n[34]!==g||n[35]!==E?(D=jsxRuntimeExports.jsxs("div",{className:"mb-8 border-b border-gray-100 pb-6 dark:border-gray-800",children:[g,E]}),n[34]=g,n[35]=E,n[36]=D):D=n[36];let L;n[37]!==nt?(L=jsxRuntimeExports.jsx("div",{className:"prose dark:prose-invert prose-lg sm:prose-xl max-w-none space-y-6 text-gray-700 dark:text-gray-300",dangerouslySetInnerHTML:{__html:nt}}),n[37]=nt,n[38]=L):L=n[38];const U=`flex items-center gap-2 rounded-full p-3 text-sm font-semibold transition-colors hover:scale-[1.05] disabled:cursor-not-allowed disabled:opacity-50 ${r?"bg-red-100 text-red-600 dark:bg-red-900/50 dark:text-red-400":"bg-red-50 text-red-600 hover:bg-red-100 dark:bg-gray-800 dark:text-red-400 dark:hover:bg-gray-700"}`,k=r?"fill-red-600 dark:fill-red-400":"fill-none";let l;n[39]!==k?(l=jsxRuntimeExports.jsx(Heart,{size:20,className:k}),n[39]=k,n[40]=l):l=n[40];let y;n[41]!==a?(y=jsxRuntimeExports.jsxs("span",{children:[a," Likes"]}),n[41]=a,n[42]=y):y=n[42];let w;n[43]!==U||n[44]!==l||n[45]!==y||n[46]!==K?(w=jsxRuntimeExports.jsxs("button",{onClick:K,className:U,children:[l,y]}),n[43]=U,n[44]=l,n[45]=y,n[46]=K,n[47]=w):w=n[47];let T;n[48]===Symbol.for("react.memo_cache_sentinel")?(T=jsxRuntimeExports.jsx(MessageCircle,{size:20}),n[48]=T):T=n[48];let F;n[49]!==R.length?(F=jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[T,jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:[R.length," Comments"]})]}),n[49]=R.length,n[50]=F):F=n[50];let W;n[51]!==w||n[52]!==F?(W=jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[w,F]}),n[51]=w,n[52]=F,n[53]=W):W=n[53];let Y;n[54]!==P.file_url||n[55]!==P.id?(Y=P.file_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:()=>V(!0),className:"flex w-full transform items-center justify-center gap-3 rounded-full bg-amber-600 px-6 py-3 text-base font-bold text-white shadow-lg shadow-amber-500/50 transition-all duration-300 hover:scale-[1.02] hover:bg-amber-700 sm:w-auto",children:[jsxRuntimeExports.jsx(BookOpen,{size:20}),"Read Online"]}),jsxRuntimeExports.jsxs("a",{href:s("modules.read",{module:P.id}),target:"_blank",rel:"noopener noreferrer",download:!0,className:"flex w-full transform items-center justify-center gap-3 rounded-full border border-amber-600 bg-transparent px-6 py-3 text-base font-bold text-amber-600 transition-all duration-300 hover:scale-[1.02] hover:bg-amber-50 sm:w-auto dark:text-amber-400 dark:hover:bg-gray-800",children:[jsxRuntimeExports.jsx(Download,{size:20}),"Download"]})]}),n[54]=P.file_url,n[55]=P.id,n[56]=Y):Y=n[56];let st;n[57]!==Y?(st=jsxRuntimeExports.jsx("div",{className:"flex w-full flex-col gap-4 sm:w-auto sm:flex-row",children:Y}),n[57]=Y,n[58]=st):st=n[58];let Et;n[59]!==W||n[60]!==st?(Et=jsxRuntimeExports.jsxs("div",{className:"mt-10 flex flex-col items-center justify-between gap-6 border-t border-gray-100 pt-8 sm:flex-row dark:border-gray-800",children:[W,st]}),n[59]=W,n[60]=st,n[61]=Et):Et=n[61];let at;n[62]!==D||n[63]!==L||n[64]!==Et?(at=jsxRuntimeExports.jsxs("div",{className:"p-6 sm:p-10 lg:p-12",children:[D,L,Et]}),n[62]=D,n[63]=L,n[64]=Et,n[65]=at):at=n[65];let ot;n[66]!==S||n[67]!==at?(ot=jsxRuntimeExports.jsxs("article",{className:"mx-auto overflow-hidden rounded-xl bg-white shadow-2xl dark:border dark:border-gray-800 dark:bg-gray-900 dark:shadow-none",children:[S,at]}),n[66]=S,n[67]=at,n[68]=ot):ot=n[68];let ct;n[69]!==R.length?(ct=jsxRuntimeExports.jsxs("h2",{className:"mb-8 text-xl font-bold text-gray-900 dark:text-white",children:[R.length," Comments"]}),n[69]=R.length,n[70]=ct):ct=n[70];let ut;n[71]!==_.user||n[72]!==e||n[73]!==u||n[74]!==x||n[75]!==m||n[76]!==C?(ut=_.user?jsxRuntimeExports.jsxs("div",{className:"mb-10 flex gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:_.user.name?jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-indigo-100 text-sm font-bold text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400",children:_.user.name.charAt(0)}):jsxRuntimeExports.jsx(CircleUser,{size:40,className:"text-gray-400"})}),jsxRuntimeExports.jsxs("form",{className:"w-full",onSubmit:C,children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("input",{type:"text",value:e.body,onChange:se=>m("body",se.target.value),className:"w-full border-b border-gray-300 bg-transparent py-2 text-gray-900 placeholder-gray-500 transition-colors focus:border-indigo-600 focus:outline-none focus:ring-0 dark:border-gray-700 dark:text-white dark:focus:border-indigo-400",placeholder:"Add a comment...",required:!0})}),jsxRuntimeExports.jsxs("div",{className:`mt-3 flex justify-end gap-2 transition-opacity duration-200 ${e.body.trim().length>0?"opacity-100":"opacity-0 pointer-events-none"}`,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>x("body"),className:"rounded-full px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",children:"Cancel"}),jsxRuntimeExports.jsx("button",{disabled:u||e.body.trim().length===0,className:"rounded-full bg-indigo-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-indigo-700 disabled:bg-gray-300 dark:disabled:bg-gray-700",children:"Comment"})]})]})]}):jsxRuntimeExports.jsx("div",{className:"mb-10 rounded-lg border border-dashed border-gray-300 bg-gray-50 p-6 text-center dark:border-gray-700 dark:bg-gray-900/50",children:jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("a",{href:s("login"),className:"font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Log in"})," to join the discussion."]})}),n[71]=_.user,n[72]=e,n[73]=u,n[74]=x,n[75]=m,n[76]=C,n[77]=ut):ut=n[77];let gt;n[78]!==R?(gt=R.length>0?R.map(se=>jsxRuntimeExports.jsxs("div",{className:"group flex gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 text-sm font-bold text-gray-600 dark:bg-gray-800 dark:text-gray-400",children:se.user.name.charAt(0)})}),jsxRuntimeExports.jsxs("div",{className:"flex-grow",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:se.user.name}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:pt(se.created_at)})]}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm leading-relaxed text-gray-800 dark:text-gray-200",children:se.body})]})]},se.id)):jsxRuntimeExports.jsx("p",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No comments yet. Be the first to share your thoughts!"}),n[78]=R,n[79]=gt):gt=n[79];let Ct;n[80]!==gt?(Ct=jsxRuntimeExports.jsx("div",{className:"space-y-8",children:gt}),n[80]=gt,n[81]=Ct):Ct=n[81];let Mt;n[82]!==ct||n[83]!==ut||n[84]!==Ct?(Mt=jsxRuntimeExports.jsxs("section",{className:"mt-12",children:[ct,ut,Ct]}),n[82]=ct,n[83]=ut,n[84]=Ct,n[85]=Mt):Mt=n[85];let Ot;n[86]!==ot||n[87]!==Mt?(Ot=jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2",children:[ot,Mt]}),n[86]=ot,n[87]=Mt,n[88]=Ot):Ot=n[88];let Vt;n[89]===Symbol.for("react.memo_cache_sentinel")?(Vt=jsxRuntimeExports.jsx("h3",{className:"mb-6 text-lg font-bold text-gray-900 dark:text-white",children:"Recent Modules"}),n[89]=Vt):Vt=n[89];let Ut;n[90]!==d?(Ut=d&&d.length>0?d.map(_temp5):jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No recent modules found."}),n[90]=d,n[91]=Ut):Ut=n[91];let Zt;n[92]!==Ut?(Zt=jsxRuntimeExports.jsx("aside",{className:"lg:col-span-1",children:jsxRuntimeExports.jsxs("div",{className:"sticky top-24 rounded-xl bg-white p-6 shadow-xl dark:border dark:border-gray-800 dark:bg-gray-900 dark:shadow-none",children:[Vt,jsxRuntimeExports.jsx("div",{className:"space-y-6",children:Ut})]})}),n[92]=Ut,n[93]=Zt):Zt=n[93];let Se;n[94]!==Ot||n[95]!==Zt?(Se=jsxRuntimeExports.jsx("main",{className:"container mx-auto px-4 py-12",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-12 lg:grid-cols-3",children:[Ot,Zt]})}),n[94]=Ot,n[95]=Zt,n[96]=Se):Se=n[96];let _e;return n[97]!==Se||n[98]!==vt||n[99]!==lt?(_e=jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans antialiased transition-colors duration-300 dark:bg-gray-950",children:[vt,lt,N,Se]}),n[97]=Se,n[98]=vt,n[99]=lt,n[100]=_e):_e=n[100],_e}function _temp5(n){return jsxRuntimeExports.jsxs("button",{onClick:()=>router3.get(s("modules.show",n.slug)),className:"group flex w-full items-center gap-4 text-left transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"relative h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg",children:jsxRuntimeExports.jsx("img",{src:n.thumbnail_url,alt:n.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"})}),jsxRuntimeExports.jsxs("div",{className:"flex-grow",children:[jsxRuntimeExports.jsx("h4",{className:"line-clamp-2 text-sm font-medium text-gray-900 transition-colors group-hover:text-indigo-600 dark:text-gray-200 dark:group-hover:text-indigo-400",children:n.title}),jsxRuntimeExports.jsx("div",{className:"mt-1 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:jsxRuntimeExports.jsx("span",{children:n.author_name})})]})]},n.id)}function _temp4(){return router3.get(s("dashboard"))}function _temp3(n){return n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function _temp2(n,o){return`src="/storage/${o}"`}function _temp(n){console.error("Comment submission error:",n)}export{PostDetails as default};
